<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[ã€Data Miningã€‘Chapter 1. Introduction]]></title>
      <url>/2022/08/31/%E3%80%90Data%20Mining%E3%80%91Chapter%201.%20Introduction/</url>
      <content type="html"><![CDATA[<h2 id="1ï¸âƒ£-What-is-Data-Mining">1ï¸âƒ£ What is Data Mining?</h2>
<ul>
<li><strong>Data mining:</strong> ğŸŒŸ Discover valid, novel, useful, and understandable patterns in massive datasets.</li>
</ul>
<p><strong>Cross Disciplines</strong></p>
<ul>
<li>Databases</li>
<li>Machine learning</li>
<li>Statistics</li>
<li>Neural network</li>
<li>Parallel / Distributed computing</li>
</ul>
<hr>
<h2 id="2ï¸âƒ£-Characteristics-of-Data-Mining">2ï¸âƒ£ Characteristics of Data Mining</h2>
<ul>
<li>Massive dataset</li>
<li>Automatically searching for interesting patterns from historical data</li>
<li>Fast</li>
<li>Scalable</li>
<li>Update easily</li>
<li>Practical</li>
<li>Decision support</li>
</ul>
<hr>
<h2 id="3ï¸âƒ£-The-main-tasks-of-Data-Mining">3ï¸âƒ£ The main tasks of Data Mining</h2>
<ul>
<li>
<p>Clustering</p>
</li>
<li>
<p>Classification</p>
</li>
<li>
<p>Anomaly Detection</p>
</li>
<li>
<p>Association Rules</p>
</li>
<li>
<p>Social Analysis</p>
</li>
<li>
<p>Recommender Systems</p>
</li>
<li>
<p>Sequence Mining</p>
</li>
</ul>
<h3 id="ğŸŒ¬ï¸-Association-Rule-Mining">ğŸŒ¬ï¸ Association Rule Mining</h3>
<p>Detect sets of attributes or items that frequently co-occur in many database records and rules among them.</p>
<blockquote>
<p>å…³è”è§„åˆ™æŒ–æ˜ï¼Œæ—¨åœ¨å¯»æ‰¾åˆ°ç»å¸¸åŒæ—¶å‡ºç°åœ¨æ•°æ®åº“è®°å½•å’Œå…¶ä¸­çš„è§„åˆ™ä¸­çš„å±æ€§æˆ–é¡¹é›†ã€‚</p>
</blockquote>
<hr>
<h3 id="ğŸ”¥-Classification">ğŸ”¥ Classification</h3>
<p>Build a model of classes on training dataset, and then, assign a new record to one of several predefined classes.</p>
<blockquote>
<p>ä¸€ä¸ªç®€å•çš„åˆ†ç±»æ¨¡å‹ï¼šå†³ç­–æ ‘ã€‚</p>
<p>åˆ†ç±»æ˜¯åœ¨å…ˆéªŒåŸºç¡€ä¸Š(ç»éªŒã€æ ·æœ¬)ï¼Œå¯¹æœªå®šä¹‰çš„æ•°æ®èµ‹äºˆæ–°çš„å±æ€§ã€‚</p>
</blockquote>
<hr>
<h3 id="ğŸ¦-Clustering">ğŸ¦ Clustering</h3>
<p>Partition the dataset into groups such that elements in a group have lower inter-group similarity and higher intra-group similarity.</p>
<blockquote>
<p>èšç±»çš„æ ¸å¿ƒåœ¨äºå¯¹äºæ— æ ‡ç­¾æ•°æ®ï¼Œé€šè¿‡æ¨¡å‹å°†å…¶åˆ’åˆ†ä¸ºå…·æœ‰ç°‡é—´å·®å¼‚æœ€å¤§ã€ç°‡å†…å·®å¼‚æœ€å°çš„ç°‡</p>
</blockquote>
<hr>
<h3 id="ğŸ-Anomaly-Detection">ğŸ Anomaly Detection</h3>
<p><strong>Anomalies:</strong> ğŸŒŸ The set of objects are considerably dissimilar from the remaining of the data.</p>
<p>Give a set of <code>n</code> objects, and <code>k</code>, the number of expected anomalies, find the top <code>k</code> objects that are considerably dissimilar or inconsistent with the remaining data.</p>
<hr>
<h3 id="ğŸ“˜-Sequence-Mining">ğŸ“˜ Sequence Mining</h3>
<p>Given a set of sequences, find the complete set of frequent subsequences.</p>
<blockquote>
<p>ç»™å®šä¸€ç»„åºåˆ—ï¼Œæ‰¾åˆ°ä»–çš„é¢‘ç¹å­åºåˆ—çš„å®Œæ•´é›†åˆ</p>
</blockquote>
<hr>
<h2 id="4ï¸âƒ£-The-kinds-of-Date">4ï¸âƒ£ The kinds of Date</h2>
<ul>
<li>Relational Databases
<ul>
<li>è¯´äººè¯å°±æ˜¯å¤„ç†ç»“æ„åŒ–æ•°æ®ï¼Œä»¥å…³ç³»è¡¨çš„å½¢å¼å­˜å‚¨</li>
</ul>
</li>
<li>Data Warehouses
<ul>
<li>æ•°æ®ä»“åº“é¡¾åæ€ä¹‰ï¼Œæ˜¯â¼€ä¸ªå¾ˆâ¼¤çš„æ•°æ®å­˜å‚¨é›†åˆï¼Œå‡ºäºä¼ä¸šçš„åˆ†ææ€§æŠ¥å‘Šå’Œå†³ç­–â½€æŒâ½¬çš„â½½åˆ›å»ºï¼Œå¯¹å¤šæ ·çš„ä¸šåŠ¡æ•°æ®è¿›â¾ç­›é€‰ä¸æ•´åˆã€‚</li>
</ul>
</li>
<li>Transactional Databases</li>
<li>Spatial Data</li>
<li>Time Series</li>
<li>Text Databases</li>
<li>Multimedia databases</li>
<li>Data Streams</li>
<li>Biomedical Data</li>
<li>World-Wide Web</li>
<li>Graph</li>
</ul>
<hr>
<h2 id="5ï¸âƒ£-Knowledge-Discovery-Process">5ï¸âƒ£ Knowledge Discovery Process</h2>
<img src="/2022/08/31/%E3%80%90Data%20Mining%E3%80%91Chapter%201.%20Introduction/image-20220831101945274.png" alt="image-20220831101945274" style="zoom:50%;">
<p>è¯´äººè¯å°±æ˜¯ï¼š</p>
<p>ä»æ•°æ®åº“ä¸­è¿›è¡Œ<code>æ•°æ®æ¸…æ´—å’Œèšåˆ</code>ï¼Œæ¥ç€åœ¨æ•°æ®ä»“åº“ä¸­è¿›è¡Œ<code>é€‰æ‹©å’Œå˜æ¢</code>ï¼Œé€šè¿‡<code>æ•°æ®æŒ–æ˜</code>ï¼Œå¯¹å¾—åˆ°çš„<code>æ¨¡å¼è¿›è¡Œè¯„ä¼°</code>ï¼Œæœ€ç»ˆå¾—åˆ°å¯ç”¨çš„<code>çŸ¥è¯†</code>ã€‚</p>
<p><strong>Key StepğŸ”‘</strong></p>
<p>1ï¸âƒ£ Learning the application domain</p>
<ul>
<li>relevant prior knowledge and goals of application</li>
</ul>
<p>2ï¸âƒ£ Creating a target data resource</p>
<p>3ï¸âƒ£ Data cleaning and preprocessing. (may take 60% of effort)</p>
<p>4ï¸âƒ£ Data reduction and transformation</p>
<p>5ï¸âƒ£ Choosing the mining algorithms to search for patterns of interest.</p>
<p>6ï¸âƒ£ Pattern evaluation and knowledge presentation.</p>
<p>7ï¸âƒ£ Use of discovered knowledge</p>
<blockquote>
<p>å¯ä»¥å½’çº³ä¸º<strong>ä¸‰ä¸ªé˜¶æ®µ</strong></p>
<ul>
<li>ç”¨æˆ·ç”»åƒé˜¶æ®µ</li>
<li>æ•°æ®å¤„ç†é˜¶æ®µ</li>
<li>è¯„ä¼°åº”ç”¨é˜¶æ®µ</li>
</ul>
<p>ç”¨æˆ·ç”»åƒé˜¶æ®µï¼Œéœ€è¦å­¦ä¹ ç”¨æˆ·ç›¸å…³é¢†åŸŸçš„çŸ¥è¯†ï¼Œåˆ›å»ºæˆ‘ä»¬çš„ç›®æ ‡æ•°æ®èµ„æº</p>
<p>æ•°æ®å¤„ç†é˜¶æ®µï¼Œéœ€è¦è¿›è¡Œæ•°æ®é¢„å¤„ç†ã€æ•°æ®é™ç»´å’Œå˜æ¢ã€æ•°æ®æŒ–æ˜è¿™å‡ ä¸ªæ­¥éª¤ï¼Œæ‰¾åˆ°æ„Ÿå…´è¶£çš„æ¨¡å¼</p>
<p>è¯„ä¼°åº”ç”¨é˜¶æ®µï¼Œåˆ™æ˜¯å°†å¾—åˆ°çš„æ¨¡å¼è¿›è¡Œè¯„ä¼°ï¼Œåˆ©ç”¨è¯¥æ¨¡å¼å¯¹çŸ¥è¯†è¿›è¡Œè¡¨è¾¾å’Œè¿ç”¨</p>
</blockquote>
<hr>
<h2 id="6ï¸âƒ£-Interesting-Patterns">6ï¸âƒ£ Interesting Patterns</h2>
<p><strong>Measures</strong></p>
<p>ğŸŒŸ A pattern is interesting if it is <code>easily understood</code> by humans, <code>valid</code> on new or test data with some degree of <code>certainly, potentially useful, novel,</code> or <code>validates some hypothesis</code> that a user seeks to confirm.</p>
<p>âœï¸ å¦‚æœä¸€ç§æ¨¡å¼â€œå¾ˆå®¹æ˜“è¢«äººç±»ç†è§£â€ï¼Œå¯¹æ–°æ•°æ®æˆ–æµ‹è¯•æ•°æ®â€œæœ‰æ•ˆâ€ï¼Œå¹¶å…·æœ‰æŸç§ç¨‹åº¦çš„â€œè‚¯å®šã€æ½œåœ¨æœ‰ç”¨ã€æ–°é¢–â€æˆ–â€œéªŒè¯ç”¨æˆ·è¯•å›¾ç¡®è®¤çš„æŸäº›å‡è®¾â€ï¼Œé‚£ä¹ˆè¿™ç§æ¨¡å¼å°±æ˜¯æœ‰è¶£çš„ã€‚</p>
<blockquote>
<p>Objective or Subjective</p>
</blockquote>
<p><strong>Objective</strong>: based on <code>statistics and structures of pattern</code>s, e.g., support, confidence, etc.</p>
<p><strong>Subjective</strong>: based on <code>userâ€™s belief in the data</code>, e.g., unexpectedness, novelty, actionability, etc.</p>
<blockquote>
<p>all or only interesting patterns</p>
</blockquote>
<p><strong>All:</strong> Completeness</p>
<p><strong>Only:</strong> An optimization problemâ€“challenging</p>
<ul>
<li>Can a data mining system find only the interesting patterns</li>
<li>approaches
<ul>
<li>First generate all the patterns and then filter out the uninteresting ones.</li>
<li>Guide and constrain the discovery process.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="7ï¸âƒ£-Research-Issues-in-Data-Mining">7ï¸âƒ£ Research Issues in Data Mining</h2>
<ul>
<li>Mining methodology</li>
<li>User interaction</li>
<li>Applications and social impacts</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[LeetCode Hot100 è¯¦ç»†é¢˜è§£]]></title>
      <url>/2022/08/30/%E3%80%90LeetCode%E3%80%91Hot100%E9%A2%98%E8%A7%A3/</url>
      <content type="html"><![CDATA[<h2 id="Hot-100-é¢˜è§£ğŸ”¥">Hot 100 é¢˜è§£ğŸ”¥</h2>
<h3 id="å‰è¨€-v2">å‰è¨€</h3>
<p>æœ€è¿‘æ‰“ç®—å¼€ä¸ªæ–°å‘ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªHot 100ã€‚</p>
<p>åšå®Œè¿™ä»½é¢˜è§£åï¼Œæˆ‘ä¼šå¯¹æˆ‘åšè¿‡çš„æ‰€æœ‰é¢˜é‡Œæœ‰æ„æ€çš„ï¼Œå€¼å¾—ä¸€è¯´çš„å†å†™ä¸€ä»½é¢˜è§£ã€‚</p>
<hr>
<p>è¿™ä»½é¢˜è§£å¹¶ä¸æŒ‰ç…§é¡ºåºè¿›è¡Œï¼Œè€Œæ˜¯æ ¹æ®ğŸ·ï¸è¿›è¡Œæ’åºã€‚ä¸å®šæœŸæ›´æ–°ï¼Œå¹³å‡ä¸€å¤©1~2Tï¼Œæœ‰ç©ºçš„è¯ä¼šåŠ æ›´ã€‚</p>
<hr>
<h3 id="ä¸€ã€æ•°ç»„">ä¸€ã€æ•°ç»„</h3>
<p>1.1 <a href="https://leetcode.cn/problems/two-sum/">ä¸¤æ•°ä¹‹å’Œ</a></p>
<p><strong>é¢˜å¹²ï¼š</strong></p>
<p>Given an array of integers <code>nums</code> and an integer <code>target</code>, return <code>indices of the two numbers such that they add up to target</code>.</p>
<p>You may assume that each input would have <code>exactly one solution</code>, and you may not use the same element twice.</p>
<p>You can return the answer in any order.</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>Input: nums = [2,7,11,15], target = 9<br>
Output: [0,1]<br>
Explanation: Because nums[0] + nums[1] == 9, we return [0, 1].</p>
</blockquote>
<blockquote>
<p>Input: nums = [3,2,4], target = 6<br>
Output: [1,2]</p>
</blockquote>
<p><strong>æ€è·¯ï¼š</strong></p>
<p>ä»‹ä¸ªé¢˜æœ¬èº«è€ƒå¯Ÿçš„æ˜¯å¯¹æ•°ç»„çš„ç†è§£å’Œå¯¹æ•°æ®ç»“æ„çš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ä¸€ç§æœ€ç®€å•çš„æ–¹å¼ï¼šæš´åŠ›ã€‚</p>
<p>å€ŸåŠ©æš´åŠ›æœç´¢+é›†åˆå»é‡çš„æ–¹å¼ï¼Œå¾ˆå¿«å°±èƒ½å¾—åˆ°éœ€è¦çš„ç­”æ¡ˆã€‚ä½†è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œè¿œè¿œè¶…å‡ºé¢„æœŸã€‚</p>
<p>äº¦æˆ–æ˜¯æ€è·¯äºŒï¼šå…ˆæ’å¥½åºï¼Œæ¥ç€é€šè¿‡äºŒåˆ†çš„æ–¹å¼æ‰¾åˆ°å¦ä¸€ä¸ªã€‚è¿™ç§æ–¹å¼æœ‰ä¸ªå¥½å¤„ï¼Œé‚£å°±æ˜¯ä¸éœ€è¦æ•°ç»„å»é‡ï¼Œé‡åˆ°é‡å¤çš„è·³è¿‡å°±è¡Œäº†ã€‚æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo><mo>+</mo><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)+O(logn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>æ’åº+äºŒåˆ†ã€‚</p>
<p>ä½†æ˜¯è¿˜æ˜¯ä¸å¤Ÿå¿«ï¼Œæ€è·¯ä¸‰å¯ä»¥é€šè¿‡<code>hash</code>è¡¨çš„æ–¹å¼è¿›è¡Œï¼Œä¸ºä»€ä¹ˆèƒ½æƒ³åˆ°<code>hash</code>è¡¨å‘¢ï¼Ÿé¦–å…ˆï¼Œè¿™ä¸ªæ•°ç»„æœ¬èº«æ˜¯æ— åºçš„ï¼Œæ’åºéœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´å¤æ‚åº¦ã€‚è€Œå¯¹äºæŸä¸€ä¸ªæ•°<code>i</code>æ¥è¯´ï¼Œä»–çš„é…å¯¹ä¸º<code>target-i</code>ï¼Œæˆ‘ä»¬å…³æ³¨çš„ï¼Œå¦‚ä½•åœ¨åä¸€æ¬¡é‡åˆ°<code>target-i</code>æ—¶åŠæ—¶æ‰¾åˆ°æˆ‘ä»¬çš„<code>i</code>ï¼Ÿ<code>hash</code>è¡¨å¯ä»¥å¾ˆå¿«çš„å®ç°è¿™ä¸€ç‚¹ã€‚è€Œä¸”ä¸éœ€è¦æ‹…å¿ƒé‡å¤é—®é¢˜ã€‚</p>
<p><strong>å®ç°ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        hashmap=&#123;&#125;</span><br><span class="line">        res=[]</span><br><span class="line">        <span class="keyword">for</span> i,num <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            <span class="keyword">if</span> (j:=target-num) <span class="keyword">in</span> hashmap.keys():</span><br><span class="line">                <span class="keyword">return</span> [hashmap[j],i]</span><br><span class="line">            hashmap[num]=i</span><br><span class="line">        <span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LeetCode </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€é¥æ„Ÿç§‘å­¦ã€‘ç¬¬ä¸€ç«  é¥æ„Ÿç§‘å­¦çš„å‘å±•]]></title>
      <url>/2022/08/30/%E3%80%90%E9%81%A5%E6%84%9F%E7%A7%91%E5%AD%A6%E3%80%91%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E9%81%A5%E6%84%9F%E7%A7%91%E5%AD%A6%E7%9A%84%E5%8F%91%E5%B1%95/</url>
      <content type="html"><![CDATA[<h1>ç¬¬ä¸€ç«  é¥æ„Ÿç§‘å­¦çš„å‘å±•ğŸŒ</h1>
<hr>
<h2 id="ä¸€ã€é¥æ„Ÿçš„èµ·æºä¸å‘å±•âœˆï¸">ä¸€ã€é¥æ„Ÿçš„èµ·æºä¸å‘å±•âœˆï¸</h2>
<p>1ï¸âƒ£ å¾—ç›Šäºæˆ˜äº‰ï¼Œé¥æ„ŸæŠ€æœ¯å¾—åˆ°äº†å¤§åŠ›çš„å‘å±•</p>
<p>2ï¸âƒ£ ä¸Šä¸–çºª<code>60</code>å¹´ä»£ï¼Œå›½é™…ä¸Šç¬¬ä¸€æ¬¡å°†<code>é¥æ„ŸæŠ€æœ¯</code>ä½œä¸ºä¸€é¡¹ç§‘å­¦æŠ€æœ¯é—¨ç±»ä»¥æ¥ï¼Œå…¶ç†è®ºé€æ¸å‘å±•ï¼Œä¸æ–­å®Œå–„ï¼Œåœ¨å†›äº‹ã€èµ„ç¯è°ƒæŸ¥ã€ç¯å¢ƒä¸ç¾å®³ç›‘æµ‹æ–¹é¢å±•ç°äº†å·¨å¤§çš„ä¼˜åŠ¿ã€‚</p>
<p>3ï¸âƒ£ ç›®å‰ï¼Œä¸–ç•Œå„å›½å‘ç©ºé—´å‘å°„<code>6000</code>å¤šé¢—å«æ˜Ÿï¼Œå…¶ä¸­<code>1/3</code>æ˜¯é¥æ„Ÿå«æ˜Ÿã€‚</p>
<blockquote>
<p><strong>1962</strong>å¹´ï¼Œç¬¬ä¸€å±Šå›½é™…ç¯å¢ƒé¥æ„Ÿå¤§ä¼šåœ¨ç¾å›½å¯†æ­‡æ ¹å¤§å­¦å¬å¼€ï¼Œ<strong>é¥æ„ŸRemote sening</strong>ä¸€è¯æ­£å¼è¢«æå‡º</p>
<p><strong>1957</strong>å¹´è‹è”å‘å°„ç¬¬ä¸€é¢—äººé€ å«æ˜Ÿ</p>
<p><strong>1958</strong>å¹´ç¾å›½å‘å°„äººé€ å«æ˜Ÿ</p>
<p><strong>1959</strong>å¹´ç¾å›½å¯åŠ¨ç§‘ç½—çº³å«æ˜Ÿä¾¦æŸ¥è®¡åˆ’</p>
<p><strong>1960</strong>å¹´ç¾å›½å‘å°„ç¬¬ä¸€é¢—æ°”è±¡å«æ˜Ÿ</p>
<p><strong>1970</strong>å¹´ä¸­å›½å‘å°„ç¬¬ä¸€é¢—ä¸œæ–¹çº¢å«æ˜Ÿ</p>
</blockquote>
<hr>
<h2 id="äºŒã€é¥æ„Ÿçš„åŸºæœ¬æ¦‚å¿µ">äºŒã€é¥æ„Ÿçš„åŸºæœ¬æ¦‚å¿µ</h2>
<h3 id="é¥æ„Ÿçš„å®šä¹‰">é¥æ„Ÿçš„å®šä¹‰</h3>
<p>1ï¸âƒ£ å¹¿ä¹‰ä¸Šçš„é¥æ„Ÿ</p>
<p>â€‹	æ³›æŒ‡ä¸€åˆ‡ä¸æ¥è§¦ç‰©ä½“è€Œè¿›è¡Œçš„è¿œè·ç¦»æ¢æµ‹ï¼ŒåŒ…æ‹¬å¯¹ç”µç£åœºã€åŠ›åœºã€æœºæ¢°æ³¢ç­‰çš„æ¢æµ‹ã€‚</p>
<p>2ï¸âƒ£ ç‹­ä¹‰ä¸Šçš„é¥æ„Ÿ</p>
<p>â€‹	åˆ©ç”¨ä¼ æ„Ÿå™¨è®°å½•ç›®æ ‡çš„ç”µç£æ³¢ç‰¹å¾ï¼Œé€šè¿‡å¯¹æ•°æ®çš„å¤„ç†ã€ç»¼åˆåˆ†æï¼Œæ­ç¤ºç‰©ä½“çš„ç‰¹å¾åŠå…¶å˜åŒ–è§„å¾‹çš„ç»¼åˆæ€§æ¢æµ‹æŠ€æœ¯</p>
<p>ä»–æ˜¯ä»¥ç”µç£æ³¢ä¸åœ°é¢ç‰©è´¨ç›¸äº’ä½œç”¨ä¸ºåŸºç¡€ï¼Œæ¥æ¢æµ‹ã€åˆ†æå’Œç ”ç©¶åœ°çƒèµ„æºä¸ç¯å¢ƒå—ï¼Œå¹¶æ­ç¤ºç›¸å…³è¦ç´ çš„ç©ºé—´åˆ†å¸ƒç‰¹å¾ä¸æ—¶ç©ºå˜åŒ–è§„å¾‹çš„ä¸€é—¨æ–°å…´ç§‘å­¦ã€‚</p>
<p><strong>é¥</strong>ï¼šè¿œè·ç¦»ï¼Œéæ¥è§¦</p>
<p><strong>æ„Ÿ</strong>ï¼šé€šè¿‡æŸç§ä»ªå™¨è¿›è¡Œæ¢æµ‹å¹¶æ„ŸçŸ¥è¢«æµ‹é‡ç‰©ä½“çš„å½¢çŠ¶ã€å¤§å°ã€çŠ¶æ€ã€ç‰¹å¾ç­‰</p>
<p><strong>é¥æ„Ÿçš„ç‰¹ç‚¹</strong></p>
<ul>
<li>é¢çŠ¶ä¿¡æ¯è·å–ã€è¦†ç›–èŒƒå›´å¤§</li>
<li>æ—¶æ•ˆæ€§å¼º</li>
<li>è¿ç»­æ€§</li>
<li>å¤šç»´ä¿¡æ¯</li>
<li>ç”ŸåŠ¨ã€å½¢è±¡ã€ç›´è§‚</li>
<li>ç»æµå®æƒ </li>
</ul>
<hr>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> é¥æ„Ÿç§‘å­¦ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[é¥æ„Ÿç§‘å­¦]]></title>
      <url>/2022/08/30/%E3%80%90%E9%81%A5%E6%84%9F%E7%A7%91%E5%AD%A6%E3%80%91%E9%81%A5%E6%84%9F%E7%A7%91%E5%AD%A6A/</url>
      <content type="html"><![CDATA[<h1>é¥æ„Ÿç§‘å­¦</h1>
<hr>
<h2 id="Lesson-1">Lesson 1</h2>
<blockquote>
<p>date 2022.8.30</p>
</blockquote>
<p><strong>å§œå°å…‰è€å¸ˆ</strong></p>
<ul>
<li><a href="mailto:xgjiang@ucas.ac.cn">xgjiang@ucas.ac.cn</a></li>
</ul>
<p><strong>å‚è€ƒæ•™æ</strong></p>
<p>ã€Šé¥æ„Ÿåº”ç”¨åˆ†æåŸç†ä¸æ–¹æ³•ã€‹èµµè‹±æ—¶ç­‰ã€‚</p>
<hr>
<h2 id="ç¬¬ä¸€ç« -é¥æ„Ÿç§‘å­¦çš„å‘å±•ğŸ·ï¸">ç¬¬ä¸€ç«  é¥æ„Ÿç§‘å­¦çš„å‘å±•ğŸ·ï¸</h2>
<h3 id="ä¸€ã€é¥æ„Ÿçš„èµ·æºäºå‘å±•">ä¸€ã€é¥æ„Ÿçš„èµ·æºäºå‘å±•</h3>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> é¥æ„Ÿç§‘å­¦ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Data Mining]]></title>
      <url>/2022/08/29/%E3%80%90Data%20Mining%E3%80%91%E8%AF%BE%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h1>Introduction</h1>
<hr>
<p>Tutor: LiuYing</p>
<p>Main Contents:</p>
<ul>
<li>
<p>Whoâ€™s LiuYing</p>
<ul>
<li>PKU CS</li>
<li>Northwest University of USA</li>
</ul>
</li>
<li>
<p>Scores</p>
<ul>
<li>30% daily work</li>
<li>40% group work</li>
<li>30% Final test</li>
</ul>
</li>
<li>
<p>How to study this class</p>
<ul>
<li>In English</li>
<li>Do it early</li>
<li>communicate with teach</li>
<li>enhance study ability</li>
</ul>
</li>
<li>
<p>the motivation of Data Mining.</p>
</li>
<li>
<p>Four space of Data Mining.</p>
<ul>
<li>Useful</li>
<li>Understandable</li>
<li>valid</li>
<li>novel</li>
</ul>
</li>
<li>
<p>Kaggle competition</p>
</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Ucasé€‰è¯¾]]></title>
      <url>/2022/08/25/UCAS%E9%80%89%E8%AF%BE/</url>
      <content type="html"><![CDATA[<h1>UCASé€‰è¯¾</h1>
<hr>
<h2 id="ä¸€ã€é€‰è¯¾æ–¹å¼">ä¸€ã€é€‰è¯¾æ–¹å¼</h2>
<p>ç™»å½•<a href="https://sep.ucas.ac.cn">é€‰è¯¾ç³»ç»Ÿ</a></p>
<h2 id="äºŒã€é€‰è¯¾è¦æ±‚">äºŒã€é€‰è¯¾è¦æ±‚</h2>
<h3 id="å…¬å…±å¿…ä¿®è¯¾">å…¬å…±å¿…ä¿®è¯¾</h3>
<p>1.ã€Šç¡•å£«å­¦ä½è‹±è¯­ã€‹ä¸ã€Šåšå£«å­¦ä½è‹±è¯­ã€‹ç”±å¤–è¯­ç³»å¼€è®¾ï¼Œé€‰è¯¾è¦æ±‚è§é™„ä»¶1ã€‚</p>
<p>2.ã€Šæ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä¸å®è·µã€‹ï¼ˆä»¥ä¸‹ç®€ç§°â€œä¸­ç‰¹â€ï¼‰ä»¥åŠã€Šè‡ªç„¶è¾©è¯æ³•æ¦‚è®ºã€‹ï¼ˆä»¥ä¸‹ç®€ç§°â€œè‡ªè¾©â€ï¼‰ç”±é©¬å…‹æ€ä¸»ä¹‰å­¦é™¢åœ¨ç§‹å­£å­¦æœŸå¼€è®¾ã€‚æ¯ä½åŒå­¦é€‰æ‹©1ä¸ªâ€œä¸­ç‰¹â€å’Œ1ä¸ªâ€œè‡ªè¾©â€ç­çº§ã€‚</p>
<p>3.ã€Šå­¦æœ¯é“å¾·ä¸å­¦æœ¯å†™ä½œè§„èŒƒã€‹ã€‚ç ”ç©¶ç”Ÿé¡»é€‰æ‹©é€šè®ºå’Œåˆ†è®ºç­çº§å„1ä¸ªï¼Œé€šè®ºç­çº§ç”±å…¬å…±æ”¿ç­–ä¸ç®¡ç†å­¦é™¢å¼€è®¾ï¼Œåˆ†è®ºç­çº§ç”±æœ¬é™¢ç³»å¼€è®¾ï¼Œå¯åœ¨åŒä¸€å­¦å¹´çš„ä¸åŒå­¦æœŸåˆ†åˆ«ä¿®è¯»é€šè®ºå’Œåˆ†è®ºï¼Œå­¦å¹´æœ«æ‰€æœ‰é€šè®ºå’Œåˆ†è®ºç­çº§å‡ç»“è¯¾ä¸”ä¸Šä¼ æˆç»©åå†æ ¹æ®é€šè®ºå’Œåˆ†è®ºçš„æˆç»©è®¡ç®—æ€»æˆç»©ã€‚é€šè®ºå’Œåˆ†è®ºå‡é€šè¿‡è§†ä¸ºè¯¾ç¨‹é€šè¿‡ã€‚</p>
<p>4.ã€Šå·¥ç¨‹ä¼¦ç†ã€‹ä¸ºå·¥ç¨‹ç±»ç ”ç©¶ç”Ÿå…¬å…±å¿…ä¿®è¯¾ï¼Œç”±å·¥ç¨‹ç§‘å­¦å­¦é™¢å¼€è®¾ã€‚æ¯ä½å·¥ç¨‹ç¡•å£«é¡»é€‰æ‹©1ä¸ªé€šè®ºç­çº§å’Œ3ä¸ªåˆ†è®ºç­çº§ï¼Œä¸å¯è·¨å­¦æœŸä¿®è¯»ï¼Œè‹¥ç§‹å­£é€‰è¯¾ä½†æœªé€šè¿‡ï¼Œé¡»åœ¨æ˜¥å­£å­¦æœŸé‡æ–°é€‰è¯¾ã€‚</p>
<hr>
<h3 id="å…¬å…±é€‰ä¿®è¯¾">å…¬å…±é€‰ä¿®è¯¾</h3>
<p>1.å…¬å…±æ”¿ç­–ä¸ç®¡ç†å­¦é™¢å’Œé©¬å…‹æ€ä¸»ä¹‰å­¦é™¢çš„æ ¸å¿ƒè¯¾å’Œæ™®åŠè¯¾å¯ä»¥ä½œä¸ºå…¬å…±é€‰ä¿®è¯¾ï¼Œé€‰è¯¾æ—¶å­¦ç”Ÿé¡»è‡ªè¡Œå°†è¯¾ç¨‹å±æ€§è®¾ç½®ä¸ºå…¬å…±é€‰ä¿®è¯¾ï¼Œå…·ä½“è¯¾ç¨‹ä¿¡æ¯è¯·æŸ¥çœ‹é™„ä»¶2ã€Šä¸¤ç”¨è¯¾ç¨‹ä¿¡æ¯è¡¨ã€‹ã€‚</p>
<p>2.ä½“è‚²ç±»å…¬é€‰è¯¾ç”±ä½“è‚²éƒ¨å¼€è®¾ï¼Œæ¯ä½å­¦ç”Ÿæ¯å­¦æœŸ<strong>é™é€‰1é—¨</strong>ã€‚</p>
<p>3.â€œäººæ–‡ç³»åˆ—è®²åº§â€è¯¾ç¨‹ï¼ˆ1å­¦åˆ†ï¼‰ï¼Œå­¦ç”Ÿå…¨å­¦å¹´å¬æ»¡<strong>20å­¦æ—¶åŠä»¥</strong>ä¸Šè·å¾—è¯¥è¯¾ç¨‹å­¦åˆ†ã€‚</p>
<hr>
<h3 id="ä¸“ä¸šè¯¾ç¨‹">ä¸“ä¸šè¯¾ç¨‹</h3>
<p>åŒ…æ‹¬ä¸€çº§å­¦ç§‘æ ¸å¿ƒè¯¾ã€ä¸€çº§å­¦ç§‘æ™®åŠè¯¾ã€ä¸€çº§å­¦ç§‘ç ”è®¨è¯¾ã€ä¸“ä¸šæ ¸å¿ƒè¯¾ã€ä¸“ä¸šæ™®åŠè¯¾ã€ä¸“ä¸šç ”è®¨è¯¾å’Œç§‘å­¦å‰æ²¿è®²åº§ã€‚</p>
<p>1.æ¯ä½å­¦æœ¯å‹ç ”ç©¶ç”Ÿé¡»åœ¨å¯¼å¸ˆå’ŒåŸ¹å…»å•ä½çš„æŒ‡å¯¼ä¸‹ï¼Œä¿®è¯»æœ¬ä¸“ä¸šæ‰€å±<strong>ä¸€çº§å­¦ç§‘æ ¸å¿ƒè¯¾</strong>ä»¥åŠ<strong>ä¸€çº§å­¦ç§‘ä¸‹å„ä¸“ä¸šæ ¸å¿ƒè¯¾</strong>ä¸å°‘äº<strong>2</strong>é—¨ï¼›åªå¼€è®¾1é—¨æ ¸å¿ƒè¯¾çš„å­¦ç§‘æˆ–ä¸“ä¸šï¼Œå­¦ç”Ÿé¡»ä¿®è¯»è¯¥æ ¸å¿ƒè¯¾ï¼›æœªå¼€è®¾æ ¸å¿ƒè¯¾çš„å­¦ç§‘æˆ–ä¸“ä¸šï¼Œå­¦ç”ŸæŒ‰å¯¼å¸ˆæˆ–åŸ¹å…»å•ä½çš„æ„è§è¿›è¡Œé€‰è¯¾ã€‚</p>
<blockquote>
<p><strong>ä¸“ä¸šç¡•å£«æŒ‰æ‰€åœ¨åŸ¹å…»å•ä½çš„åŸ¹å…»æ–¹æ¡ˆè¦æ±‚ä¿®è¯»åŒ…æ‹¬æ ¸å¿ƒè¯¾åœ¨å†…çš„æ‰€æœ‰ä¸“ä¸šè¯¾ç¨‹ã€‚</strong></p>
</blockquote>
<p>2.ç ”ç©¶ç”Ÿé¡»é€‰æ‹©æœ¬å­¦ç§‘çš„ä¸“ä¸šç±»è¯¾ç¨‹ä»¥åŠç»å¯¼å¸ˆå’ŒåŸ¹å…»å•ä½å®¡æ ¸çš„ç›¸å…³å­¦ç§‘çš„ä¸“ä¸šç±»è¯¾ç¨‹ä½œä¸ºä¸“ä¸šå­¦ä½è¯¾ã€‚</p>
<p>3.â€œç§‘å­¦å‰æ²¿è®²åº§â€è¯¾ç¨‹ï¼ˆ1å­¦åˆ†ï¼‰ï¼Œå­¦ç”Ÿå…¨å­¦å¹´å¬æ»¡20å­¦æ—¶åŠä»¥ä¸Šè·å¾—è¯¥è¯¾ç¨‹å­¦åˆ†ã€‚</p>
<p><strong>ï¼ˆå››ï¼‰é€‰è¯¾å­¦åˆ†è¦æ±‚</strong></p>
<p>æœ¬å­¦æœŸæ¯äººé€‰è¯¾æ€»å­¦åˆ†<strong>ä¸å¾—ä½äº10å­¦åˆ†</strong>ï¼Œä¸å«äººæ–‡ç³»åˆ—è®²åº§å’Œç§‘å­¦å‰æ²¿è®²åº§ã€‚</p>
<hr>
<p><strong>å…³äºæˆ‘çš„é€‰è¯¾</strong></p>
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825151103990.png" alt="image-20220825151103990" style="zoom:50%;">
<ul>
<li>ä¸­ç‰¹âœ…</li>
<li>è‡ªè¾©âœ…</li>
<li>å­¦æœ¯â</li>
<li>å·¥ç¨‹â</li>
<li>è‹±è¯­â</li>
</ul>
<p><strong>å­¦æœŸæ—¶é—´</strong></p>
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825154410507.png" alt="image-20220825154410507" style="zoom: 33%;">
<p><strong>è¯¾ç¨‹åˆ†ç±»</strong></p>
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825154545951.png" alt="image-20220825154545951" style="zoom: 33%;">
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825154636639.png" alt="image-20220825154636639" style="zoom: 50%;">
<p><strong>å­¦åˆ†åˆ†é…</strong></p>
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825154654483.png" alt="image-20220825154654483" style="zoom:50%;">
<p><strong>å¿…é€‰è¯¾ç¨‹</strong></p>
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825154918321.png" alt="image-20220825154918321" style="zoom:50%;">
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825154952112.png" alt="image-20220825154952112" style="zoom:50%;">
<p><strong>å®¡æ ¸æµç¨‹</strong></p>
<img src="/2022/08/25/UCAS%E9%80%89%E8%AF%BE/image-20220825155046073.png" alt="image-20220825155046073" style="zoom:50%;">
<hr>
<h2 id="ç°æœ‰è¯¾ç¨‹"><strong>ç°æœ‰è¯¾ç¨‹</strong></h2>
<p><strong>èµ„ç¯å­¦é™¢ğŸŒ</strong></p>
<p>1ï¸âƒ£ ç°ä»£åœ°å›¾å­¦</p>
<p>2ï¸âƒ£ ç°ä»£è‡ªç„¶åœ°ç†å­¦</p>
<p>3ï¸âƒ£ å½“ä»£äººæ–‡ä¸ç»æµåœ°ç†å­¦</p>
<p>4ï¸âƒ£ ç¯å¢ƒåœ°å­¦å¯¼è®º</p>
<p>5ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222844">ç°ä»£æ°´æ–‡å­¦ä¸æ°´èµ„æºå­¦</a></p>
<p>6ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222843">å†°å†»åœˆç§‘å­¦æ¦‚è®º</a></p>
<p>7ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223423">æ¹–æ³Šå­¦æ¦‚è®º</a></p>
<p>8ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223424">æ¹–æ³Šæ²‰ç§¯ä¸ç¯å¢ƒ</a></p>
<p>9ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222847">äº§ä¸šä¸äº¤é€šåœ°ç†å­¦</a></p>
<p>ğŸ”Ÿ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223486">æ—…æ¸¸èµ„æºè¯„ä»·ä¸åˆ©ç”¨</a></p>
<hr>
<p>1ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222849">äººå£æµåŠ¨ä¸åŸé•‡åŒ–è®¨è®ºç­</a></p>
<p>2ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/222574">å…¨çƒå¯¼èˆªå«æ˜Ÿç³»ç»ŸåŸç†ä¸åº”ç”¨</a></p>
<p>3ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222569">é¥æ„Ÿç‰©ç†</a></p>
<p>4ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222852">é«˜å…‰è°±é¥æ„Ÿ</a></p>
<p>5ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/223118">èµ„æºç»æµå­¦</a></p>
<p>6ï¸âƒ£ èµ„æºç§‘å­¦çº²è¦</p>
<p>7ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223120"> èµ„æºç”Ÿæ€å­¦</a></p>
<p>8ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/227257">ç¯å¢ƒä¸è‡ªç„¶èµ„æºç³»ç»Ÿå»ºæ¨¡</a></p>
<p>9ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222851">èµ„æºå¾ªç¯åˆ©ç”¨ä¸ç”Ÿæ€ç»æµ</a></p>
<p>ğŸ”Ÿ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223400">è‡ªç„¶ä¸æ–‡åŒ–é—äº§</a></p>
<hr>
<p>1ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222853">å…¨çƒå˜åŒ–ç”Ÿæ€å­¦</a></p>
<p>2ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/222560">ç”Ÿæ€ç³»ç»Ÿç”Ÿæ€å­¦A</a></p>
<p>4ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/223389">æ™¯è§‚ä¸åŒºåŸŸç”Ÿæ€å­¦</a></p>
<p>5ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222854">ç¯å¢ƒè§„åˆ’ä¸ç®¡ç†</a></p>
<p>6ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222561">ç”Ÿæ€ç»Ÿè®¡å­¦â€”â€”åŸç†ä¸å®è·µ</a></p>
<p>7ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223509">æ¤ç‰©ç”Ÿç†ç”Ÿæ€å­¦</a></p>
<p>8ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/223125">åœŸå£¤ç‰©ç†å­¦</a></p>
<p>9ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/223437">ç”Ÿæ€é¥æ„ŸåŸç†ã€æŠ€æœ¯ä¸æ–¹æ³•</a></p>
<p>ğŸ”Ÿ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223439"> ç¯å¢ƒå˜åŒ–çš„ç”Ÿæ€æ•ˆåº”</a></p>
<hr>
<p>1ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223644">ç”Ÿæ€ä¿¡æ¯å­¦åŸç†ã€æ–¹æ³•å’Œåº”ç”¨</a></p>
<p>2ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/223643">å¤§å°ºåº¦å®è§‚ç”Ÿæ€ç³»ç»Ÿç§‘å­¦</a></p>
<p>4ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222856">é«˜åŸç”Ÿæ€ç³»ç»Ÿç”Ÿæ€å­¦</a></p>
<p>5ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222588">æ¢å¤ç”Ÿæ€å­¦å‰æ²¿</a></p>
<p>6ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222858">å¤§æ°”ç¯å¢ƒåŒ–å­¦</a></p>
<p>7ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222857">å¤§æ°”æ±¡æŸ“æ§åˆ¶æŠ€æœ¯</a></p>
<p>8ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/222859">å¤§æ°”æ±¡æŸ“ç›‘æµ‹æŠ€æœ¯</a></p>
<p>9ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223126">ç¯å¢ƒåœŸå£¤å­¦</a></p>
<p>ğŸ”Ÿ <a href="https://jwxk.ucas.ac.cn/course/coursetime/223127">ç¯å¢ƒä¿®å¤ä¸èµ„æºå·¥ç¨‹</a></p>
<hr>
<p>1ï¸âƒ£ <a href="https://jwxk.ucas.ac.cn/course/coursetime/222862">ç°ä»£ç¯å¢ƒåˆ†æ</a></p>
<p>2ï¸âƒ£<a href="https://jwxk.ucas.ac.cn/course/coursetime/222861">é«˜ç­‰ç¯å¢ƒåŒ–å­¦</a></p>
<p>4ï¸âƒ£ é«˜ç­‰ç¯å¢ƒç”Ÿç‰©å­¦</p>
<p>5ï¸âƒ£ ç¯å¢ƒåˆ†å­æ¯’ç†å­¦</p>
<p>6ï¸âƒ£ ç¯å¢ƒæ¯’ç†å­¦ç ”ç©¶æ–¹æ³•</p>
<p>7ï¸âƒ£ ç¯å¢ƒæ±¡æŸ“æ§åˆ¶åŒ–å­¦</p>
<p>8ï¸âƒ£ çº³ç±³æ¯’ç†å­¦</p>
<p>9ï¸âƒ£ ç¯å¢ƒçº³ç±³ç§‘å­¦ä¸æŠ€æœ¯</p>
<p>ğŸ”Ÿ ç¯å¢ƒå½±å“è¯„ä»·</p>
<hr>
<p>1ï¸âƒ£ æ–°å‹æœ‰æœºæ±¡æŸ“ç‰©å‰æ²¿è¿›å±•</p>
<p>2ï¸âƒ£ æ°´è´¨ç•Œé¢è¿‡ç¨‹åŸç†</p>
<p>4ï¸âƒ£ é¥®ç”¨æ°´å®‰å…¨</p>
<p>5ï¸âƒ£ è†œåˆ†ç¦»åŸç†ä¸æŠ€æœ¯</p>
<p>6ï¸âƒ£ å·¥ä¸šåºŸæ°”æ§åˆ¶è¿‡ç¨‹æŠ€æœ¯ä¸å·¥ç¨‹è®¾è®¡</p>
<p>7ï¸âƒ£ ç¯å¢ƒå·¥ç¨‹æ•°å­¦æ¨¡å‹ä¸Matlabåº”ç”¨</p>
<p>8ï¸âƒ£ é«˜çº§åºŸæ°´ç”Ÿç‰©å¤„ç†å·¥ç¨‹</p>
<p>9ï¸âƒ£ æ°´å¤„ç†è¯å‰‚ä¸ææ–™</p>
<hr>
<p><strong>ç”µå­å­¦é™¢âš¡</strong></p>
<blockquote>
<p>ä¸é¥æ„Ÿç›¸å…³çš„å¯é€‰è¯¾ç¨‹</p>
</blockquote>
<p>1ï¸âƒ£ å¾®æ³¢é¥æ„Ÿæ¦‚è®º</p>
<p>2ï¸âƒ£ åˆæˆå­”å¾„é›·è¾¾åŸç†</p>
<p>4ï¸âƒ£ å¹²æ¶‰åˆæˆå­”å¾„é›·è¾¾æŠ€æœ¯</p>
<p>5ï¸âƒ£ å¤§æ°”é¥æ„Ÿ</p>
<p>6ï¸âƒ£ åŸå¸‚ç¯å¢ƒé¥æ„Ÿ</p>
<p>7ï¸âƒ£ ç°ä»£é›·è¾¾ç³»ç»Ÿ</p>
<hr>
<p><strong>ç›®å‰å·²é€‰è¯¾ç¨‹(å ç”¨ä¸­ğŸ·ï¸ )</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">è¯¾ç¨‹</th>
<th style="text-align:center">å­¦åˆ†</th>
<th style="text-align:center">å­¦æ—¶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">é¥æ„Ÿç§‘å­¦A</td>
<td style="text-align:center">4</td>
<td style="text-align:center">76</td>
</tr>
<tr>
<td style="text-align:center">æµ·æ´‹é¥æ„Ÿ</td>
<td style="text-align:center">2</td>
<td style="text-align:center">42</td>
</tr>
<tr>
<td style="text-align:center">çƒ­çº¢å¤–é¥æ„Ÿ</td>
<td style="text-align:center">2.5</td>
<td style="text-align:center">48</td>
</tr>
<tr>
<td style="text-align:center">æ¨¡å¼è¯†åˆ«</td>
<td style="text-align:center">2</td>
<td style="text-align:center">40</td>
</tr>
<tr>
<td style="text-align:center">æ•°æ®æŒ–æ˜</td>
<td style="text-align:center">2</td>
<td style="text-align:center">40</td>
</tr>
<tr>
<td style="text-align:center">å›¾åƒå¤„ç†</td>
<td style="text-align:center">2</td>
<td style="text-align:center">40</td>
</tr>
<tr>
<td style="text-align:center">åŒºåŸŸå¯æŒç»­å‘å±•ç†è®ºä¸å®è·µ</td>
<td style="text-align:center">3</td>
<td style="text-align:center">60</td>
</tr>
<tr>
<td style="text-align:center">é«˜å…‰è°±é¥æ„ŸåŸºç¡€ä¸æ•°æ®å¤„ç†</td>
<td style="text-align:center">4</td>
<td style="text-align:center">60</td>
</tr>
</tbody>
</table>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> çç¢æ—¥å¸¸ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ‚è°ˆ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonä½è¿ç®—]]></title>
      <url>/2022/08/23/%E3%80%90Python%E3%80%91%E4%BD%8D%E8%BF%90%E7%AE%97/</url>
      <content type="html"><![CDATA[<h2 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h2>
<table>
<thead>
<tr>
<th style="text-align:center">ç¬¦å·</th>
<th style="text-align:center">æ„ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">ä¸ï¼Œ1&amp;1=1ï¼Œå…¶ä»–æƒ…å†µä¸º0</td>
</tr>
<tr>
<td style="text-align:center">|</td>
<td style="text-align:center">æˆ–ï¼Œ0|0=0ï¼Œå…¶ä»–ä¸º1</td>
</tr>
<tr>
<td style="text-align:center">~</td>
<td style="text-align:center">é€ä½å–å</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">å¼‚æˆ–ï¼ŒåŒ0å¼‚1</td>
</tr>
<tr>
<td style="text-align:center">&lt;&lt;</td>
<td style="text-align:center">å·¦ç§»</td>
</tr>
<tr>
<td style="text-align:center">&gt;&gt;</td>
<td style="text-align:center">å³ç§»</td>
</tr>
</tbody>
</table>
<p>ç®€å•æ¥çœ‹ä¸€ä¸‹æ“ä½œå§ï¼š</p>
<p><strong>å€ä¹˜</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">5</span>&lt;&lt;<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure>
<p>5: <code>101=1*4+0*2+1*</code></p>
<p>5&lt;&lt;1: <code>1010=1*8+0*4+1*2+0*1=2(1*4+0*2+1*1+0*1)=2(101)</code></p>
<p><strong>å€é™¤</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">5</span>&gt;&gt;<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>
<p><strong>å¥‡æ•°åˆ¤æ–­</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A&amp;<span class="number">1</span>==<span class="number">1</span>?</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">coinChange</span>(<span class="params">self, coins, amount: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> amount:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># å°†å‡æ³•è½¬æ¢ä¸ºé™¤æ³•è¿›è¡Œè¿ç®—</span></span><br><span class="line">        <span class="comment"># ä¸€æ—¦æœ€ä½ä½ä¸º1ï¼Œåˆ™è¯´æ˜æ‰¾åˆ°è§£ï¼Œåœæ­¢è¿ç®—</span></span><br><span class="line">        dp = <span class="number">1</span> &lt;&lt; amount</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> dp:</span><br><span class="line">            tmp = <span class="number">0</span></span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">            <span class="comment"># æ¯ä¸€è½®è¿ç®—è®¡ç®—ä¸€édpé™¤ä»¥2**iå¾—åˆ°çš„æ‰€æœ‰å¯èƒ½è§£</span></span><br><span class="line">            <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">                <span class="comment"># tmpç”¨äºå­˜å‚¨è¿ç®—çš„ä¸­é—´ç»“æœ</span></span><br><span class="line">                <span class="comment"># dp &gt;&gt; coin å®é™…ä¸Šæ˜¯è¿›è¡Œé™¤æ³•è¿ç®—ï¼šdp//2**coin</span></span><br><span class="line">                <span class="comment"># ä½¿ç”¨ä½è¿ç®—â€œæˆ–â€æ¥ä¿å­˜å…¨éƒ¨é™¤æ³•è¿ç®—ç»“æœä¸­çš„â€˜1â€™ï¼Œå®ç°æ‰¹é‡è¿ç®—</span></span><br><span class="line">                <span class="comment"># ps:è¿™ä¹Ÿæ˜¯äºŒè¿›åˆ¶ç§»ä½çš„ä¸€ä¸ªç¥å¥‡ä¹‹å¤„ï¼Œå¤§å®¶å¯ä»¥æ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹</span></span><br><span class="line">                tmp |= dp &gt;&gt; coin</span><br><span class="line">            <span class="comment"># ä¸€æ—¦æœ«å°¾å‡ºç°1ï¼Œåˆ™è¿”å›ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> tmp &amp; <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> res</span><br><span class="line">            <span class="comment"># å°†æœ¬è½®è¿ç®—çš„å…¨éƒ¨è¿ç®—ç»“æœé€å…¥ä¸‹ä¸€è½®è®¡ç®—</span></span><br><span class="line">            dp = tmp</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¸¸è§è¯]]></title>
      <url>/2022/08/23/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E5%B8%B8%E8%A7%81%E8%AF%8D/</url>
      <content type="html"><![CDATA[<h2 id="8-23">8/23</h2>
<p><strong>expense</strong></p>
<ul>
<li>
<p>n. èŠ±é”€ï¼Œè´¹ç”¨ï¼Œæ”¯å‡º</p>
</li>
<li>
<p>at the expense of â€¦ ä»¥â€¦ä¸ºä»£ä»·ï¼Œåœ¨ç‰ºç‰²â€¦çš„æƒ…å†µä¸‹</p>
</li>
</ul>
<p><strong>efficiency</strong></p>
<ul>
<li>n. æ•ˆç‡ï¼Œæ•ˆèƒ½</li>
<li>increase efficiency</li>
</ul>
<p><strong>establish</strong></p>
<ul>
<li>vt. ç®€å†ï¼Œåˆ›ç«‹ï¼Œè¯å®</li>
<li>establish a relationship</li>
<li>establish oneself ä½¿è‡ªå·±ç«‹è¶³</li>
</ul>
<p><strong>expand</strong></p>
<ul>
<li>vt. æ‰©å……ï¼Œæ‰©å¤§</li>
<li>vi. è¯¦è°ˆï¼Œè¯¦è¯‰</li>
<li>expand the business</li>
</ul>
<p><strong>exact</strong></p>
<ul>
<li>adj. ç²¾ç¡®çš„ï¼Œä¸¥è°¨çš„ï¼Œç²¾å¯†çš„</li>
<li>vt. å‹’ç´¢ï¼Œç´¢å–</li>
<li>your exact words åŸè¯</li>
</ul>
<p><strong>effect</strong></p>
<ul>
<li>n. å½±å“ï¼Œç»“æœï¼Œç‰¹æ•ˆï¼Œæ•ˆæœ</li>
<li>v. å¼•èµ·ï¼Œä½¿å‘ç”Ÿ</li>
<li>a negative effect</li>
<li>in effect å®é™…ä¸Š</li>
<li>take effect è§æ•ˆ</li>
<li>put sth into effect å®æ–½ï¼Œå®è¡Œ</li>
</ul>
<p><strong>examine</strong></p>
<ul>
<li>vt. ä»”ç»†ç ”ç©¶ï¼Œä»”ç»†æ£€æŸ¥ï¼Œæµ‹è¯•</li>
<li>examine data å‰–ææ•°æ®</li>
<li>examine sb on sth</li>
</ul>
<p><strong>efficient</strong></p>
<ul>
<li>adj. æ•ˆç‡é«˜çš„</li>
<li>an efficient method</li>
</ul>
<p><strong>effective</strong></p>
<ul>
<li>adj. æœ‰æ•ˆçš„ï¼Œå®é™…çš„</li>
<li>effective power</li>
<li>an effective method</li>
</ul>
<p>He made an effective method, which is so efficient.</p>
<p><strong>exist</strong></p>
<ul>
<li>vi. å­˜åœ¨ï¼Œç”Ÿå­˜</li>
</ul>
<p><strong>estate</strong></p>
<ul>
<li>n. åº„å›­ï¼Œé—äº§</li>
<li>n. ä½å®…åŒºï¼Œå·¥ä¸šåŒº</li>
<li>inherit the estate ç»§æ‰¿é—äº§</li>
<li>a housing estate ä½å®…åŒº</li>
</ul>
<p><strong>comprehension</strong></p>
<ul>
<li>n. ç†è§£åŠ›</li>
</ul>
<p><strong>experience</strong></p>
<ul>
<li>n. ç»å†</li>
</ul>
<p><strong>experienced</strong></p>
<ul>
<li>adj. ç»éªŒä¸°å¯Œçš„</li>
</ul>
<p><strong>identify</strong></p>
<ul>
<li>vt. è®¤å‡ºï¼Œå‘ç°ï¼Œè¯†åˆ«</li>
<li>vt. æ˜¾ç¤ºèº«ä»½</li>
</ul>
<p><strong>intestine</strong></p>
<ul>
<li>n. è‚ </li>
<li>adj. å†…éƒ¨çš„</li>
</ul>
<p><strong>thermal</strong></p>
<ul>
<li>adj. çƒ­çš„</li>
</ul>
<hr>
<p><strong>performance</strong></p>
<ul>
<li>n. è¡¨æ¼”ï¼Œæƒ…å†µï¼Œ<strong>æ‰§è¡Œ</strong>ï¼Œ<strong>æ€§èƒ½</strong></li>
<li>adj. é«˜æ€§èƒ½çš„ï¼Œæ€§èƒ½å“è¶Šçš„ <strong>performance compute</strong></li>
</ul>
<p><strong>implement</strong></p>
<ul>
<li>v. æ‰§è¡Œï¼Œè´¯å½»</li>
<li>n. å·¥å…·ï¼Œæ‰‹æ®µ</li>
</ul>
<p><strong>concretely</strong></p>
<ul>
<li>adv. å…·ä½“åœ°</li>
</ul>
<p><strong>creatively</strong></p>
<ul>
<li>adv. åˆ›é€ æ€§åœ°</li>
</ul>
<p><strong>plagiarism</strong></p>
<ul>
<li>n. å‰½çªƒ</li>
</ul>
<p><strong>explosive</strong></p>
<ul>
<li>adj. æ˜“çˆ†çš„</li>
<li>n. ç‚¸è¯</li>
</ul>
<p><strong>transaction</strong></p>
<ul>
<li>n. äº¤æ˜“ï¼Œä¸šåŠ¡ï¼Œå…¬æŠ¥</li>
</ul>
<p><strong>competitive pressure</strong></p>
<ul>
<li>ç«äº‰å‹åŠ›</li>
</ul>
<p><strong>starving for knowledge</strong></p>
<ul>
<li>æ¸´æœ›çŸ¥è¯†</li>
</ul>
<p><strong>starve</strong></p>
<ul>
<li>æŒ¨é¥¿ï¼Œéœ€è¦ï¼Œä½¿æå…¶ç¼ºä¹</li>
</ul>
<p><strong>pattern</strong></p>
<ul>
<li>n. æ¨¡å¼</li>
</ul>
<p><strong>complexity</strong></p>
<ul>
<li>n. å¤æ‚æ€§</li>
<li>complexity of å¤æ‚åº¦</li>
</ul>
<p><strong>hypothesis</strong></p>
<ul>
<li>n. å‡è¯´</li>
</ul>
<p><strong>frequently</strong></p>
<ul>
<li>adv. ç»å¸¸åœ°</li>
</ul>
<p><strong>occur</strong></p>
<ul>
<li>v. å‘ç”Ÿï¼Œå­˜åœ¨ï¼Œå‡ºç°</li>
</ul>
<p><strong>promotional</strong></p>
<ul>
<li>adj. ä¿ƒé”€çš„ï¼Œæ¨å¹¿çš„</li>
</ul>
<p><strong>assign</strong></p>
<ul>
<li>
<p>v. åˆ†é…ï¼Œå¸ƒç½®ï¼Œè½¬è®©ï¼Œ<strong>èµ‹å€¼</strong></p>
</li>
<li>
<p>assign a new record to one of  several predefined classes å°†ä¸€æ¡æ–°è®°å½•åˆ†é…ç»™å‡ ä¸ªé¢„å®šä¹‰ç±»ä¸­çš„ä¸€ä¸ª</p>
</li>
</ul>
<p><strong>bankrupt</strong></p>
<ul>
<li>adj. ç ´äº§çš„</li>
</ul>
<p><strong>profitability</strong></p>
<ul>
<li>n. ç›ˆåˆ©èƒ½åŠ›</li>
</ul>
<p><strong>anomaly</strong></p>
<ul>
<li>n. å¼‚å¸¸ç°è±¡,ç¦»ç¾¤ç‚¹</li>
</ul>
<p><strong>citation</strong></p>
<ul>
<li>n. å¼•ç”¨ï¼Œå¼•è¯­</li>
</ul>
<p><strong>domain</strong></p>
<ul>
<li>n. é¢†åŸŸ,èŒƒå›´</li>
<li>domain experts é¢†åŸŸä¸“å®¶</li>
</ul>
<p><strong>temporal</strong></p>
<ul>
<li>adj. æ—¶é—´çš„ï¼Œä¸–ä¿—çš„</li>
<li>n. ä¸–é—´ä¸‡ç‰©ï¼Œæš‚å­˜çš„äº‹ç‰©</li>
<li>spatio-temporal data æ—¶ç©ºæ•°æ®</li>
</ul>
<p><strong>decision makers</strong></p>
<ul>
<li>å†³ç­–è€…</li>
</ul>
<p><strong>simulation</strong></p>
<ul>
<li>n. æ¨¡æ‹Ÿ</li>
</ul>
<p><strong>disunderstand</strong></p>
<ul>
<li>ä¸æ˜ç™½</li>
</ul>
<p><strong>incomprehension</strong></p>
<ul>
<li>ä¸ç†è§£</li>
</ul>
<p><strong>unapprehensive</strong></p>
<ul>
<li>ä¸ç†è§£çš„</li>
</ul>
<hr>
<p><strong>cross disciplines</strong></p>
<ul>
<li>è·¨å­¦ç§‘</li>
</ul>
<p><strong>sophisticated</strong></p>
<ul>
<li>å…ˆè¿›çš„ï¼Œåœ¨è¡Œçš„</li>
</ul>
<p><strong>Scalable</strong></p>
<ul>
<li>å¯æ‰©å±•çš„</li>
</ul>
<p><strong>Practical</strong></p>
<ul>
<li>åˆ‡å®å¯è¡Œçš„ï¼ŒçœŸå®çš„</li>
</ul>
<p><strong>partition</strong></p>
<ul>
<li>n. éš”å¢™ï¼Œéš”æ¿ï¼Œåˆ†è£‚ï¼Œåˆ†æ²»</li>
<li>v. åˆ†å‰²ï¼Œåˆ†è£‚</li>
</ul>
<p><strong>considerably</strong></p>
<ul>
<li>adv. éå¸¸ï¼Œç›¸å½“å¤šåœ°</li>
</ul>
<p><strong>heterogeneous</strong></p>
<ul>
<li>adj. å‚å·®çš„ï¼Œå¼‚è´¨çš„</li>
<li>n. å¼‚ç±»</li>
</ul>
<p><strong>relevant</strong></p>
<ul>
<li>adj. æœ‰å…³çš„</li>
</ul>
<p><strong>prior</strong></p>
<ul>
<li>adj. å…ˆå‰çš„ï¼Œå…ˆéªŒçš„</li>
</ul>
<p><strong>invariant</strong></p>
<ul>
<li>adj. ä¸å˜çš„</li>
</ul>
<p><strong>optimization</strong></p>
<ul>
<li>ä¼˜åŒ–</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[LeetCode ç™¾é¢˜ç•™å¿µ]]></title>
      <url>/2022/08/22/%E3%80%90LeetCode%E3%80%91%E7%99%BE%E9%A2%98%E7%95%99%E5%BF%B5/</url>
      <content type="html"><![CDATA[<h2 id="åæ—¥è°ˆâ™">åæ—¥è°ˆâ™</h2>
<p>ä¸çŸ¥ä¸è§‰å·²ç»å‚åŠ åœ¨LeetCodeä¸Šåˆ·äº†ä¸€ç™¾é¢˜å•¦ï¼ï¼ï¼</p>
<p>è¯¥æˆå°±äº2022/8/22è¾¾æˆï¼</p>
<img src="/2022/08/22/%E3%80%90LeetCode%E3%80%91%E7%99%BE%E9%A2%98%E7%95%99%E5%BF%B5/image-20220822222053312.png" alt="image-20220822222053312" style="zoom:50%;">
<img src="/2022/08/22/%E3%80%90LeetCode%E3%80%91%E7%99%BE%E9%A2%98%E7%95%99%E5%BF%B5/image-20220822222105104.png" alt="image-20220822222105104" style="zoom:50%;">
<p>ç”¨æ—¶27å¤©ï¼å¹³å‡æ¯å¤©3.74T!!!</p>
<img src="/2022/08/22/%E3%80%90LeetCode%E3%80%91%E7%99%BE%E9%A2%98%E7%95%99%E5%BF%B5/image-20220822222204107.png" alt="image-20220822222204107" style="zoom:50%;">
<p>ä¸­ç­‰é¢˜ç»§ä¸Šæ¬¡60é¢˜åä¸ç®€å•åˆ†åº­æŠ—ç¤¼åï¼Œè¿™ä¸€æ¬¡å®ç°äº†åè¶…ï¼ï¼æƒ³ä¸åˆ°ï¼Œä½ è¿™ä¸ªèŒæ–°è¿˜æ˜¯å®åŠ›æ´¾ï¼</p>
<hr>
<p>ç›®å‰çš„å¤§éƒ¨åˆ†é¢˜å‹å·²ç»åˆ·è¿‡å•¦ï¼</p>
<p>åŒ…æ‹¬çƒ­é—¨tag</p>
<ul>
<li>bfs</li>
<li>dfs</li>
<li>å¹¶æŸ¥é›†</li>
<li>äºŒåˆ†</li>
<li>hash</li>
<li>bst</li>
<li>æ— å‘å›¾</li>
<li>æ•°å­¦</li>
<li>dp</li>
<li>é€’å½’</li>
<li>è¿­ä»£</li>
</ul>
<p>ä½†è¿˜æ˜¯æœ‰ä¸€äº›å¤„äºçŸ¥è¯†ç›²åŒºï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>æœ‰å‘å›¾</li>
<li>è·¯å¾„åˆ†æ</li>
<li>çº¿æ®µæ ‘</li>
<li>å¹³è¡¡æ ‘</li>
<li>çº¢é»‘æ ‘</li>
<li>B+æ ‘</li>
<li>ä¼˜å…ˆé˜Ÿåˆ—</li>
<li>å †</li>
<li>çŠ¶æ€è½¬ç§»</li>
</ul>
<hr>
<p>å‘¨èµ›ç›®å‰ä¹Ÿæ˜¯å‚åŠ äº†ä¸‰åœºï¼</p>
<ul>
<li>84åœºåŒèµ› 2372/4575 48.2%</li>
<li>85åŒèµ› 1681/4193 60%</li>
<li>307åœºå‘¨èµ› 2436/7064 65.5%</li>
</ul>
<p>æ€»ä½“è€Œè¨€ï¼Œè¿˜æ˜¯æœ‰æ‰€è¿›æ­¥çš„ï¼ï¼</p>
<hr>
<p>æœ€è¿‘ä¹Ÿå­¦äº†äº›é»‘ç§‘æŠ€ï¼š</p>
<ul>
<li>å€’åºå¹¶æŸ¥é›†</li>
<li>æŸ¥åˆ†æ•°ç»„</li>
<li>å›æº¯æ„é€ </li>
<li>æ‹“æ‰‘æ’åº</li>
<li>å›¾é—®é¢˜</li>
</ul>
<hr>
<p>å¸Œæœ›ä¸¤ç™¾æŠŠçš„æ—¶å€™ï¼Œèƒ½è¿‡T3å§ï¼ç›®å‰çš„è®¡åˆ’æ˜¯ï¼š</p>
<ul>
<li>å‘¨èµ›+åŒèµ›</li>
<li>æ¯æ—¥ä¸€é¢˜</li>
<li>LeetCode75 II</li>
</ul>
<p>æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œæˆ‘ä¼šå¯¹ç›®å‰åšè¿‡çš„æ‰€æœ‰é¢˜è¿›è¡Œå¤ç›˜ï¼(ä¸€å¤©å¤§æ¦‚10é“)</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LeetCode </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®åˆ†æå®ä¾‹--éšæœºæŠ½å–å¾®ä¿¡æ¥é¾™äººå‘˜]]></title>
      <url>/2022/08/22/%E3%80%90%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%91%E5%AE%9E%E4%BE%8B%E9%9A%8F%E6%9C%BA%E9%80%89%E5%8F%96%E5%BE%AE%E4%BF%A1%E6%8E%A5%E9%BE%99%E7%9A%84%E4%BA%BA%E6%95%B0/</url>
      <content type="html"><![CDATA[<h2 id="æ¡ˆä¾‹-v2">æ¡ˆä¾‹</h2>
<p>æ•°æ®åˆ†æï¼Œè¦æ±‚ä»å¾®ä¿¡æ¥é¾™ä¸­éšæœºæŠ½å–<code>35</code>åé€‰æ‰‹å‚åŠ æ¯•ä¸šå…¸ç¤¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">solve</span>(<span class="params">s:<span class="built_in">str</span>,k:<span class="built_in">int</span>=<span class="number">35</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">    hashmap=defaultdict(<span class="built_in">str</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(s) <span class="keyword">as</span> f:</span><br><span class="line">        nameList=f.readlines()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> nameList:</span><br><span class="line">        hashmap[val[<span class="number">0</span>]]=(val:=i.split(<span class="string">&quot;.&quot;</span>))[<span class="number">1</span>].strip(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> random.sample(<span class="built_in">range</span>(<span class="number">1</span>,(l:=<span class="built_in">len</span>(hashmap))+<span class="number">1</span>),l-k <span class="keyword">if</span> l&gt;k <span class="keyword">else</span> <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">print</span>(hashmap[<span class="built_in">str</span>(i)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">solve(<span class="string">r&quot;C:\Users\lenovo\Desktop\æ–°å»º XLS å·¥ä½œè¡¨.txt&quot;</span>)</span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Collections.deque()è¯¦è§£]]></title>
      <url>/2022/08/22/%E3%80%90Python%E3%80%91deque()%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<h1>deque()</h1>
<p>dequeæ˜¯æ ˆå’Œé˜Ÿåˆ—çš„ä¸€ç§å¹¿ä¹‰å®ç°ï¼Œdequeæ˜¯&quot;double-end queue&quot;çš„ç®€ç§°ï¼›dequeæ”¯æŒçº¿ç¨‹å®‰å…¨ã€æœ‰æ•ˆå†…å­˜åœ°ä»¥è¿‘ä¼¼<code>O(1)</code>çš„æ€§èƒ½åœ¨dequeçš„ä¸¤ç«¯æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œå°½ç®¡listä¹Ÿæ”¯æŒç›¸ä¼¼çš„æ“ä½œï¼Œä½†æ˜¯å®ƒä¸»è¦åœ¨å›ºå®šé•¿åº¦æ“ä½œä¸Šçš„ä¼˜åŒ–ï¼Œä»è€Œåœ¨<code>pop(0)</code>å’Œ<code>insert(0,v)</code>ï¼ˆä¼šæ”¹å˜æ•°æ®çš„ä½ç½®å’Œå¤§å°ï¼‰ä¸Šæœ‰<code>O(n</code>)çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<p><strong>å¸¸ç”¨æ–¹æ³•ï¼š</strong></p>
<h2 id="append">append()</h2>
<p>ä»å³ç«¯æ·»åŠ å…ƒç´ ï¼ˆ<code>ä¸liståŒ</code>ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">st = <span class="string">&quot;abcd&quot;</span></span><br><span class="line">list1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">dst = deque(st)</span><br><span class="line">dlist1 = deque(list1)</span><br><span class="line">dst.append(<span class="number">4</span>)</span><br><span class="line">dlist1.append(<span class="string">&quot;k&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(dst)</span><br><span class="line"><span class="built_in">print</span>(dlist1)</span><br><span class="line"><span class="comment">#ç»“æœï¼š</span></span><br><span class="line"><span class="comment">#deque([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, 4])</span></span><br><span class="line"><span class="comment">#deque([0, 1, 2, 3, &#x27;k&#x27;])</span></span><br></pre></td></tr></table></figure>
<h2 id="appendleft">appendleft()</h2>
<p>ä»å·¦ç«¯æ·»åŠ å…ƒç´ </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">st = <span class="string">&quot;abcd&quot;</span></span><br><span class="line">list1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">dst = deque(st)</span><br><span class="line">dlist1 = deque(list1)</span><br><span class="line">dst.appendleft(<span class="number">4</span>)</span><br><span class="line">dlist1.appendleft(<span class="string">&quot;k&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(dst)</span><br><span class="line"><span class="built_in">print</span>(dlist1)</span><br><span class="line"><span class="comment">#ç»“æœï¼š</span></span><br><span class="line"><span class="comment">#deque([4, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;])</span></span><br><span class="line"><span class="comment">#deque([&#x27;k&#x27;, 0, 1, 2, 3])</span></span><br></pre></td></tr></table></figure>
<h2 id="extend">extend()</h2>
<p>ä»å³ç«¯é€ä¸ªæ·»åŠ å¯è¿­ä»£å¯¹è±¡ï¼ˆ<code>ä¸liståŒ</code>ï¼‰<br>
Pythonä¸­çš„å¯è¿­ä»£å¯¹è±¡æœ‰ï¼šåˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ã€å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line">ex = (<span class="number">1</span>, <span class="string">&quot;h&quot;</span>, <span class="number">3</span>)</span><br><span class="line">st = <span class="string">&quot;abcd&quot;</span></span><br><span class="line">list1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">dst = deque(st)</span><br><span class="line">dlist1 = deque(list1)</span><br><span class="line">dst.extend(ex)</span><br><span class="line">dlist1.extend(ex)</span><br><span class="line"><span class="built_in">print</span>(dst)</span><br><span class="line"><span class="built_in">print</span>(dlist1)</span><br><span class="line"><span class="comment">#ç»“æœï¼š</span></span><br><span class="line"><span class="comment">#deque([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, 1, &#x27;h&#x27;, 3])</span></span><br><span class="line"><span class="comment">#deque([0, 1, 2, 3, 1, &#x27;h&#x27;, 3])</span></span><br></pre></td></tr></table></figure>
<h2 id="extendleft">extendleft()</h2>
<p>ä»å·¦ç«¯é€ä¸ªæ·»åŠ å¯è¿­ä»£å¯¹è±¡</p>
<h2 id="pop">pop()</h2>
<p>ç§»é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤æœ€å³ç«¯çš„ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå¹¶ä¸”è¿”å›è¯¥å…ƒç´ çš„å€¼ï¼ˆ<code>ä¸liståŒ</code>ï¼‰ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ ï¼Œå°†ä¼šæŠ¥å‡ºIndexError</p>
<h2 id="popleft">popleft()</h2>
<p>ç§»é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤æœ€å·¦ç«¯çš„ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå¹¶ä¸”è¿”å›è¯¥å…ƒç´ çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ ï¼Œå°†ä¼šæŠ¥å‡ºIndexError</p>
<h2 id="count">count()</h2>
<p>ç»Ÿè®¡é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼ˆ<code>ä¸liståŒ</code>ï¼‰</p>
<h2 id="insert-index-obj">insert(index,obj)</h2>
<p>åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ ï¼ˆ<code>ä¸liståŒ</code>ï¼‰</p>
<h2 id="rotate-n">rotate(n)</h2>
<p>rotate(n)ï¼Œ ä»å³ä¾§åè½¬næ­¥ï¼Œå¦‚æœnä¸ºè´Ÿæ•°ï¼Œåˆ™ä»å·¦ä¾§åè½¬ã€‚<br>
d.rotate(1) ç­‰äº d.appendleft(d.pop())</p>
<h2 id="clear">clear()</h2>
<p>å°†dequeä¸­çš„å…ƒç´ å…¨éƒ¨åˆ é™¤ï¼Œæœ€åé•¿åº¦ä¸º0</p>
<h2 id="remove">remove()</h2>
<p>ç§»é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼ŒæŠ¥å‡ºValueError</p>
<h2 id="maxlen">maxlen</h2>
<p>åªè¯»çš„å±æ€§ï¼Œdequeé™å®šçš„æœ€å¤§é•¿åº¦ï¼Œå¦‚æœæ— ï¼Œå°±è¿”å›Noneã€‚<br>
å½“é™åˆ¶é•¿åº¦çš„dequeå¢åŠ è¶…è¿‡é™åˆ¶æ•°çš„é¡¹æ—¶, å¦ä¸€è¾¹çš„é¡¹ä¼š<code>è‡ªåŠ¨åˆ é™¤</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">st = <span class="string">&quot;abbcd&quot;</span></span><br><span class="line">dq = dequeï¼ˆï¼‰</span><br><span class="line">dq.append(st)</span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python mapå‡½æ•°(ç±»)è¯¦è§£]]></title>
      <url>/2022/08/20/%E3%80%90Python%E3%80%91map%E5%87%BD%E6%95%B0%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<h2 id="ç†è®º">ç†è®º</h2>
<p><code>map()</code>å‡½æ•°æ˜¯<code>Python</code>çš„å†…ç½®å‡½æ•°ï¼Œä¼šæ ¹æ®æä¾›çš„å‡½æ•°å‚æ•°ï¼Œå¯¹ä¼ å…¥çš„åºåˆ—æ•°æ®è¿›è¡Œæ˜ å°„ã€‚</p>
<p>æ‰€ä»¥ï¼Œ<code>map()</code>å‡½æ•°ä¹Ÿç§°<code>æ˜ å°„å‡½æ•°</code>ã€‚</p>
<p>åœ¨<code>Python</code>ä¸­ï¼Œ<code>map</code>æ˜¯ä¸€ä¸ªç±»ï¼Œæœ‰ç€è¿­ä»£æ–¹æ³•ï¼Œèƒ½å¤Ÿè¿”å›å¯¹åº”å€¼ã€‚å¹³æ—¶ä¹Ÿèƒ½å……å½“ç€å‡½æ•°ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="number">0</span>],[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]])))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [1, 3]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data=[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">A=<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="number">0</span>],data)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">    <span class="built_in">print</span>(A.__next__())</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h3 id="æ ¼å¼">æ ¼å¼</h3>
<p>æœ€å¸¸è§çš„æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(function,iterables,...)-&gt;<span class="built_in">map</span></span><br></pre></td></tr></table></figure>
<p><strong>Input</strong></p>
<ul>
<li>function: æ˜ å°„å‡½æ•°</li>
<li>iterables: å¯è¿­ä»£åºåˆ—</li>
</ul>
<p><strong>Output</strong></p>
<ul>
<li>ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡</li>
</ul>
<hr>
<h2 id="å®è·µ">å®è·µ</h2>
<p>æˆ‘ä»¬æ¥è¿›è¡Œä¸€ä¸ªç®€å•çš„å°è¯•ï¼</p>
<p><strong>å®ä¾‹ä¸€</strong></p>
<p>è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸¤ä¸ªæ•°ç»„<code>A</code>å’Œ<code>B</code>ä¸­çš„å…ƒç´ åŠ èµ·æ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Add</span>(<span class="params">x,y</span>):</span><br><span class="line">    n,m=<span class="built_in">len</span>(x),<span class="built_in">len</span>(y)</span><br><span class="line">    <span class="keyword">if</span> n&gt;m:</span><br><span class="line">        n,m=m,n</span><br><span class="line">        x,y=y,x</span><br><span class="line">    new=[i <span class="keyword">for</span> i <span class="keyword">in</span> y]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        new[i]+=x[i]</span><br><span class="line">    <span class="keyword">return</span> new</span><br><span class="line"></span><br><span class="line">A=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line">B=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="built_in">print</span>(Add(A,B))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [2, 4, 6, 8, 10, 12, 7, 8]</span></span><br></pre></td></tr></table></figure>
<p>é‚£å¦‚æœå¯¹æ ¼å¼è¾“å…¥ä¸é‚£ä¹ˆä¸¥æ ¼ï¼Œåˆæƒ³æ¯”è¾ƒç®€ä¾¿åœ°å®ç°æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>map</code>+<code>lambda</code>è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œå¯¹è¾“å…¥çš„å…ƒç´ è¿›è¡Œä¸€ä¸€æ˜ å°„ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x,y:x+y,A,B)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [2, 4, 6, 8, 10, 12]</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ˜ å°„(å‡½æ•°),ç¬¬äºŒï¼Œç¬¬ä¸‰ä¸ªå‚æ•°åˆ™æ˜¯è¾“å…¥çš„å¯è¿­ä»£å¯¹è±¡ã€‚<code>map</code>ä¼šè‡ªåŠ¨çš„<code>ä¾æ¬¡å–å‡º</code>å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œé€šè¿‡æ˜ å°„è¾“å‡ºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>map.__next__()</code>æ§åˆ¶è·å–æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–æ˜¯ç›´æ¥å°†è¿”å›çš„è¿­ä»£å¯¹è±¡è½¬åŒ–ä¸º<code>list</code>è·å–å…¨éƒ¨å…ƒç´ ã€‚</p>
<p><code>map</code>èƒ½å¤Ÿç¡®ä¿æ•°æ®çš„æœ€å°æˆªæ–­ï¼Œä¹Ÿå°±æ˜¯æ»¡è¶³ä¸¤ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡è¿›è¡Œçš„æœ€å°é•¿åº¦ã€‚æ¯”å¦‚ä¸Šæ–‡æåˆ°çš„ï¼Œ<code>A</code>æ•°ç»„çš„é•¿åº¦æ˜¯é«˜äº<code>B</code>æ•°ç»„çš„ï¼Œä½†ç”±äº<code>map</code>å¯¹è±¡çš„ç‰¹æ€§ï¼Œè¿”å›å€¼åªä¿ç•™åˆ°<code>B</code>çš„é•¿åº¦ã€‚</p>
<hr>
<p>æ˜¯ä¸æ˜¯å­¦ä¼šäº†ï¼é‚£æˆ‘ä»¬å†æ¥çœ‹ä¸€é¢˜ã€‚</p>
<p>å°†ä¸€ä¸ªå…ƒç»„å¯¹è±¡è½¬åŒ–ä¸ºä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A=((<span class="number">7</span>),(<span class="number">7</span>),(<span class="number">7</span>),(<span class="number">7</span>),(<span class="number">7</span>),(<span class="number">7</span>),(<span class="number">7</span>),(<span class="number">8</span>))</span><br><span class="line"><span class="built_in">print</span>([[i] <span class="keyword">for</span> i <span class="keyword">in</span> A])</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">list</span>,A)))</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>å®ä¾‹äºŒ</strong></p>
<blockquote>
<p>å‡ºè‡ªLC417å¤ªå¹³æ´‹å¤§è¥¿æ´‹æ°´æµé—®é¢˜</p>
</blockquote>
<p>æœ‰ä¸€ä¸ª m Ã— n çš„çŸ©å½¢å²›å±¿ï¼Œä¸ å¤ªå¹³æ´‹ å’Œ å¤§è¥¿æ´‹ ç›¸é‚»ã€‚ â€œå¤ªå¹³æ´‹â€ å¤„äºå¤§é™†çš„å·¦è¾¹ç•Œå’Œä¸Šè¾¹ç•Œï¼Œè€Œ â€œå¤§è¥¿æ´‹â€ å¤„äºå¤§é™†çš„å³è¾¹ç•Œå’Œä¸‹è¾¹ç•Œã€‚</p>
<p>è¿™ä¸ªå²›è¢«åˆ†å‰²æˆä¸€ä¸ªç”±è‹¥å¹²æ–¹å½¢å•å…ƒæ ¼ç»„æˆçš„ç½‘æ ¼ã€‚ç»™å®šä¸€ä¸ª m x n çš„æ•´æ•°çŸ©é˜µ heights ï¼Œ heights<code>[r][c]</code>è¡¨ç¤ºåæ ‡ (r, c) ä¸Šå•å…ƒæ ¼ é«˜äºæµ·å¹³é¢çš„é«˜åº¦ ã€‚</p>
<p>å²›ä¸Šé›¨æ°´è¾ƒå¤šï¼Œå¦‚æœç›¸é‚»å•å…ƒæ ¼çš„é«˜åº¦ å°äºæˆ–ç­‰äº å½“å‰å•å…ƒæ ¼çš„é«˜åº¦ï¼Œé›¨æ°´å¯ä»¥ç›´æ¥å‘åŒ—ã€å—ã€ä¸œã€è¥¿æµå‘ç›¸é‚»å•å…ƒæ ¼ã€‚æ°´å¯ä»¥ä»æµ·æ´‹é™„è¿‘çš„ä»»ä½•å•å…ƒæ ¼æµå…¥æµ·æ´‹ã€‚</p>
<p>è¿”å›ç½‘æ ¼åæ ‡ result çš„ 2D åˆ—è¡¨ ï¼Œå…¶ä¸­ result[i] = [ri, ci] è¡¨ç¤ºé›¨æ°´ä»å•å…ƒæ ¼ (ri, ci) æµåŠ¨ æ—¢å¯æµå‘å¤ªå¹³æ´‹ä¹Ÿå¯æµå‘å¤§è¥¿æ´‹ ã€‚</p>
<img src="https://assets.leetcode.com/uploads/2021/06/08/waterflow-grid.jpg" style="zoom:50%;">
<blockquote>
<p>è¾“å…¥: heights = [[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]<br>
è¾“å‡º: [[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]]</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pacificAtlantic</span>(<span class="params">self, heights: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        m,n=<span class="built_in">len</span>(heights),<span class="built_in">len</span>(heights[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">start</span>):</span><br><span class="line">            visitSet=<span class="built_in">set</span>()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">x,y</span>):</span><br><span class="line">                <span class="keyword">if</span> (x,y) <span class="keyword">in</span> visitSet:</span><br><span class="line">                    <span class="keyword">return</span> </span><br><span class="line">                val=heights[x][y]</span><br><span class="line">                visitSet.add((x,y))</span><br><span class="line">                <span class="keyword">for</span> i,j <span class="keyword">in</span> [[x+<span class="number">1</span>,y],[x-<span class="number">1</span>,y],[x,y-<span class="number">1</span>],[x,y+<span class="number">1</span>]]:</span><br><span class="line">                    <span class="keyword">if</span> <span class="number">0</span>&lt;=i&lt;m <span class="keyword">and</span> <span class="number">0</span>&lt;=j&lt;n <span class="keyword">and</span> heights[i][j]&gt;=val:</span><br><span class="line">                        dfs(i,j)</span><br><span class="line">                        </span><br><span class="line">            <span class="keyword">for</span> i,j <span class="keyword">in</span> start:</span><br><span class="line">                dfs(i,j)</span><br><span class="line">            <span class="keyword">return</span> visitSet </span><br><span class="line">        </span><br><span class="line">        pacificSet=[(<span class="number">0</span>,i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n)]+[(i,<span class="number">0</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m)]</span><br><span class="line">        altanticSet=[(m-<span class="number">1</span>,i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n)]+[(i,n-<span class="number">1</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m)]</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">list</span>,search(pacificSet)&amp;search(altanticSet)))</span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¸€äº›æ”¹å–„è®°å¿†åŠ›çš„å°tips]]></title>
      <url>/2022/08/18/%E3%80%90%E6%9D%82%E8%B0%88%E3%80%91%E4%B8%80%E4%BA%9B%E6%94%B9%E5%96%84%E8%AE%B0%E5%BF%86%E5%8A%9B%E7%9A%84%E5%B0%8Ftips/</url>
      <content type="html"><![CDATA[<blockquote>
<p><strong>ä»ä¿éšœç¥ç»ç³»ç»Ÿçš„å¥åº·çš„è§’åº¦å‡ºå‘</strong></p>
</blockquote>
<h2 id="é¥®é£Ÿ">é¥®é£Ÿ</h2>
<p><a href="https://www.zhihu.com/search?q=%E9%A5%B1%E5%92%8C%E8%84%82%E8%82%AA&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A81809350%7D">é¥±å’Œè„‚è‚ª</a>ä¸åˆ©äºè„‘å­çš„ä¿å…»!ç±»ä¼¼çš„é£Ÿç‰©æœ‰ï¼š</p>
<ul>
<li>å¥¶æ²¹</li>
<li>è‚¥çŒªè‚‰</li>
<li>åŠ¨ç‰©çš®</li>
<li>ç«è…¿</li>
<li>åŸ¹æ ¹</li>
<li>æ²¹ç‚¸é£Ÿå“</li>
<li>é«˜ç‚¹</li>
<li>è¥¿ç‚¹</li>
</ul>
<p>å¥½åƒçš„é£Ÿç‰©å¯èƒ½éƒ½ä¼šè®©ä½ å˜ç¬¨ï¼ï¼ï¼</p>
<p>è€Œä¸é¥±å’Œè„‚è‚ªé…¸çš„é£Ÿç‰©æœ‰ï¼š</p>
<ul>
<li>åšæœ</li>
<li>é±¼</li>
<li>æ¤ç‰©ç§å­</li>
<li>è”¬èœ</li>
<li>æ°´æœ
<ul>
<li>ğŸŠ</li>
<li>ğŸ</li>
</ul>
</li>
</ul>
<p>åƒå¤œå®µä¼šå½±å“è®°å¿†åŠ›ã€‚å…»æˆæ·±å¤œåƒé›¶é£Ÿçš„ä¹ æƒ¯å¯èƒ½ä¼šå¯¼è‡´å¤§è„‘å­¦ä¹ å’Œè®°å¿†èƒ½åŠ›çš„ç¼ºå¤±</p>
<hr>
<blockquote>
<p><strong>ä»è®©ç¥ç»å…ƒä¹‹é—´è”ç³»çš„æ´»æ€§çªè§¦æ•°é‡å¢åŠ çš„è§’åº¦å‡ºå‘</strong></p>
</blockquote>
<h2 id="ç¡çœ ">ç¡çœ </h2>
<p>å½“æˆ‘ä»¬è¿›å…¥æ·±åº¦ç¡çœ æ—¶ï¼Œå¤§è„‘ç¥ç»å…ƒä¼šé•¿å‡ºæ–°çš„çªè§¦ï¼Œå¹¶åŠ å¼ºç¥ç»å…ƒä¹‹é—´çš„è”ç³»ï¼Œä»è€Œå·©å›ºå’ŒåŠ å¼ºè®°å¿†</p>
<p>åˆä¼‘ä»¥10-15minä¸ºå¥½ï¼Œä¸è¦è¶…è¿‡90min</p>
<p>ä¸ç®¡ä½ ä»€ä¹ˆæ—¶å€™å¼€å§‹ç¡è§‰ï¼Œä¸€å®šè¦åœ¨æ¯å¤©çš„åŒä¸€æ—¶é—´èµ·åºŠã€‚è¿™æ ·æ‰èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯ç”Ÿç‰©é’Ÿæ­£å¸¸è¿ä½œã€‚</p>
<h2 id="è¿åŠ¨">è¿åŠ¨</h2>
<p>æœ‰æ°§è¿åŠ¨ï¼ï¼ï¼</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> çç¢æ—¥å¸¸ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[äººç”Ÿçš„ä¸€äº›å°å»ºè®®~]]></title>
      <url>/2022/08/15/%E3%80%90%E6%9D%82%E8%B0%88%E3%80%91%E4%BA%BA%E7%94%9F%E7%9A%84%E5%B0%8F%E5%BB%BA%E8%AE%AE/</url>
      <content type="html"><![CDATA[<p>ğŸŒˆ</p>
<p>æ°¸è¿œä¸è¦æŠŠæ—¶é—´æ”¾åœ¨æ²¡å¿…è¦çš„äº‰è®ºä¸Šï¼Œå°¤å…¶æ˜¯ä¸¤ä¸ªä¸åŒå±‚æ¬¡çš„äººï¼Œå®Œå…¨æ²¡æœ‰äº‰è®ºçš„å¿…è¦ï¼Œä¸å¦‚èŠ±äº›æ—¶é—´æå‡è‡ªæˆ‘ã€‚</p>
<p>ğŸ–²ï¸</p>
<p>æŠŠæ¯å¤©å½“åšæœ€åä¸€å¤©æ¥è¿‡ï¼</p>
<p>ğŸ˜²</p>
<p>é¡ºï¼Œä¸å¦„å–œï¼›é€†ï¼Œä¸æƒ¶é¦ï¼›å®‰ï¼Œä¸å¥¢é€¸ï¼›å±ï¼Œä¸æƒŠæƒ§ï¼›èƒ¸æœ‰æƒŠé›·è€Œé¢å¦‚å¹³æ¹–è€…ï¼Œå¯æ‹œä¸Šå°†å†›ã€‚</p>
<p>ğŸ˜¦</p>
<p>ä¸è¦å®³æ€•äº¤æ¶‰ï¼Œä¸è¦å®³æ€•è¡¨è¾¾ï¼ŒæŠŠæ¯ä¸€æ¬¡è¡¨è¾¾éƒ½å½“åšä¸€æ¬¡é­‚æ¸¸æˆæ¥æ‰“ï¼è¿™æ¬¡ä¸è¡Œäº†ï¼Œå°±ç®—æ­»æ‰äº†ï¼Œä¸‹æ¬¡é‡å¼€ä¸€æ¡å‘½å†æ¥</p>
<p>ğŸ‡¶ğŸ‡¦</p>
<p>ä¸€å®šè¦æå‰åšå¥½è§„åˆ’,æå‰è¿›è¡Œå¤ç›˜ï¼</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> çç¢æ—¥å¸¸ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç¢ç¢å¿µ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¸¸ç”¨è‹±è¯­ç§¯ç´¯]]></title>
      <url>/2022/08/15/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E8%AE%BA%E6%96%87%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AF%8D%E8%AF%AD/</url>
      <content type="html"><![CDATA[<p>Contrasting suitability and ambition in regional carbon mitigation.</p>
<p>åŒºåŸŸç¢³å‡æ’é€‚å®œæ€§å’Œé›„å¿ƒçš„å¯¹æ¯”ã€‚</p>
<hr>
<p>spend â€¦ (in) doing</p>
<p>ğŸŒŸ I spend time studying.</p>
<p>ğŸŒŸ I spend a lot energy playing.</p>
<p>spend â€¦ on sth.</p>
<p>ğŸŒŸ I spend time on this book.</p>
<hr>
<p>be doom to failure.</p>
<p>å¤±è´¥</p>
<hr>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Unit6 æƒ…æ€åŠ¨è¯ä¸è™šæ‹Ÿè¯­æ°”]]></title>
      <url>/2022/08/15/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit6%20%E6%83%85%E6%80%81%E5%8A%A8%E8%AF%8D%E5%92%8C%E8%99%9A%E6%8B%9F%E8%AF%AD%E6%B0%94/</url>
      <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€ç« -æƒ…æ€åŠ¨è¯">ç¬¬ä¸€ç«   æƒ…æ€åŠ¨è¯</h2>
<p>ğŸ“– æƒ…æ€åŠ¨è¯å°±æ˜¯è¡¨ç¤ºæƒ…ç»ªå’Œæ€åº¦çš„åŠ¨è¯ï¼Œè™½ç„¶ä¹Ÿå«åšåŠ¨è¯å•¦ï¼Œä½†å¿…é¡»ä½œä¸º<code>å®ä¹‰åŠ¨è¯</code>çš„å°è·Ÿç­è€Œå­˜åœ¨ã€‚</p>
<p>ğŸ“ æƒ…æ€åŠ¨è¯æ²¡æœ‰äººç§°çš„å˜åŒ–ï¼Œä¸éœ€è¦è€ƒè™‘ä¸‰å•</p>
<p>ğŸ“ ç»“æ„: æƒ…æ€åŠ¨è¯+åŠ¨è¯åŸå½¢</p>
<h3 id="å¸¸è§çš„æƒ…æ€åŠ¨è¯">å¸¸è§çš„æƒ…æ€åŠ¨è¯</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Can</th>
<th style="text-align:center">Could</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">may</td>
<td style="text-align:center">might</td>
</tr>
<tr>
<td style="text-align:center">should</td>
<td style="text-align:center">would</td>
</tr>
<tr>
<td style="text-align:center">ought to</td>
<td style="text-align:center">must</td>
</tr>
<tr>
<td style="text-align:center">have to</td>
<td style="text-align:center">need</td>
</tr>
<tr>
<td style="text-align:center">dare</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<h4 id="ğŸ-Can-Could">ğŸ <strong>Can Could</strong></h4>
<p>1ï¸âƒ£ è¡¨èƒ½åŠ›</p>
<p>ğŸŒŸ I believe I can fly.</p>
<p>ğŸŒŸ She could skate before she broke her leg.</p>
<hr>
<p>2ï¸âƒ£ è¡¨è¯·æ±‚ã€å…è®¸</p>
<p>ğŸŒŸ Can you give me 10 bucks?</p>
<p>è¡¨ç¤ºè¯·æ±‚æ—¶ï¼Œ<code>could</code>æ¯”<code>can</code>æ›´åŠ ç¤¼è²Œå’Œå§”å©‰</p>
<hr>
<p>3ï¸âƒ£ è¡¨çŒœæµ‹</p>
<p>ğŸŒŸ Can it be true?</p>
<p>ğŸŒŸ It canâ€™t be true.</p>
<p>å•Šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œcanâ€™tè¡¨ç¤ºä¸å¤ªå¯èƒ½ï¼Œè€Œä¸æ˜¯ä¸å¯èƒ½</p>
<hr>
<p>4ï¸âƒ£ è™šæ‹Ÿè¯­æ°”</p>
<p>åœ¨è™šæ‹Ÿè¯­æ°”ä¸­ï¼Œæˆ‘ä»¬ç”¨<code>could</code>è€Œä¸ç”¨<code>can</code> !</p>
<p><code>could have done</code>è¡¨ç¤ºå’Œè¿‡å»çš„äº‹æƒ…ç›¸åï¼Œä¹Ÿå°±æ˜¯<code>æœ¬å¯ä»¥åšåˆ°ï¼Œå´æ²¡åš</code>ï¼Œæœ‰æƒ‹æƒœã€é—æ†¾ä¹‹æƒ…</p>
<p>ğŸŒŸ You could have told her the truth.</p>
<p>ğŸŒŸ You couldnâ€™t have told her the truth.</p>
<hr>
<p>5ï¸âƒ£ <strong>Can</strong>ä¸<strong>be able to</strong></p>
<p><code>be able to</code>é€‚ç”¨äºå„ä¸ªæ—¶æ€ï¼Œè€Œä¸”<code>åœ¨ä¸€å®šçš„æ¡ä»¶(é‡‘é’±ã€èµ„æºã€æœºä¼šä¸‹)åšæˆæŸäº‹</code>ï¼Œç”¨çš„æ˜¯<code>be able to</code></p>
<p>ğŸŒŸ He didnâ€™t agree with me at first but I was able to persuade him.</p>
<hr>
<h4 id="ğŸ-may-might">ğŸ <strong>may</strong> <strong>might</strong></h4>
<p>1ï¸âƒ£ è¡¨è¯·æ±‚ã€å…è®¸</p>
<p>ğŸŒŸ You may not take my stuffed animal.</p>
<p>â­ May I take the book?</p>
<p>ğŸŒŸ Yes, you may. / Yes, you can. / No, you canâ€™t. / Iâ€™m afraid not. / Youâ€™d better not.</p>
<p>åœ¨å§”å©‰ç¨‹åº¦ä¸Šï¼Œ<code>might</code>ä¼šæ›´é«˜ä¸€äº›</p>
<hr>
<p>2ï¸âƒ£ è¡¨ç¤ºçŒœæµ‹å¯èƒ½æ€§</p>
<p>ğŸŒŸ He may be at home. ( 50 percent )</p>
<p>ğŸŒŸ He might be at home. ( 30 percent )</p>
<p>åŒ…æ‹¬å¯¹è¿‡å»çš„æ¨æµ‹ï¼š</p>
<p>ğŸŒŸ He <code>might have given</code> you more help, even though he was very busy.</p>
<hr>
<p>3ï¸âƒ£ è™šæ‹Ÿè¯­æ°”</p>
<p>ç”¨<code>might</code>ä¸ç”¨<code>may</code></p>
<p><strong>might have done</strong> è¡¨ç¤º <strong>æœ¬å¯ä»¥åšï¼Œå´æ²¡æœ‰åš</strong> æœ‰è´£æ€ªçš„æ„æ€ã€‚</p>
<p>ğŸŒŸ She <strong>might have had</strong> her hair cut by an experienced hairdresser.</p>
<hr>
<h4 id="ğŸ-should-ought-to"><strong>ğŸ should  ought to</strong></h4>
<p>1ï¸âƒ£ è¡¨ä¹‰åŠ¡ï¼Œåº”è¯¥</p>
<p><code>should</code> å¸¸ç”¨äºä¸€èˆ¬æƒ…å†µï¼›<code>ought to</code> åˆ™æ›´å¤šç”¨äºç‰¹æ®Šæƒ…å†µã€‚</p>
<p>ğŸŒŸ We should respect the old.</p>
<p>ğŸŒŸ We ought to take good care of the old man. He has no family.</p>
<hr>
<p>2ï¸âƒ£ è¡¨æ¨æµ‹</p>
<p>å¼ºåº¦æ’åºï¼</p>
<p>ğŸ·ï¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>u</mi><mi>s</mi><mi>t</mi><mo>&gt;</mo><mi>o</mi><mi>u</mi><mi>g</mi><mi>h</mi><mi>t</mi><mtext>Â </mtext><mi>t</mi><mi>o</mi><mo>&gt;</mo><mi>s</mi><mi>h</mi><mi>o</mi><mi>u</mi><mi>l</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">must&gt;ought\ to&gt;should</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">ug</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span><span class="mspace">Â </span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">d</span></span></span></span></p>
<hr>
<p>3ï¸âƒ£ è™šæ‹Ÿè¯­æ°”</p>
<p>æœ¬ä¸è¯¥åšæŸäº‹ï¼Œå´åšäº†ã€‚</p>
<p>â­ <strong>shouldnâ€™t have done</strong></p>
<p>â­ <strong>oughtnâ€™t to have done</strong></p>
<p>ğŸŒŸ Australia <strong>shouldnâ€™t have bamboozled</strong> British into traveling there when the whole country has been â€œon fireâ€ for months.</p>
<p>ğŸ–Šï¸ æ¾³å¤§åˆ©äºšæœ¬ä¸åº”è¯¥å¿½æ‚ è‹±å›½äººå»é‚£å„¿æ—…æ¸¸ï¼›æ•´ä¸ªæ¾³æ´²â€œç«çƒ§â€äº†å‡ ä¸ªæœˆã€‚</p>
<p>â­ <strong>should have done</strong></p>
<p>â­ <strong>ought to have done</strong></p>
<p>ğŸŒŸ Australia should have spent the advertising expenses in controlling the wildfires.</p>
<p>ğŸ–Šï¸ æ¾³å¤§åˆ©äºšæœ¬åº”è¯¥æŠŠå¹¿å‘Šè´¹ç”¨åœ¨æ§åˆ¶å±±ç«ä¸Šã€‚</p>
<hr>
<h4 id="ğŸ-must">ğŸ <strong>must</strong></h4>
<p>1ï¸âƒ£ è¡¨ç¤ºå¿…é¡»</p>
<p>ğŸ”ˆ Must I cheer up?</p>
<p>âœï¸ Yes, you must.</p>
<p>âœï¸ No, you neednâ€™t. / No, you donâ€™t have to.</p>
<hr>
<p>2ï¸âƒ£ è¡¨æ¨æµ‹</p>
<p>ğŸŒŸ The Gods must be crazy.</p>
<p>ğŸ”ˆ <strong>must have done</strong> è¡¨ç¤ºè¿‡å»è‚¯å®šåšè¿‡</p>
<p>ğŸŒŸ I must have done something good.</p>
<hr>
<h4 id="ğŸ-need">ğŸ <strong>need</strong></h4>
<p>1ï¸âƒ£ æƒ…æ€åŠ¨è¯</p>
<p>å¿…é¡»ï¼Œéœ€è¦ã€‚</p>
<p>ğŸŒŸ If you want anything, you need only ask.</p>
<hr>
<p>2ï¸âƒ£ å®ä¹‰åŠ¨è¯</p>
<p>æ­¤æ—¶ä¸€èˆ¬è·Ÿ<code>to</code>è¿åœ¨ä¸€èµ·ï¼<code>need to do sth.</code>è¡¨ç¤ºæœ‰ä¹‰åŠ¡æˆ–è´£ä»»åšæŸäº‹ã€‚</p>
<p>ğŸŒŸ You need to eat more.</p>
<p>ğŸŒŸ I need to take my dog out for a walk every day.</p>
<hr>
<p>3ï¸âƒ£ è™šæ‹Ÿè¯­æ°”</p>
<p>neednâ€™t have done æœ¬ä¸å¿…è¦åšï¼Œå´åšäº†</p>
<p>ğŸŒŸ You neednâ€™t have said that.</p>
<hr>
<h4 id="ğŸ-dare">ğŸ <strong>dare</strong></h4>
<p>1ï¸âƒ£ æƒ…æ€åŠ¨è¯</p>
<p>å¤šç”¨äºå¦å®šå¥ã€ç–‘é—®å¥ã€‚æ„æ€æ˜¯ï¼š<code>æ•¢å—</code></p>
<p>ğŸŒŸ I dare not  move!</p>
<p>ğŸŒŸ Dare you answer me when I call your name?</p>
<p>ğŸŒŸ I wonder whether he dare tell the truth.</p>
<hr>
<p>2ï¸âƒ£ å®ä¹‰åŠ¨è¯</p>
<p>æ­¤æ—¶ï¼Œéœ€è¦è€ƒè™‘äººç§°ä¸æ—¶æ€ï¼Œè·Ÿ<code>need</code>ä¸€æ ·ï¼Œå¸¸å¸¸è·Ÿ<code>to</code>è¿ç”¨ã€‚</p>
<p>ğŸŒŸ She <strong>dares to</strong> use the F-word in front of the kids!</p>
<p>åœ¨å¦å®šå¥å’Œç–‘é—®å¥ä¸­ï¼Œå¯ä»¥ä¸å¸¦<code>to</code></p>
<p>ğŸŒŸ He <strong>didnâ€™t dare (to)</strong> tell her his feelings.</p>
<hr>
<h2 id="ç¬¬äºŒç« -è™šæ‹Ÿè¯­æ°”">ç¬¬äºŒç«   è™šæ‹Ÿè¯­æ°”</h2>
<p>ğŸ·ï¸ è·Ÿäº‹å®ç›¸åçš„è¯­æ³•ç°è±¡ï¼Œå°±å«åšè™šæ‹Ÿè¯­æ°”ã€‚</p>
<h3 id="ä¸€ã€ifå¼•å¯¼çš„è™šæ‹Ÿè¯­æ°”">ä¸€ã€ifå¼•å¯¼çš„è™šæ‹Ÿè¯­æ°”</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Ifä»å¥</th>
<th style="text-align:center">ä¸»å¥</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ä¸€èˆ¬è¿‡å»æ—¶ did</td>
<td style="text-align:center">would / should do</td>
</tr>
</tbody>
</table>
<p>ğŸŒŸ If I had 1 million dollars, I would build a school.</p>
<p>ğŸŒŸ If I were you, I should ask him out.</p>
<p>âœï¸ å¦‚æœæˆ‘æ˜¯ä½ ï¼Œæˆ‘å°±çº¦ä»–å‡ºå»äº†</p>
<p>ğŸŒŸ If I were 17, I would not make my school life miserable.</p>
<p>ğŸ½ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>should</code>åœ¨è¿™é‡Œå¹¶æ²¡æœ‰æƒ…æ€åŠ¨è¯ä¸­<code>åº”è¯¥</code>çš„æ„æ€ï¼Œè€Œæ˜¯<code>shall</code>çš„è¿‡å»æ—¶ã€‚ä¸€èˆ¬ç”¨äºç¬¬ä¸€äººç§°åšä¸»è¯­ã€‚</p>
<p>ğŸ· å¦‚æœ<code>if</code>ä»å¥å¸¦æœ‰<code>be</code>åŠ¨è¯ï¼Œä¸éœ€è¦è€ƒè™‘äººç§°å’Œå•å¤æ•°å•¦ï¼Œç›´æ¥<code>were</code>!</p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè™šæ‹Ÿè¯­æ°”åœ¨è¡¨è¾¾ä¸ç°åœ¨çš„äº‹å®ç›¸åæ—¶ï¼Œç”¨çš„å…¨æ˜¯è¿‡å»æ—¶ã€‚å¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªå¹³è¡Œæ—¶ç©ºçš„äº¤é”™ç‚¹åœ¨ç°åœ¨ä¹‹å‰~</p>
</blockquote>
<hr>
<h4 id="ğŸ-ä¸è¿‡å»äº‹å®ç›¸å">ğŸ ä¸è¿‡å»äº‹å®ç›¸å</h4>
<table>
<thead>
<tr>
<th style="text-align:center">If ä»å¥</th>
<th style="text-align:center">ä¸»å¥</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">è¿‡å»å®Œæˆæ—¶ had done</td>
<td style="text-align:center">would / should have done</td>
</tr>
</tbody>
</table>
<p>ğŸŒŸ If his father hadnâ€™t interfered, we would have been married.</p>
<p>ğŸŒŸ If Dad had kept a healthy lifestyle, he would not have had a heart disease.</p>
<blockquote>
<p>è¯¶å˜¿ï¼Œè¿™ä¸ªæ—¶é—´ç‚¹è¿˜åœ¨è¿‡å»ä¹‹å‰ï¼Œæ‰€ä»¥è¦ç”¨è¿‡å»å®Œæˆæ—¶~</p>
</blockquote>
<hr>
<h4 id="ğŸ-ä¸å°†æ¥äº‹å®ç›¸å">ğŸ ä¸å°†æ¥äº‹å®ç›¸å</h4>
<table>
<thead>
<tr>
<th style="text-align:center">If ä»å¥</th>
<th style="text-align:center">ä¸»å¥</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ä¸€èˆ¬è¿‡å»æ—¶ did</td>
<td style="text-align:center">would / should do</td>
</tr>
<tr>
<td style="text-align:center">were to do</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">should do</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>ğŸŒŸ If you <strong>were to see</strong> someone in the office, you career would be ruined.</p>
<p>ğŸŒŸ If it <strong>should rain</strong> tomorrow, my road test would be doomed to failure.</p>
<p>ğŸŒŸ If my neighbor <strong>walked</strong> his dog this evening, I should ask him to mop my porch.</p>
<p>å¦‚ä½•ç†è§£å°†æ¥ç›¸åå‘¢ï¼Ÿä½ è¯´å®ƒè¿˜æ²¡å‘ç”Ÿå‘€ï¼Œå’‹ç›¸åæï¼Ÿåˆ«æ€¥ï¼Œè¿™æ˜¯å¸¦æœ‰è¾ƒå¼ºçš„<strong>ä¸»è§‚åˆ¤æ–­</strong>çš„âœ”ï¸ ï¼</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨ä¸Šäº†å¸¦æœ‰å°†æ¥è™šæ‹Ÿè¯­æ°”çš„<code>ifä»å¥</code>ï¼Œé‚£ä¹ˆä¸»å¥çš„äº‹æƒ…å¾ˆå¯èƒ½ä¸ä¼šå‘ç”Ÿï¼è€Œå¦‚æœè§‰å¾—ä¸»å¥å¾ˆæœ‰å¯èƒ½å‘ç”Ÿï¼Œé‚£ä¹ˆå°±ç”¨æ™®é€šçš„<code>if</code>å¼•å¯¼çš„æ¡ä»¶çŠ¶è¯­ä»å¥å¥½å•¦ï¼åŒºåˆ«åœ¨äºä¸»å°†ä»ç°ï¼</p>
<p>ğŸ”ˆ If I were to get up early, I would spend my time studying.</p>
<p>âœï¸ If I get up early, I will spend my time on English.</p>
<blockquote>
<p>æ³¨æ„å°†æ¥çš„æ—¶é—´ç‚¹è¿˜æ˜¯åœ¨è¿‡å»å“¦(å¼ºè¡Œè§£é‡Šing)</p>
</blockquote>
<h3 id="äºŒã€ifä»å¥å€’è£…">äºŒã€ifä»å¥å€’è£…</h3>
<p>æœ‰ä¸ªååˆ†æŠ½è±¡çš„æ —å­ï¼š</p>
<img src="/2022/08/15/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit6%20%E6%83%85%E6%80%81%E5%8A%A8%E8%AF%8D%E5%92%8C%E8%99%9A%E6%8B%9F%E8%AF%AD%E6%B0%94/image-20220816005222979.png" alt="image-20220816005222979" style="zoom:50%;">
<p>æŠŠä¸‰ç§æƒ…å†µæå‰ï¼Œä¹Ÿå°±æ˜¯æŠŠ<code>æˆ‘æ¢³å¤´</code>æå‰</p>
<hr>
<h4 id="ğŸŒ-ç°åœ¨ç›¸å">ğŸŒ ç°åœ¨ç›¸å</h4>
<p>ğŸ”ˆ If  I were you, I should ask him out.</p>
<p>â¡ï¸ Were I you, I should ask him out.</p>
<p><strong>ç»“æ„</strong></p>
<ul>
<li>å»æ‰<code>if</code></li>
<li><code>were</code>æå‰</li>
<li>å…¶ä»–ç…§æ¬</li>
</ul>
<hr>
<h4 id="ğŸŒ-è¿‡å»ç›¸å">ğŸŒ è¿‡å»ç›¸å</h4>
<p>ğŸ”ˆ If they hadnâ€™t argued, the woman wouldnâ€™t have died.</p>
<p>â¡ï¸ Had they not argued, the woman wouldnâ€™t have died.</p>
<p><strong>ç»“æ„</strong></p>
<ul>
<li>å»æ‰<code>if</code></li>
<li><code>had</code>æå‰</li>
<li>å…¶ä»–ç…§æ¬ï¼Œ <code>not</code>ä¸ç¼©å†™</li>
</ul>
<hr>
<h4 id="ğŸŒ-å°†æ¥ç›¸å">ğŸŒ å°†æ¥ç›¸å</h4>
<p>ğŸ”ˆ If it should rain tomorrow, my road test would be doomed to failure.<br>
â¡ï¸ Should it rain tomorrow, my road test would be doomed to failure.</p>
<p><strong>ç»“æ„</strong></p>
<ul>
<li>å»æ‰<code>if</code></li>
<li><code>should</code>æå‰</li>
<li>å…¶ä»–ç…§æ¬ï¼Œ <code>not</code>ä¸ç¼©å†™</li>
</ul>
<blockquote>
<p>å‘å‘å‘ï¼Œå•¥æ—¶å€™è¦å€’è£…å‘€ï¼</p>
<p>å½“ç„¶æ˜¯æŠŠ<code>if</code>çœç•¥çš„æƒ…å†µå•¦ï¼</p>
</blockquote>
<p>å€’è£…æ˜¯å°†ä¿¡æ¯é‡ç‚¹åç§»ï¼Œä¸€èˆ¬å¼ºè°ƒä¸»è¯­ã€‚</p>
<hr>
<h3 id="ä¸‰ã€è™šæ‹Ÿè¯­æ°”åŠ¨è¯">ä¸‰ã€è™šæ‹Ÿè¯­æ°”åŠ¨è¯</h3>
<p>è¦æ˜¯é‡ä¸Šä»¥ä¸‹è¿™å‡ ä¸ªå¤§ä½¬åšè°“è¯­ï¼Œåé¢çš„å®¾è¯­ä»å¥å¿…é¡»å°å¿ƒç¿¼ç¿¼åœ°ç”¨ä¸Šè™šæ‹Ÿè¯­æ°”ï¼</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç±»å‹</th>
<th style="text-align:center">åŠ¨è¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">è¡¨å»ºè®®</td>
<td style="text-align:center">advise, suggest, propose, recommend</td>
</tr>
<tr>
<td style="text-align:center">è¡¨è¦æ±‚/è¯·æ±‚</td>
<td style="text-align:center">insist, demand, request, urge</td>
</tr>
<tr>
<td style="text-align:center">è¡¨æ„¿æœ›</td>
<td style="text-align:center">wish, desire, prefer</td>
</tr>
<tr>
<td style="text-align:center">è¡¨å‘½ä»¤</td>
<td style="text-align:center">order, command, direct</td>
</tr>
<tr>
<td style="text-align:center">è¡¨å†³å®š</td>
<td style="text-align:center">decide, determine, resolve</td>
</tr>
</tbody>
</table>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaå…¥é—¨]]></title>
      <url>/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<h1>ç¬¬ä¸€ç«   Javaç®€ä»‹</h1>
<hr>
<h2 id="ä¸€ã€æ¦‚è¿°">ä¸€ã€æ¦‚è¿°</h2>
<h3 id="1-1-Javaç®€ä»‹">1.1 Javaç®€ä»‹</h3>
<p>Javaè¯­è¨€æ˜¯ç¾å›½<strong>Sun(Stanford University Netword)<strong>åœ¨</strong>1995</strong>æ¨å‡ºçš„è®¡ç®—æœºè¯­è¨€ã€‚</p>
<p>Javaä¹‹çˆ¶ï¼šè©¹å§†æ–¯Â·é«˜æ–¯æ—ï¼ˆJames Gosling)ã€‚</p>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220524231710965.png" alt="image-20220524231710965" style="zoom:50%;">
<p>2009å¹´Oracleæ”¶è´­Sunå…¬å¸ï¼ŒJavaéš¶å±äºç”²éª¨æ–‡å…¬å¸ã€‚</p>
<h3 id="äºŒã€Javaè¯­è¨€è·¨å¹³å°åŸç†">äºŒã€Javaè¯­è¨€è·¨å¹³å°åŸç†</h3>
<p>æ­¤å¤„çš„å¹³å°æŒ‡çš„æ˜¯<strong>æ“ä½œç³»ç»Ÿ</strong>ï¼ŒJavaç¨‹åºèƒ½å¤Ÿåœ¨ä»»æ„æ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œã€‚</p>
<p>Javaé€šè¿‡**JVM(Java Virtual Machine)**å®ç°è·¨å¹³å°é—´çš„æ“ä½œã€‚JVMæ˜¯ä¸€ç§æŠ½è±¡åŒ–çš„è®¡ç®—æœºï¼Œé€šè¿‡åœ¨å®é™…çš„è®¡ç®—æœºä¸Šä»¿çœŸæ¨¡æ‹Ÿå„ç±»è®¡ç®—æœºåŠŸèƒ½æ¥å®ç°ã€‚</p>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220524232447360.png" alt="image-20220524232447360" style="zoom:50%;">
<h3 id="ä¸‰ã€JREä¸JDK">ä¸‰ã€JREä¸JDK</h3>
<p>JRE(Java Runtime Environment)æ˜¯Javaè¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒ…å«JVMå’Œè¿è¡Œæ—¶æ‰€éœ€è¦çš„æ ¸å¿ƒç±»åº“ã€‚</p>
<p>JDK(Java Development Kit)æ˜¯Javaç¨‹åºå¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…å«JREå’Œå¼€å‘äººå‘˜ä½¿ç”¨çš„å·¥å…·ã€‚åŒ…æ‹¬ç¼–è¯‘å·¥å…·(javac.exe)å’Œè¿è¡Œå·¥å…·(java.exe)ã€‚</p>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220524232926702.png" alt="image-20220524232926702" style="zoom:50%;">
<h3 id="å››ã€Javaå¼€å‘æµç¨‹">å››ã€Javaå¼€å‘æµç¨‹</h3>
<p>å¼€å‘ä¸€ä¸ªJavaç¨‹åºï¼Œéœ€è¦ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>ç¼–å†™ç¨‹åº</li>
<li>ç¼–è¯‘ç¨‹åº</li>
<li>è¿è¡Œç¨‹åº</li>
</ul>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<strong>HelloWorld.java</strong>æ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;HelloWorld&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿è¡Œå‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¼–è¯‘ä¸‹ï¼Œåœ¨CMDä¸­è¾“å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac HelloWorld.java</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œå‡ºç°äº†ç¼–è¯‘æ–‡ä»¶<code>HelloWorld.class</code></p>
<p>å†æ‰§è¡Œè¿è¡Œä»»åŠ¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java HelloWorld</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">out:</span><br><span class="line">HelloWorld</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯èƒ½å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hellow.java:1: é”™è¯¯: ç±» HelloWorld æ˜¯å…¬å…±çš„, åº”åœ¨åä¸º HelloWorld.java çš„æ–‡ä»¶ä¸­å£°æ˜</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ç”±äºç³»ç»Ÿå£°æ˜çš„classåç§°ä¸æ–‡ä»¶åç§°ä¸ç›¸åŒæ‰€å¯¼è‡´çš„ã€‚</p>
<p>Javaç¨‹åºä¸­æœ€åŸºæœ¬çš„ç»„æˆå•ä½æ˜¯ç±»ï¼Œä»£ç çš„æ‰§è¡Œæ˜¯ä»mainæ–¹æ³•å¼€å§‹çš„ã€‚</p>
<hr>
<h1>ç¬¬äºŒç«   åŸºç¡€è¯­æ³•</h1>
<hr>
<h2 id="ä¸€ã€æ³¨é‡Š">ä¸€ã€æ³¨é‡Š</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•è¡Œæ³¨é‡Š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¤šè¡Œæ³¨é‡Š */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** æ–‡æ¡£æ³¨é‡Š **/</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äºŒã€å…³é”®å­—">äºŒã€å…³é”®å­—</h2>
<p>å…·æœ‰<strong>ç‰¹å®šå«ä¹‰</strong>çš„å•è¯ã€‚å…³é”®å­—å…¨éƒ¨å°å†™ã€‚ç›®å‰Javaä¸­ä¸€å…±æœ‰53ä¸ªå…³é”®å­—(2ä¸ªä¿ç•™å­—)ã€‚</p>
<h3 id="2-1-ä¿ç•™å…³é”®å­—ï¼š">2.1 ä¿ç•™å…³é”®å­—ï¼š</h3>
<ul>
<li>const:å¸¸é‡</li>
<li>goto:è½¬åˆ°</li>
</ul>
<h3 id="2-2-è®¿é—®ä¿®é¥°ç¬¦">2.2 è®¿é—®ä¿®é¥°ç¬¦</h3>
<ul>
<li>public:å…¬ç”¨ï¼Œå¯è·¨åŒ…</li>
<li>protected:å—ä¿æŠ¤çš„ï¼Œå½“å‰åŒ…å†…å¯ç”¨</li>
<li>private:ç§æœ‰çš„ï¼Œå½“å‰ç±»å¯ç”¨</li>
</ul>
<h3 id="2-3-OOPå…³é”®å­—">2.3 OOPå…³é”®å­—</h3>
<ul>
<li>class:ç±»ï¼Œç±»åéœ€è¦ä¸æ–‡ä»¶åç›¸åŒ</li>
<li>interface:æ¥å£ï¼Œæ¥å£ä¸€èˆ¬æä¾›æ–¹æ³•ä½†ä¸å®ç°</li>
<li>abstract:æŠ½è±¡ï¼Œä»‹äºç±»ä¸æ¥å£ä¸­ï¼Œå¯ä»¥æœ‰ä¹Ÿå¯ä»¥æ²¡æœ‰å®ç°çš„æ–¹æ³•ä½“</li>
<li>implemenst:å®ç°ï¼Œç”¨äºç±»æˆ–æ¥å£ï¼Œå®ç°æ¥å£</li>
<li>extends:ç»§æ‰¿ï¼Œç”¨äºç±»ç»§æ‰¿ç±»</li>
<li>new:æ–°å»ºä¸€ä¸ªç±»</li>
</ul>
<h3 id="2-4-åŒ…çš„å…³é”®å­—">2.4 åŒ…çš„å…³é”®å­—</h3>
<ul>
<li>import:å¼•å…¥åŒ…</li>
<li>package:å®šä¹‰åŒ…</li>
</ul>
<h3 id="2-5-æ•°æ®ç±»å‹">2.5 æ•°æ®ç±»å‹</h3>
<ul>
<li>byte:å­—èŠ‚å‹ï¼Œ8bit</li>
<li>char:å­—èŠ‚å‹ï¼Œ16bit</li>
<li>boolean:å¸ƒå°”å‹</li>
<li>short:çŸ­æ•´å‹ï¼Œ16bit</li>
<li>int:æ•´å‹ï¼Œ32bit</li>
<li>float:æµ®ç‚¹å‹ï¼Œ32bit</li>
<li>long:é•¿æ•´å‹ï¼Œ64bit</li>
<li>double:åŒç²¾åº¦ï¼Œ64bit</li>
<li>void:æ— è¿”å›å€¼</li>
<li>null:ç©ºå€¼</li>
<li>true:çœŸ</li>
<li>false:å‡</li>
</ul>
<h3 id="2-6-æ¡ä»¶å¾ªç¯-æµç¨‹æ§åˆ¶">2.6 æ¡ä»¶å¾ªç¯(æµç¨‹æ§åˆ¶)</h3>
<ul>
<li>if</li>
<li>else</li>
<li>while</li>
<li>for</li>
<li>switch</li>
<li>case</li>
<li>do</li>
<li>break</li>
<li>continue</li>
<li>return</li>
<li>instanceof:å®ä¾‹æ£€æµ‹,åˆ¤æ–­å·¦è¾¹å¯¹è±¡æ˜¯å¦æ˜¯å³è¾¹çš„å®ä¾‹</li>
</ul>
<h3 id="2-7-ä¿®é¥°æ–¹æ³•">2.7 ä¿®é¥°æ–¹æ³•</h3>
<ul>
<li>static:é™æ€</li>
<li>super:è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•</li>
<li>this:å½“å‰ç±»çˆ¶ç±»çš„å¯¹è±¡</li>
<li>native:æœ¬åœ°</li>
<li>strictfp:ä¸¥æ ¼</li>
<li>synchronized:çº¿ç¨‹ï¼ŒåŒæ­¥</li>
<li>transient:çŸ­æš‚</li>
<li>volatile:æ˜“å¤±</li>
</ul>
<h3 id="2-8-é”™è¯¯å¤„ç†">2.8 é”™è¯¯å¤„ç†</h3>
<ul>
<li>catch</li>
<li>try</li>
<li>finally</li>
<li>throw</li>
</ul>
<h3 id="2-9-å…¶ä»–">2.9 å…¶ä»–</h3>
<ul>
<li>enum:æšä¸¾</li>
<li>assert:æ–­è¨€</li>
</ul>
<hr>
<h2 id="ä¸‰ã€å¸¸é‡">ä¸‰ã€å¸¸é‡</h2>
<p>åœ¨ç¨‹åºä¸­ä¿æŒä¸å˜çš„é‡ï¼Œç§°ä¸ºå¸¸é‡ã€‚</p>
<p>åœ¨Javaä¸­ï¼Œå¸¸é‡å¯åˆ†ä¸ºå…­ç±»ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²å¸¸é‡</li>
<li>æ•´æ•°å¸¸é‡</li>
<li>å°æ•°å¸¸é‡</li>
<li>å­—ç¬¦å¸¸é‡</li>
<li>å¸ƒå°”å¸¸é‡</li>
<li>ç©ºå¸¸é‡</li>
</ul>
<hr>
<h2 id="å››ã€å˜é‡">å››ã€å˜é‡</h2>
<p>ä¸å¸¸é‡ç›¸å¯¹ï¼Œèƒ½å¤Ÿåœ¨ç¨‹åºä¸­å‘ç”Ÿæ”¹å˜çš„é‡ï¼Œç§°ä¸ºå˜é‡ã€‚</p>
<blockquote>
<p>Javaæä¾›çš„æ˜¾ç¤ºçš„è®¿é—®æƒé™ä¿®é¥°ç¬¦æœ‰3ç§,åˆ†åˆ«æ˜¯:ç§æœ‰(private)ã€ä¿æŠ¤(protected)å’Œå…¬ å…±(public)ã€‚é™¤æ­¤ä¹‹å¤–,è¿˜æœ‰ä¸€ç§é»˜è®¤çš„è®¿é—®æƒé™:friendly,å®ƒå¹¶ä¸æ˜¯Javaçš„å…³é”®å­—,åªæœ‰å½“å˜é‡å‰é¢æ²¡æœ‰å†™æ˜ä»»ä½•è®¿é—®æƒé™ä¿®é¥°ç¬¦æ—¶,å°± é»˜è®¤ä»¥friendlyä½œä¸ºè®¿é—®æƒé™ã€‚</p>
</blockquote>
<h3 id="4-1-å˜é‡å®šä¹‰">4.1 å˜é‡å®šä¹‰</h3>
<p>æ ¼å¼ï¼š<code>æ•°æ®ç±»å‹ å˜é‡å=å˜é‡å€¼ï¼›</code></p>
<p>é¢å¯¹<code>long</code>å˜é‡æ•°æ®è¶Šç•Œï¼Œå¯ä»¥åœ¨æ•°æ®åæ·»åŠ ä¸€ä¸ª<code>L</code>ã€‚</p>
<p>è€ŒJavaé»˜è®¤å°æ•°ç±»å‹ä¸º<code>double</code>ï¼Œä½¿ç”¨<code>float</code>å…³é”®å­—æ—¶ï¼Œä¸ºé˜²æ­¢ä¸å…¼å®¹ï¼Œéœ€è¦æ·»åŠ <code>F</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> l=<span class="number">100000000L</span>;</span><br><span class="line"><span class="type">float</span> f=<span class="number">13.14F</span>;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äº”ã€æ•°æ®ç±»å‹">äº”ã€æ•°æ®ç±»å‹</h2>
<h3 id="5-1-è®¡ç®—æœºå­˜å‚¨å•å…ƒ">5.1 è®¡ç®—æœºå­˜å‚¨å•å…ƒ</h3>
<p>è®¡ç®—æœºå­˜å‚¨è®¾å¤‡çš„æœ€å°ä¿¡æ¯å•å…ƒå«&quot;ä½(bit)â€œï¼Œæˆ‘ä»¬åˆç§°ä¹‹ä¸ºâ€œæ¯”ç‰¹ä½â€ï¼Œé€šå¸¸ç”¨å°å†™çš„å­—æ¯â€œbâ€è¡¨ç¤ºï¼Œè€Œè®¡ç®—æœºä¸­æœ€å°çš„å­˜å‚¨å•å…ƒå«â€œå­—èŠ‚(byte)â€ï¼Œé€šå¸¸ç”¨å¤§å†™å­—æ¯&quot;B&quot;è¡¨ç¤ºï¼Œå­—èŠ‚æ˜¯ç”±è¿ç»­çš„8ä¸ªä½ç»„æˆã€‚</p>
<h3 id="5-2-æ•°æ®ç±»å‹">5.2 æ•°æ®ç±»å‹</h3>
<p>Javaæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæ¯ä¸€ç§æ•°æ®éƒ½å¿…é¡»æœ‰æ˜ç¡®çš„æ•°æ®ç±»å‹ï¼Œä¸åŒçš„æ•°æ®ç±»å‹ä¹Ÿåˆ†é…äº†ä¸åŒçš„å†…å­˜ç©ºé—´ã€‚æ‰€ä»¥å…¶è¡¨ç¤ºçš„æ•°æ®å¤§å°æ˜¯ä¸ä¸€è‡´çš„ã€‚</p>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220525123222411.png" alt="image-20220525123222411" style="zoom:50%;">
<hr>
<h2 id="å…­ã€æ ‡è¯†ç¬¦">å…­ã€æ ‡è¯†ç¬¦</h2>
<p>æ‰€è°“æ ‡è¯†ç¬¦ï¼Œå°±æ˜¯ç»™ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰èµ·åå­—çš„ç¬¦å·ã€‚</p>
<p><strong>è§„åˆ™</strong></p>
<ul>
<li>ç”±æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿_å’Œç¾å…ƒç¬¦$ç»„æˆ</li>
<li>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</li>
<li>ä¸èƒ½æ˜¯å…³é”®å­—</li>
<li>åŒºåˆ†å¤§å°å†™</li>
</ul>
<p><strong>çº¦å®š</strong></p>
<p><strong>å°é©¼å³°</strong>ï¼šæ–¹æ³•ã€å˜é‡</p>
<ul>
<li>æ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªå•è¯æ—¶ï¼Œé¦–å­—æ¯å°å†™</li>
<li>æ ‡è¯†ç¬¦ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œç¬¬ä¸€ä¸ªå•è¯å­—æ¯å°å†™ï¼Œå…¶ä»–é¦–å­—æ¯å¤§å†™</li>
</ul>
<p><strong>å¤§é©¼å³°</strong>ï¼šç±»</p>
<ul>
<li>æ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªå•è¯æ—¶ï¼Œé¦–å­—æ¯å¤§å†™</li>
<li>æ ‡è¯†ç¬¦ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œé¦–å­—æ¯å…¨éƒ¨å¤§å†™</li>
</ul>
<hr>
<h2 id="ä¸ƒã€ç±»å‹è½¬æ¢">ä¸ƒã€ç±»å‹è½¬æ¢</h2>
<h3 id="7-1-ç±»å‹è½¬æ¢åˆ†ç±»">7.1 ç±»å‹è½¬æ¢åˆ†ç±»</h3>
<ul>
<li>è‡ªåŠ¨ç±»å‹è½¬æ¢</li>
<li>å¼ºåˆ¶ç±»å‹è½¬æ¢</li>
</ul>
<h3 id="7-2-è‡ªåŠ¨ç±»å‹è½¬æ¢">7.2 è‡ªåŠ¨ç±»å‹è½¬æ¢</h3>
<p>æŠŠä¸€ä¸ªè¡¨ç¤ºæ•°æ®èŒƒå›´å°çš„æ•°å€¼æˆ–å˜é‡èµ‹å€¼ç»™ä¸€ä¸ªè¡¨ç¤ºæ•°æ®èŒƒå›´å¤§çš„å˜é‡æ—¶ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨èŒƒå›´è½¬æ¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> d=<span class="number">10</span></span><br></pre></td></tr></table></figure>
<p><img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220525130806831.png" alt="image-20220525130806831"></p>
<h3 id="7-3-å¼ºåˆ¶ç±»å‹è½¬æ¢">7.3 å¼ºåˆ¶ç±»å‹è½¬æ¢</h3>
<p>å°†æ•°æ®èŒƒå›´å¤§çš„è½¬æ¢ä¸ºèŒƒå›´å°çš„</p>
<ul>
<li>æ ¼å¼ï¼š<code>ç›®æ ‡æ•°æ®ç±»å‹ å˜é‡å=(ç›®æ ‡æ•°æ®ç±»å‹)å€¼æˆ–å˜é‡</code></li>
<li>èŒƒä¾‹ï¼š<code>int k=(int)88.88</code></li>
</ul>
<hr>
<h1>ç¬¬ä¸‰ç«   è¿ç®—ç¬¦</h1>
<hr>
<h2 id="ä¸€ã€ç®—æ•°è¿ç®—ç¬¦">ä¸€ã€ç®—æ•°è¿ç®—ç¬¦</h2>
<h3 id="1-1-è¿ç®—ç¬¦ä¸è¡¨è¾¾å¼">1.1 è¿ç®—ç¬¦ä¸è¡¨è¾¾å¼</h3>
<ul>
<li>è¿ç®—ç¬¦ï¼šå¯¹å¸¸é‡æˆ–å˜é‡è¿›è¡Œæ“ä½œçš„ç¬¦å·</li>
<li>è¡¨è¾¾å¼ï¼šç”¨è¿ç®—ç¬¦æŠŠå¸¸é‡æˆ–å˜é‡è¿æ¥èµ·æ¥ç¬¦åˆjavaè¯­æ³•è§„èŒƒçš„å¥å­</li>
</ul>
<h3 id="1-2-ç®—æ•°è¿ç®—ç¬¦">1.2 ç®—æ•°è¿ç®—ç¬¦</h3>
<ul>
<li><code>+</code></li>
<li><code>-</code></li>
<li><code>*</code></li>
<li><code>/</code></li>
<li><code>%</code></li>
</ul>
<p>é™¤æ³•å¾—åˆ°çš„æ˜¯å•†ï¼Œå–ä½™å¾—åˆ°çš„æ˜¯ä½™æ•°ã€‚æ•´æ•°ç›¸é™¤åªèƒ½å¾—åˆ°æ•´æ•°ï¼Œè¦å¾—åˆ°å°æ•°å¿…é¡»æœ‰æµ®ç‚¹æ•°çš„å‚ä¸ã€‚</p>
<p>å½“å­—ç¬¦å‹ä¸æ•°å­—ç±»å‹åšåŠ æ³•æ—¶ï¼Œä¼šå°†å­—ç¬¦è½¬ä¸ºASCIIç è¿›è¡Œè¿ç®—ã€‚</p>
<ul>
<li>byteç±»å‹ã€shortç±»å‹å’Œcharç±»å‹éƒ½å°†è¢«æå‡åˆ°intç±»å‹</li>
</ul>
<p>å­—ç¬¦ä¸²å‹åšåŠ æ“ä½œæ—¶ï¼Œåšçš„æ˜¯å­—ç¬¦æ‹¼æ¥ã€‚(åªè¦æ˜¯å­—ç¬¦ä¸²åœ¨å‰ï¼Œé‚£å°±æ˜¯å­—ç¬¦æ‹¼æ¥)ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;a&quot;</span>+<span class="number">1</span>+<span class="number">2</span></span><br><span class="line">--&gt;<span class="string">&quot;a12&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>+<span class="number">2</span>+<span class="string">&quot;a&quot;</span>:</span><br><span class="line">--&gt;<span class="string">&quot;3a&quot;</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äºŒã€èµ‹å€¼è¿ç®—ç¬¦">äºŒã€èµ‹å€¼è¿ç®—ç¬¦</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">i+=<span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œ+=æ“ä½œå¸¦æœ‰ä¸€ä¸ªå¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="type">short</span> a=<span class="number">10</span>;</span><br><span class="line">a=a+<span class="number">20</span>ï¼›<span class="comment">// æ­¤æ—¶å³è¾¹æ˜¯intç±»å‹,ä¼šæŠ¥é”™</span></span><br><span class="line">a=(<span class="type">short</span>)(a+<span class="number">20</span>); <span class="comment">// ä¸ä¼šæŠ¥é”™</span></span><br><span class="line">a+=<span class="number">20</span>; <span class="comment">// ä¸ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>+=</code></li>
<li><code>-=</code></li>
<li><code>*=</code></li>
<li><code>/=</code></li>
<li><code>%=</code></li>
</ul>
<hr>
<h2 id="ä¸‰ã€è‡ªå¢è‡ªå‡è¿ç®—ç¬¦">ä¸‰ã€è‡ªå¢è‡ªå‡è¿ç®—ç¬¦</h2>
<ul>
<li><code>++</code></li>
<li><code>--</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•ç‹¬ä½¿ç”¨æ—¶äºŒè€…ç›¸ç­‰</span></span><br><span class="line">++i;</span><br><span class="line">i++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚ä¸æ“ä½œæ—¶ï¼Œå…ˆå‚ä¸æ“ä½œåè‡ªåŠ ï¼š</span></span><br><span class="line"><span class="type">int</span> i=<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> j=i++;</span><br><span class="line">---&gt; j: <span class="number">10</span> ; i: <span class="number">11</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// ++æ”¾å‰æ—¶ï¼Œå…ˆè¿›è¡Œè‡ªå¢:</span></span><br><span class="line"><span class="type">int</span> j=++i;</span><br><span class="line">---&gt; j: <span class="number">11</span> ; i: <span class="number">11</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å››ã€å…³ç³»è¿ç®—ç¬¦">å››ã€å…³ç³»è¿ç®—ç¬¦</h2>
<ul>
<li><code>==</code></li>
<li><code>!=</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
</ul>
<hr>
<h2 id="äº”ã€é€»è¾‘è¿ç®—ç¬¦">äº”ã€é€»è¾‘è¿ç®—ç¬¦</h2>
<p>é€»è¾‘è¿ç®—ç¬¦æ˜¯ç”¨æ¥è¿æ¥å…³ç³»è¡¨è¾¾å¼çš„è¿ç®—ç¬¦ã€‚</p>
<ul>
<li><code>&amp;</code>é€»è¾‘ä¸ æœ‰falseåˆ™false</li>
<li><code>|</code>é€»è¾‘æˆ– æœ‰trueåˆ™true</li>
<li><code>^</code>é€»è¾‘å¼‚æˆ– ç›¸åŒfalseä¸åŒtrue</li>
<li><code>!</code>é€»è¾‘é</li>
</ul>
<p><strong>çŸ­è·¯é€»è¾‘è¿ç®—ç¬¦</strong></p>
<ul>
<li><code>&amp;&amp;</code>çŸ­è·¯ä¸</li>
<li><code>||</code>çŸ­è·¯æˆ–</li>
</ul>
<p>é€»è¾‘ä¸<code>&amp;</code>ï¼Œæ— è®ºå·¦è¾¹çœŸå‡ï¼Œå³è¾¹éƒ½è¦æ‰§è¡Œ</p>
<p>çŸ­è·¯ä¸<code>&amp;&amp;</code>ï¼Œè‹¥å·¦è¾¹ä¸ºå‡ï¼Œåˆ™å³è¾¹ä¸æ‰§è¡Œ</p>
<p>é€»è¾‘æˆ–<code>|</code>ï¼Œæ— è®ºçœŸå‡ï¼Œéƒ½è¦æ‰§è¡Œ</p>
<p>çŸ­è·¯æˆ–<code>||</code>ï¼Œå·¦è¾¹ä¸ºçœŸï¼Œåˆ™å³è¾¹ä¸æ‰§è¡Œ</p>
<hr>
<h2 id="å…­ã€ä¸‰å…ƒè¿ç®—ç¬¦">å…­ã€ä¸‰å…ƒè¿ç®—ç¬¦</h2>
<p><strong>æ ¼å¼</strong>ï¼š<code>å…³ç³»è¡¨è¾¾å¼?è¡¨è¾¾å¼1:è¡¨è¾¾å¼2;</code></p>
<p><strong>èŒƒä¾‹</strong>ï¼š<code>a&gt;b?a:b;</code></p>
<p>å…ˆè®¡ç®—å…³ç³»è¡¨è¾¾å¼çš„å€¼ï¼Œè‹¥ä¸º<code>true</code>,è¡¨è¾¾å¼1çš„å€¼å°±æ˜¯è¿ç®—ç»“æœï¼›</p>
<p>è‹¥ä¸º<code>false</code>ï¼Œè¡¨è¾¾å¼2çš„å€¼å°±æ˜¯è¿ç®—ç»“æœã€‚</p>
<p>æ•°æ®è¾“å…¥(ScanneråŒ…):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line">Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> i=sc.nextInt();</span><br></pre></td></tr></table></figure>
<hr>
<h1>ç¬¬å››ç«   æ§åˆ¶è¯­å¥</h1>
<hr>
<p>æµç¨‹æ§åˆ¶è¯­å¥å¯åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<ul>
<li>é¡ºåºç»“æ„</li>
<li>åˆ†æ”¯ç»“æ„</li>
<li>å¾ªç¯ç»“æ„</li>
</ul>
<h2 id="ä¸€ã€é¡ºåºç»“æ„">ä¸€ã€é¡ºåºç»“æ„</h2>
<p>ä½œä¸ºåŸºæœ¬çš„æµç¨‹æ§åˆ¶ç»“æ„ï¼Œé¡ºåºç»“æ„ä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ‰§è¡Œè¯­åºã€‚</p>
<hr>
<h2 id="äºŒã€åˆ†æ”¯ç»“æ„">äºŒã€åˆ†æ”¯ç»“æ„</h2>
<h3 id="2-1-if-ç»“æ„">2.1 if ç»“æ„</h3>
<p><strong>æ ¼å¼</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (å…³ç³»è¡¨è¾¾å¼)&#123;</span><br><span class="line">	è¯­å¥ä½“;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-ifâ€¦else-ç»“æ„">2.2 ifâ€¦else ç»“æ„</h3>
<p><strong>æ ¼å¼</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(å…³ç³»è¡¨è¾¾å¼)&#123;</span><br><span class="line">	è¯­å¥ä½“<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	è¯­å¥ä½“<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-ifâ€¦elseâ€¦if-ç»“æ„">2.3 ifâ€¦elseâ€¦if ç»“æ„</h3>
<p><strong>æ ¼å¼</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(å…³ç³»è¡¨è¾¾å¼<span class="number">1</span>)&#123;</span><br><span class="line">	è¯­å¥ä½“<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(å…³ç³»è¡¨è¾¾å¼<span class="number">2</span>)&#123;</span><br><span class="line">	è¯­å¥ä½“<span class="number">2</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	è¯­å¥ä½“n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-4-Switchç»“æ„">2.4 Switchç»“æ„</h3>
<p><strong>æ ¼å¼</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(è¡¨è¾¾å¼)&#123;</span><br><span class="line">	<span class="keyword">case</span> å€¼<span class="number">1</span>:</span><br><span class="line">		è¯­å¥ä½“<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> å€¼<span class="number">2</span>:</span><br><span class="line">		è¯­å¥ä½“<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		è¯­å¥ä½“n;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“<code>case</code>è¯­å¥å—ä¸­æ²¡æœ‰<code>break</code>æ—¶ï¼Œå°†ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¬¡çš„<code>case</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(a)&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">		System.out.println(<span class="string">&quot;HELLO&quot;</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ä¸‰ã€å¾ªç¯ç»“æ„">ä¸‰ã€å¾ªç¯ç»“æ„</h2>
<p>å¾ªç¯ç»“æ„ç”±å››ä¸ªéƒ¨åˆ†æ„æˆï¼š</p>
<ul>
<li>åˆå§‹åŒ–è¯­å¥</li>
<li>æ¡ä»¶åˆ¤æ–­è¯­å¥</li>
<li>å¾ªç¯ä½“è¯­å¥</li>
<li>æ¡ä»¶æ§åˆ¶è¯­å¥</li>
</ul>
<h3 id="3-1-forå¾ªç¯">3.1 forå¾ªç¯</h3>
<p><strong>æ ¼å¼</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (åˆå§‹åŒ–è¯­å¥;æ¡ä»¶åˆ¤æ–­è¯­å¥;æ¡ä»¶æ§åˆ¶è¯­å¥)&#123;</span><br><span class="line">	å¾ªç¯ä½“è¯­å¥;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-whileå¾ªç¯">3.2 whileå¾ªç¯</h3>
<p><strong>æ ¼å¼</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(æ¡ä»¶åˆ¤æ–­è¯­å¥)&#123;</span><br><span class="line">	å¾ªç¯ä½“è¯­å¥;</span><br><span class="line">	æ¡ä»¶æ§åˆ¶è¯­å¥;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-do-â€¦-while-å¾ªç¯">3.3 do â€¦ while å¾ªç¯</h3>
<p><strong>æ ¼å¼</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">	å¾ªç¯ä½“è¯­å¥;</span><br><span class="line">	æ¡ä»¶æ§åˆ¶è¯­å¥;</span><br><span class="line">&#125;<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span>(æ¡ä»¶åˆ¤æ–­è¯­å¥)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å››ã€è·³è½¬è¯­å¥">å››ã€è·³è½¬è¯­å¥</h2>
<ul>
<li>continue</li>
<li>break</li>
</ul>
<hr>
<h2 id="éšæœºæ•°Random">éšæœºæ•°Random</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line">Random r=<span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"><span class="type">int</span> num=r.nextInt(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0-9</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="IDEA">IDEA</h2>
<p><strong>å¿«é€Ÿç”Ÿæˆè¯­å¥</strong></p>
<ul>
<li>å¿«é€Ÿç”Ÿæˆmainæ–¹æ³•ï¼š<code>psvm</code></li>
<li>å¿«é€Ÿç”Ÿæˆè¾“å‡ºè¯­å¥ï¼š<code>sout</code></li>
</ul>
<p><strong>å†…å®¹è¾…åŠ©é”®</strong></p>
<ul>
<li><code>Ctrl+Alt+space</code>(å†…å®¹æç¤ºï¼Œä»£ç è¡¥å…¨)</li>
</ul>
<p><strong>å¿«æ·é”®</strong></p>
<ul>
<li>
<p>æ³¨é‡Š</p>
<ul>
<li>å•è¡Œï¼š<code>ctrl+/</code> å†æ¥ä¸€æ¬¡æ˜¯å–æ¶ˆ</li>
<li>å¤šè¡Œï¼š<code>ctrl+shift+/</code> å†æ¥ä¸€æ¬¡æ˜¯å–æ¶ˆ</li>
</ul>
</li>
<li>
<p>æ ¼å¼åŒ–</p>
<ul>
<li><code>ctrl+alt+L</code></li>
</ul>
</li>
</ul>
<hr>
<h1>ç¬¬äº”ç«   æ•°ç»„</h1>
<hr>
<h2 id="ä¸€ã€æ•°ç»„å®šä¹‰æ ¼å¼">ä¸€ã€æ•°ç»„å®šä¹‰æ ¼å¼</h2>
<p><strong>æ ¼å¼ä¸€</strong>ï¼š</p>
<ul>
<li><code>æ•°æ®ç±»å‹[] å˜é‡å</code></li>
<li>èŒƒä¾‹: <code>int[] arr</code></li>
<li>å®šä¹‰äº†ä¸€ä¸ªintç±»å‹çš„æ•°ç»„ï¼Œæ•°ç»„åæ˜¯arr</li>
</ul>
<p><strong>æ ¼å¼äºŒ</strong>:</p>
<ul>
<li><code>æ•°æ®ç±»å‹ å˜é‡å[]</code></li>
<li>èŒƒä¾‹:<code>int arr[]</code></li>
<li>å®šä¹‰äº†ä¸€ä¸ªintç±»å‹çš„å˜é‡ï¼Œå˜é‡åæ˜¯arræ•°ç»„</li>
</ul>
<hr>
<h2 id="äºŒã€æ•°ç»„åˆå§‹åŒ–">äºŒã€æ•°ç»„åˆå§‹åŒ–</h2>
<p>Javaä¸­çš„æ•°ç»„å¿…é¡»å…ˆåˆå§‹åŒ–ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ã€‚</p>
<p>æ‰€è°“åˆå§‹åŒ–ï¼Œå°±æ˜¯ä¸ºæ•°ç»„ä¸­çš„æ•°ç»„å…ƒç´ åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•°ç»„å…ƒç´ èµ‹å€¼ã€‚</p>
<h3 id="2-1-åŠ¨æ€åˆå§‹åŒ–">2.1  åŠ¨æ€åˆå§‹åŒ–</h3>
<p>åœ¨åˆå§‹åŒ–æ—¶ï¼ŒæŒ‡å®šæ•°ç»„é•¿åº¦ï¼Œç”±ç³»ç»Ÿä¸ºæ•°ç»„åŠ¨æ€åˆ†é…åˆå§‹å€¼</p>
<p>ä¾‹å¦‚:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<h3 id="2-2-é™æ€åˆå§‹åŒ–">2.2  é™æ€åˆå§‹åŒ–</h3>
<p>æŒ‡å®šæ•°ç»„çš„åˆå§‹å€¼ï¼Œç”±ç³»ç»Ÿå†³å®šé•¿åº¦ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ä¸‰ã€æ•°ç»„å…ƒç´ è®¿é—®">ä¸‰ã€æ•°ç»„å…ƒç´ è®¿é—®</h2>
<h3 id="3-1-æ•°ç»„å…ƒç´ è®¿é—®">3.1  æ•°ç»„å…ƒç´ è®¿é—®</h3>
<p>æ ¼å¼ï¼š<code>æ•°ç»„å[ç´¢å¼•]</code></p>
<p>ç´¢å¼•ç”¨äºè®¿é—®æ•°ç»„ä¸­çš„æ•°æ®ä½¿ç”¨ï¼Œ<code>æ•°ç»„å[ç´¢å¼•]</code>ç­‰åŒäºå˜é‡åï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡åã€‚</p>
<ul>
<li>ç´¢å¼•ä»0å¼€å§‹</li>
<li>ç´¢å¼•æ˜¯è¿ç»­çš„</li>
<li>ç´¢å¼•æ¯æ¬¡é€’å¢1</li>
</ul>
<hr>
<h2 id="å››ã€å†…å­˜åˆ†é…">å››ã€å†…å­˜åˆ†é…</h2>
<h3 id="4-1-Javaä¸­å†…å­˜åˆ†é…">4.1 Javaä¸­å†…å­˜åˆ†é…</h3>
<p>Javaä¸ºäº†æé«˜æ•ˆç‡ï¼Œç»™æ¯ç§ç±»å‹çš„æ•°æ®éƒ½åˆ†é…äº†ç©ºé—´ã€‚æ•°ç»„åœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šä¸ºå­˜å‚¨ç©ºé—´æ·»åŠ é»˜è®¤å€¼ï¼š</p>
<ul>
<li>æ•´æ•°ï¼š0</li>
<li>æµ®ç‚¹ï¼š0.0</li>
<li>å¸ƒå°”ï¼šfalse</li>
<li>å­—ç¬¦ï¼šç©ºå­—ç¬¦</li>
<li>å¼•ç”¨ï¼šnull</li>
</ul>
<p>Javaä¸­çš„å†…å­˜å¯åˆ†ä¸ºä¸¤ç§ï¼Œæ ˆå†…å­˜å’Œå †å†…å­˜ã€‚</p>
<p>æ ˆå†…å­˜ï¼šå­˜å‚¨å±€éƒ¨å˜é‡ï¼Œå®šä¹‰åœ¨æ–¹æ³•ä¸­çš„å˜é‡ï¼Œä½¿ç”¨å®Œæ¯•ï¼Œç«‹å³æ¶ˆå¤±ã€‚</p>
<p>å †å†…å­˜ï¼šå­˜å‚¨newå‡ºæ¥çš„å†…å®¹(å®ä½“ã€å¯¹è±¡)ï¼Œæ•°ç»„åœ¨åˆå§‹åŒ–æ—¶ä¼šä¸ºæœŸæ·»åŠ é»˜è®¤å€¼ã€‚å½“ä½¿ç”¨å®Œæ¯•æ—¶ï¼Œä¼šåœ¨åƒåœ¾å›æ”¶æœŸç©ºé—²æ—¶è¢«å›æ”¶ã€‚</p>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220527233055693.png" alt="image-20220527233055693" style="zoom:50%;">
<h3 id="4-2-æ•°ç»„å†…å­˜å›¾">4.2  æ•°ç»„å†…å­˜å›¾</h3>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220527233316829.png" alt="image-20220527233316829" style="zoom:50%;">
<p>å½“ä¸¤ä¸ªæ•°ç»„æŒ‡å‘ç›¸åŒçš„æ ˆå†…å­˜æ—¶ï¼Œç‰µä¸€è€ŒåŠ¨å…¨èº«ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr1=arr;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äº”ã€å¸¸è§é—®é¢˜">äº”ã€å¸¸è§é—®é¢˜</h2>
<ul>
<li>ç´¢å¼•è¶Šç•Œ</li>
<li>ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
</ul>
<hr>
<h2 id="å…­ã€æ•°ç»„å¸¸è§æ“ä½œ">å…­ã€æ•°ç»„å¸¸è§æ“ä½œ</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éå†æ•°ç»„</span></span><br><span class="line"><span class="type">int</span>[] arr =&#123;<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">	System.out.println(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ•°ç»„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">    System.out.println(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æœ€å€¼</span></span><br><span class="line"><span class="type">int</span> max=arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(max&lt;arr[i])&#123;</span><br><span class="line">        max=arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¿»è½¬</span></span><br><span class="line"><span class="type">int</span>[] arr=&#123;<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> start=<span class="number">0</span>,end=arr.length-<span class="number">1</span>;start&lt;=end;start++,end--)&#123;</span><br><span class="line">    <span class="type">int</span> temp=arr[start];</span><br><span class="line">    arr[start]=arr[end];</span><br><span class="line">    arr[end]=temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1>ç¬¬å…­ç«   æ–¹æ³•</h1>
<hr>
<h2 id="ä¸€ã€æ–¹æ³•æ¦‚è¿°">ä¸€ã€æ–¹æ³•æ¦‚è¿°</h2>
<p>æ–¹æ³•æ˜¯å°†å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ä»£ç å—ç»„ç»‡æˆä¸€ä¸ªæ•´ä½“ï¼Œä½¿ä¹‹èƒ½å¤Ÿå®Œæˆç‰¹å®šä»»åŠ¡çš„ä»£ç é›†ã€‚</p>
<ul>
<li>æ–¹æ³•å¿…é¡»å…ˆåˆ›å»ºæ‰å¯ä½¿ç”¨ï¼Œè¯¥è¿‡ç¨‹ç§°ä¸ºæ–¹æ³•å®šä¹‰</li>
<li>æ–¹æ³•åˆ›å»ºåä¸æ˜¯ç›´æ¥è¿è¡Œçš„ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨åæ‰æ‰§è¡Œï¼Œè¯¥è¿‡ç¨‹ç§°ä¸ºæ–¹æ³•è°ƒç”¨</li>
</ul>
<p><strong>å®šä¹‰æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¼å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> æ–¹æ³•å()&#123;</span><br><span class="line">    <span class="comment">// æ–¹æ³•ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è°ƒç”¨æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¼å¼</span></span><br><span class="line">æ–¹æ³•å();</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äºŒã€å¸¦å‚æ•°çš„æ–¹æ³•">äºŒã€å¸¦å‚æ•°çš„æ–¹æ³•</h2>
<p><strong>å®šä¹‰æ–¹æ³•ä¸è°ƒç”¨</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¼å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> æ–¹æ³•å(å‚æ•°)&#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŒƒä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">isNumber</span><span class="params">(<span class="type">int</span> number)</span>&#123;...&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getMax</span><span class="params">(<span class="type">int</span> number1,<span class="type">int</span> number2)</span>&#123;...&#125;</span><br><span class="line"></span><br><span class="line">isNumber(<span class="number">5</span>);</span><br><span class="line">getMax(<span class="number">6</span>,<span class="number">7</span>);</span><br></pre></td></tr></table></figure>
<h3 id="å½¢å‚ä¸å®å‚">å½¢å‚ä¸å®å‚</h3>
<p><strong>å½¢å‚</strong></p>
<ul>
<li>æ–¹æ³•å®šä¹‰ä¸­çš„å‚æ•°</li>
<li>ç­‰åŒäºå˜é‡å®šä¹‰æ ¼å¼</li>
</ul>
<p><strong>å®å‚</strong></p>
<ul>
<li>æ–¹æ³•è°ƒç”¨ä¸­çš„å‚æ•°</li>
<li>ç­‰åŒäºä½¿ç”¨å˜é‡æˆ–å¸¸é‡</li>
</ul>
<hr>
<h2 id="ä¸‰ã€å¸¦è¿”å›å€¼çš„æ–¹æ³•">ä¸‰ã€å¸¦è¿”å›å€¼çš„æ–¹æ³•</h2>
<p><strong>å®šä¹‰æ–¹æ³•ä¸è°ƒç”¨</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¼å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> æ•°æ®ç±»å‹ æ–¹æ³•å(å‚æ•°)&#123;</span><br><span class="line">	<span class="keyword">return</span> æ•°æ®;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŒƒä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getMax</span><span class="params">(<span class="type">int</span> n1,<span class="type">int</span> n2)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n1&gt;n2?n1:n2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a=getMax(<span class="number">5</span>,<span class="number">6</span>);</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>æ–¹æ³•ä¸èƒ½åµŒå¥—å®šä¹‰</li>
<li><code>void</code>è¡¨ç¤ºæ— è¿”å›å€¼ï¼Œå¯ä»¥çœç•¥<code>return</code>ï¼Œä¹Ÿå¯ä»¥ä¸çœç•¥ï¼Œä½†åé¢ä¸èƒ½åŠ æ•°æ®ã€‚</li>
</ul>
<hr>
<h2 id="å››ã€æ–¹æ³•é‡è½½">å››ã€æ–¹æ³•é‡è½½</h2>
<p>æ–¹æ³•é‡è½½æŒ‡åŒä¸€ä¸ªç±»ä¸­å®šä¹‰çš„å¤šä¸ªæ–¹æ³•ä¹‹é—´çš„å…³ç³»ï¼Œæ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„å¤šä¸ªæ–¹æ³•äº’ç›¸æ„æˆé‡è½½ã€‚</p>
<ul>
<li>å¤šä¸ªæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­</li>
<li>å¤šä¸ªæ–¹æ³•å…·æœ‰ç›¸åŒçš„æ–¹æ³•å</li>
<li>å¤šä¸ªæ–¹æ³•çš„å‚æ•°ä¸åŒï¼Œç±»å‹ä¸åŒæˆ–æ•°é‡ä¸åŒ</li>
</ul>
<p>é‡è½½ä»…é’ˆå¯¹å‚æ•°è¿›è¡Œè¯†åˆ«ï¼Œä¸è¿”å›å€¼æ— å…³ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<p>è®¾è®¡ä¸€ä¸ªå…¼å®¹æ•´æ•°ç±»å‹çš„æ¯”è¾ƒæ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">compare</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a==b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">compare</span><span class="params">(<span class="type">short</span> a,<span class="type">short</span> b)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a==b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">compare</span><span class="params">(<span class="type">byte</span> a,<span class="type">byte</span> b)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a==b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">compare</span><span class="params">(<span class="type">long</span> a,<span class="type">long</span> b)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a==b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">compare(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">compare(<span class="type">short</span>(<span class="number">1</span>),<span class="type">short</span>(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äº”ã€æ–¹æ³•å‚æ•°ä¼ é€’">äº”ã€æ–¹æ³•å‚æ•°ä¼ é€’</h2>
<p>åŸºæœ¬ç±»å‹çš„å‚æ•°ï¼Œå„ä¸ªæ–¹æ³•æ˜¯éš”å¼€è¿›è¡Œçš„(ä½œç”¨åŸŸ)ï¼Œæ‰€ä»¥å½¢å‚å¹¶ä¸ä¼šå½±å“å®å‚çš„å€¼ã€‚</p>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220528132130223.png" alt="image-20220528132130223" style="zoom:50%;">
<p>å¯¹äºå¼•ç”¨å‚æ•°ï¼Œç”±äºä¼ è¿›å»äº†å †å†…å­˜ï¼Œæ‰€ä»¥ä¿®æ”¹æ—¶ä¼šåœ¨å †å†…å­˜é‡Œä¿®æ”¹ï¼Œå½¢å‚ä¼ é€’çš„æ˜¯å †åœ°å€ã€‚</p>
<p><img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220528132800842.png" alt="image-20220528132800842"></p>
<hr>
<p><strong>Debug</strong>ï¼šæ˜¯ä¾›ç¨‹åºå‘˜ä½¿ç”¨çš„ç¨‹åºè°ƒè¯•å·¥å…·ï¼Œå®ƒå¯ç”¨äºæŸ¥çœ‹ç¨‹åºçš„æ‰§è¡Œæµç¨‹ï¼Œä¹Ÿå¯ä»¥ç”¨äºè¿½è¸ªç¨‹åºæ‰§è¡Œè¿‡ç¨‹æ¥è°ƒè¯•ç¨‹åºã€‚</p>
<p>Debugè°ƒè¯•åˆç§°æ–­ç‚¹è°ƒè¯•ï¼Œæ–­ç‚¹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œå‘Šè¯‰æˆ‘ä»¬ä»å“ªé‡Œå¼€å§‹æŸ¥çœ‹ã€‚</p>
<hr>
<h1>ç¬¬ä¸ƒç«   ç±»å’Œå¯¹è±¡</h1>
<hr>
<h2 id="ä¸€ã€ç±»å’Œå¯¹è±¡">ä¸€ã€ç±»å’Œå¯¹è±¡</h2>
<p><strong>å¯¹è±¡</strong>ï¼šå®¢è§‚å­˜åœ¨çš„å®ä½“ã€‚</p>
<p><strong>ç±»</strong>ï¼šç±»æ˜¯å¯¹æ˜¾ç¤ºç”Ÿæ´»ä¸­ä¸€ç±»å…·æœ‰å…±åŒå±æ€§å’Œè¡Œä¸ºçš„äº‹ç‰©çš„æŠ½è±¡ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ç±»æ˜¯å¯¹è±¡çš„æ•°æ®ç±»å‹</li>
<li>ç±»æ˜¯å…·æœ‰ç›¸åŒå±æ€§å’Œè¡Œä¸ºçš„ä¸€ç»„å¯¹è±¡çš„é›†åˆ</li>
</ul>
<p>åœ¨Javaç¨‹åºä¸­ï¼Œç±»æ˜¯åŸºæœ¬ç»„æˆå•ä½ï¼Œå®ƒå°†ç¡®å®šå¯¹è±¡ä¼šæ‹¥æœ‰çš„å±æ€§å’Œè¡Œä¸ºã€‚</p>
<p><strong>ç±»çš„ç»„æˆ</strong>ï¼šå±æ€§å’Œè¡Œä¸º</p>
<ul>
<li>å±æ€§ï¼šé€šè¿‡æˆå‘˜å˜é‡æ¥ä½“ç°</li>
<li>è¡Œä¸ºï¼šé€šè¿‡è¡Œä¸ºæ–¹æ³•æ¥ä½“ç°</li>
</ul>
<p><strong>ç±»çš„å®šä¹‰</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class ç±»å&#123;</span><br><span class="line">	<span class="comment">// æˆå‘˜å˜é‡</span></span><br><span class="line">	å˜é‡<span class="number">1</span>çš„æ•°æ®ç±»å‹ å˜é‡<span class="number">1</span>;</span><br><span class="line">	å˜é‡<span class="number">2</span>çš„æ•°æ®ç±»å‹ å˜é‡<span class="number">2</span>;</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// æˆå‘˜æ–¹æ³•</span></span><br><span class="line">	æ–¹æ³•<span class="number">1</span>;</span><br><span class="line">	æ–¹æ³•<span class="number">2</span>;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Phone</span>&#123;</span><br><span class="line">    <span class="comment">// æˆå‘˜å˜é‡</span></span><br><span class="line">    String brand;</span><br><span class="line">    <span class="type">int</span> price;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æˆå‘˜æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Calling&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»ºå¹¶ä½¿ç”¨å¯¹è±¡</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">Phone p=<span class="keyword">new</span> <span class="title class_">Phone</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æˆå‘˜å˜é‡</span></span><br><span class="line">p.brand; <span class="comment">// ä¼šå¾—åˆ°é»˜è®¤å€¼å“¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æˆå‘˜æ–¹æ³•</span></span><br><span class="line">p.call();</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ‹å€¼</span></span><br><span class="line">p.brand=<span class="string">&quot;OPPO&quot;</span>;</span><br><span class="line">p.price=<span class="number">3000</span>;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äºŒã€å¯¹è±¡å†…å­˜å›¾">äºŒã€å¯¹è±¡å†…å­˜å›¾</h2>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220529005813465.png" alt="image-20220529005813465" style="zoom:50%;">
<p>åœ¨ç”³è¯·å¯¹è±¡æ—¶ï¼Œä¼šåœ¨æ ˆå†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªåœ°å€ï¼Œä½œä¸ºå¼•ç”¨ç±»å‹ï¼Œå¯¹è±¡åœ°å€ä¼šæŒ‡å‘å †å†…å­˜ä¸­å­˜å‚¨çš„æ–¹æ³•å’Œæˆå‘˜å˜é‡ã€‚</p>
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220529010535860.png" alt="image-20220529010535860" style="zoom:50%;">
<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220529010803689.png" alt="image-20220529010803689" style="zoom:50%;">
<hr>
<h2 id="ä¸‰ã€æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡">ä¸‰ã€æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡</h2>
<p><strong>æˆå‘˜å˜é‡</strong>ï¼šåœ¨ç±»ä¸­æ–¹æ³•å¤–çš„å˜é‡</p>
<p><strong>å±€éƒ¨å˜é‡</strong>ï¼šåœ¨ç±»ä¸­æ–¹æ³•ä¸­çš„å˜é‡</p>
<table>
<thead>
<tr>
<th style="text-align:center">åŒºåˆ«</th>
<th style="text-align:center">æˆå‘˜å˜é‡</th>
<th style="text-align:center">å±€éƒ¨å˜é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ç±»ä¸­ä½ç½®ä¸åŒ</td>
<td style="text-align:center">ç±»ä¸­æ–¹æ³•å¤–</td>
<td style="text-align:center">æ–¹æ³•å†…æˆ–æ–¹æ³•å£°æ˜ä¸Š</td>
</tr>
<tr>
<td style="text-align:center">å†…å­˜ä¸­ä½ç½®ä¸åŒ</td>
<td style="text-align:center">å †å†…å­˜</td>
<td style="text-align:center">æ ˆå†…å­˜</td>
</tr>
<tr>
<td style="text-align:center">ç”Ÿå‘½å‘¨æœŸä¸åŒ</td>
<td style="text-align:center">éšå¯¹è±¡å­˜åœ¨è€Œå­˜åœ¨ï¼Œéšå¯¹è±¡çš„æ¶ˆå¤±è€Œæ¶ˆå¤±</td>
<td style="text-align:center">éšæ–¹æ³•çš„è°ƒç”¨è€Œå­˜åœ¨</td>
</tr>
<tr>
<td style="text-align:center">åˆå§‹åŒ–å€¼ä¸åŒ</td>
<td style="text-align:center">æœ‰é»˜è®¤åˆå§‹å€¼</td>
<td style="text-align:center">æ— é»˜è®¤åˆå§‹å€¼ï¼Œå¿…é¡»å…ˆå®šä¹‰</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="å››ã€å°è£…">å››ã€å°è£…</h2>
<h3 id="4-1-privateå…³é”®å­—">4.1  privateå…³é”®å­—</h3>
<ul>
<li>æ˜¯ä¸€ä¸ªæƒé™ä¿®é¥°ç¬¦</li>
<li>å¯ä»¥ä¿®é¥°æˆå‘˜(æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•)</li>
<li>ä½œç”¨æ˜¯ä¿æŠ¤æˆå‘˜ä¸è¢«åˆ«çš„ç±»ä½¿ç”¨ï¼Œè¢«<code>private</code>ä¿®é¥°çš„æˆå‘˜åªåœ¨æœ¬ç±»ä¸­æ‰èƒ½è®¿é—®ã€‚</li>
</ul>
<p>é’ˆå¯¹è¢«<code>private</code>ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå¦‚æœéœ€è¦è¢«åˆ«çš„ç±»ä½¿ç”¨ï¼Œåˆ™éœ€è¦æä¾›ç›¸åº”çš„æ“ä½œ</p>
<ul>
<li><code>get å˜é‡å()</code>æ–¹æ³•ï¼Œç”¨äºè·å–æˆå‘˜å˜é‡çš„åç§°ï¼Œæ–¹æ³•ç”¨<code>public</code>ä¿®é¥°</li>
<li><code>set å˜é‡å(å‚æ•°)</code>æ–¹æ³•ï¼Œç”¨äºè®¾ç½®æˆå‘˜å˜é‡çš„å€¼ï¼Œæ–¹æ³•ç”¨<code>public</code>ä¿®é¥°</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">	String name;</span><br><span class="line">	<span class="keyword">private</span> age;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">getAge</span><span class="params">()</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">		age=a;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-thiså…³é”®å­—">4.2  thiså…³é”®å­—</h3>
<p><code>this</code>ä¿®é¥°çš„å˜é‡ç”¨äºæŒ‡ä»£æˆå‘˜å˜é‡ã€‚</p>
<ul>
<li>æ–¹æ³•çš„å½¢å‚å¦‚æœä¸æˆå‘˜å˜é‡åŒåï¼Œä¸å¸¦thisä¿®é¥°çš„å˜é‡æŒ‡çš„æ˜¯å½¢å‚ï¼Œè€Œä¸æ˜¯æˆå‘˜å˜é‡</li>
<li>æ–¹æ³•çš„å½¢å‚æ²¡æœ‰ä¸æˆå‘˜å˜é‡åŒåï¼Œä¸å¸¦thisä¿®é¥°çš„å˜é‡æŒ‡çš„æ˜¯æˆå‘˜å˜é‡</li>
</ul>
<p><code>this</code>å°±æ˜¯æ ˆå†…å­˜åœ°å€æœ¬èº«å“¦ã€‚</p>
<h3 id="4-3-å°è£…">4.3  å°è£…</h3>
<p><strong>æ¦‚è¿°</strong></p>
<ul>
<li>å°è£…æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾ä¹‹ä¸€</li>
<li>æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å¯¹å®¢è§‚ä¸–ç•Œçš„æ¨¡æ‹Ÿï¼Œå®¢è§‚ä¸–ç•Œæˆå‘˜å˜é‡éƒ½æ˜¯éšè—åœ¨å¯¹è±¡å†…éƒ¨çš„ï¼Œå¤–ç•Œæ˜¯æ— æ³•ç›´æ¥æ“ä½œçš„</li>
</ul>
<p><strong>åŸåˆ™</strong></p>
<ul>
<li>å°†ç±»çš„æŸäº›ä¿¡æ¯éšè—åœ¨ç±»å†…éƒ¨ï¼Œä¸å…è®¸å¤–éƒ¨ç¨‹åºç›´æ¥è®¿é—®ã€‚è€Œæ˜¯æä¾›å¯¹åº”çš„æ¥å£ã€‚</li>
</ul>
<p><strong>å¥½å¤„</strong></p>
<ul>
<li>æ§åˆ¶äº†æˆå‘˜å˜é‡çš„æ“ä½œï¼Œæé«˜äº†ä»£ç çš„å®‰å…¨æ€§</li>
<li>æä¾›äº†ä»£ç çš„å¤ç”¨æ€§</li>
</ul>
<hr>
<h3 id="äº”ã€æ„é€ æ–¹æ³•">äº”ã€æ„é€ æ–¹æ³•</h3>
<p>æ„é€ æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>()&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ä¸€ä¸ªç±»æ²¡æœ‰æ„é€ æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ã€‚</p>
<p><strong>æ ‡å‡†ç±»</strong></p>
<ul>
<li>æˆå‘˜å˜é‡
<ul>
<li>ä½¿ç”¨<code>private</code>ä¿®é¥°</li>
</ul>
</li>
<li>æ„é€ æ–¹æ³•
<ul>
<li>æä¾›ä¸€ä¸ªæ— å‚æ„é€ æ–¹æ³•</li>
<li>æä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå¸¦å‚æ„é€ æ–¹æ³•</li>
</ul>
</li>
<li>æˆå‘˜æ–¹æ³•
<ul>
<li>æä¾›æ¯ä¸ªæˆå‘˜å˜é‡çš„setã€getæ–¹æ³•</li>
<li>æä¾›æ˜¾ç¤ºå¯¹è±¡ä¿¡æ¯çš„showæ–¹æ³•</li>
</ul>
</li>
<li>åˆ›å»ºå¯¹è±¡å¹¶ä¸ºå…¶æˆå‘˜å˜é‡èµ‹å€¼çš„ä¸¤ç§æ–¹æ³•</li>
</ul>
<hr>
<h1>ç¬¬å…«ç«   å­—ç¬¦ä¸²</h1>
<hr>
<h2 id="ä¸€ã€API">ä¸€ã€API</h2>
<p>API(Application Programming Interface)åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£</p>
<p>Java APIï¼šåœ¨JDKä¸­æä¾›å„ç§åŠŸèƒ½çš„Javaç±»ï¼Œè¿™äº›ç±»å°†åº•å±‚çš„å®ç°å°è£…èµ·æ¥äº†ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™äº›ç±»æ˜¯å¦‚ä½•å®ç°çš„ï¼Œåªéœ€è¦å­¦ä¹ è¿™äº›ç±»æ˜¯å¦‚ä½•ä½¿ç”¨å³å¯ã€‚</p>
<hr>
<h2 id="äºŒã€String">äºŒã€String</h2>
<p>Stringç±»åœ¨<code>java.lang</code>åŒ…ä¸‹ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦é¢å¤–å¯¼å…¥ã€‚</p>
<p>Stringç±»ä»£è¡¨å­—ç¬¦ä¸²ï¼ŒJavaç¨‹åºä¸­æ‰€æœ‰å­—ç¬¦ä¸²æ–‡å­—éƒ½è¢«å®ç°ä¸ºæ­¤ç±»çš„å®ä¾‹ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>å­—ç¬¦ä¸²ä¸å¯å˜</li>
<li>å­—ç¬¦ä¸²å¯è¢«å…±äº«</li>
<li>å­—ç¬¦ä¸²åº•å±‚æ˜¯å­—èŠ‚æ•°ç»„</li>
</ul>
<p>é€šè¿‡<code>new</code>åˆ›å»ºçš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œæ¯æ¬¡<code>new</code>éƒ½ä¼šç”³è¯·ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œè™½ç„¶å†…å®¹ç›¸åŒï¼Œä½†ç»“æœä¸åŒã€‚</p>
<p>é€šè¿‡<code>&quot;&quot;</code>æ–¹å¼åˆ›å»ºçš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œåªè¦å­—å…¸åºç›¸åŒï¼Œæ— è®ºç¨‹åºä¸­ä»£ç å‡ºç°å‡ æ¬¡ï¼ŒJVMéƒ½åªä¼šå»ºç«‹ä¸€ä¸ªStringå¯¹è±¡ï¼Œå¹¶åœ¨å­—ç¬¦ä¸²æ± ä¸­ç»´æŠ¤ã€‚</p>
<p><strong>å­—ç¬¦ä¸²çš„æ¯”è¾ƒ</strong></p>
<p>ä½¿ç”¨<code>==</code>åšæ¯”è¾ƒï¼š</p>
<ul>
<li>åŸºæœ¬ç±»å‹ï¼šæ¯”è¾ƒæ•°æ®å€¼æ˜¯å¦ç›¸åŒ</li>
<li>å¼•ç”¨ç±»å‹ï¼šæ¯”è¾ƒåœ°å€å€¼æ˜¯å¦ç›¸åŒ</li>
</ul>
<p>å­—ç¬¦ä¸²æ˜¯å¯¹è±¡ï¼Œå¦‚æœç”¨<code>==</code>åˆ™æ˜¯æ¯”è¾ƒåœ°å€ã€‚ä¸ºäº†æ¯”è¾ƒå†…å®¹ï¼Œéœ€è¦ä¸€ä¸ªæ–°çš„æ–¹æ³•æ¥å®ç°ï¼š<code>equals()</code></p>
<p><code>public boolean equals(Object anObject)</code>:å°†æ­¤å­—ç¬¦ä¸²ä¸æŒ‡å®šå¯¹è±¡æ¯”è¾ƒ</p>
<p><code>s1.equals(s2)</code></p>
<p><strong>æ¡ˆä¾‹ä¸€  ç™»å½•ç³»ç»Ÿ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String username=<span class="string">&quot;UCAS&quot;</span>;</span><br><span class="line">        String password=<span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">        Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> sc.nextLine();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">pass</span> <span class="operator">=</span> sc.nextLine();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (name.equals(username) &amp;&amp; pass.equals(password)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="number">2</span>-i==<span class="number">0</span>)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;æ‚¨çš„è´¦å·å·²è¢«é”å®š&quot;</span>);    </span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;ç™»å½•å¤±è´¥&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹äºŒ  éå†å­—ç¬¦ä¸²</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">      System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²&quot;</span>);</span><br><span class="line">      String line=sc.nextLine();</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;line.length();i++)&#123;</span><br><span class="line">      	<span class="comment">// é€šè¿‡charAt(idx)è·å–ç´¢å¼•ä½ç½®çš„å­—ç¬¦</span></span><br><span class="line">          System.out.println(line.charAt(i));</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ä¸‰ã€StringBuilderimage-20220529095929563">ä¸‰ã€StringBuilder<img src="/2022/08/15/%E3%80%90Java%E3%80%91Java%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/image-20220529095929563.png" alt="image-20220529095929563"></h2>
<p>è‹¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ï¼Œæ¯æ¬¡æ‹¼æ¥éƒ½ä¼šæ„å»ºä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ï¼Œå³è€—æ—¶åˆæµªè´¹å†…å­˜ã€‚</p>
<p>StringBuilderæ˜¯ä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²ç±»ï¼Œå¯ä»¥æœ‰æ•ˆå¤„ç†ä¸Šè¿°é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºç©ºç™½å¯å˜</span></span><br><span class="line">StringBuilder sb=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå†…å®¹å¯å˜</span></span><br><span class="line">StringBuilder sb1=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ•°æ® è¿”å›æ•°æ®æœ¬èº«</span></span><br><span class="line">sb.append(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬æ¢</span></span><br><span class="line">sb.toString();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åè½¬</span></span><br><span class="line">sb.reverse();</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">arrayToString</span><span class="params">(<span class="type">int</span>[] arr)</span>&#123;</span><br><span class="line">	StringBuilder sb= <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">	sb.append(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(i== arr.length-<span class="number">1</span>)&#123;</span><br><span class="line">			sb.append(arr[i]);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			sb.append(arr[i]).append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	sb.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">	String s=sb.toString();</span><br><span class="line">	<span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1>ç¬¬ä¹ç«   é›†åˆ</h1>
<hr>
<h2 id="ä¸€ã€é›†åˆåŸºç¡€">ä¸€ã€é›†åˆåŸºç¡€</h2>
<p>é›†åˆæ˜¯ä¸€ç§æä¾›å¯å˜å­˜å‚¨ç©ºé—´çš„å­˜å‚¨æ¨¡å‹ç±»ï¼Œå­˜å‚¨çš„æ•°æ®å®¹é‡å¯ä»¥å‘ç”Ÿæ”¹å˜ã€‚</p>
<p><strong>ArrayList&lt;E&gt;</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•å</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">public ArrayList()</td>
<td style="text-align:center">åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆå¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:center">public boolean add(E e)</td>
<td style="text-align:center">è¿½åŠ åˆ°æœ«å°¾</td>
</tr>
<tr>
<td style="text-align:center">public void add(int index,E element)</td>
<td style="text-align:center">åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">public boolean remove(Object o)</td>
<td style="text-align:center">åˆ é™¤æŒ‡å®šå…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">public E remove(int index)</td>
<td style="text-align:center">åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">public E set(int index,E element)</td>
<td style="text-align:center">ä¿®æ”¹æŒ‡å®šå…ƒç´ ï¼Œè¿”å›è¢«ä¿®æ”¹å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">public E get(int index)</td>
<td style="text-align:center">è¿”å›æŒ‡å®šç´¢å¼•å¤„å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">public int size()</td>
<td style="text-align:center">è¿”å›é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°</td>
</tr>
</tbody>
</table>
<p><strong>æ¡ˆä¾‹ä¸€</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­˜å‚¨å­—ç¬¦ä¸²å¹¶éå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">    ArrayList&lt;String&gt; array = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ·»åŠ å­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">    array.add(<span class="string">&quot;Y&quot;</span>);</span><br><span class="line">    array.add(<span class="string">&quot;ou&quot;</span>);</span><br><span class="line">    array.add(<span class="string">&quot;Bui&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// éå†é›†åˆ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.size();i++)&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> array.get(i);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹äºŒ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Studentç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name,<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">        <span class="built_in">this</span>.age=age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.age=age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é›†åˆæ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] arg)</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        ArrayList&lt;Student&gt; array= <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Student&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·»åŠ åˆ°é›†åˆ</span></span><br><span class="line">        addStudent(array);</span><br><span class="line">        addStudent(array);</span><br><span class="line">        addStudent(array);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.size();i++)&#123;</span><br><span class="line">            Student s= array.get(i);</span><br><span class="line">            System.out.println(s.getName()+<span class="string">&quot;,&quot;</span>+s.getAge());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addStudent</span><span class="params">(ArrayList&lt;Student&gt; array)</span>&#123;</span><br><span class="line">        Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;Student&#x27;s name&quot;</span>);</span><br><span class="line"></span><br><span class="line">        String name=sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;Student&#x27;s age&quot;</span>);</span><br><span class="line">        <span class="type">int</span> age=sc.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        s.setName(name);</span><br><span class="line">        s.setAge(age);</span><br><span class="line">        array.add(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1>ç¬¬åç«   é¢å‘å¯¹è±¡</h1>
<hr>
<h2 id="ä¸€ã€ç»§æ‰¿">ä¸€ã€ç»§æ‰¿</h2>
<h3 id="1-1-ç»§æ‰¿æ¦‚è¿°">1.1 ç»§æ‰¿æ¦‚è¿°</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¼å¼</span></span><br><span class="line"><span class="keyword">public</span> class å­ç±»å extends çˆ¶ç±»å&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŒƒä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">children</span> <span class="keyword">extends</span> <span class="title class_">parents</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>çˆ¶ç±»ä¹Ÿç§°åŸºç±»ã€è¶…ç±»ï¼Œå­ç±»ä¹Ÿç§°æ´¾ç”Ÿç±»ã€‚</p>
<p>å­ç±»å¯ä»¥æœ‰çˆ¶ç±»çš„å†…å®¹å’Œè‡ªå·±ç‹¬ç‰¹çš„å†…å®¹ã€‚</p>
<h3 id="1-2-ç»§æ‰¿çš„å¥½å¤„å’Œå¼Šç«¯">1.2  ç»§æ‰¿çš„å¥½å¤„å’Œå¼Šç«¯</h3>
<p><strong>å¥½å¤„</strong></p>
<ul>
<li>æé«˜äº†ä»£ç çš„å¤ç”¨æ€§</li>
<li>æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§</li>
</ul>
<p><strong>å¼Šç«¯</strong></p>
<ul>
<li>å¢åŠ äº†ç±»çš„è€¦åˆæ€§ï¼Œå‰Šå¼±äº†å­ç±»çš„ç‹¬ç«‹æ€§</li>
</ul>
<h3 id="1-3-ç»§æ‰¿ä¸­å˜é‡çš„è®¿é—®ç‰¹ç‚¹">1.3  ç»§æ‰¿ä¸­å˜é‡çš„è®¿é—®ç‰¹ç‚¹</h3>
<p>åœ¨å­ç±»æ–¹æ³•ä¸­è®¿é—®ä¸€ä¸ªå˜é‡</p>
<ul>
<li>å­ç±»å±€éƒ¨èŒƒå›´æ‰¾</li>
<li>å­ç±»æˆå‘˜èŒƒå›´æ‰¾</li>
<li>çˆ¶ç±»æˆå‘˜èŒƒå›´æ‰¾</li>
<li>æŠ¥é”™</li>
</ul>
<h3 id="1-4-Super">1.4  Super</h3>
<p>ä¸<code>this</code>å…³é”®å­—å·®ä¸å¤šï¼Œ<code>super</code>å…³é”®å­—ç”¨äºåœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„æˆå‘˜å’Œæ–¹æ³•ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">å…³é”®å­—</th>
<th style="text-align:center">è®¿é—®æˆå‘˜å˜é‡</th>
<th style="text-align:center">è®¿é—®æ„é€ æ–¹æ³•</th>
<th style="text-align:center">è®¿é—®æˆå‘˜æ–¹æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">this</td>
<td style="text-align:center">this.æˆå‘˜</td>
<td style="text-align:center">this(â€¦)</td>
<td style="text-align:center">this.æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:center">super</td>
<td style="text-align:center">super.æˆå‘˜</td>
<td style="text-align:center">super(â€¦)</td>
<td style="text-align:center">super.æ–¹æ³•</td>
</tr>
</tbody>
</table>
<h3 id="1-5-æ„é€ æ–¹æ³•">1.5  æ„é€ æ–¹æ³•</h3>
<p>å­ç±»ä¸­æ‰€æœ‰çš„æ„é€ æ–¹æ³•éƒ½ä¼šé»˜è®¤è®¿é—®çˆ¶ç±»ä¸­æ— å‚çš„æ„é€ æ–¹æ³•ã€‚å› è€Œï¼Œåœ¨å­ç±»è¿›è¡Œåˆå§‹åŒ–ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆå®Œæˆçˆ¶ç±»æ•°æ®çš„åˆå§‹åŒ–ã€‚</p>
<p>åœ¨æ¯ä¸ªå­ç±»æ„é€ æ–¹æ³•çš„ç¬¬ä¸€æ¡è¯­å¥é»˜è®¤éƒ½æ˜¯<code>super()</code></p>
<p>é¢å¯¹å¸¦å‚çš„çˆ¶ç±»ï¼Œè¦ä¹ˆç”¨<code>super()</code>æ˜¾ç¤ºè°ƒç”¨ï¼Œè¦ä¹ˆåœ¨çˆ¶ç±»ä¸­æ„å»ºä¸ªæ— å‚æ–¹æ³•ã€‚å½“è°ƒç”¨æ„é€ æ–¹æ³•æ—¶ï¼Œçˆ¶ç±»å°†ä¼šè¢«ç½®å…¥å †å†…å­˜ã€‚</p>
<h3 id="1-6-æ–¹æ³•é‡å†™">1.6  æ–¹æ³•é‡å†™</h3>
<p>æ–¹æ³•é‡å†™æ¦‚è¿°</p>
<ul>
<li>å­ç±»ä¸­å‡ºç°äº†å’Œçˆ¶ç±»ä¸­ä¸€æ¨¡ä¸€æ ·çš„æ–¹æ³•å£°æ˜</li>
<li>æ³¨æ„åŒºåˆ†é‡è½½å’Œé‡å†™</li>
</ul>
<p>ä¾‹å¦‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Phone</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(String name)</span>&#123;</span><br><span class="line">		System.out.println(name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XiaoMi</span> <span class="keyword">extends</span> <span class="title class_">Phone</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out,println(<span class="string">&quot;H&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Override</p>
<ul>
<li>æ˜¯ä¸€ä¸ªæ³¨è§£</li>
<li>å¯ä»¥å¸®æˆ‘ä»¬æ£€æŸ¥é‡å†™æ–¹æ³•å£°æ˜çš„æ­£ç¡®æ€§</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>æ–¹æ³•é‡å†™ä¸èƒ½é‡å†™ç§æœ‰æ–¹æ³•</li>
<li>é‡å†™æ–¹æ³•è®¿é—®æƒé™ä¸èƒ½ä½äºçˆ¶ç±»</li>
<li>Javaä¸­ä¸èƒ½å¤šç±»ç»§æ‰¿ï¼Œä½†å¯ä»¥å¤šå±‚ç»§æ‰¿</li>
</ul>
<hr>
<h2 id="äºŒã€åŒ…ä¸ä¿®é¥°ç¬¦">äºŒã€åŒ…ä¸ä¿®é¥°ç¬¦</h2>
<h3 id="2-1-åŒ…">2.1  åŒ…</h3>
<p>åœ¨Javaä¸­ï¼ŒåŒ…å°±æ˜¯æ–‡ä»¶å¤¹ï¼Œç”¨äºå¯¹ç±»è¿›è¡Œåˆ†çº§ç®¡ç†ã€‚</p>
<p><strong>æ ¼å¼</strong></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>a</mi><mi>g</mi><mi>e</mi><mtext>Â åŒ…å</mtext><mn>1.</mn><mtext>åŒ…å</mtext><mn>2</mn></mrow><annotation encoding="application/x-tex">package\ åŒ…å1.åŒ…å2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">ka</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mspace">Â </span><span class="mord cjk_fallback">åŒ…å</span><span class="mord">1.</span><span class="mord cjk_fallback">åŒ…å</span><span class="mord">2</span></span></span></span></p>
<p>åœ¨ç¨‹åºä¸­ä½¿ç”¨<code>package</code>æ–‡ä»¶å¤¹ï¼Œä¼šå°†<code>class</code>æ”¾åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p><strong>å¯¼å…¥</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> åŒ…<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-ä¿®é¥°ç¬¦">2.2  ä¿®é¥°ç¬¦</h3>
<p><strong>æƒé™ä¿®é¥°ç¬¦</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">ä¿®é¥°ç¬¦</th>
<th style="text-align:center">åŒä¸€ç±»</th>
<th style="text-align:center">åŒä¸€åŒ…å­ç±»æ— å…³ç±»</th>
<th style="text-align:center">ä¸åŒåŒ…å­ç±»</th>
<th style="text-align:center">ä¸åŒåŒ…æ— å…³ç±»</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">private</td>
<td style="text-align:center">1</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">é»˜è®¤</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">protected</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">public</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p><strong>çŠ¶æ€ä¿®é¥°ç¬¦</strong></p>
<p><code>final</code>å…³é”®å­—å¯ç”¨äºä¿®é¥°æˆå‘˜æ–¹æ³•ã€æˆå‘˜å˜é‡ã€ç±»ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>ä¿®é¥°æ–¹æ³•ï¼šè¡¨ç¤ºè¯¥æ–¹æ³•ä¸ºæœ€ç»ˆæ–¹æ³•ï¼Œä¸èƒ½è¢«é‡å†™</li>
<li>ä¿®é¥°å˜é‡ï¼šè¡¨ç¤ºè¯¥å˜é‡æ—¶å¸¸é‡ï¼Œä¸èƒ½è¢«å†æ¬¡èµ‹å€¼</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> pig;</span><br></pre></td></tr></table></figure>
<p>å½“ä¿®é¥°å˜é‡æ—¶åŸºæœ¬ç±»å‹ï¼Œåˆ™æ•°æ®å€¼ä¸èƒ½å‘ç”Ÿæ”¹å˜ã€‚</p>
<p>å½“ä¿®é¥°å˜é‡ä¸ºå¼•ç”¨ç±»å‹ï¼Œåˆ™æ•°æ®åœ°å€å€¼ä¸èƒ½æ”¹å˜ï¼Œä½†å†…å®¹å¯å˜ã€‚</p>
<p><code>static</code>å…³é”®å­—å¯ä»¥ä¿®é¥°æˆå‘˜æ–¹æ³•å’Œå˜é‡ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>è¢«ç±»æ‰€æœ‰å¯¹è±¡å…±äº«
<ul>
<li>ä¹Ÿæ˜¯åˆ¤æ–­æ˜¯å¦èƒ½èƒ½å¤Ÿä½¿ç”¨é™æ€å…³é”®å­—çš„æ¡ä»¶</li>
</ul>
</li>
<li>å¯é€šè¿‡ç±»åè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡åè°ƒç”¨</li>
</ul>
<p>éé™æ€æˆå‘˜æ–¹æ³•ï¼š</p>
<ul>
<li>èƒ½å¤Ÿè®¿é—®é™æ€å’Œéé™æ€çš„å˜é‡å’Œæ–¹æ³•</li>
</ul>
<p>é™æ€æˆå‘˜æ–¹æ³•ï¼š</p>
<ul>
<li>åªèƒ½è®¿é—®é™æ€æˆå‘˜æ–¹æ³•å’Œå˜é‡</li>
</ul>
<hr>
<h2 id="ä¸‰ã€-å¤šæ€">ä¸‰ã€ å¤šæ€</h2>
<h3 id="3-1-æ¦‚è¿°">3.1  æ¦‚è¿°</h3>
<p>åŒä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ä¸åŒæ—¶åˆ»è¡¨ç°å‡ºæ¥çš„ä¸åŒå½¢æ€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// catç±»å¯ä»¥ç”Ÿæˆcatå¯¹è±¡æˆ–æ˜¯animalå¯¹è±¡</span></span><br><span class="line"><span class="type">cat</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">cat</span>();</span><br><span class="line"><span class="comment">// çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</span></span><br><span class="line"><span class="type">animal</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">cat</span>();</span><br></pre></td></tr></table></figure>
<p>å¤šæ€çš„å‰æå’Œä½“ç°ï¼š</p>
<ul>
<li>æœ‰ç»§æ‰¿/å®ç°å…³ç³»</li>
<li>æœ‰æ–¹æ³•é‡å†™</li>
<li>æœ‰çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</li>
</ul>
<h3 id="3-2-æˆå‘˜è®¿é—®ç‰¹ç‚¹">3.2  æˆå‘˜è®¿é—®ç‰¹ç‚¹</h3>
<p>æˆå‘˜å˜é‡ï¼šç¼–è¯‘å’Œæ‰§è¡Œçœ‹å·¦è¾¹ï¼Œå³æœ€ç»ˆæ¥æ”¶åˆ°å¤šæ€å¯¹è±¡çš„ç±»å‹ã€‚</p>
<p>æˆå‘˜æ–¹æ³•ï¼šç¼–è¯‘çœ‹å·¦è¾¹ï¼Œæ‰§è¡Œçœ‹å³è¾¹ï¼Œå³ç”Ÿæˆå¯¹è±¡çš„ç±»å‹ã€‚</p>
<p>ç©¶å…¶åŸå› æ˜¯æˆå‘˜æ–¹æ³•æœ‰é‡å†™ï¼Œè€Œæˆå‘˜å˜é‡æ²¡æœ‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">	<span class="type">int</span> age=<span class="number">40</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;åƒé¥­&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">cat</span> extend Animal&#123;</span><br><span class="line">	<span class="type">int</span> age=<span class="number">20</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;çŒ«&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal a= <span class="keyword">new</span> <span class="title class_">cat</span>();</span><br><span class="line">System.out.println(a.age); <span class="comment">// 40</span></span><br><span class="line">a.eat(); <span class="comment">// çŒ«</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-å¤šæ€çš„å¥½å¤„å’Œå¼Šç«¯">3.3  å¤šæ€çš„å¥½å¤„å’Œå¼Šç«¯</h3>
<p>å¥½å¤„ï¼šåœ¨å£°æ˜æ–¹æ³•æ—¶ï¼Œåœ¨çˆ¶ç±»å‹é‡Œå£°æ˜ï¼Œä½†æ˜¯åœ¨å­ç±»å‹é‡Œå®šä¹‰å…·ä½“å®ç°ï¼Œå‚ä¸æ“ä½œã€‚æé«˜äº†ç¨‹åºçš„æ‰©å±•æ€§</p>
<p>å¼Šç«¯ï¼šä¸èƒ½ä½¿ç”¨å­ç±»ç‰¹æœ‰çš„æ–¹æ³•</p>
<h3 id="3-4-å¤šæ€ä¸­çš„è½¬å‹">3.4  å¤šæ€ä¸­çš„è½¬å‹</h3>
<p>ç›®çš„ï¼šè®¿é—®å­ç±»ä¸­çš„ç‰¹æœ‰æ–¹æ³•</p>
<p>æ“ä½œï¼šå¼ºè½¬(å‘ä¸‹è½¬å‹)</p>
<hr>
<h2 id="å››ã€-æŠ½è±¡ç±»">å››ã€ æŠ½è±¡ç±»</h2>
<h3 id="4-1-æ¦‚è¿°">4.1  æ¦‚è¿°</h3>
<p>ä¸€ä¸ªæ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•åº”å®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œè€Œå«æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»å®šä¹‰ä¸ºæŠ½è±¡ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span>()&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŠ½è±¡ç±»å¹¶ä¸èƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p>
<h3 id="4-2-æŠ½è±¡ç±»çš„ç‰¹ç‚¹">4.2  æŠ½è±¡ç±»çš„ç‰¹ç‚¹</h3>
<ul>
<li>æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•å¿…é¡»ä½¿ç”¨<code>abstract</code>å…³é”®è¯ä¿®é¥°</li>
<li>æŠ½è±¡ç±»ä¸­ä¸ä¸€å®šæœ‰æŠ½è±¡æ–¹æ³•ï¼Œæœ‰æŠ½è±¡æ–¹æ³•çš„ç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»</li>
<li>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</li>
<li>æŠ½è±¡ç±»çš„å­ç±»è¦ä¹ˆé‡å†™æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œè¦ä¹ˆæ˜¯æŠ½è±¡ç±»</li>
</ul>
<h3 id="4-3-æŠ½è±¡ç±»çš„æˆå‘˜ç‰¹ç‚¹">4.3  æŠ½è±¡ç±»çš„æˆå‘˜ç‰¹ç‚¹</h3>
<ul>
<li>æˆå‘˜å˜é‡
<ul>
<li>å¯ä»¥æ˜¯å˜é‡</li>
<li>ä¹Ÿå¯ä»¥æ˜¯å¸¸é‡</li>
</ul>
</li>
<li>æ„é€ æ–¹æ³•
<ul>
<li>æœ‰æ„é€ æ–¹æ³•ï¼Œä½†ä¸èƒ½å®ä¾‹åŒ–ï¼Œç”¨äºå­ç±»è®¿é—®çˆ¶ç±»æ•°æ®çš„åˆå§‹åŒ–</li>
</ul>
</li>
<li>æˆå‘˜æ–¹æ³•
<ul>
<li>å¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•ï¼šé™åˆ¶æˆå‘˜å¿…é¡»å®ŒæˆæŸäº›åŠ¨ä½œ</li>
<li>ä¹Ÿå¯ä»¥æœ‰éæŠ½è±¡æ–¹æ³•ï¼šæé«˜ä»£ç å¤ç”¨æ€§</li>
</ul>
</li>
</ul>
<hr>
<h2 id="5ã€-æ¥å£">5ã€ æ¥å£</h2>
<h3 id="5-1-æ¦‚è¿°">5.1  æ¦‚è¿°</h3>
<p>æ¥å£æ˜¯ä¸€ç§å…¬å…±çš„è§„èŒƒæ ‡å‡†ï¼Œåªè¦ç¬¦åˆè§„èŒƒï¼Œé‚£ä¹ˆå¤§å®¶éƒ½å¯ä»¥é€šç”¨ã€‚Javaä¸­çš„æ¥å£æ›´å¤šçš„ä½“ç°åœ¨å¯¹è¡Œä¸ºçš„æŠ½è±¡ã€‚</p>
<h3 id="5-2-æ¥å£çš„ç‰¹ç‚¹">5.2  æ¥å£çš„ç‰¹ç‚¹</h3>
<ul>
<li>
<p>æ¥å£ç”¨å…³é”®å­—<code>interface</code>ä¿®é¥°</p>
<ul>
<li>
<pre><code class="language-java">public interface æ¥å£å&#123;&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ ç±»å®ç°æ¥å£ç”¨`implements`è¡¨ç¤º</span><br><span class="line"></span><br><span class="line">  + ```java</span><br><span class="line">    public class ç±»å implements æ¥å£å&#123;&#125;</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
</li>
<li>
<p>æ¥å£ä¸èƒ½å®ä¾‹åŒ–</p>
</li>
<li>
<p>æ¥å£çš„å®ç°ç±»</p>
<ul>
<li>è¦ä¹ˆé‡å†™æ¥å£ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•</li>
<li>è¦ä¹ˆæ˜¯æŠ½è±¡ç±»</li>
</ul>
</li>
</ul>
<h3 id="5-3-æ¥å£çš„æˆå‘˜ç‰¹ç‚¹">5.3  æ¥å£çš„æˆå‘˜ç‰¹ç‚¹</h3>
<ul>
<li>æˆå‘˜å˜é‡
<ul>
<li>åªèƒ½æ˜¯å¸¸é‡</li>
<li>é»˜è®¤ä¿®é¥°ç¬¦ï¼š<code>public static final</code></li>
</ul>
</li>
<li>æ„é€ æ–¹æ³•
<ul>
<li>æ¥å£æ²¡æœ‰æ„é€ æ–¹æ³•ï¼Œå› ä¸ºæ¥å£ä¸»è¦æ˜¯å¯¹è¡Œä¸ºè¿›è¡ŒæŠ½è±¡çš„ï¼Œæ˜¯æœ‰å…·ä½“å­˜åœ¨</li>
<li>ä¸€ä¸ªç±»å¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼Œé»˜è®¤ç»§æ‰¿è‡ª<code>Object</code>ç±»</li>
</ul>
</li>
<li>æˆå‘˜æ–¹æ³•
<ul>
<li>åªèƒ½æ˜¯æŠ½è±¡æ–¹æ³•</li>
</ul>
</li>
</ul>
<h3 id="5-4-ç±»å’Œæ¥å£çš„å…³ç³»">5.4  ç±»å’Œæ¥å£çš„å…³ç³»</h3>
<ul>
<li>
<p>ç±»å’Œç±»</p>
<ul>
<li>ç»§æ‰¿å…³ç³»ï¼Œåªèƒ½å•ç»§æ‰¿ä½†å¯ä»¥å¤šå±‚ç»§æ‰¿</li>
</ul>
</li>
<li>
<p>ç±»å’Œæ¥å£</p>
<ul>
<li>å®ç°å…³ç³»ï¼Œå¯ä»¥å•å®ç°æˆ–æ˜¯å¤šå®ç°ï¼Œæˆ–æ˜¯ç»§æ‰¿å®ç°</li>
</ul>
</li>
<li>
<p>æ¥å£å’Œæ¥å£</p>
<ul>
<li>ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥å•ç»§æ‰¿ä¹Ÿå¯ä»¥å¤šç»§æ‰¿</li>
</ul>
</li>
</ul>
<h3 id="5-5-æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«">5.5  æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«</h3>
<ul>
<li>æˆå‘˜åŒºåˆ«</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">æŠ½è±¡ç±»</th>
<th style="text-align:center">æ¥å£</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å˜é‡ï¼Œå¸¸é‡</td>
<td style="text-align:center">å¸¸é‡</td>
</tr>
<tr>
<td style="text-align:center">æœ‰æ„é€ æ–¹æ³•</td>
<td style="text-align:center">æ— æ„é€ æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:center">æœ‰æŠ½è±¡æˆ–éæŠ½è±¡æ–¹æ³•</td>
<td style="text-align:center">åªæœ‰æŠ½è±¡æ–¹æ³•</td>
</tr>
</tbody>
</table>
<ul>
<li>å…³ç³»åŒºåˆ«
<ul>
<li>è§3.4</li>
</ul>
</li>
</ul>
<p><strong>æ¡ˆä¾‹</strong></p>
<ul>
<li>å®šä¹‰ä¸€ä¸ªé—¨å¯¹è±¡ï¼Œæœ‰<code>open</code>å’Œ<code>close</code>ä¸¤ä¸ªåŠ¨ä½œ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Door</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">open</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Door</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">open</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Java </tag>
            
            <tag> ç¼–ç¨‹è¯­è¨€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Unit5 ä¸‰å¤§ä»å¥]]></title>
      <url>/2022/08/10/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit5%20%E4%B8%89%E5%A4%A7%E4%BB%8E%E5%8F%A5/</url>
      <content type="html"><![CDATA[<h2 id="ä¸‰å¤§ä»å¥">ä¸‰å¤§ä»å¥</h2>
<p>æ ¹æ®æ€§è´¨ä¸ç±»å‹ï¼Œä»å¥å¯åˆ†ä¸ºä»¥ä¸‹ä¸‰å¤§ç±»ï¼š</p>
<ul>
<li>åè¯æ€§ä»å¥</li>
<li>å®šè¯­ä»å¥</li>
<li>çŠ¶è¯­ä»å¥</li>
</ul>
<hr>
<p><strong>åè¯æ€§ä»å¥</strong></p>
<p>åœ¨å¥å­ä¸­å……å½“åè¯ï¼Œæ˜¯è¾ƒä¸ºå¸¸è§çš„ä»å¥ã€‚å¦‚ä¸»è¯­ã€è¡¨è¯­ã€å®¾è¯­ã€åŒä½è¯­ä»å¥ç­‰ã€‚</p>
<p><strong>å®šè¯­ä»å¥</strong></p>
<p>åœ¨å¤åˆå¥ä¸­èµ·åˆ°å®šè¯­çš„ä½œç”¨ï¼Œç”¨äºä¿®é¥°åè¯è¯æ€§ç»“æ„ï¼Œå…¶æœ€æ˜¾çœ¼çš„ç‰¹å¾å°±æ˜¯<code>å…ˆè¡Œè¯</code>å’Œ<code>å…³ç³»è¯</code>ã€‚å…ˆè¡Œè¯(ä¸­å¿ƒè¯)å³ä¸ºè¢«ä¿®é¥°çš„å¯¹è±¡ï¼Œå…³ç³»è¯åˆ™æ˜¯èµ·åˆ°å¼•å¯¼å®šè¯­ä»å¥çš„ä½œç”¨ã€‚</p>
<p><strong>çŠ¶è¯­ä»å¥</strong></p>
<p>çŠ¶è¯­ä»å¥åœ¨å¤åˆå¥ä¸­èµ·åˆ°çŠ¶è¯­ä½œç”¨ï¼Œæ ¼å¤–éœ€è¦æ³¨æ„ä¹å¤§çŠ¶è¯­ä»å¥çš„å¼•å¯¼è¯ã€‚</p>
<hr>
<h2 id="ä¸€ã€åè¯æ€§ä»å¥">ä¸€ã€åè¯æ€§ä»å¥</h2>
<p>é¡¾åæ€ä¹‰å•¦ï¼Œåè¯æ€§ä»å¥æŒ‡åœ¨å¥å­ä¸­èµ·åˆ°ç›¸å½“äºåè¯çš„ä»å¥ï¼ŒæŒ‰ç…§ç±»å‹å¯ç»†åŒ–ä¸ºå››å¤§ç±»å‹ï¼š</p>
<ul>
<li>ä¸»è¯­ä»å¥</li>
<li>å®¾è¯­ä»å¥</li>
<li>è¡¨è¯­ä»å¥</li>
<li>åŒä½è¯­ä»å¥</li>
</ul>
<blockquote>
<p>ä¸¾ä¸ªæ —å­~</p>
</blockquote>
<p>ğŸŒŸ What she said is wrong.  ä¸»</p>
<p>ğŸŒŸ I said that she was wrong.  å®¾</p>
<p>ğŸŒŸ I am who I am.  è¡¨</p>
<p>ğŸŒŸ The news that he will come back is true. åŒ</p>
<h3 id="çºµè§ˆå…¨å±€">çºµè§ˆå…¨å±€</h3>
<img src="https://pic2.zhimg.com/80/v2-a2c2a851cd3cc67d38953cc1660146fd_1440w.jpg" style="zoom:50%;">
<h3 id="ä¸€ã€åè¯æ€§ä»å¥çš„è¿æ¥è¯">ä¸€ã€åè¯æ€§ä»å¥çš„è¿æ¥è¯</h3>
<p>å¼•å¯¼åè¯æ€§ä»å¥çš„è¿æ¥è¯æœ‰ä¸‰ç§ï¼Œ<code>å•çº¯è¿è¯</code>ï¼Œ<code>è¿æ¥ä»£è¯</code>ï¼Œ<code>è¿æ¥å‰¯è¯</code></p>
<p><strong>å•çº¯è¿è¯</strong></p>
<p><code>that/whether/if</code>åœ¨å¥ä¸­ä¸å……å½“ä»»ä½•æˆåˆ†ï¼Œåªèµ·åˆ°è¿æ¥ä»å¥çš„åŠŸèƒ½ã€‚<code>that</code>æ²¡æœ‰å®é™…å«ä¹‰ï¼Œ<code>whether/if</code>æœ‰æ˜¯å¦çš„æ„ä¹‰ã€‚</p>
<p>ğŸŒŸ That housing price will go up is certain.</p>
<p>ğŸŒŸ Whether you win or not doesnâ€™t matter.</p>
<p><strong>è¿æ¥ä»£è¯</strong></p>
<p>é™¤å´å¼•å¯¼ä»å¥å¤–ï¼Œè¿æ¥ä»£è¯è¿˜å…·æœ‰æŒ‡ä»£çš„ç‰¹æ€§ã€‚ä¸»è¦æœ‰<code>who/whom/whose/what</code>ç­‰ï¼Œå…·æœ‰å…·ä½“çš„å«ä¹‰ã€‚</p>
<p>ğŸŒŸ What doesnâ€™t kill you only makes you stronger.</p>
<p>ğŸŒŸ I am who I am.</p>
<p>ğŸŒŸ What worries us is who let out the secret,</p>
<p><strong>è¿æ¥å‰¯è¯</strong></p>
<p>å…·æœ‰å‰¯è¯çš„ç‰¹ç‚¹ï¼Œå¯ä»¥åšçŠ¶è¯­ï¼Œæœ‰å…·ä½“çš„å«ä¹‰ï¼Œä¸èƒ½è¢«çœç•¥ã€‚ä¾‹å¦‚:<code>when/where/how/why</code>ç­‰</p>
<p>ğŸŒŸ When the meeting will begin is unknown.</p>
<p>ğŸŒŸ I donâ€™t know how I can please him.</p>
<p>ğŸŒŸ This is where the accident happened.</p>
<hr>
<h3 id="äºŒã€ä¸»è¯­ä»å¥">äºŒã€ä¸»è¯­ä»å¥</h3>
<p>ä¸»è¯­ä»å¥ï¼ˆsubject clauseï¼‰,é¡¾åæ€ä¹‰å°±æ˜¯åˆ©ç”¨ä¸€ä¸ªä»å¥æ¥ä»£æ›¿ä¸»è¯­ã€‚</p>
<p>ä¾‹å¦‚ï¼šThat he finished writing the composition in such a short time surprised us .</p>
<p>è¿™å¥è¯çš„ç»“æ„å°±æ˜¯æœ€åŸºç¡€çš„ï¼šä¸»ï¼‹è°“ï¼‹å®¾</p>
<ul>
<li>
<p>ä¸»è¯­ï¼šThat he finished writing the composition in such a short time</p>
</li>
<li>
<p>è°“è¯­ï¼šSurprised</p>
</li>
<li>
<p>å®¾è¯­ï¼šus</p>
</li>
</ul>
<p><strong>è¿æ¥è¯</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">ä»å±è¿è¯</th>
<th style="text-align:center">è¿æ¥ä»£è¯</th>
<th style="text-align:center">è¿æ¥å‰¯è¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">that</td>
<td style="text-align:center">who</td>
<td style="text-align:center">when</td>
</tr>
<tr>
<td style="text-align:center">whether</td>
<td style="text-align:center">whoever</td>
<td style="text-align:center">where</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">whom</td>
<td style="text-align:center">how</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">whose</td>
<td style="text-align:center">why</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">what</td>
<td style="text-align:center">whenever</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">whatever</td>
<td style="text-align:center">wherever</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">which</td>
<td style="text-align:center">however</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">whichever</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>ä¸»è¯­ä»å¥ä¸­çš„<code>that</code>è™½ç„¶æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œä½†ä¸å¯ä»¥è¿›è¡Œçœç•¥ã€‚</p>
<p><strong>æ³¨æ„ç‚¹</strong></p>
<blockquote>
<p>ä»å¥çš„è¯­æ€ä¸å—åˆ°ä¸»å¥æ—¶æ€å½±å“</p>
</blockquote>
<p>â­ Who will be our monitor hasnâ€™t been decided yet.</p>
<blockquote>
<p>ä¸»å¥å¤§éƒ¨åˆ†æƒ…å†µæ˜¯ä¸‰å•ï¼Œä½†whatå¼•å¯¼çš„ä¸»è¯­ä»å¥è§†æƒ…å†µè€Œå®š</p>
</blockquote>
<p>â­ What caused the accident remains unknown.</p>
<p>â­ What we need are good doctors.</p>
<blockquote>
<p>ä¸»è¯­ä»å¥æ”¾åœ¨å¥é¦–è¡¨ç¤º&quot;æ˜¯å¦&quot;çš„æ—¶å€™ï¼Œä¸èƒ½ç”¨<code>if</code>ï¼Œåªèƒ½ç”¨<code>whether</code></p>
</blockquote>
<p>â­ Whether Mary really heard him is really doubtful.</p>
<blockquote>
<p>ä¸ºäº†é˜²æ­¢å¥å­<code>å¤´é‡è„šè½»</code>ï¼Œå¾€å¾€å°†å½¢å¼ä¸»è¯­<code>it</code>æ”¾åœ¨å¥é¦–ï¼Œè€ŒçœŸæ­£çš„ä¸»è¯­æ”¾åœ¨å¥æœ«</p>
</blockquote>
<p>â­ That he will win the match is certain. --&gt;  It is certain that he will win the match.</p>
<p>â­ What caused the accident is still a mystery. --&gt; It is still a mystery what caused the accident.</p>
<hr>
<p>ğŸ“Œ<strong>ä¸»è¯­ä»å¥ä¸å¯ä½äºå¥é¦–çš„äº”ç§æƒ…å†µ</strong></p>
<ol>
<li><code>if</code>å¼•å¯¼çš„ä¸»è¯­ä»å¥</li>
</ol>
<p>âœ… It is uncertain if he will leave for Beijing tomorrow.</p>
<p>âŒ If he will leave for Beijing tomorrow is uncertain.</p>
<hr>
<ol start="2">
<li><code>It is said, (reported)...</code>ç»“æ„</li>
</ol>
<p>âœ… It is said that President Jingo will visit our school next week.</p>
<p>âŒ That President jin will visit our school next week is said.</p>
<hr>
<ol start="3">
<li><code>It happens, ... , It occurs ... </code>ç»“æ„</li>
</ol>
<p>âœ… It occurred to him that he failed in the examination.</p>
<hr>
<ol start="4">
<li><code>It doesn't matter how/whether</code>ç»“æ„</li>
</ol>
<p>âœ… It doesnâ€™t matter whether he is wrong or not.</p>
<hr>
<ol start="5">
<li>å«ä¸»è¯­ä»å¥çš„å¤åˆå¥æ˜¯ç–‘é—®å¥æ—¶ï¼Œä¸»è¯­ä»å¥ä¸å¯ä»¥æå‰</li>
</ol>
<p>âœ… Is it likely that it will rain in the evening?</p>
<p>âŒ It that will rain in the evening likely?</p>
<img src="/2022/08/10/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit5%20%E4%B8%89%E5%A4%A7%E4%BB%8E%E5%8F%A5/image-20220812225919955.png" alt="image-20220812225919955" style="zoom:50%;">
<hr>
<h3 id="ä¸‰ã€å®¾è¯­ä»å¥">ä¸‰ã€å®¾è¯­ä»å¥</h3>
<p><strong>å®šä¹‰</strong></p>
<p>åè¯æ€§ä»å¥å‡æ˜¯å¼‚æ›²åŒå·¥ã€‚å³å®¾è¯­ä»å¥å°±æ˜¯åˆ©ç”¨ä¸€ä¸ªä»å¥æ¥ä»£æ›¿å®¾è¯­ã€‚</p>
<p>ä¾‹å¦‚ï¼šI think (that) you should tell the truth.</p>
<ul>
<li>
<p>ä¸»è¯­ï¼šI</p>
</li>
<li>
<p>è°“è¯­ï¼šthink</p>
</li>
<li>
<p>å®¾è¯­ï¼šï¼ˆthatï¼‰you should tell the truth</p>
</li>
</ul>
<p><strong>è¿æ¥è¯</strong></p>
<p>åŒä¸Šæ–‡</p>
<p><strong>æ—¶æ€</strong></p>
<p>ğŸ“ä¸»å¥ä¸ºç°åœ¨æ—¶ï¼Œå°†æ¥æ—¶ï¼Œå®Œæˆæ—¶ï¼Œä»å¥å¯ä»¥ä½¿ç”¨ä»»ä½•æ—¶æ€</p>
<p>ğŸŒŸ I know he lives here.</p>
<p>ğŸŒŸ I know he lived here ten years ago.</p>
<hr>
<p>ğŸä¸»å¥ä¸ºè¿‡å»æ—¶ï¼Œä»å¥éœ€è¦å¯¹åº”æŸç§è¿‡å»æ—¶æ€</p>
<p>ğŸŒŸ I knew he lived here.</p>
<p>ğŸŒŸ I saw he talking with her mother.</p>
<hr>
<p>ğŸé‡åˆ°å®¢è§‚çœŸç†æ—¶ï¼Œç”¨ç°åœ¨æ—¶</p>
<p>ğŸŒŸ The teacher said that earth travels around the sun.</p>
<hr>
<p><strong>æ³¨æ„ç‚¹</strong></p>
<p>ğŸ å®¾è¯­ä»å¥ä¸­<code>That</code>ä¸å¯ä»¥çœç•¥çš„æƒ…å†µ</p>
<p>1ï¸âƒ£ å®¾è¯­ä»å¥çš„ä¸»è¯­æ˜¯éè°“è¯­åŠ¨è¯</p>
<p>ğŸŒŸ He think that learning English is very hard.</p>
<p>2ï¸âƒ£ ä»å¥çš„ä¸»è¯­æ˜¯<code>this</code>æˆ–<code>that</code>çš„æ—¶å€™</p>
<p>ğŸŒŸ She said that would lead her win.</p>
<p>3ï¸âƒ£ æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å®¾è¯­ä»å¥ï¼Œç¬¬äºŒä¸ª<code>that</code>ä¸èƒ½çœç•¥</p>
<p>ğŸŒŸ I believe (that) you have done your best and that things will get better.</p>
<p>4ï¸âƒ£ <code>it</code>åšå½¢å¼å®¾è¯­ï¼Œæ­¤æ—¶<code>that</code>å¼•å¯¼çš„å®¾è¯­ä»å¥<code>that</code>ä¸å¯ä»¥çœç•¥</p>
<p>ğŸŒŸ I thought it strange that Amy didnâ€™t came up yesterday.</p>
<p>5ï¸âƒ£ åŒå®¾è¯­æ—¶ï¼Œ<code>that</code>å¼•å¯¼çš„ä»å¥åšç›´æ¥å®¾è¯­ï¼Œ<code>that</code>ä¸å¯ä»¥çœç•¥ã€‚</p>
<p>ğŸŒŸ My foreign friend tell me that Chinese is one of the most difficult language to learn.</p>
<hr>
<p>ğŸ”± å››ç§åªèƒ½ç”¨<code>whether</code>çš„æƒ…å†µ</p>
<p>1ï¸âƒ£ <code>or...not</code></p>
<p>2ï¸âƒ£ æœ‰ä»‹è¯</p>
<p>3ï¸âƒ£ åæ¥<code>to do</code></p>
<p>4ï¸âƒ£ åšä¸»è¯­ï¼Œåªç”¨<code>whether</code></p>
<img src="/2022/08/10/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit5%20%E4%B8%89%E5%A4%A7%E4%BB%8E%E5%8F%A5/image-20220812234810736.png" alt="image-20220812234810736" style="zoom:50%;">
<hr>
<h3 id="å››ã€è¡¨è¯­ä»å¥">å››ã€è¡¨è¯­ä»å¥</h3>
<p><strong>å®šä¹‰</strong></p>
<p>åè¯æ€§ä»å¥å‡æ˜¯å¼‚æ›²åŒå·¥ã€‚å³è¡¨è¯­ä»å¥å°±æ˜¯åˆ©ç”¨ä¸€ä¸ªä»å¥æ¥ä»£æ›¿è¡¨è¯­ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œè¡¨è¯­è°“è¯­ç³»åŠ¨è¯ï¼ˆbe åŠ¨è¯åŠæ„Ÿå®˜åŠ¨è¯ï¼‰ä¹‹åï¼Œæ‰€ä»¥ä¸€èˆ¬ç»“æ„ä¸ºä¸»è¯­+ç³»åŠ¨è¯+è¡¨è¯­ä»å¥</p>
<p>ä¾‹å¦‚ï¼šThe trouble is that he has lost a lot of money.</p>
<ul>
<li>
<p>ä¸»è¯­ï¼šthe trouble</p>
</li>
<li>
<p>è°“è¯­: is</p>
</li>
<li>
<p>è¡¨è¯­: that he has lost a lot of money.</p>
</li>
</ul>
<p><strong>è¿æ¥è¯</strong></p>
<p>åœ¨ä»å±è¿è¯ä¸Šï¼Œå¤šäº†<code>as though</code>å’Œ<code>as if</code></p>
<p><strong>æ—¶æ€</strong></p>
<p>åŒä¸»è¯­ä»å¥ï¼Œæ—¶æ€ä¸å—ä¸»å¥å½±å“</p>
<p><strong>æ³¨æ„ç‚¹</strong></p>
<p>åªèƒ½ç”¨<code>whether</code>ä»£æ›¿<code>if</code>å¼•å¯¼</p>
<hr>
<h3 id="äº”ã€åŒä½è¯­ä»å¥">äº”ã€åŒä½è¯­ä»å¥</h3>
<p><strong>å®šä¹‰</strong></p>
<p>åŒä½è¯­ï¼ŒæŒ‰å­—é¢æ„æ€ç†è§£ï¼Œå°±æ˜¯ä¸åŒä½è¯­å‰é¢çš„é‚£ä¸ªåè¯å…·æœ‰ç›¸åŒåœ°ä½çš„æˆåˆ†. å³åŒä½è¯­é€šå¸¸ç´§è·Ÿåœ¨åè¯ã€ä»£è¯åé¢,è¿›ä¸€æ­¥è¯´æ˜ã€è§£é‡Šå®ƒçš„æƒ…å†µ</p>
<p>ä¾‹å¦‚ :</p>
<p>ğŸŒŸ He my brother is a superstar.</p>
<p>ä»–ï¼Œå³æˆ‘çš„å“¥å“¥ï¼Œæ˜¯ä¸ªæ˜æ˜Ÿ(my brotheræ˜¯heçš„åŒä½è¯­)</p>
<p>ğŸŒŸ We both can do it.</p>
<p>æˆ‘ä»¬ï¼Œä¸¤ä¸ªäººï¼Œéƒ½å¯ä»¥åš(bothå°±æ˜¯weçš„åŒä½è¯­)</p>
<p>ğŸŒŸ Where is you classmate tom.</p>
<p>ä½ çš„åŒå­¦æ±¤å§†åœ¨å“ªé‡Œï¼ˆtom æ˜¯classmateçš„åŒä½è¯­ï¼‰</p>
<p>åŒä½è¯­ä»å¥ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªå¥å­æ¥åšåŒä½è¯­æˆåˆ†ï¼Œé€šå¸¸è·Ÿåœ¨ä¸€äº›ç‰¹å®šçš„åè¯ä¹‹åã€‚è¿™äº›åè¯æœ‰ï¼š</p>
<ul>
<li>hope</li>
<li>wish</li>
<li>fact</li>
<li>answer</li>
<li>problem</li>
<li>new</li>
<li>belief</li>
<li>idea</li>
<li>promise</li>
<li>suggestion</li>
<li>order</li>
<li>conclusion</li>
<li>information</li>
<li>though</li>
</ul>
<p>è¿™äº›åè¯çš„åä¹‰éƒ½å¾ˆæŠ½è±¡ï¼ŒæŒ‡ä»£ä¸æ˜ç¡®ï¼Œæ‰€ä»¥å¾€å¾€è·Ÿä¸€ä¸ªåŒä½è¯­ä»å¥æ¥è§£é‡Šè¿™äº›åè¯çš„å…·ä½“å†…æ¶µã€‚æ¯”å¦‚ï¼š</p>
<p>ğŸŒŸ The fact that she didnâ€™t like me really hurts me.</p>
<p>ä¸»è¯­ï¼šThe fact</p>
<p>è°“è¯­ï¼š really hurts</p>
<p>åŒä½è¯­ï¼šthat she didnâ€™t like me</p>
<p>å®¾è¯­ï¼šme</p>
<p>ä¸çŸ¥é“å¤§å®¶å‘ç°æ²¡æœ‰ï¼Œä¸ç®¡æ˜¯åŒä½è¯­è¿˜æ˜¯åŒä½è¯­ä»å¥ï¼Œä»–ä»¬éƒ½æ˜¯èµ·åˆ°è§£é‡Šè¯´æ˜çš„åŠŸèƒ½ï¼Œä¸æ˜¯å…³é”®çš„å¥å­æˆåˆ†ã€‚æ‰€ä»¥å³ä½¿ä»–ä»¬è¢«å»é™¤ï¼Œä¹Ÿä¸ä¼šå½±å“å¥å­çš„å®Œæ•´æ€§ã€‚</p>
<hr>
<p><strong>è¿æ¥è¯</strong></p>
<p>åŒä¸Š</p>
<p><strong>æ—¶æ€</strong></p>
<p>åŒä¸»è¯­ä»å¥</p>
<p><strong>æ³¨æ„ç‚¹</strong></p>
<p>1ï¸âƒ£ å®šè¯­ï¼ˆä»å¥ï¼‰æ˜¯å¯¹å…¶å…ˆè¡Œè¯çš„ä¿®é¥°ï¼Œå±äºå½¢å®¹è¯èŒƒç•´ã€‚è€ŒåŒä½è¯­ï¼ˆä»å¥ï¼‰æ˜¯å¯¹å…¶å‰é¢çš„æŠ½è±¡åè¯è¿›è¡Œè§£é‡Šè¯´æ˜ï¼Œå±äºåè¯èŒƒç•´ã€‚</p>
<p>2ï¸âƒ£ å¼•å¯¼è¯thatåœ¨åŒä½è¯­ä»å¥ä¸­åªèµ·è¿æ¥ä½œç”¨ï¼Œä¸åšä»»ä½•æˆåˆ†ã€‚Thatåœ¨å®šè¯­ä»å¥ä¸­å±äºå…³ç³»ä»£è¯ï¼Œå……å½“å¥å­æˆåˆ†ã€‚</p>
<p>3ï¸âƒ£ å½“when,where,why,how ç­‰è¿æ¥å‰¯è¯è¿æ¥æ—¶ï¼Œè™½ç„¶åœ¨å¥ä¸­å……å½“æˆåˆ†ï¼Œä½†å‰é¢æ²¡æœ‰ä¸å…¶æ„ä¹‰ç›¸å½“çš„å…ˆè¡Œè¯ï¼</p>
<p>ğŸŒŸ He will never forget the days when he lived with his grandparents.</p>
<p>ğŸŒ™ He has no idea when the meeting will be held.</p>
<hr>
<h2 id="äºŒã€å®šè¯­ä»å¥">äºŒã€å®šè¯­ä»å¥</h2>
<h3 id="ä¸€ã€å®šä¹‰">ä¸€ã€å®šä¹‰</h3>
<p>ä¸€ä¸ªå¥å­è·Ÿåœ¨ä¸€ä¸ªåè¯æˆ–ä»£è¯åï¼Œå¯¹è¿™ä¸ªåè¯ï¼ˆä»£è¯ï¼‰è¿›è¡Œä¿®é¥°é™å®šçš„å¥å­å°±å«å®šè¯­ä»å¥ï¼Œè¢«ä¿®é¥°çš„åè¯æˆ–ä»£è¯å«å…ˆè¡Œè¯ï¼Œå¼•å¯¼å®šè¯­ä»å¥çš„è¯å«å…³ç³»è¯ã€‚å®šè¯­ä»å¥ä¹Ÿå¯ä»¥å«åšå½¢å®¹è¯è¯æ€§ä»å¥ã€‚</p>
<p>ğŸ“ å®šè¯­ä»å¥ç»“æ„=<code>å…ˆè¡Œè¯</code>+<code>å…³ç³»è¯</code>+<code>ä»å¥</code></p>
<p>ğŸ›ï¸ <strong>åˆ†ç±»</strong>:</p>
<p>â€‹	1ï¸âƒ£é™åˆ¶æ€§å®šè¯­ä»å¥</p>
<p>â€‹	2ï¸âƒ£éé™åˆ¶æ€§å®šè¯­ä»å¥</p>
<p>ğŸ’« <strong>åŒºåˆ«</strong></p>
<ul>
<li>é™åˆ¶æ€§å®šè¯­ä»å¥æ˜¯å…ˆè¡Œè¯ä¸å¯ç¼ºå°‘çš„éƒ¨åˆ†ï¼Œå»æ‰ä»å¥åï¼Œä¸»å¥æ„æ€ä¸æ˜æ˜¾ï¼Œæ‰€ä»¥ç§°ä¸ºé™åˆ¶æ€§å•¦ <s>(é™åˆ¶ä½ åˆ é™¤)</s></li>
</ul>
<p>ğŸŒŸ A man who doesnâ€™t learn from others canâ€™t achieve much.</p>
<p>æ­¤æ—¶ï¼Œä¸»è¯­<code>A man</code>æŒ‡çš„æ˜¯ä¸€ç±»äººï¼Œå®šè¯­ä»å¥ä¸èƒ½å»æ‰ï¼Œè¦ä¸ç„¶åŒºé—´å°±å˜æˆäº†æ€ªæ€ªçš„ä¸€ä¸ªäººäº†ï¼</p>
<ul>
<li>éé™åˆ¶æ€§å®šè¯­ä»å¥ä»…ä»…æ˜¯å¯¹ä¿®é¥°çš„è¯åšè¿›ä¸€æ­¥çš„è¯´æ˜ï¼Œè€Œæ²¡æœ‰æ·±å…¥çš„è§£é‡Šæˆ–æ˜¯è¡¥å……ï¼Œå»æ‰å¹¶ä¸å½±å“æ„æ€ï¼Œä¸”éé™ä¸€èˆ¬ä»¥é€—å·å½¢å¼ä¸ä¸»å¥åˆ†å‰²ã€‚</li>
</ul>
<p>ğŸŒŸ Finally we visited the Three Gorges Dam, which is the greatest key water control project in the world at present.</p>
<ul>
<li>æ­¤å¤–ï¼Œéé™è¿˜èƒ½å¯¹æ•´ä¸ªä¸»å¥è¿›è¡Œä¿®é¥°å˜âœŒï¸,æ­¤æ—¶ä¸€èˆ¬ç”¨ä¸‰å•</li>
</ul>
<p>ğŸŒŸ The traffic of this city is quite bad, which is know to every.</p>
<h3 id="äºŒã€å…³ç³»è¯">äºŒã€å…³ç³»è¯</h3>
<p>å…³ç³»è¯å°±æ˜¯å¼•å¯¼è¯çš„å®˜æ–¹è¯´æ³•å•¦ï¼Œç”¨æ¥å¼€å¯ä¸€ä¸ªä»å¥(ç«è½¦å¤´ğŸš†ï¼‰</p>
<p><strong>å…³ç³»ä»£è¯</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">å¼•å¯¼è¯</th>
<th style="text-align:center">ä»£æ›¿</th>
<th style="text-align:center">ç”¨äº</th>
<th style="text-align:center">æˆåˆ†</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">that</td>
<td style="text-align:center">äºº/ç‰©</td>
<td style="text-align:center">é™åˆ¶</td>
<td style="text-align:center">ä¸»ã€å®¾ã€è¡¨</td>
</tr>
<tr>
<td style="text-align:center">which</td>
<td style="text-align:center">ç‰©</td>
<td style="text-align:center">Both</td>
<td style="text-align:center">ä¸»ã€å®¾ã€è¡¨</td>
</tr>
<tr>
<td style="text-align:center">who</td>
<td style="text-align:center">äºº</td>
<td style="text-align:center">Both</td>
<td style="text-align:center">ä¸»ã€å®¾ã€è¡¨</td>
</tr>
<tr>
<td style="text-align:center">whom</td>
<td style="text-align:center">äºº</td>
<td style="text-align:center">Both</td>
<td style="text-align:center">å®¾ã€è¡¨</td>
</tr>
<tr>
<td style="text-align:center">whose</td>
<td style="text-align:center">äºº</td>
<td style="text-align:center">Both</td>
<td style="text-align:center">å®šè¯­</td>
</tr>
<tr>
<td style="text-align:center">as</td>
<td style="text-align:center">äºº/ç‰©</td>
<td style="text-align:center">Both</td>
<td style="text-align:center">ä¸»ã€å®¾ã€è¡¨</td>
</tr>
</tbody>
</table>
<hr>
<blockquote>
<p>By the way, æˆ‘çš„ï¼Œä½ çš„ï¼Œè¿™ç±»çš„è¯ï¼Œæ˜¯åšå®šè¯­å“¦</p>
</blockquote>
<p><strong>å…³ç³»å‰¯è¯</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">å¼•å¯¼è¯</th>
<th style="text-align:center">ä»£æ›¿</th>
<th style="text-align:center">ç”¨äº</th>
<th style="text-align:center">æˆåˆ†</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">when</td>
<td style="text-align:center">æ—¶é—´</td>
<td style="text-align:center">Both</td>
<td style="text-align:center">æ—¶é—´çŠ¶è¯­</td>
</tr>
<tr>
<td style="text-align:center">where</td>
<td style="text-align:center">åœ°ç‚¹</td>
<td style="text-align:center">Both</td>
<td style="text-align:center">åœ°ç‚¹çŠ¶è¯­</td>
</tr>
<tr>
<td style="text-align:center">why</td>
<td style="text-align:center">åŸå› </td>
<td style="text-align:center">é™åˆ¶</td>
<td style="text-align:center">åŸå› çŠ¶è¯­</td>
</tr>
</tbody>
</table>
<hr>
<blockquote>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å…³ç³»ä»£è¯å¼•å¯¼çš„å®šè¯­ä»å¥</p>
</blockquote>
<p>ğŸ å…³ç³»ä»£è¯<code>who/whom</code></p>
<p>æŒ‡ä»£äººï¼Œåˆ†åˆ«åšä¸»è¯­å’Œå®¾è¯­~</p>
<p>ğŸŒŸ The man who lives in that house is my uncle.</p>
<p>ğŸŒŸ The girl whom the teacher often praises is our monitor.</p>
<hr>
<p>ğŸ‡ å…³ç³»ä»£è¯<code>which</code></p>
<p>å…³ç³»ä»£è¯<code>which</code>æŒ‡ç‰©ï¼Œåœ¨å®šè¯­ä»å¥åšä¸»è¯­æˆ–å®¾è¯­~</p>
<p>ğŸŒŸ The book which cost me a lot of money is very interesting.</p>
<hr>
<p>ğŸ å…³ç³»ä»£è¯<code>that</code></p>
<p><code>that</code>åªèƒ½ç”¨äºé™åˆ¶æ€§ä»å¥ï¼Œå¯ä»¥æŒ‡ç‰©æŒ‡äººï¼Œç”¨äºè¿›ä¸€æ­¥çš„è§£é‡Šè¯´æ˜ã€‚</p>
<p>ğŸŒŸ The bag that lies on the ground is hers.</p>
<p>ğŸŒŸ The old man that I visited yesterday is my teacher.</p>
<hr>
<p>ğŸ“˜ å…³ç³»ä»£è¯<code>whose</code></p>
<p>è¿™ä¸ªå…³ç³»è¯æï¼Œä¸€èˆ¬å¯ä»¥ç”¨<code>of whom/ of which</code>çš„ç»“æ„è¿›è¡Œæ›¿ä»£</p>
<p>ğŸŒŸ Do you know the doctor, whose son is a doctor too?</p>
<p>â¡ï¸ Do you konw the doctor, the son of whom is a doctor too?</p>
<p>â¡ï¸ Do you konw the doctor, of whom the son is a doctor too?</p>
<hr>
<p>ğŸš™ <code>as</code>å¼•å¯¼çš„å®šè¯­ä»å¥</p>
<p>1ï¸âƒ£ <code>as</code>å¼•å¯¼çš„é™åˆ¶æ€§å®šè¯­ä»å¥</p>
<p>é€šå¸¸è¦è·Ÿ<code>such, the same, as</code>è¿›è¡Œæ­é…ï¼Œæ„æˆå›ºå®šæ­é…ã€‚</p>
<p>ğŸŒŸ He is not such a fool as he looks.</p>
<p>ğŸŒŸ He rides as expensive a bike as he can afford.</p>
<p>2ï¸âƒ£ <code>as</code>å¼•å¯¼çš„éé™åˆ¶å®šè¯­ä»å¥</p>
<p>ä¸€èˆ¬è¿™æ—¶å€™ï¼Œä»£æ›¿æ•´ä¸ªä¸»å¥~</p>
<p>æˆ‘ä»¬å¸¸è§çš„å°±æœ‰<code>as we all know, aas it is known, as it is , as it said above, as is usual</code>ç­‰ç­‰å•¦ã€‚</p>
<p>ğŸŒŸ As is known to the United States, Mark Twain is a great writer.</p>
<p>ğŸŒŸ As we all know, the earth is round.</p>
<p>ğŸŒŸ He is absorbed in work, as he often was.</p>
<hr>
<blockquote>
<p>æˆ‘ä»¬å†æ¥çœ‹çœ‹å…³ç³»å‰¯è¯å¼•å¯¼çš„å®šè¯­ä»å¥</p>
</blockquote>
<p>ğŸ·ï¸ å…³ç³»å‰¯è¯<code>when/where</code></p>
<p>å½“å…ˆè¡Œè¯æ˜¯æ—¶é—´æˆ–åœ°ç‚¹åè¯ï¼Œåœ¨ä»å¥ä¸­å……å½“æ—¶é—´çŠ¶è¯­æˆ–åœ°ç‚¹çŠ¶è¯­ï¼Œç›¸å½“äº&quot;ä»‹è¯+which&quot;</p>
<p>ğŸŒŸ October 1, 1949 was the day when (=on which) the Peopleâ€™s Republic of China was founded.</p>
<p>ğŸŒŸ This is the school where (=in which) I studied a few years ago.</p>
<p>é‚£å•¥ï¼Œ<code>where</code>æœ‰æ—¶è¿˜å¯ä»¥äºæŠ½è±¡åè¯åå¼•å¯¼å®šè¯­ä»å¥ï¼Œå¸¸è§çš„æŠ½è±¡åè¯æœ‰ï¼š</p>
<ul>
<li>point</li>
<li>degree</li>
<li>stage</li>
<li>position</li>
<li>case</li>
<li>condition</li>
</ul>
<p>ğŸŒŸ We have reached a point where a change is needed.</p>
<p>ğŸŒŸ He got into a situation where it is hard to decide what is right and wrong.</p>
<hr>
<p>ğŸš— å…³ç³»å‰¯è¯<code>why</code></p>
<p>åªèƒ½ç”¨äºå¼•å¯¼é™åˆ¶æ€§å®šè¯­ä»å¥å“¦ï¼Œå…ˆè¡Œè¯åªæœ‰<code>reason</code>ï¼Œå……å½“åŸå› çŠ¶è¯­ï¼Œç›¸å½“äº<code>for which</code></p>
<p>ğŸŒŸ Do you know the reason why (=for which) he is not here now?</p>
<hr>
<p>âœˆï¸ å…³ç³»ä»£è¯<code>which</code>å’Œ<code>that</code>çš„åŒºåˆ«</p>
<p>ğŸŒµ åªèƒ½ç”¨<code>that</code>çš„æƒ…å†µ</p>
<ul>
<li>
<p>å…ˆè¡Œè¯æ˜¯ä¸å®šä»£è¯ï¼Œæˆ–è€…è¢«<code>every, any, all, some, no, little, few, much</code>ç­‰ä¿®é¥°</p>
</li>
<li>
<p>å…ˆè¡Œè¯è¢«åºæ•°è¯ã€å½¢å®¹è¯æœ€é«˜çº§ã€the only, the very, the lastç­‰ä¿®é¥°</p>
</li>
<li>
<p>å…ˆè¡Œè¯æœ‰äººæœ‰ç‰©</p>
</li>
<li>
<p>ç–‘é—®è¯æ˜¯<code>who</code>æˆ–è€…<code>which</code></p>
</li>
</ul>
<p>ğŸ° åªç”¨<code>which</code></p>
<ul>
<li>åœ¨éé™åˆ¶æ€§å®šè¯­ä»å¥ä¸­åªèƒ½ä½¿ç”¨å…³ç³»ä»£è¯<code>which</code></li>
<li>&quot;ä»‹è¯+å…³ç³»ä»£è¯&quot;å¼•å¯¼çš„å®šè¯­ä»å¥ä¸­ï¼Œåªèƒ½ä½¿ç”¨å…³ç³»è¯<code>which</code>ä¸èƒ½ä½¿ç”¨<code>that</code></li>
</ul>
<hr>
<h3 id="æ³¨æ„ç‚¹-v2">æ³¨æ„ç‚¹</h3>
<p>1ï¸âƒ£ å®šè¯­ä»å¥çš„è°“è¯­åŠ¨è¯éœ€è¦è·Ÿå…ˆè¡Œè¯çš„äººç§°å’Œæ•°ä¿æŒä¸€è‡´ï¼</p>
<p>ğŸŒŸ Tom is one of the boys who are from the USA.</p>
<p>ğŸŒŸ Tom is the only boy that is from the USA.</p>
<p>â­ I, who am in Australia, feel proud of being a Chinese.</p>
<p>2ï¸âƒ£ thatå’Œwhyåªèƒ½å¼•å¯¼é™åˆ¶ï¼Œè€Œwhatä¸èƒ½åœ¨å®šè¯­ä»å¥ä¸­å……å½“å¼•å¯¼è¯</p>
<p>3ï¸âƒ£ é™åˆ¶æ€§ä»å¥ä¸­ï¼Œå…³ç³»ä»£è¯åšåŠ¨è¯å®¾è¯­æˆ–ä»‹è¯å®¾è¯­æ”¾åœ¨å¥æœ«çš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥è¿›è¡Œçœç•¥çš„ã€‚è€Œéé™åˆ¶æ€§åˆ™ä¸èƒ½è¿›è¡Œçœç•¥ã€‚</p>
<p>ğŸŒŸ Is there anything [ ( that ) you wanted ]?</p>
<p>ğŸŒŸ Who is the man, whom you were talking to?</p>
<p>4ï¸âƒ£ ç”¨å…³ç³»ä»£è¯è¿˜æ˜¯å…³ç³»å‰¯è¯ï¼Œå–å†³äºå…³ç³»è¯åœ¨å®šè¯­ä»å¥ä¸­å……å½“çš„ä½œç”¨ã€‚</p>
<p>5ï¸âƒ£ ä»¥<code>the way</code>ä¸ºå…ˆè¡Œè¯çš„é™åˆ¶æ€§å®šè¯­ä»å¥é€šå¸¸ç”±<code>in which</code>å’Œ<code>that</code>å¼•å¯¼ï¼Œè€Œä¸”é€šå¸¸å¯ä»¥çœç•¥</p>
<hr>
<h2 id="ä¸‰ã€çŠ¶è¯­ä»å¥">ä¸‰ã€çŠ¶è¯­ä»å¥</h2>
<p>ä»Šå¤©æˆ‘ä»¬æ¥talk aboutçŠ¶è¯­ä»å¥~</p>
<p><strong>å•¥æ˜¯çŠ¶è¯­ä»å¥</strong></p>
<p>âš“ å½“ç„¶æ˜¯åœ¨å¤åˆå¥ä¸­å……å½“çŠ¶è¯­çš„ä»å¥å•¦ï¼</p>
<p><strong>æœ‰è™¾ç±³ç”¨</strong></p>
<p>âš“ ç”¨æ¥ä¿®é¥°è°“è¯­ã€éè°“è¯­åŠ¨è¯ã€å®šè¯­ã€çŠ¶è¯­æˆ–è€…æ•´ä¸ªå¥å­ï¼æ¢å¥è¯è¯´ï¼Œå°±æ˜¯<code>å¢åŠ ä¿¡æ¯é‡</code>!</p>
<p>âš“ å½“ç„¶å•¦ï¼Œè„±ç¦»äº†çŠ¶è¯­ä»å¥çš„ä¸»å¥ä¹Ÿèƒ½æˆæ´»ï¼Œä¸”æ„æ€ä¸å—å½±å“~</p>
<p><strong>ç»“æ„æ</strong></p>
<p>âš“ çŠ¶è¯­ä»å¥ä¸€èˆ¬ç”±<strong>è¿è¯</strong>å¼•å¯¼ï¼Œä¹Ÿå¯ä»¥ç”±<strong>è¯ç»„</strong>å¼•å¯¼ï¼Œå¯ä»¥æ”¾åœ¨ä»»ä½•ä½ç½®~</p>
<p>âš“ ä¸å¤±ä¸€èˆ¬æ€§ï¼Œæ”¾åœ¨å¥é¦–æˆ–å¥ä¸­æ—¶ï¼Œé€šå¸¸ç”¨é€—å·éš”å¼€ï¼Œè€Œå¥æœ«ä¸€èˆ¬ä¸ç”¨ã€‚</p>
<p>ğŸŒŸ è¿è¯+çŠ¶è¯­ä»å¥ , ä¸»å¥</p>
<p>ğŸŒŸ ä¸»å¥ , è¿è¯+çŠ¶è¯­ä»å¥</p>
<p><strong>åˆ†ç±»æ</strong></p>
<p>æ ¹æ®çŠ¶è¯­ä»å¥æ‰€è•´å«çš„ä¿¡æ¯ï¼Œå¯ä»¥åˆ†ä¸ºä¹å¤§ç±»ï¼</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç±»å‹</th>
<th style="text-align:center">è¿è¯ or è¯ç»„</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ—¶é—´çŠ¶è¯­ä»å¥</td>
<td style="text-align:center">when, while, as, before, after, since, until, as soon as. etc.</td>
</tr>
<tr>
<td style="text-align:center">åœ°ç‚¹çŠ¶è¯­ä»å¥</td>
<td style="text-align:center">where, wherever</td>
</tr>
<tr>
<td style="text-align:center">åŸå› çŠ¶è¯­ä»å¥</td>
<td style="text-align:center">because, since, as</td>
</tr>
<tr>
<td style="text-align:center">ç»“æœçŠ¶è¯­ä»å¥</td>
<td style="text-align:center">soâ€¦that, suchâ€¦that</td>
</tr>
<tr>
<td style="text-align:center">â¤ï¸</td>
<td style="text-align:center">ğŸ¥€</td>
</tr>
<tr>
<td style="text-align:center">ç›®çš„çŠ¶è¯­ä»å¥</td>
<td style="text-align:center">so that, in order that</td>
</tr>
<tr>
<td style="text-align:center">æ¡ä»¶çŠ¶è¯­ä»å¥</td>
<td style="text-align:center">if, unless, as long as</td>
</tr>
<tr>
<td style="text-align:center">æ–¹å¼çŠ¶è¯­ä»å¥</td>
<td style="text-align:center">as, as if/though, the way</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’™</td>
<td style="text-align:center">ğŸ“˜</td>
</tr>
<tr>
<td style="text-align:center">è®©æ­¥çŠ¶è¯­ä»å¥</td>
<td style="text-align:center">though, although, even if/ though.</td>
</tr>
<tr>
<td style="text-align:center">æ¯”è¾ƒçŠ¶è¯­ä»å¥</td>
<td style="text-align:center">asâ€¦as, æ¯”è¾ƒçº§+than</td>
</tr>
</tbody>
</table>
<hr>
<blockquote>
<p>æ—¶é—´çŠ¶è¯­ä»å¥</p>
</blockquote>
<p>ç”¨æ¥å‘Šè¯‰ä½ ä¸»å¥<code>å‘ç”Ÿçš„æ—¶é—´</code>ï¼å¼•å¯¼è¯åŒ…æ‹¬ï¼š</p>
<p>ğŸ·ï¸ å½“â€¦çš„æ—¶å€™: <code>when, while, as</code></p>
<p>ğŸ·ï¸ â€¦å‘ç”Ÿå‰/å: <code>before, after</code></p>
<p>ğŸ·ï¸ ä¸€â€¦å°±â€¦(ç±»ä¼¼è§¦å‘å™¨~): <code>as soon as, no sooner...than..., hardly...when...</code></p>
<p>ğŸ·ï¸ è‡ªä»: <code>since</code></p>
<p>ğŸ·ï¸ ç›´åˆ°: <code>until</code></p>
<hr>
<p>ğŸ <strong>when, while, as</strong></p>
<p><strong>when</strong>ï¼šåƒä½ èº«è¾¹äººç•œæ— å®³çš„æœ‹å‹ï¼Œæ—¢å¯ä»¥è·Ÿ<code>ç¬é—´æ€§åŠ¨è¯</code>ï¼ˆè¯ç»„ï¼‰<em>go to bed</em> ç©åœ¨ä¸€èµ·ï¼Œä¹Ÿå¯ä»¥å’Œ<code>å»¶ç»­æ€§åŠ¨è¯</code> <em>drink</em> åšæœ‹å‹ã€‚</p>
<p>ä¾‹å¦‚ï¼</p>
<p>ğŸŒŸ When Dad was drinking Coke, Mom went to bed.</p>
<p>ğŸŒŸ Dad was drinking Coke when Mom went to bed.</p>
<p>å›ºå®šæ­é…<code>be about to do sth. when...</code> è¡¨ç¤º<code>æ­£è¦åšæŸäº‹ï¼Œè¿™æ—¶</code></p>
<p>ğŸŒŸ Mon was about to fall asleep when Dad gave a loud burp.</p>
<hr>
<p><strong>while</strong>ï¼šè¿™ä¸ªè¯ï¼Œæœ‰ç‚¹åƒä½ èº«è¾¹æ¯”è¾ƒé«˜å†·çš„é‚£ç§äººï¼ŒåŸºæœ¬åªè·Ÿ<code>å»¶ç»­æ€§åŠ¨è¯</code>ï¼ˆå¦‚ drinkï¼‰ä¸€èµ·ç©ï¼Œè€Œä¸”å¸¸å¸¸æ˜¯è¿›è¡Œæ—¶ã€‚</p>
<p>ğŸŒŸ While Dad was drinking Coke, Mom went to bed.</p>
<hr>
<p><strong>as</strong>ï¼šæœ‹å‹åœˆä¹Ÿæ¯”è¾ƒå›ºå®šï¼Œåé¢è·Ÿå»¶ç»­æ€§åŠ¨è¯ï¼ˆå¦‚ drinkï¼‰ã€‚as å¼ºè°ƒä¸»ã€ä»å¥ä¸¤ä¸ªåŠ¨ä½œ<strong>åŒæ—¶å‘ç”Ÿ</strong></p>
<p>ğŸŒŸ As Dad was drinking Coke, he saw Mom go to the bedroom.</p>
<hr>
<p>ğŸ  <strong>until, notâ€¦until</strong></p>
<p>untilï¼Œå•ç‹¬ä¸€ä¸ªè¯ç›¸å½“äº tillï¼Œæ˜¯â€œç›´åˆ°â€¦â€¦â€çš„æ„æ€ã€‚</p>
<p>é‚£ä¹ˆï¼Œnotâ€¦until ç›´è¯‘è¿‡æ¥å°±æ˜¯â€œä¸åšæŸäº‹ï¼Œç›´åˆ°â€¦â€¦â€ã€‚è¿™æ ·è®²è¯è´¹åŠ²å•Šï¼Œæˆ‘ä»¬å†æ‹æ‹é€šé¡ºï¼šâ€œç›´åˆ°â€¦â€¦æ‰â€¦â€¦â€ã€‚</p>
<p>ğŸŒŸ I watched TV until Mom came home.</p>
<p>ğŸŒŸ I didnâ€™t watch TV until Mom came home.</p>
<p>æˆ‘ä»¬çœ‹ä¸¤ä¸ªæ —å­!</p>
<p>1ï¼‰æˆ‘çˆ±ä½ ï¼Œè‡³æ­»ä¸æ¸ã€‚fromã€Šå”é¡¿åº„å›­ã€‹</p>
<p>ğŸ’Œ I will love you, until the last breath leaves my body.</p>
<p>2ï¼‰ç›´åˆ°æ”¾å¼ƒä½ ï¼Œæˆ‘æ‰èƒ½çˆ±ä½ ã€‚fromã€Šçº¯çœŸå¹´ä»£ã€‹</p>
<p>ğŸ’Œ I canâ€™t love you until I give you up.</p>
<hr>
<p>ğŸ <strong>as soon as</strong></p>
<p>â€œä¸€â€¦â€¦å°±â€¦â€¦â€ï¼Œéµå¾ª<code>ä¸»å°†ä»ç°</code>å“¦ï¼</p>
<p>ğŸŒŸ I will call you as soon as I arrive.</p>
<p><strong>å‡çº§ç‰ˆ</strong> <strong>no sooner â€¦ than â€¦</strong></p>
<p>éµå¾ªä¸»å¥è¿‡å»å®Œæˆï¼Œä»å¥ä¸€èˆ¬è¿‡å»ï¼</p>
<p>æ„æ€æ˜¯ï¼šåˆšåšå®ŒAï¼Œå°±å»åšBå•¦</p>
<p>æ‰€ä»¥Açš„æ—¶æ€ç›¸å½“äºè¯´è¯ç‚¹çš„è¿‡å»ï¼è€Œä¸”Aæ˜¯å®Œæˆäº†çš„ï¼Œæ‰€ä»¥æ˜¯è¿‡å»å®Œæˆæ—¶ï¼</p>
<p>è¯¥å¥å‹æè¿°çš„åŠ¨ä½œä¸€èˆ¬éƒ½å‘ç”Ÿåœ¨è¿‡å»å“¦ã€‚</p>
<p>ğŸŒŸ Dad had no sooner finished dinner than he took a Coke from the fridge.</p>
<hr>
<blockquote>
<p>æ¡ä»¶çŠ¶è¯­ä»å¥</p>
</blockquote>
<p>æ¡ä»¶çŠ¶è¯­ä»å¥è¡¨ç¤ºæ»¡è¶³æŸä¸ªæ¡ä»¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>ï¼Œäº‹ä»¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> æ‰ä¼šå‘ç”Ÿ!</p>
<p><strong>å¼•å¯¼è¯</strong></p>
<ul>
<li>if</li>
<li>unless</li>
</ul>
<p>ğŸ <strong>if</strong></p>
<p>ifé€‚ç”¨äºä¸»å°†ä»ç°</p>
<p>ğŸŒŸ If you jump, I will jump.</p>
<p>ğŸ <strong>unless</strong></p>
<p><code>unless</code>ä¸<code>if</code>åç€æ¥ï¼Œè¡¨ç¤ºé™¤é~</p>
<p>ğŸŒŸ Unless you jump, I wonâ€™t jump.</p>
<p>ğŸŒŸ If you donâ€™t jump, I wonâ€™t jump.</p>
<hr>
<blockquote>
<p>åŸå› çŠ¶è¯­ä»å¥</p>
</blockquote>
<p>å‘Šè¯‰ä½ äº‹æƒ… <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> å‘ç”Ÿçš„åŸå› ï¼é€šå¸¸ç”±<code>because, since, as</code> å¼•å¯¼ï¼Œæ°”åœºä¸Šé€æ¸å‡å¼±~</p>
<p>ğŸ <strong>because</strong></p>
<p><code>because</code>è¡¨ç¤ºç›´æ¥åŸå› ï¼Œèƒ½å¤Ÿå›ç­”<code>why</code>çš„æé—®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæé—®æ–¹æ˜¯ä¸çŸ¥é“åŸå› çš„ã€‚</p>
<p>â­ Why do you hate her?</p>
<p>ğŸŒŸ Because her dog always shits at my door.</p>
<p>ğŸ”” æ³¨æ„æ³¨æ„ï¼<code>because</code>ä¸èƒ½å’Œ<code>so</code>ä¸€èµ·ç”¨ï¼</p>
<hr>
<p>ğŸ <strong>since</strong></p>
<p><code>since</code>ä¸€èˆ¬æ”¾åœ¨å¥é¦–ï¼Œä¸€èˆ¬å¯ä»¥è¡¨ç¤ºä¸º<code>æ—¢ç„¶</code>ï¼Œå¸¦ç‚¹å°å‚²å¨‡</p>
<p>æ—¢ç„¶ä½ è¯šå¿ƒè¯šæ„çš„å‘é—®å•¦ï¼Œæˆ‘å°±å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆå§~</p>
<p>ğŸŒŸ Since you asked in good faith, I will tell you why~</p>
<hr>
<p>ğŸ <strong>as</strong></p>
<p><code>as</code>å¯ä»¥è¡¨ç¤º<code>ç”±äº</code>ï¼Œæ„æ€å’Œè¯­å¢ƒæ˜¯æœ€å¼±ä¹Ÿæ˜¯æœ€ä¸æ­£å¼çš„å“¦</p>
<p>ğŸŒŸ As Mom gets angry, we had better go outside for a while.</p>
<hr>
<blockquote>
<p>ç»“æœçŠ¶è¯­ä»å¥ï¼</p>
</blockquote>
<p>å‘Šè¯‰ä½ äº‹ä»¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> å¸¦æ¥çš„ç»“æœï¼</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨<code>so...that..., such...that...</code>å¼•å¯¼å•¦ï¼Œå¯ä»¥æ„ä¸ºï¼š<code>å¦‚æ­¤ï¼Œä»¥è‡³äº</code></p>
<p>ğŸŒŸ D&amp;G is <strong>so</strong> stupid <strong>that</strong> it <strong>took</strong> â€œhacked accountsâ€ <strong>as</strong> an excuse.</p>
<p><code>so</code>åé¢è·Ÿå½¢å®¹è¯ï¼Œ<code>such</code>åé¢è·Ÿäººæˆ–ç‰©~</p>
<p>â— The baby is <strong>so cute</strong> that Wong likes her.</p>
<p>â— She is <strong>such a cute baby</strong> that Wong likes her.</p>
<p>å½“ç„¶ï¼Œé‡åˆ°<code>many, much, little, few</code>è¿™ç±»ä¸å®šå½¢å®¹è¯ä¿®é¥°çš„æ—¶å€™ï¼Œåªèƒ½ç”¨<code>so</code></p>
<p>ğŸ‡±ğŸ‡¦ so many people, so much money</p>
<hr>
<blockquote>
<p>ç›®çš„çŠ¶è¯­ä»å¥ï¼</p>
</blockquote>
<p>å‘Šè¯‰ä½ åšäº‹ä»¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> æ˜¯ä¸ºäº†å•¥ï¼</p>
<p>ä¸€èˆ¬ç”¨<code>so that, in order that</code>å¼•å¯¼ï¼Œå¯ä»¥ç†è§£ä¸º<code>ä¸ºäº†ï¼Œä»¥ä¾¿</code></p>
<p>ğŸ·ï¸ <code>so that</code>å’Œ<code>in order that</code>ç”¨æ³•ç›¸åŒ</p>
<p>ğŸŒŸ I got up early <strong>so that / in order that</strong> I could catch the early flight.</p>
<p>æˆ‘ä»¬åšä¸ªå¯¹æ¯”(è·Ÿç»“æœçŠ¶è¯­<code>so...that</code>)</p>
<p>â˜€ï¸ I got up early <strong>so that</strong> I could catch the early flight.</p>
<p>ğŸŒ™ I got up <strong>so</strong> early <strong>that</strong> I felt drowsy in the afternoon.</p>
<p>å¯ä»¥ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢è¿›è¡ŒåŒºåˆ†å“¦</p>
<p>1ï¸âƒ£ çœ‹æ„æ€ã€‚æ—©èµ·æ˜¯ä¸ºäº†èµ¶é£æœºï¼Œä½†ç»“æœå¯èƒ½æ˜¯ä¸€æ•´å¤©ç²¾ç¥èé¡ï¼Œè®©äººçœ‹ç€åƒäºŒå‚»å­ã€‚</p>
<p>2ï¸âƒ£ ç»“æœçŠ¶è¯­ä»å¥çš„ soâ€¦that å¤§å¤šæ•°æƒ…å†µä¸‹åˆ†å¼€å†™ï¼Œç›®çš„çŠ¶è¯­ä»å¥çš„ so that åˆ™å½“åšå›ºå®šæ­é…æ¥è®°ï¼›</p>
<p>3ï¸âƒ£ <strong>ç›®çš„çŠ¶è¯­ä»å¥ä¸€èˆ¬å¸¦æƒ…æ€åŠ¨è¯ can/ could, may/ mightç­‰ã€‚</strong></p>
<hr>
<blockquote>
<p>è®©æ­¥çŠ¶è¯­ä»å¥</p>
</blockquote>
<p>å‘Šè¯‰ä½ æŸäº‹å³ä½¿é€€ä¸€ä¸‡æ­¥è®²ä¼šæ€æ ·ï¼Œé€šå¸¸ç”± <code>although, though, even though</code> ç­‰å¼•å¯¼ï¼Œå¯ä»¥ç†è§£ä¸º<code>å°½ç®¡â€¦â€¦</code>ï¼Œ<code>å³ä½¿â€¦â€¦</code>ã€‚</p>
<p>ğŸŒŸ Although Mom has a hot temper, Dad loves her very much.</p>
<p>â— <code>although</code>å’Œ<code>but</code>ä¹Ÿä¸èƒ½ç”¨åœ¨ä¸€ä¸ªå¥å­é‡Œï¼</p>
<p>â— <code>although</code>æ¯”<code>though</code>æ›´åŠ çš„æ­£å¼ï¼Œè€Œ<code>though</code>å¯ä»¥åšå‰¯è¯ï¼Œæ„æ€æ˜¯<code>ç„¶é¹…</code>ï¼Œé˜”ä»¥æ”¾åœ¨å¥æœ«~</p>
<p>ğŸŒŸ I got up early, I didnâ€™t catch the early flight, though.</p>
<hr>
<blockquote>
<p>æ¯”è¾ƒçŠ¶è¯­ä»å¥</p>
</blockquote>
<p>å‘Šè¯‰ä½ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> ä¸€æ ·ï¼Œæˆ–è€…<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> æ¯”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> æ›´æ€æ ·ã€‚é€šå¸¸ç”±<code>as + å½¢å®¹è¯/ å‰¯è¯ + asâ€¦</code>ï¼Œ<code>æ¯”è¾ƒçº§ + thanâ€¦</code>ç­‰å¼•å¯¼ã€‚</p>
<p>ğŸŒŸ My sister eats <strong>twice</strong> <strong>as much as</strong> I do.</p>
<p>ğŸ·ï¸ ç¬¬äºŒä¸ª<code>as</code>å¼•å¯¼æ¯”è¾ƒçŠ¶è¯­ä»å¥ã€‚ç¬¬ä¸€ä¸ª<code>as</code>æ˜¯<code>as...as...</code>ç»“æ„ï¼Œæ„ä¸º<code>å’Œ...ä¸€æ ·</code></p>
<hr>
<blockquote>
<p>æ–¹å¼çŠ¶è¯­ä»å¥</p>
</blockquote>
<p>å‘Šè¯‰ä½ åŠ¨ä½œä»¥ä»€ä¹ˆæ–¹å¼å±•å¼€ï¼Œå¸¸å¸¸ç”± as, as if/ though, the way å¼•å¯¼ã€‚</p>
<p>ğŸŒŸ When in Rome, do <strong>as</strong> the Romans do.<br>
ğŸ·ï¸ å…¥ä¹¡éšä¿—ã€‚</p>
<p>ğŸŒŸ Treat people <strong>the way</strong> you want to be treated.<br>
ğŸ·ï¸ ç”¨ä½ å¸Œæœ›åˆ«äººå¯¹å¾…ä½ çš„æ–¹å¼å»å¯¹å¾…åˆ«äººã€‚</p>
<hr>
<blockquote>
<p>åœ°ç‚¹çŠ¶è¯­ä»å¥</p>
</blockquote>
<p>å‘Šè¯‰ä½ åŠ¨ä½œåœ¨å“ªé‡Œå‘ç”Ÿï¼ˆå¯ä»¥æ˜¯æŠ½è±¡æ„ä¹‰ï¼‰ï¼Œå¸¸ç”± <code>where</code> ç­‰æ¥å¼•å¯¼ã€‚</p>
<p>ğŸŒŸ <strong>Where</strong> there is a will, there is a way.<br>
ğŸ·ï¸ æœ‰å¿—è€…äº‹ç«Ÿæˆã€‚</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[LeetCode ç®—æ³•é¢˜å½’æ¡£]]></title>
      <url>/2022/08/06/%E3%80%90LeetCode%E3%80%91%20%E5%88%B7%E9%A2%98%E5%BD%92%E6%A1%A3/</url>
      <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>å‘¼å‘¼å‘¼</p>
<p>è¿™æ˜¯æˆ‘çš„åˆ·é¢˜ç»Ÿè®¡~</p>
<p>æ¯å‘¨å¯¹è¿™äº›é¢˜è¿›è¡Œç®€å•çš„å¤ç›˜ï¼</p>
<hr>
<h2 id="åˆ†ç»„">åˆ†ç»„</h2>
<blockquote>
<p>éš¾åº¦ğŸŒŸ=3â­  ğŸŒ™=3ğŸŒŸ â˜€ï¸=3ğŸŒ™ æ€ç»´é¢˜â™¦ï¸</p>
</blockquote>
<p><strong>å‰ç¼€å’Œ</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">724</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/find-pivot-index/">å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒä¸‹æ ‡</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">1403</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/minimum-subsequence-in-non-increasing-order/">éé€’å¢æœ€å°å­åºåˆ—</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>æ¨¡æ‹Ÿ</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">592</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/fraction-addition-and-subtraction/">åˆ†æ•°åŠ å‡è¿ç®—</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">622</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/design-circular-queue/">è®¾è®¡å¾ªç¯é˜Ÿåˆ—</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">1374</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/generate-a-string-with-characters-that-have-odd-counts/">ç”Ÿæˆæ¯ä¸ªå­—ç¬¦éƒ½æ˜¯å¥‡æ•°ä¸ªçš„å­—ç¬¦ä¸²</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">2365</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/task-scheduler-ii/">ä»»åŠ¡è°ƒåº¦å™¨II</a></td>
<td style="text-align:center">ğŸŒ™â­</td>
</tr>
<tr>
<td style="text-align:center">636</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/exclusive-time-of-functions/">å‡½æ•°çš„ç‹¬å æ—¶é—´</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">640</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/solve-the-equation/">æ±‚è§£æ–¹ç¨‹</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">1706</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/where-will-the-ball-fall/">çƒä¼šè½åœ¨å“ª</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">202</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/happy-number/">å¿«ä¹æ•°</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">54</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/spiral-matrix/">èºæ—‹çŸ©é˜µ</a></td>
<td style="text-align:center">ğŸŒ”</td>
</tr>
<tr>
<td style="text-align:center">59</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/spiral-matrix-ii/">èºæ—‹çŸ©é˜µII</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">885</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/spiral-matrix-iii/">èºæ—‹çŸ©é˜µIII</a></td>
<td style="text-align:center">ğŸŒ™ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">2326</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/spiral-matrix-iv/">èºæ—‹çŸ©é˜µIV</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>å­—ç¬¦ä¸²</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">205</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/isomorphic-strings/">åŒæ„å­—ç¬¦ä¸²</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">392</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/is-subsequence/">åˆ¤æ–­å­åºåˆ—</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">409</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/longest-palindrome/">æœ€é•¿å›æ–‡ä¸²</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">1408</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/string-matching-in-an-array/">æ•°ç»„å­—ç¬¦ä¸²åŒ¹é…</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">761</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/special-binary-string/">ç‰¹æ®Šçš„äºŒè¿›åˆ¶åºåˆ—</a></td>
<td style="text-align:center">â˜€ï¸</td>
</tr>
<tr>
<td style="text-align:center">299</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/bulls-and-cows/">çŒœæ•°å­—</a></td>
<td style="text-align:center">ğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/two-sum/">ä¸¤æ•°ä¹‹å’Œ</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">1417</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/reformat-the-string/">é‡æ–°æ ¼å¼åŒ–å­—ç¬¦ä¸²</a></td>
<td style="text-align:center">ğŸŒŸ</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>æ•°ç»„</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1480</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/running-sum-of-1d-array/">ä¸€ç»´æ•°ç»„çš„åŠ¨æ€å’Œ</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">1331</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/rank-transform-of-an-array/">æ•°ç»„åºå·è½¬æ¢</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">121</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/">ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></td>
<td style="text-align:center">ğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">622</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/design-circular-queue/">è®¾è®¡å¾ªç¯é˜Ÿåˆ—</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">899</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/orderly-queue/">æœ‰åºé˜Ÿåˆ—</a></td>
<td style="text-align:center">â™¦ï¸</td>
</tr>
<tr>
<td style="text-align:center">2363</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/merge-similar-items/">åˆå¹¶ç›¸ä¼¼çš„ç‰©å“</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">2364</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/count-number-of-bad-pairs/">ç»Ÿè®¡åæ•°å¯¹çš„æ•°ç›®</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">2366</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/minimum-replacements-to-sort-the-array/">å°†æ•°ç»„æ’åºçš„æœ€å°æ›¿æ¢æ¬¡æ•°</a></td>
<td style="text-align:center">â˜€ï¸</td>
</tr>
<tr>
<td style="text-align:center">2367</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/number-of-arithmetic-triplets/">ç®—æ•°ä¸‰å…ƒç»„çš„æ•°é‡</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">1413</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/minimum-value-to-get-positive-step-by-step-sum/">é€æ­¥æ±‚å’Œå¾—åˆ°æ­£æ•°çš„æœ€å°å€¼</a></td>
<td style="text-align:center">ğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">394</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/decode-string/">å­—ç¬¦ä¸²è§£ç </a></td>
<td style="text-align:center">ğŸŒ™â­</td>
</tr>
<tr>
<td style="text-align:center">844</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/backspace-string-compare/">æ¯”è¾ƒé€€æ ¼å­—ç¬¦ä¸²</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">692</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/top-k-frequent-words/">å‰kä¸ªé«˜é¢‘å•è¯</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">1282</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/reformat-the-string/">ç”¨æˆ·åˆ†ç»„</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>åŠ¨æ€è§„åˆ’</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">392</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/is-subsequence/">åˆ¤æ–­å­åºåˆ—</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">121</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/">ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">70</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/climbing-stairs/">çˆ¬æ¥¼æ¢¯</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">509</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/fibonacci-number/">æ–æ³¢é‚£å¥‘æ•°åˆ—</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">746</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/min-cost-climbing-stairs/">èŠ±è´¹æœ€å°çˆ¬æ¥¼æ¢¯</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">62</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/unique-paths/">ä¸åŒè·¯å¾„</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">2369</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/check-if-there-is-a-valid-partition-for-the-array/">æ£€æŸ¥æ•°ç»„æ˜¯å¦å­˜åœ¨æœ‰æ•ˆåˆ’åˆ†</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">2370</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/longest-ideal-subsequence/submissions/">æœ€é•¿ç†æƒ³å­åºåˆ—</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>æ•°å­¦</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">593</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/valid-square/">æœ‰æ•ˆæ­£æ–¹å½¢</a></td>
<td style="text-align:center">â™¦ï¸</td>
</tr>
<tr>
<td style="text-align:center">70</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/climbing-stairs/">çˆ¬æ¥¼æ¢¯</a></td>
<td style="text-align:center">â™¦ï¸</td>
</tr>
<tr>
<td style="text-align:center">509</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/fibonacci-number/">æ–æ³¢é‚£å¥‘æ•°åˆ—</a></td>
<td style="text-align:center">â™¦ï¸</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>å¹¶æŸ¥é›†+DFP+BFSï¼ˆå›¾)</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">547</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/number-of-provinces/">çœä»½æ•°é‡</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">952</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/largest-component-size-by-common-factor/">æŒ‰å…¬å› æ•°è®¡ç®—æœ€å¤§ç»„ä»¶å¤§å°</a></td>
<td style="text-align:center">â˜€ï¸</td>
</tr>
<tr>
<td style="text-align:center">733</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/flood-fill/">å›¾åƒæ¸²æŸ“</a></td>
<td style="text-align:center">ğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center">200</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/number-of-islands/">å²›å±¿æ•°é‡</a></td>
<td style="text-align:center">ğŸŒŸğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>é“¾è¡¨</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">21</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/merge-two-sorted-lists/">åˆå¹¶æœ‰åºé“¾è¡¨</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">206</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/reverse-linked-list/">åè½¬é“¾è¡¨</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">876</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/middle-of-the-linked-list/">é“¾è¡¨ä¸­é—´èŠ‚ç‚¹</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">142</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/linked-list-cycle-ii/">ç¯å½¢é“¾è¡¨ II</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>æ ‘</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1161</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/maximum-level-sum-of-a-binary-tree/">æœ€å¤§å±‚å†…å…ƒç´ å’Œ</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">623</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/add-one-row-to-tree/">åœ¨äºŒå‰æ ‘ä¸­å¢åŠ ä¸€è¡Œ</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">589</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/n-ary-tree-preorder-traversal/">Nå‰æ ‘çš„å‰åºéå†</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">102</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/">äºŒå‰æ ‘çš„å±‚åºéå†</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">235</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree/">äºŒå‰æœç´¢æ ‘æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></td>
<td style="text-align:center">â­â­</td>
</tr>
<tr>
<td style="text-align:center">98</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/validate-binary-search-tree/">éªŒè¯äºŒå‰æœç´¢æ ‘</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">2368</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/reachable-nodes-with-restrictions/">å—é™åˆ¶æ¡ä»¶ä¸‹å¯è¾¾åˆ°çš„èŠ‚ç‚¹æ•°</a></td>
<td style="text-align:center">ğŸŒ™â­</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>äºŒåˆ†æ³•</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">704</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/binary-search/">äºŒåˆ†æŸ¥æ‰¾</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center">278</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/first-bad-version/">ç¬¬ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬</a></td>
<td style="text-align:center">â­</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>æ»‘åŠ¨çª—å£+åŒæŒ‡é’ˆ</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">424</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/binary-search/">æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center">438</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/find-all-anagrams-in-a-string/">æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½å€¼</a></td>
<td style="text-align:center">ğŸŒ™</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>ä¼˜å…ˆé˜Ÿåˆ—+å †</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">é¢˜å·</th>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">éš¾åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1046</td>
<td style="text-align:center"><a href="https://leetcode.cn/problems/last-stone-weight/">æœ€åä¸€å—çŸ³å¤´çš„é‡é‡</a></td>
<td style="text-align:center">ğŸŒŸ</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LeetCode </tag>
            
            <tag> æ€»ç»“ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonä¸­:=ç¬¦å·çš„ç”¨æ³•]]></title>
      <url>/2022/08/06/%E3%80%90Python%E3%80%91%20=%E7%AC%A6%E5%8F%B7/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æ˜¯ä¸æ˜¯ç»å¸¸çœ‹åˆ°:=ç¬¦å·è€Œåˆç™¾æ€ä¸å¾—å…¶è§£å‘¢</p>
</blockquote>
<h2 id="æ —å­">æ —å­</h2>
<p>è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šä¾‹å­!</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">321</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(v:=a)</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">321</span></span><br><span class="line"><span class="string">321</span></span><br><span class="line"><span class="string">321</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å¯¹æ•°å­—æœ‰ç€æŸç§è§„å¾‹çš„è¯ï¼Œå¯¹å…¶ä»–ç±»å‹æ˜¯å¦æœ‰æ•ˆå‘¢?</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†æ¥çœ‹ä¸€ä¸ªç®€å•çš„æ —å­</span></span><br><span class="line">a=<span class="built_in">input</span>() <span class="comment"># &quot;abcd&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v:=a)</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">abcd</span></span><br><span class="line"><span class="string">abcd</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šè¿°çš„ä¸¤ä¸ªæ —å­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ<code>:=</code>ç¬¦å·çš„ä½œç”¨æ˜¯åœ¨è¡¨è¾¾å¼å†…è·å–å˜é‡å€¼å¹¶èµ‹ç»™æ–°å˜é‡ã€‚</p>
<p>å¥½åƒä»–çš„è¿”å›å€¼ä¹ŸæŒºæœ‰æ„æ€çš„ï¼Ÿæˆ‘ä»¬è¿›ä¸€æ­¥è§‚å¯Ÿ:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">7</span></span><br><span class="line"><span class="built_in">print</span>(V:=(a+<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(V)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">9</span></span><br><span class="line"><span class="string">9</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ²¡é”™äº†ï¼Œä¸ä½†èƒ½å¤Ÿå°†è¡¨è¾¾å¼çš„å€¼èµ‹ç»™å˜é‡ï¼Œè¿˜èƒ½å¤Ÿå†å‘ä¸Šè¿”å›è¿™ä¸ªå€¼ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p><code>:=</code>ç¬¦å·ä¸èƒ½å•ç‹¬ä½œä¸ºä¸€ä¸ªè¯­å¥ä½¿ç”¨ï¼Œä¸€èˆ¬æ˜¯åµŒå¥—åœ¨å‡½æ•°å†…éƒ¨ï¼Œç”¨äºä¸­é—´å±‚è·å–è¿”å›å€¼ã€‚</p>
<p>å¯ä»¥ç±»ä¼¼äºAç»™Bæ‰“ç”µè¯ï¼ŒCå·å¬äº†ä»–ä»¬çš„å†…å®¹ï¼Œå¹¶ä¸”è®°ä¸‹æ¥äº†ã€‚æ­¤æ—¶Aå’ŒBä¾æ—§åœ¨æ­£å¸¸é€šè¯ã€‚</p>
<p>å…¶å®å°±æ˜¯ä¸ª<code>è¯­æ³•ç³–</code>ä¸€æ ·çš„ä¸œè¥¿å•¦</p>
<h2 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h2>
<p>æ•°æ®åˆ†æï¼Œè¦æ±‚ä»å¾®ä¿¡æ¥é¾™ä¸­éšæœºæŠ½å–<code>35</code>åé€‰æ‰‹å‚åŠ æ¯•ä¸šå…¸ç¤¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">solve</span>(<span class="params">s:<span class="built_in">str</span>,k:<span class="built_in">int</span>=<span class="number">35</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">    hashmap=defaultdict(<span class="built_in">str</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(s) <span class="keyword">as</span> f:</span><br><span class="line">        nameList=f.readlines()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> nameList:</span><br><span class="line">        hashmap[val[<span class="number">0</span>]]=(val:=i.split(<span class="string">&quot;.&quot;</span>))[<span class="number">1</span>].strip(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> random.sample(<span class="built_in">range</span>(<span class="number">1</span>,(l:=<span class="built_in">len</span>(hashmap))+<span class="number">1</span>),l-k <span class="keyword">if</span> l&gt;k <span class="keyword">else</span> <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">print</span>(hashmap[<span class="built_in">str</span>(i)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">solve(<span class="string">r&quot;C:\Users\lenovo\Desktop\æ–°å»º XLS å·¥ä½œè¡¨.txt&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥åšä¸ªå°ç»ƒä¹ å§~</p>
<hr>
<h2 id="ç»ƒä¹ é¢˜">ç»ƒä¹ é¢˜</h2>
<p>ç»™å®šä¸€ä¸ªå•è¯åˆ—è¡¨ <code>words</code>å’Œä¸€ä¸ªæ•´æ•° <code>k </code>ï¼Œè¿”å›å‰<code>k</code>ä¸ªå‡ºç°æ¬¡æ•°æœ€å¤šçš„å•è¯ã€‚</p>
<p>è¿”å›çš„ç­”æ¡ˆåº”è¯¥æŒ‰å•è¯å‡ºç°é¢‘ç‡ç”±é«˜åˆ°ä½æ’åºã€‚å¦‚æœä¸åŒçš„å•è¯æœ‰ç›¸åŒå‡ºç°é¢‘ç‡ï¼Œ æŒ‰<code>å­—å…¸é¡ºåº</code> æ’åºã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">topKFrequent</span>(<span class="params">self, words: <span class="type">List</span>[<span class="built_in">str</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        <span class="comment"># å…ˆè·å–åˆ°ä¸€ä¸ªå•è¯hashè¡¨ Counter(words)</span></span><br><span class="line">        <span class="comment"># é¢˜ç›®æ‰€ç»™çš„éœ€è¦è¿›è¡Œçš„æ’åºä¼˜å…ˆåº¦ä¸ºï¼š æ•°é‡&gt;å­—å…¸åº</span></span><br><span class="line">        <span class="comment"># æˆ‘ä»¬å¯ä»¥è€ƒè™‘é‡‡ç”¨sortedå‡½æ•°ï¼Œé€šè¿‡å…³é”®è¯ key=lambda x:(æ•°é‡,å­—å…¸åº) è¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="comment"># å½“ç„¶ï¼Œæ•°é‡æ˜¯ä»å°åˆ°å¤§ï¼Œè€Œå­—å…¸åºæ˜¯ä»å¤§åˆ°å°ï¼Œè¿™é‡Œéœ€è¦æ§åˆ¶</span></span><br><span class="line">        <span class="comment"># æ‰€ä»¥æœ€ç»ˆçš„è¯­å¥ä¸º:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sorted</span>((cnt:=Counter(words)).keys(),key=<span class="keyword">lambda</span> x:(-cnt[x],x))[:k]</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªè¯­å¥ç­‰ä»·äºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">topKFrequent</span>(<span class="params">self, words, k: <span class="built_in">int</span></span>):</span><br><span class="line">        cnt=Counter(words)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sorted</span>(cnt.keys(),key=<span class="keyword">lambda</span> x:(-cnt[x],x))[:k]</span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€äºŒã€‘è¯­æ€ã€å€’è£…ã€å¼ºè°ƒã€çœç•¥]]></title>
      <url>/2022/08/04/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E8%A2%AB%E5%8A%A8%E5%BC%BA%E8%B0%83%E5%80%92%E8%A3%85%E7%9C%81%E7%95%A5/</url>
      <content type="html"><![CDATA[<h2 id="è¢«åŠ¨è¯­æ€">è¢«åŠ¨è¯­æ€</h2>
<p>ä¸ä¸»åŠ¨è¯­æ€ç›¸å¯¹ï¼Œè¢«åŠ¨è¯­æ€å°†ç„¦ç‚¹æ”¾åœ¨<code>åŠ¨ä½œçš„æ‰¿å—è€…</code>ä¸Šã€‚</p>
<img src="/2022/08/04/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E8%A2%AB%E5%8A%A8%E5%BC%BA%E8%B0%83%E5%80%92%E8%A3%85%E7%9C%81%E7%95%A5/image-20220804152517953.png" alt="image-20220804152517953" style="zoom: 50%;">
<blockquote>
<p>æ„æˆ: &lt;æ‰¿å—è€…&gt; be + è¿‡å»åˆ†è¯ + ï¼ˆby + &lt;åŠ¨ä½œæ‰§è¡Œè€…&gt;ï¼‰</p>
</blockquote>
<p><strong>ä¾‹å¥</strong></p>
<ul>
<li>His bicycle was stolen.</li>
<li>The building has been built in 2000.</li>
</ul>
<blockquote>
<p>æ³¨æ„å•¦ï¼Œè¢«åŠ¨è¯­æ€åªæœ‰ä¸»è¯­æ²¡æœ‰å®¾è¯­ï¼Œby xxx æ˜¯åŠ¨ä½œçš„æ‰¿æ¥è€…ï¼Œä½œçŠ¶è¯­</p>
</blockquote>
<h3 id="ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨è¢«åŠ¨è¯­æ€å‘¢ï¼Ÿ">ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨è¢«åŠ¨è¯­æ€å‘¢ï¼Ÿ</h3>
<ol>
<li>ä¸çŸ¥é“åŠ¨ä½œçš„æ‰§è¡Œè€…ï¼Œæˆ–æ˜¯æ²¡æœ‰å¿…è¦çŸ¥é“
<ul>
<li>Paper is made from wood.</li>
<li>He was wounded in the fight.</li>
<li>Electricity is used to run machines.</li>
</ul>
</li>
<li>éœ€è¦å¼ºè°ƒåŠ¨ä½œçš„å¯¹è±¡æ—¶
<ul>
<li>Calculator canâ€™t be used in the maths exam.</li>
<li>He was awarded first prize in that contest.</li>
</ul>
</li>
<li>è®©è¯­æ°”å©‰è½¬ï¼Œæˆ–æ˜¯åˆ»æ„éšè—ä¿¡æ¯
<ul>
<li>The construction of the new lab must be completed by the end of next month.</li>
</ul>
</li>
</ol>
<h3 id="è¢«åŠ¨è¯­æ€çš„ç»“æ„">è¢«åŠ¨è¯­æ€çš„ç»“æ„</h3>
<ul>
<li>ä¸€èˆ¬ç°åœ¨æ—¶: be + p. p åŠç‰©åŠ¨è¯çš„è¿‡å»åˆ†è¯</li>
<li>ä¸€èˆ¬è¿‡å»æ—¶: was / were + p. p</li>
<li>ä¸€èˆ¬å°†æ¥æ—¶: shall / will be + p. p</li>
<li>ç°åœ¨å®Œæˆæ—¶: have / has been + p. p</li>
<li>ç°åœ¨è¿›è¡Œæ—¶: be + being + p. p</li>
<li>è¿‡å»å°†æ¥æ—¶: should / would be + p. p</li>
<li>æƒ…æ€åŠ¨è¯: æƒ…æ€åŠ¨è¯ + be + p. p</li>
</ul>
<h3 id="å¦‚ä½•å°†ä¸»åŠ¨å˜æˆè¢«åŠ¨å‘¢ï¼Ÿ">å¦‚ä½•å°†ä¸»åŠ¨å˜æˆè¢«åŠ¨å‘¢ï¼Ÿ</h3>
<ol>
<li>ä»å¥å­çš„æ„ä¹‰ä¸Šçœ‹ï¼Œæ‰¾å‡º<code>è¢«å®Œæˆ</code>çš„äº‹ç‰©
<ul>
<li>ä¸»åŠ¨: People speak English in many countries.</li>
<li>è¢«åŠ¨: English is spoken by People in many countries.</li>
</ul>
</li>
<li>ä»è¯­æ³•çš„è§’åº¦çœ‹ï¼ŒæŠŠ<code>å®¾è¯­</code>æ”¹æˆä¸»è¯­
<ul>
<li>ä¸»åŠ¨: Xiao Liu has invited you to a lunch party.</li>
<li>è¢«åŠ¨: You has been invited to a lunch party by Xiao Liu.</li>
</ul>
</li>
</ol>
<h3 id="ç‰¹æ®Šæƒ…å†µ">ç‰¹æ®Šæƒ…å†µ</h3>
<p>åœ¨ä¸»åŠ¨å˜æˆè¢«åŠ¨æ—¶ï¼Œéœ€è¦ç•™æ„ä»¥ä¸‹å‡ ä¸ªç‰¹æ®Šæƒ…å†µï¼š</p>
<ol>
<li>å«åŒå®¾è¯­çš„ä¸»åŠ¨å˜æˆè¢«åŠ¨æ—¶ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š
<ol>
<li>é—´æ¥å®¾è¯­å˜æˆä¸»è¯­ï¼Œç›´æ¥å®¾è¯­ä¿æŒä¸å˜</li>
<li>ç›´æ¥å®¾è¯­å˜ä½ä¸»è¯­ï¼Œé—´æ¥å®¾è¯­ç”¨<code>to</code>æˆ–<code>for</code>å¼•å¯¼</li>
</ol>
</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">He told us a story.</span><br><span class="line"></span><br><span class="line"><span class="comment"># type 1</span></span><br><span class="line">We were told a story (by him).</span><br><span class="line"></span><br><span class="line"><span class="comment"># type 2</span></span><br><span class="line">A story was told to us (by him).</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>çŸ­è¯­åŠ¨è¯çš„è¢«åŠ¨éœ€è¦è§†ä½œä¸€ä¸ªæ•´ä½“ï¼Œä¸èƒ½çœå»åŠ¨è¯åçš„ä»‹è¯æˆ–å‰¯è¯</li>
<li>çœç•¥çš„toå˜æˆè¢«åŠ¨æ—¶éœ€è¦è¡¥ä¸Š</li>
<li>åŠ¨è¯ä¸å®šå¼çš„è¢«åŠ¨è¯­æ€ä¸º<code>to be ï¼‹è¿‡å»åˆ†è¯</code></li>
<li>ä»¥ç–‘é—®ä»£è¯å¼€å¤´çš„ç–‘é—®å¥è½¬æ¢æˆè¢«åŠ¨å¥æ—¶è¦æ³¨æ„è¯åºï¼šåº”å°†ä¸»åŠ¨å¥ä¸­çš„ç–‘é—®ä»£è¯æ”¹ä¸ºä»‹è¯byçš„å®¾è¯­ï¼Œä½†ä»ç„¶æ”¾åœ¨å¥å­å¼€å¤´</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Who has broken the cup?</span><br><span class="line"></span><br><span class="line">By Whom has the cup been broken?</span><br></pre></td></tr></table></figure>
<img src="/2022/08/04/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E8%A2%AB%E5%8A%A8%E5%BC%BA%E8%B0%83%E5%80%92%E8%A3%85%E7%9C%81%E7%95%A5/image-20220804205826411.png" alt="image-20220804205826411" style="zoom:50%;">
<hr>
<h2 id="å€’è£…å¥">å€’è£…å¥</h2>
<p>å€’è£…å¥ä½œä¸ºè‹±è¯­çš„ä¸€ç§ä¿®è¾æ‰‹æ³•ï¼Œå¯ä»¥ç”¨æ¥å¼ºè°ƒ<code>ä¸»è¯­</code>ã€‚ä¸€èˆ¬å‘¢ï¼Œå¸¸è§äºä¹¦é¢ç”¨è¯­ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>ä½ åƒ<code>èƒ¡èåœ</code>äº†å—ï¼Ÿ</li>
<li>åƒèƒ¡èåœäº†å—ï¼Œ<code>ä½ </code>ï¼Ÿ</li>
</ul>
<h3 id="ä¸€ã€å®Œå…¨å€’è£…">ä¸€ã€å®Œå…¨å€’è£…</h3>
<p>å®Œå…¨å€’è£…çš„è°“è¯­åŠ¨è¯å®Œå…¨æ”¾åœ¨ä¸»è¯­å‰äº†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨äºå‰¯è¯/ä»‹è¯çŸ­è¯­åœ¨å¥é¦–çš„å€’è£…ï¼Œå’Œä¸»è¯­è¡¥è¯­çš„å€’è£…ã€‚</p>
<p><strong>åœ°ç‚¹å‰¯è¯åœ¨å¥é¦–çš„å€’è£…</strong></p>
<p>å…³é”®è¯: <code>here</code>ï¼Œ<code>there</code></p>
<p>ä¾‹å¥: There <code>goes</code> the last bus.</p>
<p><strong>æ—¶é—´å‰¯è¯åœ¨å¥é¦–çš„å€’è£…</strong></p>
<p>å…³é”®è¯: <code>now</code>ï¼Œ<code>then</code></p>
<p>ä¾‹å¥: Now <code>comes</code> the wolfâ€™s turn.</p>
<p><strong>è¡¨è¿åŠ¨æ–¹å‘åœ¨å¥é¦–çš„å€’è£…</strong></p>
<p>å…³é”®è¯: <code>in</code>ï¼Œ<code>out</code>ï¼Œ<code>up</code>ï¼Œ<code>down</code>ï¼Œ<code>away</code></p>
<p>ä¾‹å¥: Up drive the car on the road.</p>
<p><strong>è¡¨è¯­çš„å€’è£…</strong></p>
<p>å…³é”®è¯ï¼šå½¢å®¹è¯ã€åˆ†è¯ã€ä»‹è¯çŸ­è¯­ã€<code>such</code></p>
<p>ä¾‹å¥ï¼šSeated on the ground is a group of rabbits.</p>
<p>Such were the wolfâ€™s trick.</p>
<hr>
<h3 id="äºŒã€éƒ¨åˆ†å€’è£…">äºŒã€éƒ¨åˆ†å€’è£…</h3>
<p>åˆ†ç¦»åŠ©åŠ¨è¯å’Œè°“è¯­åŠ¨è¯ï¼Œå°†åŠ©åŠ¨è¯æå‰ã€‚</p>
<p>ä¸»è¦ç”¨åœ¨ï¼š</p>
<ul>
<li>å¥é¦–æœ‰å¦å®šæ„ä¹‰æ—¶</li>
<li>å¥é¦–æœ‰<code>only</code>æ—¶</li>
<li><code>if...should...</code>æ„æˆè™šæ‹Ÿè¯­æ°”æ—¶</li>
<li>å›ºå®šå¥å‹</li>
</ul>
<p><strong>å¥é¦–æœ‰å¦å®šæ„ä¹‰çš„å€’è£…</strong></p>
<p>Never befor have I eaten such a delicious carrot.</p>
<p><strong>å¥é¦–æœ‰Onlyçš„å€’è£…</strong></p>
<p>Only in this way can we grow delicious carrots.</p>
<p>Only then did the rabbit meet the wolf.</p>
<p><strong>ifâ€¦shouldâ€¦æ„æˆè™šæ‹Ÿçš„å€’è£…</strong></p>
<p>æ­£å¸¸è¯­åºï¼šIf I should win the lottery, I would buy a huge pile of carrots.</p>
<p>å€’è£…: Shoud I win the lottery, I would buy a huge pile of carrots.</p>
<p><strong>å›ºå®šå¥å‹</strong></p>
<p>so do I.</p>
<p>neither/nor can the wolf.</p>
<hr>
<h3 id="ä¸‰ã€å½¢å¼å€’è£…">ä¸‰ã€å½¢å¼å€’è£…</h3>
<p>å½¢å¼å€’è£…ä»…ä»…æ˜¯å°†å¼ºè°ƒå†…å®¹æå‰ï¼Œè€Œä¸å¯¹è°“è¯­åŠ¨è¯å’ŒåŠ©åŠ¨è¯è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>ä¸»è¦æœ‰å¦‚ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>æ„Ÿå¹å¥</li>
<li>æ¯”è¾ƒå¥ the more the more</li>
<li>however whatever å¼•å¯¼è®©æ­¥çŠ¶è¯­ä»æ—§</li>
<li>as though å¼•å¯¼è®©æ­¥çŠ¶è¯­ä»å¥</li>
</ul>
<p><strong>æ„Ÿå¹å¥</strong></p>
<p>What a delicious carrot it is!</p>
<p><strong>æ¯”è¾ƒå¥</strong></p>
<p>The more carrots you eat, the healthier you become.</p>
<p><strong>è®©æ­¥çŠ¶è¯­</strong></p>
<p>However long this video is, you should watch it till the end.</p>
<p>Much as he likes the carrot, he doesnâ€™t want to eat it.</p>
<img src="/2022/08/04/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E8%A2%AB%E5%8A%A8%E5%BC%BA%E8%B0%83%E5%80%92%E8%A3%85%E7%9C%81%E7%95%A5/image-20220804221342215.png" alt="image-20220804221342215" style="zoom:50%;">
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€ä¸€ã€‘ å¥å­æˆåˆ†]]></title>
      <url>/2022/08/03/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E5%8F%A5%E5%AD%90%E6%88%90%E5%88%86/</url>
      <content type="html"><![CDATA[<h2 id="å¥å­æˆåˆ†">å¥å­æˆåˆ†</h2>
<hr>
<h3 id="ç®€å•å¥">ç®€å•å¥</h3>
<p>è¯­å¥ä¸­çš„æœ€å°å•å…ƒæ˜¯<code>ç®€å•å¥</code>(simple sentences)ï¼Œè€Œç®€å•å¥çš„æ„æˆå¦‚ä¸‹ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>ä¸»</mtext><msubsup><mtext>è¯­</mtext><mrow><mi>s</mi><mi>u</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi></mrow><mrow><mtext>äºº</mtext><mi mathvariant="normal">/</mi><mtext>ç‰©</mtext></mrow></msubsup><mo>+</mo><mtext>è°“</mtext><msub><mtext>è¯­</mtext><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow></msub></mrow><annotation encoding="application/x-tex">ä¸»è¯­^{äºº/ç‰©}_{subject}+è°“è¯­_{predicate}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.4374em;"></span><span class="mord cjk_fallback">ä¸»</span><span class="mord"><span class="mord cjk_fallback">è¯­</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.3987em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">äºº</span><span class="mord mtight">/</span><span class="mord cjk_fallback mtight">ç‰©</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4374em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord cjk_fallback">è°“</span><span class="mord"><span class="mord cjk_fallback">è¯­</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>è°“è¯­çš„æ ¸å¿ƒæ˜¯è°“è¯­åŠ¨è¯ï¼Œä½†è°“è¯­å¹¶ä¸ç­‰åŒäºè°“è¯­åŠ¨è¯å“¦ã€‚</p>
<blockquote>
<p>å¥å­æˆåˆ†å’Œè¯æ€§å¹¶æ²¡æœ‰ä¸€ä¸€å¯¹åº”çš„å“¦</p>
</blockquote>
<p><img src="/2022/08/03/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E5%8F%A5%E5%AD%90%E6%88%90%E5%88%86/image-20220803232917051.png" alt="image-20220803232917051"></p>
<p>æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹~</p>
<p>è‹±è¯­çš„è¯­æ³•ä¸ä¸­æ–‡ä¸åŒï¼Œéµå¾ªä¸¥æ ¼çš„æ ¼å¼ï¼Œå…¶ä¸­æœ€åŸºæœ¬çš„å•å…ƒå°±æ˜¯<code>ä¸»è¯­+è°“è¯­</code>æ„æˆçš„ç®€å•å¥ã€‚ä¸»è¯­æ˜¯ä¸€ä¸ªå·¥äººï¼Œè°“è¯­å°±æ˜¯å·¥äººæ‰‹ä¸Šçš„é•°åˆ€å’Œé”„å¤´ã€‚æœ‰æ—¶å€™ï¼Œå·¥äººä¼šæ‹¿ç€é”„å¤´å»å‰²ç¨»å­ï¼Œç¨»å­å°±æ˜¯é”„å¤´çš„æ–½åŠ›å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<code>å®¾è¯­</code>ã€‚æœ‰æ—¶å€™ï¼Œç¨»å­æŸ“ä¸Šäº†ç™½åŒ–ç—…ï¼Œè¿™ä¸ªç™½åŒ–è®©ç¨»å­å˜ç™½äº†ï¼Œç™½è‰²ä¾¿æ˜¯ç¨»å­çš„ä¿®é¥°é¢œè‰²ï¼Œæ¢å¥è¯è¯´ï¼Œå«åš<code>å®šè¯­</code>ï¼Œå®ƒä½œä¸ºä¸€å±‚<code>å¤–å£³</code>å›ºå®šåœ¨äº†å®¾è¯­ä¸Šã€‚é‚£è¿™ä¸ªç¨»å­æ˜¯æ°´ç¨»è¿˜æ˜¯æ—±ç¨»å‘¢ï¼Ÿå·¥äººå‘Šè¯‰æˆ‘ä»¬ï¼Œæ˜¯æ°´ç¨»ã€‚æ°´ç¨»ï¼Œå°±æ˜¯å¯¹ç¨»å­è¿›è¡Œè¿›ä¸€æ­¥çš„è¡¥å……ï¼Œå«åš<code>å®¾è¯­è¡¥è¶³è¯­</code>ã€‚ä¸­åˆï¼Œå·¥äººå–åŠ›åœ°ç ç€ç¨»å­ï¼Œè€Œä¸­åˆå’Œå–åŠ›ï¼Œå°±æ˜¯<code>çŠ¶è¯­</code>ï¼ŒçŠ¶è¯­è®©å¥å­æœ‰äº†æ— é™çš„å¯èƒ½ã€‚</p>
<p>æˆ‘ä»¬å¯¹çŠ¶è¯­ã€å®šè¯­ã€è¡¨è¯­çš„æ¦‚å¿µå¯ä»¥åšä¸ªç®€å•çš„åŒºåˆ†ï¼š</p>
<p>è¡¨è¯­æœ€ç®€å•ï¼Œåªç”¨æ¥ä¿®é¥°æˆ–è¯´æ˜ä¸»è¯­ã€‚è€Œå®šè¯­ï¼Œä¸€èˆ¬åªå¥—åœ¨åè¯æˆ–ä»£è¯ä¸Šï¼Œä½œä¸ºæŒ‚ä»¶è®©å…¶åŠŸèƒ½æ›´åŠ å®Œå–„ã€‚çŠ¶è¯­å°±ç‰›é€¼å¤šå•¦ï¼Œå‰¯è¯ã€å½¢å®¹è¯ã€åŠ¨è¯ã€å…¨å¥ï¼Œä»–éƒ½èƒ½è¿›è¡Œä¿®é¥°ï¼Œç”šè‡³æ˜¯ä¼ é€’æ—¶é—´ã€åœ°ç‚¹ã€åŸå› ã€ç›®çš„ã€ç»“æœã€æ–¹å¼ã€ç¨‹åº¦ç­‰ï¼Œè¿™äº›å¯¹å¥å­åŠ ä»¥å®Œå–„çš„æˆåˆ†éƒ½æ˜¯çŠ¶è¯­ã€‚(åæ­£æ’é™¤æ³•å•¦ï¼Œçœ‹èµ·æ¥æ€ªæ€ªçš„ç®—åœ¨çŠ¶è¯­å¤´ä¸Š)</p>
<h3 id="å¤åˆå¥">å¤åˆå¥</h3>
<p>ä¸¤ä¸ªç®€å•å¥ä¸­é—´çš„å…ƒç´ ï¼Œå«åš<code>è¿è¯</code>ï¼Œä¾‹å¦‚<code>and</code>ã€<code>or</code>ã€<code>then</code>ç­‰ç­‰~è¿è¯çš„ä½œç”¨æ˜¯è¿æ¥ä¸¤ä¸ªç®€å•å¥ï¼</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mtext>Â </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext>Â </mtext><mi>B</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">A\ and \ B.
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">A</span><span class="mspace">Â </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">.</span></span></span></span></span></p>
<h3 id="å¤æ‚å¥">å¤æ‚å¥</h3>
<p>è€Œå½“æŸä¸ªç®€å•å¥å……å½“å¦ä¸€ä¸ªç®€å•å¥çš„å¥å­æˆåˆ†æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå°±å«å¤æ‚å¥æˆ–è€…<code>ä¸»ä»å¤åˆå¥</code>ï¼Œè¢«å……å½“çš„ç§°ä¸º<code>ä¸»å¥</code>ï¼Œå……å½“çš„ç§°ä¸º<code>ä»å¥</code>ã€‚ä¾‹å¦‚ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>H</mi><mi>e</mi><mtext>Â </mtext><mi>i</mi><mi>s</mi><mtext>Â </mtext><mi>a</mi><mtext>Â </mtext><mi>m</mi><mi>a</mi><mi>n</mi><mtext>Â </mtext><mi>w</mi><mi>h</mi><mi>o</mi><mtext>Â </mtext><mi>l</mi><mi>i</mi><mi>k</mi><mi>e</mi><mi>s</mi><mtext>Â </mtext><mi>p</mi><mi>l</mi><mi>a</mi><mi>y</mi><mtext>Â </mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">He\ is \ a\ man\ who\ likes\ play\ games. 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">He</span><span class="mspace">Â </span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mspace">Â </span><span class="mord mathnormal">a</span><span class="mspace">Â </span><span class="mord mathnormal">man</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal" style="margin-right:0.03148em;">ik</span><span class="mord mathnormal">es</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">am</span><span class="mord mathnormal">es</span><span class="mord">.</span></span></span></span></span></p>
<hr>
<h2 id="å¥å­åˆ†ç±»">å¥å­åˆ†ç±»</h2>
<p><img src="/2022/08/03/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E5%8F%A5%E5%AD%90%E6%88%90%E5%88%86/image-20220804000032303.png" alt="image-20220804000032303"></p>
<hr>
<h3 id="ä¸€äº›æ„Ÿæƒ³">ä¸€äº›æ„Ÿæƒ³</h3>
<p>å°±åƒå›¾åƒæœ‰ç€æœ€å°å•å…ƒï¼Œå¥å­ä¹Ÿæœ‰ç€å±äºå®ƒçš„æœ€å°å•ä½ï¼Œè¿™å°±æ˜¯ <s>ä½ çš„å·¥äººçˆ·çˆ·</s> ç®€å•å¥!</p>
<p>ä»ç®€å•å¥çš„ç»“æ„æ¥çœ‹ï¼Œå¥å­èƒ½å¤Ÿæ‹†è§£æˆå…«å¤§å—ï¼Œåˆ†åˆ«æ˜¯ä¸»è°“å®¾ã€å®šçŠ¶è¡¥ã€åŒä½è¯­ã€æ’å…¥è¯­ï¼Œè°“è¯­æœªå¿…æ˜¯åŠ¨è¯ï¼ŒåŠ¨è¯ä¹Ÿæœªå¿…æ˜¯è°“è¯­ï¼Œä½†è°“è¯­åŠ¨è¯æ˜¯å¯ä»¥ç‹¬ç«‹åšè°“è¯­çš„ã€‚</p>
<p>å¤šä¸ªç®€å•å¥é›†æˆäº†å¤åˆå¥ï¼Œå¤åˆå¥æ ¹æ®ç»„åˆæ–¹å¼æ˜¯æ‹¼æ¥è¿˜æ˜¯åµŒå¥—ï¼Œåˆ†ä¸ºäº†å¤åˆå¥å’Œå¤æ‚å¥ã€‚</p>
<p>æ ¹æ®å¥å­æœ¬èº«çš„å«ä¹‰ï¼Œåˆèƒ½åˆ†æˆå››å¤§å¤©ç‹ï¼šé™ˆè¿°ã€ç–‘é—®ã€ç¥ˆä½¿ã€æ„Ÿå¹ï¼›å…¶ä¸­èƒ½åŠ›æœ€å¼ºçš„ç–‘é—®å¥ï¼Œæ‰‹ä¸‹å±…ç„¶è¿˜æœ‰å››å¤§å¤©ç‹ï¼åˆ†åˆ«æ˜¯ä¸€èˆ¬ç–‘é—®ã€åä¹‰ç–‘é—®å¥ã€ç‰¹æ®Šç–‘é—®ã€é€‰æ‹©ç–‘é—®ï¼</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¼ªä»£ç ]]></title>
      <url>/2022/08/03/%E3%80%90%E7%A7%91%E7%A0%94%E3%80%91%E4%BC%AA%E4%BB%A3%E7%A0%81/</url>
      <content type="html"><![CDATA[<h1>ä¼ªä»£ç æ•™ç¨‹</h1>
<hr>
<blockquote>
<p>èµ·ä¸€ç¯‡ä¼ªä»£ç åŸºç¡€æ•™ç¨‹</p>
</blockquote>
<p>ä¼ªä»£ç (Pseudo code)æ˜¯ä¸€ç§ä»‹äº<code>è®¡ç®—æœºè¯­è¨€</code>å’Œ<code>è‡ªç„¶è¯­è¨€</code>é—´çš„æ–‡å­—å’Œç¬¦å·ï¼Œæ˜¯è¡¨è¾¾ç®—æ³•çš„ç®€å•è€Œæœ‰æ•ˆçš„æ–¹æ³•ã€‚ä¼ªä»£ç ä¸éœ€è¦å…³æ³¨åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæœ¬èº«å°±æ˜¯ç®—æ³•æ¡†æ¶çš„é€»è¾‘æ¨¡å‹ã€‚</p>
<h2 id="ä¸€ã€èµ‹å€¼è¯­å¥">ä¸€ã€èµ‹å€¼è¯­å¥</h2>
<p>èµ‹å€¼å·<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>â†</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A\leftarrow B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>ï¼Œè¡¨ç¤ºå°†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>çš„å†…å®¹ä¼ é€’ç»™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>ï¼Œç›¸å½“äºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A=B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></p>
<h2 id="äºŒã€è¾“å…¥è¾“å‡º">äºŒã€è¾“å…¥è¾“å‡º</h2>
<p><strong>è¾“å…¥</strong></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>:</mo><mtext>Â </mtext><mi>i</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mtext>Â </mtext><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mtext>Â </mtext><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">Input:\ input\ parameters\ A,B,C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">n</span><span class="mord mathnormal">p</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal">p</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace">Â </span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">am</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ers</span><span class="mspace">Â </span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></p>
<p><strong>è¾“å‡º</strong></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>:</mo><mtext>Â </mtext><mi>o</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mtext>Â </mtext><mi>r</mi><mi>e</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Output:\ output \ result</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace">Â </span><span class="mord mathnormal">res</span><span class="mord mathnormal">u</span><span class="mord mathnormal">lt</span></span></span></span></p>
<h2 id="ä¸‰ã€æ¡ä»¶è¯­å¥">ä¸‰ã€æ¡ä»¶è¯­å¥</h2>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>I</mi><mi>f</mi><mtext>Â </mtext><mi>A</mi><mtext>Â </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi><mtext>Â </mtext><mi>B</mi><mspace linebreak="newline"></mspace><mi>E</mi><mi>l</mi><mi>s</mi><mi>e</mi><mtext>Â </mtext><mi>C</mi><mspace linebreak="newline"></mspace><mi>E</mi><mi>n</mi><mi>d</mi><mtext>Â </mtext><mi>i</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">If\ A \ then \ B
\\
Else \ C
\\
End\ if
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace">Â </span><span class="mord mathnormal">A</span><span class="mspace">Â </span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">El</span><span class="mord mathnormal">se</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace">Â </span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></span></p>
<h2 id="å››ã€å¾ªç¯è¯­å¥">å››ã€å¾ªç¯è¯­å¥</h2>
<h3 id="4-1-forå¾ªç¯">4.1 forå¾ªç¯</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mi>o</mi><mi>r</mi><mtext>Â </mtext><mi>i</mi><mo>=</mo><mn>1</mn><mo>â†’</mo><mi>i</mi><mo>=</mo><mi>N</mi><mtext>Â </mtext><mi>d</mi><mi>o</mi><mspace linebreak="newline"></mspace><mi>e</mi><mi>n</mi><mi>d</mi><mtext>Â </mtext><mi>f</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">for\ i=1\rightarrow i=N\ do\\
end \ for
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mspace">Â </span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace">Â </span><span class="mord mathnormal">d</span><span class="mord mathnormal">o</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span></span></span></span></span></p>
<h3 id="4-2-whileå¾ªç¯">4.2 whileå¾ªç¯</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>W</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>e</mi><mtext>Â </mtext><mi>A</mi><mspace linebreak="newline"></mspace><mi>Y</mi><mi>o</mi><mi>u</mi><mi>r</mi><mtext>Â </mtext><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>s</mi><mspace linebreak="newline"></mspace><mi>E</mi><mi>n</mi><mi>d</mi><mtext>Â </mtext><mi>w</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">While \ A
\\
Your\ sentences
\\
End \ while
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">Whi</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mspace">Â </span><span class="mord mathnormal">A</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace">Â </span><span class="mord mathnormal">se</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">ces</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span></span></span></span></span></p>
<hr>
<p>ä¸€ä¸ªç®€å•çš„<code>æ —å­</code>ğŸ”¶</p>
<p><img src="/2022/08/03/%E3%80%90%E7%A7%91%E7%A0%94%E3%80%91%E4%BC%AA%E4%BB%A3%E7%A0%81/image-20220803174851918.png" alt="image-20220803174851918"></p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€æ•°è®ºã€‘æ¬§å¼ç­›]]></title>
      <url>/2022/08/03/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E6%AC%A7%E6%8B%89%E7%AD%9B/</url>
      <content type="html"><![CDATA[<p>æ€»æ‰€å‘¨çŸ¥ï¼Œè´¨æ•°(prime number)åˆç§°ç´ æ•°ï¼Œé™¤äº†<code>1</code>å’Œ<code>è‡ªèº«</code>å¤–ï¼Œä¸èƒ½è¢«å…¶ä»–çš„è‡ªç„¶æ•°æ•´é™¤ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬ä»Šå¤©å°±æ¥çœ‹çœ‹ä¸€ä¸ªç®€å•çš„å¯»æ‰¾ç´ æ•°çš„ç®—æ³•ï¼Œæ¬§æ‹‰ç­›ã€‚æ¬§æ‹‰ç­›æ˜¯åœ¨åŸƒæ°ç­›çš„åŸºç¡€ä¸Šåšäº†ä¸€å®šçš„æ”¹è¿›ï¼Œå¤§å¹…é™ä½æ—¶é—´å¤æ‚åº¦ã€‚</p>
<h2 id="æ¬§æ‹‰ç­›">æ¬§æ‹‰ç­›</h2>
<p><strong>è¾“å…¥</strong></p>
<ul>
<li>åŒºé—´èŒƒå›´n</li>
</ul>
<p><strong>è¾“å‡º</strong></p>
<ul>
<li>ç´ æ•°åˆ—è¡¨</li>
</ul>
<p><strong>æ€æƒ³</strong></p>
<ul>
<li>é€šè¿‡æ‰“è¡¨çš„æ–¹å¼ï¼Œæ„å»ºç´ æ•°è¡¨ï¼Œè¿™å¼ è¡¨åŒ…å«äº†<code>n</code>ä¸ªå…ƒç´ ï¼ŒåŒ…æ‹¬ç´ æ•°å’Œåˆæ•°</li>
<li>ç´ æ•°æ˜¯æ— æ³•é€šè¿‡å…¶ä»–ç´ æ•°ç›¸ä¹˜å¾—åˆ°çš„ï¼Œåˆ©ç”¨è¿™ä¸€åŸç†ï¼Œå¯ä»¥å°†æ‰€æœ‰èƒ½å¤Ÿè¢«ç´ æ•°ç›¸ä¹˜å¾—åˆ°çš„å€¼è®¾ç½®ä¸ºåˆæ•°</li>
</ul>
<p><strong>è¿‡ç¨‹</strong></p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º<code>n</code>çš„åˆ—è¡¨<code>isPrime</code>ï¼Œå…ƒç´ å€¼ä»£è¡¨æ˜¯å¦ä¸ºç´ æ•°ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯å˜åˆ—è¡¨<code>prime</code>ï¼Œå…ƒç´ å€¼ä»£è¡¨ç´ æ•°</li>
<li>éå†<code>isPrime</code>ï¼Œè‹¥å…ƒç´ å€¼ä¸º<code>1</code>ï¼Œåˆ™å°†å…¶åŠ å…¥<code>prime</code>åˆ—è¡¨ã€‚</li>
<li>å°†è¯¥å…ƒç´ ä¸<code>prime</code>ä¸­çš„æ‰€æœ‰ç´ æ•°ç›¸ä¹˜ï¼š
<ul>
<li>è‹¥è¯¥å…ƒç´ ä¸ºç´ æ•°ï¼Œé‚£ä¹ˆä¼šéå†<code>prime</code>åˆ—è¡¨ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯æœ€å°ç´ æ•°ç›¸ä¹˜çš„åˆæ•°</li>
<li>è‹¥è¯¥å…ƒç´ ä¸ºåˆæ•°ï¼Œé‚£ä¹ˆå°†ä¸ºå…¶æ·»åŠ æ–°çš„æœ€å°è´¨æ•°ï¼Œç›´åˆ°é‡åˆ°åˆå§‹è´¨æ•°ã€‚(åŒæ ·ä¹Ÿæ˜¯æœ€å°è´¨æ•°ç›¸ä¹˜)</li>
</ul>
</li>
</ul>
<p><strong>ç®—æ³•</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="built_in">int</span>(<span class="number">1e5</span>+<span class="number">1</span>)</span><br><span class="line">prime=[]</span><br><span class="line">isPrime=[<span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line"><span class="comment"># æ¬§æ‹‰ç­›æ„å»º1-nçš„æ‰€æœ‰è´¨æ•°</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">if</span> isPrime[i]==<span class="number">1</span>:</span><br><span class="line">        <span class="comment"># è´¨æ•°åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">        prime.append(i)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ é™¤è´¨æ•°é›†æ„æˆçš„åˆæ•°</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(prime)):</span><br><span class="line">        <span class="keyword">if</span> prime[j]*i&lt;n:</span><br><span class="line">            <span class="comment"># åˆæ•°å»æ‰äº†</span></span><br><span class="line">            isPrime[prime[j]*i]=<span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># é€šè¿‡æœ€å°è´¨æ•°æ¥æ„å»ºå³å¯</span></span><br><span class="line">        <span class="keyword">if</span> i%prime[j]==<span class="number">0</span>:</span><br><span class="line">            <span class="comment"># å½“ç„¶ç¬¬ä¸€æ¬¡é‡åˆ°è¿˜æ˜¯è¦ä¹˜ä¸Šå»çš„ï¼Œè¿™æ ·æ‰ä¼šå€å¢</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(prime)</span><br></pre></td></tr></table></figure>
<p><strong>å¤æ‚åº¦</strong></p>
<p>æ—¶é—´å¤æ‚åº¦çº¦ç­‰äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œå®ƒåªå¯¹æ¯ä¸ªå…ƒç´ éå†ä¸€æ¬¡ã€‚</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è®°å¿†å­¦å…¥é—¨]]></title>
      <url>/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<h1>è®°å¿†å­¦å…¥é—¨</h1>
<hr>
<h2 id="Lesson-1-è®°å¿†æœ¯å…¥é—¨">Lesson 1  è®°å¿†æœ¯å…¥é—¨</h2>
<blockquote>
<p>çˆ±å› æ–¯å¦æ›¾è¯´ï¼Œå¦‚æœè®©ä»–èŠ±ä¸€ä¸ªå°æ—¶è§£å†³é—®é¢˜ï¼Œé‚£ä¹ˆ92%çš„æ—¶é—´ç”¨æ¥è®¤çŸ¥é—®é¢˜ï¼Œè€Œè§£å†³é—®é¢˜åªéœ€è¦8%çš„æ—¶é—´ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªå¥½çš„æ¡†æ¶ï¼Œæ¯”æ¼«æ— ç›®çš„çš„éå†å¥½å¾—å¤šã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è®°å¿†çš„æ¡†æ¶ï¼Œæ€»æ‰€å‘¨çŸ¥ï¼Œå½±å“ä¸»åŠ¨è®°å¿†çš„å››ä¸ªé‡è¦å› å­ä¸ºï¼š</p>
<ul>
<li>æ³¨æ„åŠ›</li>
<li>å…´è¶£</li>
<li>è‡ªä¿¡å¿ƒ</li>
<li>å¥½æ–¹æ³•</li>
</ul>
<p>é€šè¿‡ä¸æ–­çš„è®­ç»ƒï¼Œèƒ½å¤Ÿå°†<code>æ³¨æ„åŠ›</code>è¿…é€Ÿé›†ä¸­åœ¨æ„Ÿ<code>å…´è¶£</code>çš„åŒºåŸŸï¼Œå½¢æˆæ­£åé¦ˆåï¼Œå¢å¼º<code>è‡ªä¿¡å¿ƒ</code>ã€‚å½“ç„¶ï¼Œè®­ç»ƒæ˜¯ç¦»ä¸å¼€<code>å¥½æ–¹æ³•</code>çš„ã€‚</p>
<h3 id="ä¸‡èƒ½è®°å¿†å…¬å¼">ä¸‡èƒ½è®°å¿†å…¬å¼</h3>
<ul>
<li>ç”¨å¥¹å»äº†è§£å¥¹</li>
<li>ç”¨ä½ å»ç†è§£å¥¹</li>
<li>ç”¨è®°å¿†æ³•åˆ»æ„è®°å¿†å¥¹</li>
</ul>
<p>å‚æ‚Ÿæœ¬æºï¼Œå¸æ”¶å½’çº³ï¼Œçƒ™å°ç¥é­‚ã€‚</p>
<p><strong>è®°å¿†æ³•</strong>çš„çµé­‚åœ¨äº<strong>å‚ä¸æ„Ÿ</strong>ï¼</p>
<p>ç»†è¯´çš„è¯ï¼Œè®°å¿†æ³•å¯ä»¥å½’çº³ä¸ºå››æ­¥å­¦ä¹ æ³•ï¼š</p>
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220803002451441.png" alt="image-20220803002451441" style="zoom: 50%;">
<p><strong>ä¾‹é¢˜</strong></p>
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220803003611995.png" alt="image-20220803003611995" style="zoom:33%;">
<p>æ‘„å–ä¿¡æ¯ï¼š</p>
<p>â€‹	è¿™æ˜¯ä¸€æ®µæ¦‚å¿µæ€§æ–‡å­—æè¿°ã€‚æˆ‘ä»¬è¯•ç€å»ç†è§£å…¶ä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ä»€ä¹ˆæ˜¯ç”Ÿäº§åŠ›ï¼Œæ€ä¹ˆæ ·ç®—ç”Ÿäº§åŠ›ï¼Ÿæ•²ä»£ç ï¼Œæ‰“çŒï¼Œç”Ÿæ´»ï¼Œè´¢ç±³æ²¹ç›æ˜¯ä¸æ˜¯éƒ½æ˜¯ç”Ÿäº§åŠ›ï¼Ÿé‚£ä¹ˆï¼Œç”Ÿäº§åŠ›ä½œä¸ºä¸€ç§åŠ›ï¼Œè‚¯å®šä¸èƒ½å‡­ç©ºäº§ç”Ÿå‘€ï¼Œéœ€è¦å€ŸåŠ©ä»€ä¹ˆæ¥å®ç°å‘¢ï¼Ÿ</p>
<p>å¤„ç†ä¿¡æ¯ï¼š</p>
<ul>
<li>åŒ–ç®€ä¸ºç¹
<ul>
<li>å…³é”®å­—ï¼šç”Ÿäº§åŠ›ã€å¾æœè‡ªç„¶ã€æ”¹é€ è‡ªç„¶ã€ç‰©è´¨ç”Ÿæ´»èƒ½åŠ›</li>
<li>å…³é”®å­—ï¼šåŠ³åŠ¨è€…ã€ç”Ÿäº§å·¥å…·ã€åŠ³åŠ¨å¯¹è±¡</li>
</ul>
</li>
</ul>
<p>å­˜å‚¨ä¿¡æ¯ï¼š</p>
<ul>
<li>ç†è§£çŸ¥è¯†ä¿¡æ¯</li>
<li>å…³é”®è¯è½¬åŒ–ä¸ºå›¾åƒè®°å¿†</li>
<li>è¿ç”¨å››å¤§è®°å¿†æ–¹æ³•è®°å¿†(è”æƒ³ã€ç»˜å›¾ã€æ•°å­—ã€å®«æ®¿)</li>
<li>åˆ›å»ºå›å¿†çº¿ç´¢ç‚¹</li>
<li>å¤šæ¬¡å¤ä¹ </li>
</ul>
<p><strong>ç®€å•çš„è®°å¿†å®«æ®¿ç»ƒä¹ </strong></p>
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220803005534833.png" alt="image-20220803005534833" style="zoom:33%;">
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220803005552438.png" alt="image-20220803005552438" style="zoom: 25%;">
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">59 23 07 81 64 06 28 62 08 99</span><br></pre></td></tr></table></figure>
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220803005705359.png" alt="image-20220803005705359" style="zoom: 33%;">
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220803005724860.png" alt="image-20220803005724860" style="zoom:33%;">
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">86 28 03 48 25 34 21 17 06 79</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>å¥½çš„è®°å¿†åŠ›è·Ÿä¿¡æ¯çš„è¾“å…¥è¾“å‡ºç›¸å…³ï¼Œå¦‚ä½•ä¿è¯ä¿¡æ¯é«˜æ•ˆçš„è¾“å…¥å‘¢ï¼Ÿé‚£å°±éœ€è¦ä¸“æ³¨åŠ›ï¼Œè€Œä¸“æ³¨åŠ›èƒ½å¤Ÿé€šè¿‡å…´è¶£æå‡ï¼Œä¸æ–­çš„æ­£åé¦ˆèƒ½å¤Ÿå¢å¼ºè‡ªä¿¡ï¼Œè‡ªä¿¡ä¹Ÿèƒ½æé«˜ä¸“æ³¨åŠ›ã€‚å½“ç„¶ï¼Œå¥½çš„æ–¹æ³•ä¹Ÿå¿…ä¸å¯å°‘ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ‰¿è½½ä¿¡æ¯çš„æ—¶å€™ï¼Œé¦–å…ˆè¦æ˜ç¡®çš„å°±æ˜¯ä¿¡æ¯çš„å½¢æ€ã€æ ¸å¿ƒï¼Œæ˜¯æ¦‚å¿µè¿˜æ˜¯ç†è®ºï¼Œæ˜¯æ–¹æ³•è¿˜æ˜¯ç»¼è¿°ã€‚æŒæ¡ä¿¡æ¯çš„æ ¸å¿ƒæœ¬è´¨ï¼Œç†è§£å…¶ä¸­çš„æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯<code>ç”¨å¥¹å»äº†è§£å¥¹</code>ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ„å»ºè‡ªå·±çš„è„‘å›è·¯ï¼Œå°†è¿™ä¸ªä¿¡æ¯ä»¥è‡ªå·±çš„æƒ³æ³•è¿›è¡Œè¾“å‡ºï¼Œè¿™éƒ¨åˆ†è‡³å…³é‡è¦ï¼Œä¹Ÿå°±æ˜¯<code>ç”¨ä½ å»ç†è§£å¥¹</code>ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å…³é”®å­—ã€åŒ–ç®€æˆå›¾çš„æ–¹å¼ï¼Œç»“åˆè®°å¿†æ³•è¿›è¡Œè¾…åŠ©è®°å¿†ã€‚</p>
<p>å½“ç„¶ï¼Œå­˜å‚¨çš„ä¿¡æ¯ä¸€å®šè¦æ‰“ä¸‹é”šç‚¹ï¼Œä¸ç„¶é£˜åˆ°ä»€ä¹ˆåœ°æ–¹å»äº†å°±å¾ˆéš¾æ‰¾äº†ä¸æ˜¯å—ã€‚</p>
<p>å¸¸å¤ç›˜ï¼Œè¿™ä¹Ÿæ˜¯å…³é”®ã€‚</p>
<hr>
<h2 id="Lesson-2-æ³¨æ„åŠ›">Lesson 2  æ³¨æ„åŠ›</h2>
<p>å¢å¼ºæ³¨æ„åŠ›çš„å…³é”®ï¼Œè¿˜æ˜¯éœ€è¦<code>å‚ä¸æ„Ÿ</code>ï¼Œä¹Ÿå°±æ˜¯ä¸€å®šçš„<code>å…´è¶£</code>ï¼Œå…´è‡´å‹ƒå‹ƒåœ°ç ”ç©¶ï¼Œç›´åˆ°æœªçŸ¥çš„å†…å®¹æ˜¾ç°å‡ºæ¥ã€‚</p>
<blockquote>
<p>å¯ä»¥é€šè¿‡æ‰¾èŒ¬æ¸¸æˆè®­ç»ƒï¼</p>
</blockquote>
<p>æ³¨æ„åŠ›è®­ç»ƒï¼š</p>
<ul>
<li>ä¿æŒè…¹å¼å‘¼å¸</li>
<li>çœ¼ç›è‡ªç„¶çå¤§</li>
<li>ä¸è¦çœ¨çœ¼ï¼Œç›¯ç€é»‘ç‚¹çœ‹ï¼Œç›´åˆ°é»‘ç‚¹é˜´å½±å…¨éƒ¨å˜æˆç™½è‰²</li>
<li>ä¸€æ¬¡æ—¶é—´çº¦ä¸¤åˆ†é’Ÿ</li>
</ul>
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220803153409835.png" alt="image-20220803153409835" style="zoom:50%;">
<p><strong>æ€è€ƒ</strong></p>
<p>æ³¨æ„åŠ›å—åˆ¶äºæˆ‘ä»¬çš„æ„å¿—åŠ›ï¼Œæ³¨æ„åŠ›åœ¨å“ªç§ä¸‹å› ï¼Œè®°å¿†åŠ›åœ¨å“ªæ”¶ä¸‹æœã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å…³æ³¨è‡ªå·±çš„æ€ç»´æ³¢åŠ¨ï¼ŒåŠæ—¶çš„æŠŠæ€æƒ³æ‹‰å›é”šç‚¹ã€‚åšä¸€åšæ³¨æ„åŠ›è®­ç»ƒä¹Ÿæ˜¯ä»¶å¥½äº‹ã€‚</p>
<hr>
<h2 id="Lesson-3-æ•°å­—ç¼–ç ">Lesson 3  æ•°å­—ç¼–ç </h2>
<p>å•Šä¸‹é¢æ˜¯ä¸€äº›æ•°å­—ç¼–ç ï¼Œå†…å®¹å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œå°±æ”¾åˆ°å¦å¤–çš„ç½‘é¡µäº†ã€‚<a href="https://www.renrendoc.com/paper/88829238.html">https://www.renrendoc.com/paper/88829238.html</a></p>
<p><strong>type 1</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å‘¼å•¦åœˆ</td>
<td style="text-align:center">èœ¡çƒ›</td>
<td style="text-align:center">å¤©é¹…</td>
<td style="text-align:center">è€³æœµ</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center">7</td>
</tr>
<tr>
<td style="text-align:center">æ——å­</td>
<td style="text-align:center">é’©å­</td>
<td style="text-align:center">æ±¤å‹º</td>
<td style="text-align:center">é•°åˆ€</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">9</td>
<td style="text-align:center">10</td>
<td style="text-align:center">11</td>
</tr>
<tr>
<td style="text-align:center">è‘«èŠ¦</td>
<td style="text-align:center">å“¨å­</td>
<td style="text-align:center">çŸ³å¤´</td>
<td style="text-align:center">æ¢¯å­</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">13</td>
<td style="text-align:center">14</td>
<td style="text-align:center">15</td>
</tr>
<tr>
<td style="text-align:center">æ¤…å„¿</td>
<td style="text-align:center">åŒ»ç”Ÿ</td>
<td style="text-align:center">é’¥åŒ™</td>
<td style="text-align:center">é¹¦é¹‰</td>
</tr>
<tr>
<td style="text-align:center">16</td>
<td style="text-align:center">17</td>
<td style="text-align:center">18</td>
<td style="text-align:center">19</td>
</tr>
<tr>
<td style="text-align:center">çŸ³æ¦´</td>
<td style="text-align:center">ä»ªå™¨</td>
<td style="text-align:center">ç³–è‘«èŠ¦</td>
<td style="text-align:center">ç‹®é¹«</td>
</tr>
<tr>
<td style="text-align:center">20</td>
<td style="text-align:center">21</td>
<td style="text-align:center">22</td>
<td style="text-align:center">23</td>
</tr>
<tr>
<td style="text-align:center">é¦™çƒŸ</td>
<td style="text-align:center">é³„é±¼</td>
<td style="text-align:center">22å¨˜</td>
<td style="text-align:center">å’Œå°š</td>
</tr>
<tr>
<td style="text-align:center">24</td>
<td style="text-align:center">25</td>
<td style="text-align:center">26</td>
<td style="text-align:center">27</td>
</tr>
<tr>
<td style="text-align:center">é—¹é’Ÿ</td>
<td style="text-align:center">äºŒèƒ¡</td>
<td style="text-align:center">æ²³æµ</td>
<td style="text-align:center">è€³æœº</td>
</tr>
<tr>
<td style="text-align:center">28</td>
<td style="text-align:center">29</td>
<td style="text-align:center">30</td>
<td style="text-align:center">31</td>
</tr>
<tr>
<td style="text-align:center">æ¶éœ¸</td>
<td style="text-align:center">æ¶çƒ</td>
<td style="text-align:center">ä¸‰è½®è½¦</td>
<td style="text-align:center">é²¨é±¼</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>type 2</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">32</th>
<th style="text-align:center">33</th>
<th style="text-align:center">34</th>
<th style="text-align:center">35</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ‰‡å„¿</td>
<td style="text-align:center">ä¸‰ä¸‰å¨˜</td>
<td style="text-align:center">ä¸‰ä¸</td>
<td style="text-align:center">çŠç‘š</td>
</tr>
<tr>
<td style="text-align:center">36</td>
<td style="text-align:center">37</td>
<td style="text-align:center">38</td>
<td style="text-align:center">39</td>
</tr>
<tr>
<td style="text-align:center">å±±è·¯</td>
<td style="text-align:center">å±±é¸¡</td>
<td style="text-align:center">å¦‡å¥³</td>
<td style="text-align:center">å±±ä¸˜</td>
</tr>
<tr>
<td style="text-align:center">40</td>
<td style="text-align:center">41</td>
<td style="text-align:center">42</td>
<td style="text-align:center">43</td>
</tr>
<tr>
<td style="text-align:center">å¸ä»¤</td>
<td style="text-align:center">èœ¥èœ´</td>
<td style="text-align:center">æŸ¿å„¿</td>
<td style="text-align:center">å°¸å±±</td>
</tr>
<tr>
<td style="text-align:center">44</td>
<td style="text-align:center">45</td>
<td style="text-align:center">46</td>
<td style="text-align:center">47</td>
</tr>
<tr>
<td style="text-align:center">è›‡</td>
<td style="text-align:center">å¸ˆå‚…</td>
<td style="text-align:center">é¥²æ–™</td>
<td style="text-align:center">å¸æœº</td>
</tr>
<tr>
<td style="text-align:center">48</td>
<td style="text-align:center">49</td>
<td style="text-align:center">50</td>
<td style="text-align:center">51</td>
</tr>
<tr>
<td style="text-align:center">çŸ³æ¿</td>
<td style="text-align:center">ç«çœ¼é‡‘ç›</td>
<td style="text-align:center">äº”è±å®å…‰</td>
<td style="text-align:center">å·¥äºº</td>
</tr>
<tr>
<td style="text-align:center">52</td>
<td style="text-align:center">53</td>
<td style="text-align:center">54</td>
<td style="text-align:center">55</td>
</tr>
<tr>
<td style="text-align:center">å­¤å„¿</td>
<td style="text-align:center">äº”å¹´é«˜è€ƒ</td>
<td style="text-align:center">é’å¹´</td>
<td style="text-align:center">æ‰˜é©¬æ–¯</td>
</tr>
<tr>
<td style="text-align:center">56</td>
<td style="text-align:center">57</td>
<td style="text-align:center">58</td>
<td style="text-align:center">59</td>
</tr>
<tr>
<td style="text-align:center">èœ—ç‰›</td>
<td style="text-align:center">æ­¦å™¨</td>
<td style="text-align:center">å°¾å·´</td>
<td style="text-align:center">èœˆèš£</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>type 3</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">60</th>
<th style="text-align:center">61</th>
<th style="text-align:center">62</th>
<th style="text-align:center">63</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ¦´è²</td>
<td style="text-align:center">å„¿ç«¥</td>
<td style="text-align:center">ç‰›å„¿</td>
<td style="text-align:center">æµæ²™</td>
</tr>
<tr>
<td style="text-align:center">64</td>
<td style="text-align:center">65</td>
<td style="text-align:center">66</td>
<td style="text-align:center">67</td>
</tr>
<tr>
<td style="text-align:center">èºä¸</td>
<td style="text-align:center">å°¿å£¶</td>
<td style="text-align:center">æºœæºœçƒ</td>
<td style="text-align:center">æµæ˜Ÿ</td>
</tr>
<tr>
<td style="text-align:center">68</td>
<td style="text-align:center">69</td>
<td style="text-align:center">70</td>
<td style="text-align:center">71</td>
</tr>
<tr>
<td style="text-align:center">å–‡å­</td>
<td style="text-align:center">å¤ªæ</td>
<td style="text-align:center">éº’éºŸ</td>
<td style="text-align:center">æœºç¿¼</td>
</tr>
<tr>
<td style="text-align:center">72</td>
<td style="text-align:center">73</td>
<td style="text-align:center">74</td>
<td style="text-align:center">75</td>
</tr>
<tr>
<td style="text-align:center">ä¼é¹…</td>
<td style="text-align:center">èŠ±æ——å‚</td>
<td style="text-align:center">éª‘å£«</td>
<td style="text-align:center">åª³å¦‡</td>
</tr>
<tr>
<td style="text-align:center">76</td>
<td style="text-align:center">77</td>
<td style="text-align:center">78</td>
<td style="text-align:center">79</td>
</tr>
<tr>
<td style="text-align:center">æ±½æ²¹</td>
<td style="text-align:center">ä¸ƒä¸ƒ</td>
<td style="text-align:center">é’è›™</td>
<td style="text-align:center">æ°”çƒ</td>
</tr>
<tr>
<td style="text-align:center">80</td>
<td style="text-align:center">81</td>
<td style="text-align:center">82</td>
<td style="text-align:center">83</td>
</tr>
<tr>
<td style="text-align:center">éœ¸å‡Œ</td>
<td style="text-align:center">ç™½èš</td>
<td style="text-align:center">å·´å°”</td>
<td style="text-align:center">èŠ­è•‰æ‰‡</td>
</tr>
<tr>
<td style="text-align:center">84</td>
<td style="text-align:center">85</td>
<td style="text-align:center">86</td>
<td style="text-align:center">87</td>
</tr>
<tr>
<td style="text-align:center">å®å®å·´å£«</td>
<td style="text-align:center">å§åŠ¡</td>
<td style="text-align:center">å…«è·¯</td>
<td style="text-align:center">ç™½èµ·</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>type 4</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">88</th>
<th style="text-align:center">89</th>
<th style="text-align:center">90</th>
<th style="text-align:center">91</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">çˆ¸çˆ¸</td>
<td style="text-align:center">èŠ­è•‰</td>
<td style="text-align:center">é…’ç“¶</td>
<td style="text-align:center">ç§‹è¡£</td>
</tr>
<tr>
<td style="text-align:center">92</td>
<td style="text-align:center">93</td>
<td style="text-align:center">94</td>
<td style="text-align:center">95</td>
</tr>
<tr>
<td style="text-align:center">çƒå„¿</td>
<td style="text-align:center">æ—§ä¼</td>
<td style="text-align:center">æ—§èª“</td>
<td style="text-align:center">é…’å£¶</td>
</tr>
<tr>
<td style="text-align:center">96</td>
<td style="text-align:center">97</td>
<td style="text-align:center">98</td>
<td style="text-align:center">99</td>
</tr>
<tr>
<td style="text-align:center">è´è¶</td>
<td style="text-align:center">é…’æ°”</td>
<td style="text-align:center">é…’å§</td>
<td style="text-align:center">èˆ…èˆ…</td>
</tr>
<tr>
<td style="text-align:center">100</td>
<td style="text-align:center">00</td>
<td style="text-align:center">01</td>
<td style="text-align:center">02</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’¯</td>
<td style="text-align:center">æœ›è¿œé•œ</td>
<td style="text-align:center">å°æ ‘</td>
<td style="text-align:center">é“ƒå„¿</td>
</tr>
<tr>
<td style="text-align:center">03</td>
<td style="text-align:center">04</td>
<td style="text-align:center">05</td>
<td style="text-align:center">06</td>
</tr>
<tr>
<td style="text-align:center">çµå±±</td>
<td style="text-align:center">å¥¥è¿ª</td>
<td style="text-align:center">è€è™</td>
<td style="text-align:center">æ‰‹æª</td>
</tr>
<tr>
<td style="text-align:center">07</td>
<td style="text-align:center">08</td>
<td style="text-align:center">09</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">007</td>
<td style="text-align:center">æºœå†°é‹</td>
<td style="text-align:center">çŒ«</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="Lesson-4-æ–‡å­—è½¬æ¢">Lesson 4 æ–‡å­—è½¬æ¢</h2>
<p>å¥‡å¥‡æ€ªæ€ªçš„æ–‡å­—ç¼–ç ~</p>
<p>ä¸»è¦å°±æ˜¯<code>å¸¦åŠ¨æ„Ÿå®˜ï¼Œç§¯ææƒ³è±¡</code>ï¼</p>
<hr>
<h2 id="Lesson-5-è”æƒ³é…å¯¹è®°å¿†å››å¤§æ–¹æ³•">Lesson 5 è”æƒ³é…å¯¹è®°å¿†å››å¤§æ–¹æ³•</h2>
<p>å—¨ï¼Œå’±ä»Šå¤©å°±æ¥ä»‹ç»è¿™å››å¤§è”æƒ³æ³•ï¼š</p>
<ul>
<li>ä¸»åŠ¨å‡ºå‡»</li>
<li>åª’å©†ç‰µçº¿</li>
<li>å¤¸å¼ æç¬‘</li>
<li>åŒå‰‘åˆç’§</li>
</ul>
<img src="/2022/08/03/%E3%80%90%E8%AE%B0%E5%BF%86%E5%AD%A6%E3%80%91%E8%AE%B0%E5%BF%86%E5%AD%A6%E5%85%A5%E9%97%A8/image-20220806222931152.png" alt="image-20220806222931152" style="zoom:33%;">
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> æ‹¾ææ‚è°ˆ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è®°å¿†æœ¯ </tag>
            
            <tag> æœèŠ±å¤•æ‹¾ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¿«é€Ÿå›¾åƒé¢œè‰²é£æ ¼è¿ç§»]]></title>
      <url>/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/</url>
      <content type="html"><![CDATA[<h1>å¿«é€Ÿå›¾åƒé¢œè‰²è¿ç§»</h1>
<hr>
<p>ä¼ ç»Ÿçš„å›¾åƒé¢œè‰²è¿ç§»æ˜¯é€šè¿‡è®¡ç®—ç›®æ ‡å›¾åƒå’Œæºå›¾åƒçš„é¢œè‰²ç›´æ–¹å›¾ï¼Œä¼˜åŒ–äºŒè€…ä¹‹é—´çš„å·®å€¼ï¼Œä»è€Œå®ç°ä¸æ›´æ”¹å†…å®¹ï¼Œå®Œæˆé¢œè‰²çš„è¿ç§»ã€‚å…¶æ ¸å¿ƒåœ¨äºå¦‚ä½•æ‰¾åˆ°é¢œè‰²é—´çš„å…³ç³»æ˜ å°„ã€‚ä¸€èˆ¬æƒ…å†µçš„ç ”ç©¶ä¼šç°å°†RGBç©ºé—´è½¬åŒ–ä¸ºæ›´å¤æ‚ã€å¯¹è‰²å½©çš„æ”¯æŒåº¦æ›´ä½³çš„å…¶ä»–è‰²å½©ç©ºé—´ï¼Œå¦‚HSVã€Labç­‰ã€‚ä¸ºäº†è·å–åŒ¹é…è§„åˆ™ï¼Œä¸€èˆ¬éœ€è¦å¯¹å›¾åƒè¿›è¡Œè‰²å½©ä¿¡æ¯ç»Ÿè®¡ï¼Œå¯ä»¥æ˜¯å±€éƒ¨ç‰¹å¾ç»Ÿè®¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¨å±€ã€‚ä¸€èˆ¬çš„ç‰¹å¾ç»Ÿè®¡è®¡ç®—çš„æ˜¯è‰²å½©ç›´æ–¹å›¾ä¿¡æ¯ï¼Œå±€éƒ¨ç‰¹å¾æå–å¯ä»¥é€šè¿‡èšç±»æ¥å®ç°ï¼Œæˆ–è€…æ˜¯ç‰¹å¾éƒ¨åˆ†å¦‚è§’ç‚¹ã€è¾¹ç¼˜ã€èƒŒæ™¯ã€Blobç­‰ã€‚è€ƒè™‘åˆ°è‰²å½©ä¹‹é—´å­˜åœ¨è¯­ä¹‰ä¿¡æ¯ï¼Œä¹Ÿä¼šå¯¹ä¸åŒè‰²å½©ä¹‹é—´è¿›è¡Œæƒé‡ä¿®æ­£æˆ–æ˜¯ä¸åŒè¯­ä¹‰é‡‡ç”¨ä¸åŒçš„ç®—æ³•æ¥è®¡ç®—ä¸¤å¹…å›¾åƒä¹‹é—´çš„å·®å¼‚ã€‚</p>
<p>Reinhardæå‡ºçš„ç®—æ³•(2001)æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>è¾“å…¥ç›®æ ‡å›¾åƒå’Œæºå›¾åƒ</p>
</li>
<li>
<p>å°†æºå›¾åƒå’Œç›®æ ‡å›¾åƒè½¬åŒ–åˆ°Labé¢œè‰²ç©ºé—´ï¼ŒLabé¢œè‰²ç©ºé—´æ¨¡æ‹Ÿæ„ŸçŸ¥å‡åŒ€æ€§ï¼Œå…¶ä¸­é¢œè‰²é‡çš„å¾®å°å˜åŒ–ä¼šäº§ç”Ÿé¢œè‰²é‡è¦æ€§çš„ç›¸å¯¹å˜åŒ–ã€‚Labç©ºé—´åœ¨æ¨¡ä»¿äººç±»å¦‚ä½•è§£é‡Šé¢œè‰²ä¸Šåšçš„æ¯”RGBæ›´å¥½</p>
</li>
<li>
<p>åˆ†ç¦»æºå›¾åƒå’Œç›®æ ‡å›¾åƒçš„é€šé“</p>
</li>
<li>
<p>è®¡ç®—å›¾åƒæ¯ä¸ªé€šé“çš„å¹³å‡å€¼å’Œæ ‡å‡†å·®</p>
</li>
<li>
<p>åˆ©ç”¨æ ‡å‡†å·®åšç¼©æ”¾</p>
</li>
<li>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>I</mi><mrow><mi>n</mi><mi>e</mi><mi>w</mi></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>I</mi><mrow><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi></mrow></msub><mo>âˆ’</mo><mi>M</mi><mi>E</mi><mi>A</mi><msub><mi>N</mi><mrow><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi></mrow></msub><mo stretchy="false">)</mo><mo>âˆ—</mo><mfrac><mrow><mi>S</mi><mi>T</mi><msub><mi>D</mi><mrow><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow><mrow><mi>S</mi><mi>T</mi><msub><mi>D</mi><mrow><mi>s</mi><mi>o</mi><mi>u</mi><mi>r</mi><mi>c</mi><mi>e</mi></mrow></msub></mrow></mfrac><mo>+</mo><mo stretchy="false">(</mo><mi>M</mi><mi>E</mi><mi>A</mi><msub><mi>N</mi><mrow><mi>s</mi><mi>o</mi><mi>u</mi><mi>r</mi><mi>c</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">I_{new}=(I_{target}-MEAN_{target})*\frac{STD_{target}}{STD_{source}}+(MEAN_{source})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">ME</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.1963em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">ST</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">so</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">rce</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">ST</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">ME</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">so</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">rce</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
</li>
<li>
<p>è£å‰ªè¾“å‡ºèŒƒå›´è‡³[0,255]</p>
</li>
<li>
<p>èåˆé€šé“å¹¶è½¬å›RGBç©ºé—´</p>
</li>
</ul>
<hr>
<h3 id="å®ç°ä»£ç ">å®ç°ä»£ç </h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getImageStatistic</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="comment"># è·å–é€šé“çš„ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line">    <span class="comment"># ç›¸å½“äºimg[...,0]...</span></span><br><span class="line">    l,a,b=cv2.split(img)</span><br><span class="line">    lM,lS=l.mean(),l.std()</span><br><span class="line">    aM,aS=a.mean(),a.std()</span><br><span class="line">    bM,bS=b.mean(),b.std()</span><br><span class="line">    <span class="keyword">return</span> [lM,lS,aM,aS,bM,bS]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">colorTransfer</span>(<span class="params">source,target,needmask=<span class="literal">False</span></span>):</span><br><span class="line">    <span class="keyword">if</span> needmask:</span><br><span class="line">        mask,edge=changeBackColor(target)</span><br><span class="line">        <span class="comment"># # è¾¹ç¼˜éœ€è¦æå–ä¸‹</span></span><br><span class="line">        <span class="comment"># target_edge=cv2.bitwise_and(target,target,mask=edge)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># é€šé“è½¬åŒ–</span></span><br><span class="line">    source=cv2.cvtColor(source,cv2.COLOR_BGR2LAB).astype(<span class="string">&quot;float32&quot;</span>)</span><br><span class="line">    target=cv2.cvtColor(target,cv2.COLOR_BGR2LAB).astype(<span class="string">&quot;float32&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ†ç¦»é€šé“å¹¶è·å–ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line">    source_list=getImageStatistic(source)</span><br><span class="line">    target_list=getImageStatistic(target)</span><br><span class="line">    <span class="comment"># ç¼©æ”¾å›¾åƒ</span></span><br><span class="line">    LAB=[i <span class="keyword">for</span> i <span class="keyword">in</span> cv2.split(target)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        LAB[i]=np.clip((LAB[i]-target_list[i*<span class="number">2</span>])*(target_list[i*<span class="number">2</span>+<span class="number">1</span>]/source_list[i*<span class="number">2</span>+<span class="number">1</span>])+source_list[i*<span class="number">2</span>],<span class="number">0</span>,<span class="number">255</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆå¹¶é€šé“</span></span><br><span class="line">    new=cv2.merge(LAB)</span><br><span class="line">    <span class="comment"># è½¬å›RGBå¹¶ä½¿ç”¨8ä½æ— ç¬¦å·æ•´å½¢</span></span><br><span class="line">    new=cv2.cvtColor(new.astype(<span class="string">&quot;uint8&quot;</span>),cv2.COLOR_Lab2BGR)</span><br><span class="line">    <span class="comment"># è·å–æ©è†œåŒºåŸŸå¤–çš„æ•°æ®</span></span><br><span class="line">    cv2.imshow(<span class="string">&quot;new&quot;</span>,new)</span><br><span class="line">    <span class="keyword">if</span> needmask:</span><br><span class="line">        new=cv2.bitwise_and(new,new,mask=mask) <span class="comment"># åœ¨æ©è†œèŒƒå›´å†…åšæŒ‰ä½ä¸</span></span><br><span class="line">        <span class="comment"># æ©è†œç™½è‰²ç›¸å½“äºé€»è¾‘1ï¼Œé»‘è‰²ç›¸å½“äºé€»è¾‘0</span></span><br><span class="line">        <span class="comment"># åœ¨ç™½è‰²éƒ¨åˆ†ä¹Ÿå°±æ˜¯é€»è¾‘1éƒ¨åˆ†è¿›è¡Œè¿ç®—ï¼Œå…¶ä»–éƒ¨åˆ†ä¸å‚ä¸è¿ç®—</span></span><br><span class="line">        <span class="comment"># æ›¿æ¢é»‘è‰²</span></span><br><span class="line">        new[mask==<span class="number">0</span>]=np.array([<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>])</span><br><span class="line">        <span class="comment"># new[edge!=0]=np.array([0,0,0])</span></span><br><span class="line">    <span class="keyword">return</span> new</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">changeBackColor</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="comment"># å¦‚ä½•ä¿®æ­£èƒŒæ™¯è‰²ï¼Ÿ</span></span><br><span class="line">    <span class="comment"># å¯ä»¥é€‰æ‹©è¾¹ç•Œæå–ç®—æ³•æ¥åš</span></span><br><span class="line">    <span class="comment"># ä¹Ÿå¯ä»¥é€‰æ‹©è…èš€+é«˜æ–¯ç®—æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–è¾¹ç•Œ</span></span><br><span class="line">    upper = np.array([<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>])</span><br><span class="line">    lower = np.array([<span class="number">200</span>, <span class="number">80</span>, <span class="number">180</span>])</span><br><span class="line">    mask = cv2.inRange(img, lower, upper)  <span class="comment"># åœ¨åŒºåŸŸå†…å°±æ˜¯255ï¼Œå¦åˆ™æ˜¯0</span></span><br><span class="line">    <span class="comment"># è…èš€</span></span><br><span class="line">    erode=cv2.erode(mask,kernel = cv2.getStructuringElement(cv2.MORPH_RECT,(<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line">,iterations=<span class="number">10</span>) <span class="comment"># åˆ†ç¦»è¿æ¥</span></span><br><span class="line">    <span class="comment"># è†¨èƒ€</span></span><br><span class="line">    dilate=cv2.dilate(erode,kernel = cv2.getStructuringElement(cv2.MORPH_RECT,(<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line">,iterations=<span class="number">10</span>) <span class="comment"># å­¤å²›å¡«å……</span></span><br><span class="line">    <span class="comment"># é»‘è‰²æ˜¯éœ€è¦å‰”é™¤çš„ï¼Œæ‰€ä»¥è¦æŒ‰ä½å–å</span></span><br><span class="line">    mask = cv2.bitwise_not(mask, mask)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;mask&quot;</span>, mask)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># é«˜æ–¯æ»¤æ³¢å»é™¤å™ªå£°</span></span><br><span class="line">    blurred = cv2.GaussianBlur(img, (<span class="number">3</span>, <span class="number">3</span>), <span class="number">0</span>)</span><br><span class="line">    gray = cv2.cvtColor(blurred, cv2.COLOR_BGR2GRAY)</span><br><span class="line">    <span class="comment"># X Gradient  cv.CV_16SC1æ‰€å¯¹åº”çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯æ•´å‹</span></span><br><span class="line">    <span class="comment"># è·å–ä¸¤ä¸ªæ–¹å‘æ¢¯åº¦</span></span><br><span class="line">    xgrad = cv2.Sobel(gray, cv2.CV_16SC1, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="comment"># Y Gradient</span></span><br><span class="line">    ygrad = cv2.Sobel(gray, cv2.CV_16SC1, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="comment"># edgeï¼Œ50ã€150åˆ†åˆ«æ˜¯ä½é˜ˆå€¼å’Œé«˜é˜ˆå€¼</span></span><br><span class="line">    edge_output = cv2.Canny(xgrad, ygrad, <span class="number">50</span>, <span class="number">150</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;edge&quot;</span>, edge_output)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mask,edge_output</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tar=cv2.imread(<span class="string">r&quot;C:\Users\lenovo\Desktop\gif\img\04.jpg&quot;</span>)</span><br><span class="line">    src=cv2.imread(<span class="string">r&quot;C:\Users\lenovo\Desktop\gif\img\02.jpg&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cv2.imshow(<span class="string">&#x27;src&#x27;</span>,src)</span><br><span class="line">        cv2.imshow(<span class="string">&#x27;tar&#x27;</span>,tar)</span><br><span class="line">        new=colorTransfer(src,tar,<span class="literal">True</span>)</span><br><span class="line">        cv2.imshow(<span class="string">&#x27;result&#x27;</span>,new)</span><br><span class="line">        cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">        cv2.destroyAllWindows()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Your path is error&quot;</span>)</span><br><span class="line">    new = colorTransfer(src, tar)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="ç»“æœå±•ç¤º">ç»“æœå±•ç¤º</h3>
<p><strong>è¿ç§»å›¾åƒ</strong></p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316140830023.png" alt="image-20220316140830023" style="zoom:23%;">
<p><strong>ç›®æ ‡å›¾åƒ</strong></p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316140740207.png" alt="image-20220316140740207" style="zoom:25%;">
<p><strong>ç»“æœå›¾åƒ</strong></p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316140653641.png" alt="image-20220316140653641" style="zoom: 25%;">
<hr>
<p><strong>ä¸“é¢˜åœ°å›¾è¿ç§»</strong></p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316140830023.png" alt="image-20220316140830023" style="zoom:18%;">
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316153242319.png" alt="image-20220316153242319" style="zoom:25%;">
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316153256467.png" alt="image-20220316153256467" style="zoom:25%;">
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316153214690.png" alt="image-20220316153214690" style="zoom:25%;">
<hr>
<h1>å›¾åƒé£æ ¼è¿ç§»</h1>
<hr>
<p>å›¾åƒé£æ ¼è¿ç§»é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†åˆ«çš„å›¾åƒçš„é£æ ¼è¿ç§»åˆ°å†…å®¹å›¾åƒä¸Šå»ã€‚è¿™ä¸€æ€æƒ³ä¸€ç»æå‡ºï¼Œæ— è®ºæ˜¯å­¦æœ¯ç•Œè¿˜æ˜¯è‰ºæœ¯ç•Œï¼Œéƒ½ä¼¸å‡ºäº†æ©„æ¦„æã€‚</p>
<p>å›¾åƒé£æ ¼è¿ç§»åˆèƒ½åˆ†æˆå›ºå®šé£æ ¼å›ºå®šå†…å®¹çš„æ™®é€šè¿ç§»å’Œå›ºå®šé£æ ¼ä¸é™å†…å®¹çš„å¿«é€Ÿè¿ç§»ã€‚</p>
<h2 id="å›ºå®šé£æ ¼å›ºå®šå†…å®¹çš„è¿ç§»">å›ºå®šé£æ ¼å›ºå®šå†…å®¹çš„è¿ç§»</h2>
<p>è¯¥æ€æƒ³æœ€æ—©æ˜¯ç”±å›¾å®¾æ ¹å¤§å­¦çš„ç ”ç©¶å­¦è€…æå‡ºï¼Œæ ¸å¿ƒåœ¨äºå°†å›¾ç‰‡ä½œä¸ºå¯è®­ç»ƒçš„å˜é‡ï¼Œé€šè¿‡ä¸æ–­ä¼˜åŒ–å›¾ç‰‡çš„åƒç´ å€¼ï¼Œé™ä½å…¶ä¸å†…å®¹å›¾ç‰‡çš„å†…å®¹å·®å¼‚ï¼Œå¹¶é™ä½å…¶ä¸é£æ ¼å›¾ç‰‡çš„å·®å¼‚ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308095531724.png" alt="image-20220308095531724" style="zoom:50%;">
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308101448500.png" alt="image-20220308101448500" style="zoom:50%;">
<p>åœ¨è¯¥ç ”ç©¶ä¸­ï¼Œé€šè¿‡æå–VGG16ç½‘ç»œçš„ç¬¬0ã€5ã€10ã€19ã€28å±‚å·ç§¯å±‚ä½œä¸ºéœ€è¦æ¯”å¯¹çš„é£æ ¼ç‰¹å¾ã€‚è€Œ21å±‚åˆ™æ˜¯éœ€è¦æ¯”å¯¹çš„å†…å®¹ç‰¹å¾ã€‚</p>
<p>åœ¨21å±‚ä¹Ÿå°±æ˜¯<code>conv4_2</code>å±‚ä¸Šï¼Œè®¡ç®—ç‰¹å¾æ˜ å°„çš„ç›¸ä¼¼æ€§ä½œä¸ºå›¾åƒçš„å†…å®¹æŸå¤±ï¼š</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308095837322.png" alt="image-20220308095837322" style="zoom:50%;">
<p>å…¶ä¸­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>è¡¨ç¤ºç‰¹å¾æ˜ å°„çš„å±‚æ•°ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>æ˜¯ç›®æ ‡å›¾åƒå’Œå†…å®¹å›¾åƒåœ¨å¯¹åº”å·ç§¯å±‚è¾“å‡ºçš„ç‰¹å¾å‘é‡ã€‚</p>
<p>æŸå¤±å‡½æ•°æ±‚å¯¼åæ˜¯è¿™ä¸ªæ ·ï¼š</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308101335734.png" alt="image-20220308101335734" style="zoom:50%;">
<p>ä¸€èˆ¬æ¥è¯´ï¼Œç›®æ ‡å›¾åƒå¯ä»¥æ˜¯å™ªå£°ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆå§‹å›¾åƒçš„å‰¯æœ¬ã€‚ä¸ºäº†æ–¹ä¾¿è®­ç»ƒï¼Œä¸€èˆ¬é€‰ç”¨å‰¯æœ¬ã€‚</p>
<p>å›¾åƒçš„é£æ ¼æŸå¤±ä¸»è¦æ˜¯é€šè¿‡GramçŸ©é˜µè¿›è¡Œè®¡ç®—çš„ã€‚GramçŸ©é˜µé€šè¿‡è®¡ç®—ç‰¹å¾æ˜ å°„ï¼Œå°†å…¶è½¬ä¸ºåˆ—å‘é‡ï¼Œåœ¨ç”¨è¯¥åˆ—å‘é‡ä¹˜ä»¥å…¶è½¬ç½®è·å¾—ï¼Œèƒ½å¤Ÿæ›´å¥½çš„è¡¨ç¤ºå›¾ç‰‡çš„é£æ ¼ã€‚(é£æ ¼æ˜¯ä¸€ç§æ½œåœ¨çš„æ•´ä½“ç‰¹å¾ï¼Œè€ŒGramçŸ©é˜µèƒ½å¤Ÿæå–è¿™ç§ç‰¹å¾)</p>
<p>è¿ä½œæ–¹æ³•å¦‚ä¸‹:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡è®¾Aæ˜¯ä¸ªæ•°æ®ï¼Œshapeä¸º[batch,deep,heigh,width]</span></span><br><span class="line">A=torch.Tensor(<span class="number">1</span>,<span class="number">21</span>,<span class="number">300</span>,<span class="number">300</span>)</span><br><span class="line"><span class="comment"># è·å–å…¶åˆ—å‘é‡</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºæŠŠå†…å®¹èåˆäº†</span></span><br><span class="line">A=A.view(<span class="number">1</span>,<span class="number">21</span>,<span class="number">300</span>*<span class="number">300</span>)</span><br><span class="line"><span class="comment"># æœ€åè®¡ç®—GramçŸ©é˜µ</span></span><br><span class="line">gram=torch.mm(A,A.t())</span><br></pre></td></tr></table></figure>
<p>é£æ ¼æŸå¤±å‘¢ï¼Œå¯ä»¥è¿™æ ·å»è¯„ä¼°</p>
<p><img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308101608605.png" alt="image-20220308101608605"></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">N_l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">M_l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¯¹åº”ç‰¹å¾æ˜ å°„çš„å®½é«˜</p>
<p><img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308101659514.png" alt="image-20220308101659514"></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">w_l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è¡¨ç¤ºæ¯å±‚çš„æƒé‡</p>
<p>æ±‚åå¯¼åæ˜¯è¿™æ ·</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308101851552.png" alt="image-20220308101851552" style="zoom:50%;">
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220308101743233.png" alt="image-20220308101743233" style="zoom:50%;">
<p>æ€»æŸå¤±åˆ™æ˜¯ç”±å†…å®¹æŸå¤±å’Œé£æ ¼æŸå¤±åŠ æƒå¾—åˆ°ã€‚</p>
<hr>
<h3 id="å®ç°ä»£ç -v2">å®ç°ä»£ç </h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> hiddenlayer <span class="keyword">as</span> hl</span><br><span class="line"><span class="keyword">from</span> skimage.io <span class="keyword">import</span> imread</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨VGG19ç½‘ç»œæ„å»ºç‰¹å¾</span></span><br><span class="line">vgg19=models.vgg19(pretrained=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># ä¸éœ€è¦ç½‘ç»œåˆ†ç±»å™¨ï¼Œåªç”¨å·ç§¯å±‚å’Œæ± åŒ–å±‚</span></span><br><span class="line">vgg=vgg19.features</span><br><span class="line"><span class="comment"># è®¾ç½®æ˜¾å¡</span></span><br><span class="line">device=torch.device(<span class="string">&quot;cuda:0&quot;</span>)</span><br><span class="line"><span class="comment"># å°†VGG19çš„ç‰¹å¾æå–ç½‘ç»œæƒé‡å†»ç»“ï¼Œè®­ç»ƒä¸è¿›è¡Œæ›´æ–°</span></span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> vgg.parameters():</span><br><span class="line">    param.requires_grad_(<span class="literal">False</span>)</span><br><span class="line">vgg=vgg.to(device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å›¾åƒè¯»å–å‡½æ•°ï¼Œå°†å›¾åƒè¿›è¡Œç›¸åº”è½¬åŒ–</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_image</span>(<span class="params">img_path,max_size=<span class="number">400</span>,shape=<span class="literal">None</span></span>):</span><br><span class="line">    image=Image.<span class="built_in">open</span>(img_path).convert(<span class="string">&quot;RGB&quot;</span>)</span><br><span class="line">    size=max_size <span class="keyword">if</span> <span class="built_in">max</span>(image.size)&gt;max_size <span class="keyword">else</span> <span class="built_in">max</span>(image.size)</span><br><span class="line">    <span class="comment"># æŒ‡å®šå°ºå¯¸éœ€è¦è½¬åŒ–</span></span><br><span class="line">    <span class="keyword">if</span> shape <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        size=shape</span><br><span class="line">    <span class="comment"># è¿›è¡Œå›¾åƒæ•°æ®è½¬åŒ–</span></span><br><span class="line">    in_transform=transforms.Compose(</span><br><span class="line">        [transforms.Resize(size),</span><br><span class="line">         transforms.ToTensor(),</span><br><span class="line">         transforms.Normalize((<span class="number">0.485</span>,<span class="number">0.456</span>,<span class="number">0.406</span>),(<span class="number">0.229</span>,<span class="number">0.224</span>,<span class="number">0.225</span>))]</span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># ä½¿ç”¨RGBé€šé“ï¼Œå¹¶å‡ç»´åˆ°[b,c,h,w]</span></span><br><span class="line">    image=in_transform(image)[:<span class="number">3</span>,...].unsqueeze(dim=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> image.to(device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¯è§†åŒ–å›¾åƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">im_convert</span>(<span class="params">tensor</span>):</span><br><span class="line">    <span class="comment"># [1,c,h,w]-&gt;[c,h,w]</span></span><br><span class="line">    image=tensor.data.cpu().numpy().squeeze()</span><br><span class="line">    <span class="comment"># [c,h,w]-&gt;[h,w,c]</span></span><br><span class="line">    image=image.transpose(<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># é€†æ ‡å‡†åŒ–</span></span><br><span class="line">    image=image*np.array((<span class="number">0.229</span>,<span class="number">0.224</span>,<span class="number">0.225</span>))+np.array((<span class="number">0.485</span>,<span class="number">0.456</span>,<span class="number">0.406</span>))</span><br><span class="line">    <span class="comment"># è£å‰ªå›¾ç‰‡åˆ°[0,1]</span></span><br><span class="line">    image=image.clip(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> image</span><br><span class="line">    </span><br><span class="line"><span class="comment"># è¯»å–å†…å®¹å’Œé£æ ¼å›¾åƒ</span></span><br><span class="line">content=load_image(<span class="string">r&quot;C:\Users\lenovo\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\å›¾ç‰‡\03.jpg&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;content shape:&quot;</span>,content.shape)</span><br><span class="line"></span><br><span class="line">style=load_image(<span class="string">r&quot;C:\Users\lenovo\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\æ¸²æŸ“\03.jpg&quot;</span>,shape=content.shape[-<span class="number">2</span>:])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Style&#x27;shape:&quot;</span>,style.shape)</span><br><span class="line"></span><br><span class="line">fig,(ax1,ax2) = plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">12</span>,<span class="number">5</span>))</span><br><span class="line">ax1.imshow(im_convert(content))</span><br><span class="line">ax1.set_title(<span class="string">&quot;Content&quot;</span>)</span><br><span class="line">ax2.imshow(im_convert(style))</span><br><span class="line">ax2.set_title(<span class="string">&quot;Style&quot;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å‡½æ•°ï¼Œè·å–å›¾åƒåœ¨ç½‘ç»œä¸ŠæŒ‡å®šå±‚çš„è¾“å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_features</span>(<span class="params">image,model,layers=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># è·å–æŒ‡å®šlayerçš„è¾“å‡º</span></span><br><span class="line">    <span class="comment"># lyaerså‚æ•°æŒ‡å®šéœ€è¦ç”¨äºå›¾åƒå†…å®¹å’Œæ ·å¼è¡¨ç¤ºçš„å›¾å±‚</span></span><br><span class="line">    <span class="comment"># æ²¡æœ‰æŒ‡å®šå°±ä½¿ç”¨é»˜è®¤çš„å±‚</span></span><br><span class="line">    <span class="keyword">if</span> layers <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        layers=&#123;</span><br><span class="line">            <span class="string">&#x27;0&#x27;</span>:<span class="string">&#x27;conv1_1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;5&#x27;</span>:<span class="string">&#x27;conv2_1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;10&#x27;</span>:<span class="string">&#x27;conv3_1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;19&#x27;</span>:<span class="string">&#x27;conv4_1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;21&#x27;</span>:<span class="string">&#x27;conv4_2&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;28&#x27;</span>:<span class="string">&#x27;conv5_1&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment"># è·å–çš„æ¯å±‚ç‰¹å¾ä¿å­˜åˆ°å­—å…¸ä¸­</span></span><br><span class="line">    features=&#123;&#125;</span><br><span class="line">    x=image</span><br><span class="line">    <span class="keyword">for</span> name,layer <span class="keyword">in</span> model._modules.items():</span><br><span class="line">        <span class="comment"># ä»ç¬¬ä¸€å±‚å¼€å§‹è·å–å›¾åƒç‰¹å¾</span></span><br><span class="line">        x=layer(x)</span><br><span class="line">        <span class="comment"># å¦‚æœæ˜¯æŒ‡å®šå±‚çš„ç‰¹å¾å°±ä¿å­˜</span></span><br><span class="line">        <span class="keyword">if</span> name <span class="keyword">in</span> layers:</span><br><span class="line">            features[layers[name]]=x</span><br><span class="line">    <span class="keyword">return</span> features</span><br><span class="line">    </span><br><span class="line"><span class="comment"># é€šè¿‡GramçŸ©é˜µæ¥è¯„ä»·ä¸¤å¹…å›¾åƒæ˜¯å¦å…·æœ‰ç›¸åŒé£æ ¼</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gram_matrix</span>(<span class="params">tensor</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    GramçŸ©é˜µè¡¨ç¤ºå›¾åƒçš„é£æ ¼ç‰¹å¾ï¼Œåœ¨ä¿è¯å†…å®¹çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œé£æ ¼ä¼ è¾“</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    _,d,h,w=tensor.size()</span><br><span class="line">    <span class="comment"># æ”¹å˜ç»´åº¦ä¸º(æ·±åº¦,é«˜*å®½)</span></span><br><span class="line">    tensor=tensor.view(d,h*w)</span><br><span class="line">    <span class="comment"># è®¡ç®—gramçŸ©é˜µ</span></span><br><span class="line">    gram=torch.mm(tensor,tensor.t())</span><br><span class="line">    <span class="keyword">return</span> gram</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ç¬¬ä¸€æ¬¡è®­ç»ƒä¹‹å‰çš„å†…å®¹ç‰¹å¾å’Œé£æ ¼ç‰¹å¾</span></span><br><span class="line">content_features=get_features(content,vgg)</span><br><span class="line">style_features=get_features(style,vgg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æ¯å±‚çš„GramçŸ©é˜µ,ç”¨äºè¡¨ç¤ºé£æ ¼</span></span><br><span class="line">style_grams=&#123;layer:gram_matrix(style_features[layer]) <span class="keyword">for</span> layer <span class="keyword">in</span> style_features&#125;</span><br><span class="line"><span class="comment"># ä½¿ç”¨å†…å®¹å›¾åƒçš„å‰¯æœ¬åˆ›å»ºä¸€ä¸ªç›®æ ‡å›¾åƒï¼Œè®­ç»ƒæ—¶å¯¹ç›®æ ‡å›¾åƒè¿›è¡Œè°ƒæ•´</span></span><br><span class="line">target=content.clone().requires_grad_(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ¯ä¸ªæ ·å¼å±‚çš„æƒé‡</span></span><br><span class="line">style_weights=&#123;<span class="string">&#x27;conv1_1&#x27;</span>:<span class="number">1.</span>,</span><br><span class="line">               <span class="string">&#x27;conv2_1&#x27;</span>:<span class="number">0.75</span>,</span><br><span class="line">               <span class="string">&#x27;conv3_1&#x27;</span>:<span class="number">0.2</span>,</span><br><span class="line">               <span class="string">&#x27;conv4_1&#x27;</span>:<span class="number">0.2</span>,</span><br><span class="line">               <span class="string">&#x27;conv5_1&#x27;</span>:<span class="number">0.2</span>&#125;</span><br><span class="line"></span><br><span class="line">alpha=<span class="number">1</span></span><br><span class="line">beta=<span class="number">1e6</span></span><br><span class="line"></span><br><span class="line">content_weight=alpha</span><br><span class="line">style_weight=beta</span><br><span class="line"></span><br><span class="line"><span class="comment"># conv4 2ç”¨äºåº¦é‡å›¾åƒå†…å®¹ç›¸ä¼¼æ€§</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯1000æ¬¡è¿­ä»£è¾“å‡ºä¸€ä¸ªä¸­é—´ç»“æœ</span></span><br><span class="line">show_every=<span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æŸå¤±</span></span><br><span class="line">total_loss_all=[]</span><br><span class="line">content_loss_all=[]</span><br><span class="line">style_loss_all=[]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨Adamä¼˜åŒ–å™¨</span></span><br><span class="line">optimizer=optim.Adam([target],lr=<span class="number">0.0003</span>)</span><br><span class="line">step=<span class="number">50000</span></span><br><span class="line">t0=time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,step+<span class="number">1</span>):</span><br><span class="line">    <span class="comment"># è·å–å›¾åƒç‰¹å¾</span></span><br><span class="line">    target_features=get_features(target,vgg)</span><br><span class="line">    <span class="comment"># è®¡ç®—å†…å®¹æŸå¤±</span></span><br><span class="line">    content_loss=torch.mean((target_features[<span class="string">&#x27;conv4_2&#x27;</span>]-content_features[<span class="string">&#x27;conv4_2&#x27;</span>])**<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># è®¡ç®—é£æ ¼æŸå¤±</span></span><br><span class="line">    style_loss=<span class="number">0</span></span><br><span class="line">    <span class="comment"># æŠŠæ¯ä¸ªå±‚çš„GramçŸ©é˜µç›¸åŠ </span></span><br><span class="line">    <span class="keyword">for</span> layer <span class="keyword">in</span> style_weights:</span><br><span class="line">        <span class="comment"># è®¡ç®—è¦ç”Ÿæˆçš„å›¾åƒé£æ ¼è¡¨ç¤º</span></span><br><span class="line">        target_feature=target_features[layer]</span><br><span class="line">        <span class="comment"># [d,h*w]</span></span><br><span class="line">        target_gram=gram_matrix(target_feature)</span><br><span class="line">        _,d,h,w=target_feature.shape</span><br><span class="line">        <span class="comment"># è·å¾—é£æ ¼åœ¨æ¯å±‚çš„GramçŸ©é˜µ</span></span><br><span class="line">        style_gram=style_grams[layer]</span><br><span class="line">        <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">        layer_style_loss=style_weights[layer]*torch.mean((target_gram-style_gram)**<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># ç´¯åŠ è®¡ç®—é£æ ¼å·®å¼‚</span></span><br><span class="line">        <span class="comment"># æ¯ä¸ªåƒç´ ç‚¹</span></span><br><span class="line">        style_loss+=layer_style_loss/(d*h*w)</span><br><span class="line">    <span class="comment"># æ€»æŸå¤±ç­‰äºé£æ ¼æŸå¤±åŠ ä¸Šå†…å®¹æŸå¤±</span></span><br><span class="line">    total_loss=content_weight*content_loss+style_weight*style_loss</span><br><span class="line">    <span class="comment"># ä¿ç•™ä¸‰ç§æŸå¤±å¤§å°</span></span><br><span class="line">    content_loss_all.append(content_loss.item())</span><br><span class="line">    style_loss_all.append(style_loss.item())</span><br><span class="line">    total_loss_all.append(total_loss.item())</span><br><span class="line">    <span class="comment"># æ›´æ–°éœ€è¦ç”Ÿæˆçš„å›¾åƒ</span></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    total_loss.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line">    <span class="comment"># è¾“å‡ºshow_ecveryæ¬¡æ•°åšåº¦å›¾åƒ</span></span><br><span class="line">    <span class="keyword">if</span> i%show_every==<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Total loss&quot;</span>,total_loss.item())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Use time: &quot;</span>,(time.time()-t0)/<span class="number">3600</span>,<span class="string">&quot;hour&quot;</span>)</span><br><span class="line">        newim=im_convert(target)</span><br><span class="line">        plt.imshow(newim)</span><br><span class="line">        plt.title(<span class="string">&quot;Iteration: &quot;</span>+<span class="built_in">str</span>(i)+<span class="string">&quot;times&quot;</span>)</span><br><span class="line">        plt.show()</span><br><span class="line">        <span class="comment"># ä¿å­˜å›¾ç‰‡</span></span><br><span class="line">        result=Image.fromarray((newim*<span class="number">255</span>).astype(np.uint8))</span><br><span class="line">        result.save(<span class="string">r&quot;C:\Users\lenovo\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\ç»“æœ\Map_Result&quot;</span>+<span class="built_in">str</span>(i)+<span class="string">&quot;.bmp&quot;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># ç»“æœå¯è§†åŒ–</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">4</span>))</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">plt.plot(total_loss_all,<span class="string">&#x27;r&#x27;</span>,label=<span class="string">&#x27;total_loss&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.title(<span class="string">&quot;total loss&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">plt.plot(content_loss_all,<span class="string">&#x27;g-&#x27;</span>,label=<span class="string">&quot;content_loss&quot;</span>)</span><br><span class="line">plt.plot(style_loss_all,<span class="string">&#x27;b-.&#x27;</span>,label=<span class="string">&quot;style_loss&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.title(<span class="string">&quot;Content and Style loss&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="ç»“æœå±•ç¤º-v2">ç»“æœå±•ç¤º</h3>
<p><strong>å†…å®¹å›¾ç‰‡</strong></p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/02.png" style="zoom:25%;">
<p><strong>é£æ ¼å›¾ç‰‡</strong></p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220316140830023.png" alt="image-20220316140830023" style="zoom:10%;">
<p><strong>æ¸²æŸ“å›¾ç‰‡</strong></p>
<h1>å¯¹æŠ—ç”Ÿæˆç½‘ç»œ</h1>
<hr>
<h2 id="GAN">GAN</h2>
<p>GANçš„æ ¸å¿ƒåœ¨äºç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨çš„å‹¾å¿ƒæ–—è§’ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220317194554644.png" alt="image-20220317194554644" style="zoom:50%;">
<p><strong>BCELOSS</strong></p>
<p>å¦‚ä½•å»è¯„ä¼°æ¨¡å‹çš„æ•ˆæœï¼Ÿå¯¹äºåˆ¤åˆ«å™¨æ¥è¯´ï¼Œä¼šå‡ºç°æ­£è´Ÿå€¼ï¼Œæˆ‘ä»¬å…ˆå°†å…¶æ˜ å°„åˆ°[0,1]åŒºé—´ï¼Œæ¥ç€æ ¹æ®ä¿¡æ¯ç†µçš„è®¡ç®—å…¬å¼æ¥å¾—åˆ°æŸå¤±å‡½æ•°ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo stretchy="false">(</mo><mi>o</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ’</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>n</mi><munder><mo>âˆ‘</mo><mi>i</mi></munder><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>âˆ—</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>o</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mi>t</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mi>o</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">loss(o,t)=-1/n\sum_{i}(t[i]*log(o[i])+(1-t[i])*log(1-o[i]))
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oss</span><span class="mopen">(</span><span class="mord mathnormal">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mord">âˆ’</span><span class="mord">1/</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">o</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">])</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">])</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]))</span></span></span></span></span></p>
<h3 id="å®ç°ä»£ç -v3">å®ç°ä»£ç </h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">from</span> torchvision.utils <span class="keyword">import</span> save_image</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ•°æ®</span></span><br><span class="line">os.makedirs(<span class="string">&quot;images&quot;</span>,exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå…¨å±€å‚æ•°</span></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&quot;--n_epochs&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">100</span>, <span class="built_in">help</span>=<span class="string">&quot;number of epochs of training&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--batch_size&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">128</span>, <span class="built_in">help</span>=<span class="string">&quot;size of the batches&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--lr&quot;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.0002</span>, <span class="built_in">help</span>=<span class="string">&quot;adam: learning rate&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--b1&quot;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.5</span>, <span class="built_in">help</span>=<span class="string">&quot;adam: decay of first order momentum of gradient&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--b2&quot;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.999</span>, <span class="built_in">help</span>=<span class="string">&quot;adam: decay of first order momentum of gradient&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--n_cpu&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">8</span>, <span class="built_in">help</span>=<span class="string">&quot;number of cpu threads to use during batch generation&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--latent_dim&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">100</span>, <span class="built_in">help</span>=<span class="string">&quot;dimensionality of the latent space&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--img_size&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">28</span>, <span class="built_in">help</span>=<span class="string">&quot;size of each image dimension&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--channels&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">1</span>, <span class="built_in">help</span>=<span class="string">&quot;number of image channels&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--sample_interval&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">400</span>, <span class="built_in">help</span>=<span class="string">&quot;interval betwen image samples&quot;</span>)</span><br><span class="line">opt = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¾åƒå½¢çŠ¶ : (c,h,w)</span></span><br><span class="line">img_shape=(opt.channels,opt.img_size,opt.img_size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦è°ƒç”¨GPU</span></span><br><span class="line">cuda=<span class="literal">True</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆå™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Generator</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># ç”Ÿæˆå™¨è¦åšçš„å°±æ˜¯æŠŠéšæœºå™ªå£°è½¬åŒ–ä¸ºå›¾åƒåƒç´ </span></span><br><span class="line">        <span class="built_in">super</span>(Generator, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">block</span>(<span class="params">in_feat,out_feat,normalize=<span class="literal">True</span></span>):</span><br><span class="line">            <span class="comment"># in: åˆå§‹åŒ–éšæœºå™ªå£°</span></span><br><span class="line">            <span class="comment"># out: æŒ‡å®šç¥ç»å…ƒè¾“å‡º</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># åšä¸ªæœ€ç®€å•çš„å…¨è¿æ¥</span></span><br><span class="line">            layers=[nn.Linear(in_feat,out_feat)]</span><br><span class="line">            <span class="keyword">if</span> normalize:</span><br><span class="line">                <span class="comment"># batchåˆå§‹åŒ–</span></span><br><span class="line">                layers.append(nn.BatchNorm1d(out_feat,<span class="number">0.8</span>))</span><br><span class="line">            <span class="comment"># leakreluæ¿€æ´»å‡½æ•°</span></span><br><span class="line">            layers.append(nn.LeakyReLU(<span class="number">0.2</span>,inplace=<span class="literal">True</span>))</span><br><span class="line">            <span class="keyword">return</span> layers</span><br><span class="line"></span><br><span class="line">        self.model=nn.Sequential(</span><br><span class="line">            *block(opt.latent_dim,<span class="number">128</span>,normalize=<span class="literal">False</span>),</span><br><span class="line">            *block(<span class="number">128</span>, <span class="number">256</span>),</span><br><span class="line">            *block(<span class="number">256</span>, <span class="number">512</span>),</span><br><span class="line">            *block(<span class="number">512</span>, <span class="number">1024</span>),</span><br><span class="line">            <span class="comment"># è½¬åŒ–åˆ°å›¾åƒå¤§å°</span></span><br><span class="line">            <span class="comment"># å³: c*h*w</span></span><br><span class="line">            nn.Linear(<span class="number">1024</span>, <span class="built_in">int</span>(np.prod(img_shape))),</span><br><span class="line">            nn.Tanh()</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,z</span>):</span><br><span class="line">        <span class="comment"># ç”Ÿæˆfakeå›¾åƒ</span></span><br><span class="line">        img=self.model(z)</span><br><span class="line">        <span class="comment"># å°†å±•å¹³çš„scalarå˜æˆå›¾åƒæ ¼å¼</span></span><br><span class="line">        img=img.view(img.size(<span class="number">0</span>),*img_shape)</span><br><span class="line">        <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤åˆ«å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Discriminator</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Discriminator, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.model=nn.Sequential(</span><br><span class="line">            <span class="comment"># åˆ¤åˆ«å™¨è¦åšçš„å°±æ˜¯è¯†åˆ«å›¾åƒçŠ¶æ€</span></span><br><span class="line">            nn.Linear(<span class="built_in">int</span>(np.prod(img_shape)),<span class="number">512</span>),</span><br><span class="line">            nn.LeakyReLU(<span class="number">0.2</span>,inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">512</span>,<span class="number">256</span>),</span><br><span class="line">            nn.LeakyReLU(<span class="number">0.2</span>,inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">256</span>,<span class="number">1</span>),</span><br><span class="line">            <span class="comment"># éœ€è¦æ˜ å°„åˆ°01</span></span><br><span class="line">            nn.Sigmoid()</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,img</span>):</span><br><span class="line">        img_flat=img.view(img.size(<span class="number">0</span>),-<span class="number">1</span>)</span><br><span class="line">        validity=self.model(img_flat)</span><br><span class="line">        <span class="keyword">return</span> validity</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸå¤±å‡½æ•°</span></span><br><span class="line"><span class="comment"># ç”¨çš„æ˜¯BCEloss</span></span><br><span class="line"><span class="comment"># å³è®¡ç®—æ ·æœ¬æ­£ç¡®è¯†åˆ«ä¿¡æ¯ç†µ</span></span><br><span class="line">loss=torch.nn.BCELoss()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç”Ÿæˆå™¨</span></span><br><span class="line">gen=Generator()</span><br><span class="line">dis=Discriminator()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> cuda:</span><br><span class="line">    gen.cuda()</span><br><span class="line">    dis.cuda()</span><br><span class="line">    loss.cuda()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºMNISTæ•°æ®é›†</span></span><br><span class="line">os.makedirs(<span class="string">&quot;./data/mnist&quot;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">dataloader = DataLoader(</span><br><span class="line">    datasets.MNIST(</span><br><span class="line">        <span class="string">&quot;./data/mnist&quot;</span>,</span><br><span class="line">        train=<span class="literal">True</span>,</span><br><span class="line">        download=<span class="literal">True</span>,</span><br><span class="line">        transform=transforms.Compose(</span><br><span class="line">            [transforms.Resize(opt.img_size),</span><br><span class="line">             transforms.ToTensor(),</span><br><span class="line">             transforms.Normalize([<span class="number">0.5</span>], [<span class="number">0.5</span>])]</span><br><span class="line">        ),</span><br><span class="line">    ),</span><br><span class="line">    batch_size=opt.batch_size,</span><br><span class="line">    shuffle=<span class="literal">True</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨</span></span><br><span class="line">opt_G=torch.optim.Adam(gen.parameters(),lr=opt.lr,betas=(opt.b1, opt.b2))</span><br><span class="line">opt_D=torch.optim.Adam(dis.parameters(),lr=opt.lr,betas=(opt.b1, opt.b2))</span><br><span class="line"></span><br><span class="line">Tensor=torch.cuda.FloatTensor <span class="keyword">if</span> cuda <span class="keyword">else</span> torch.FloatTensor</span><br><span class="line"></span><br><span class="line"><span class="comment"># -------</span></span><br><span class="line"><span class="comment">#   è®­ç»ƒ</span></span><br><span class="line"><span class="comment"># -------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(opt.n_epochs):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i,(imgs,_) <span class="keyword">in</span> <span class="built_in">enumerate</span>(dataloader):</span><br><span class="line">        <span class="comment"># éªŒè¯æ•°æ®è¡¨</span></span><br><span class="line">        valid=Variable(Tensor(imgs.size(<span class="number">0</span>),<span class="number">1</span>).fill_(<span class="number">1.0</span>),requires_grad=<span class="literal">False</span>)</span><br><span class="line">        fake=Variable(Tensor(imgs.size(<span class="number">0</span>),<span class="number">1</span>).fill_(<span class="number">0.0</span>),requires_grad=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># çœŸå®å½±åƒ</span></span><br><span class="line">        real_imgs=Variable(imgs.<span class="built_in">type</span>(Tensor))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ----------</span></span><br><span class="line">        <span class="comment">#  è®­ç»ƒç”Ÿæˆå™¨</span></span><br><span class="line">        <span class="comment"># ----------</span></span><br><span class="line">        opt_G.zero_grad()</span><br><span class="line">        <span class="comment"># åˆ›å»ºéšæœºå™ªå£°</span></span><br><span class="line">        z=Variable(Tensor(np.random.normal(<span class="number">0</span>,<span class="number">1</span>,(imgs.shape[<span class="number">0</span>],opt.latent_dim)))) <span class="comment"># imgs:(128,1,28,28) z:(128,100)</span></span><br><span class="line">        <span class="comment"># ç”Ÿæˆbatchå›¾ç‰‡</span></span><br><span class="line">        gen_imgs=gen(z)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—ç”Ÿæˆå™¨èƒ½å¤Ÿéª—è¿‡åˆ¤åˆ«å™¨çš„èƒ½åŠ›</span></span><br><span class="line">        g_loss = loss(dis(gen_imgs), valid)</span><br><span class="line"></span><br><span class="line">        g_loss.backward()</span><br><span class="line">        opt_G.step()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ---------------------</span></span><br><span class="line">        <span class="comment">#  è®­ç»ƒåˆ¤åˆ«å™¨</span></span><br><span class="line">        <span class="comment"># ---------------------</span></span><br><span class="line"></span><br><span class="line">        opt_D.zero_grad()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—åˆ¤åˆ«å™¨å¯¹çœŸå®æ•°æ®çš„æ•æ„Ÿåº¦</span></span><br><span class="line">        real_loss = loss(dis(real_imgs), valid)</span><br><span class="line">        <span class="comment"># è®¡ç®—åˆ¤åˆ«å™¨è¯†åˆ«è™šå‡æ•°æ®çš„æ•æ„Ÿåº¦</span></span><br><span class="line">        fake_loss = loss(dis(gen_imgs.detach()), fake)</span><br><span class="line"></span><br><span class="line">        d_loss = (real_loss + fake_loss) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        d_loss.backward()</span><br><span class="line">        opt_D.step()</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(</span><br><span class="line">            <span class="string">&quot;[Epoch %d/%d] [Batch %d/%d] [D loss: %f] [G loss: %f]&quot;</span></span><br><span class="line">            % (epoch, opt.n_epochs, i, <span class="built_in">len</span>(dataloader), d_loss.item(), g_loss.item())</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        batches_done = epoch * <span class="built_in">len</span>(dataloader) + i</span><br><span class="line">        <span class="keyword">if</span> batches_done % opt.sample_interval == <span class="number">0</span>:</span><br><span class="line">            save_image(gen_imgs.data[:<span class="number">25</span>], <span class="string">&quot;images/%d.png&quot;</span> % batches_done, nrow=<span class="number">5</span>, normalize=<span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ç»“æœå±•ç¤º-v3">ç»“æœå±•ç¤º</h3>
<p><img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220318011258706.png" alt="image-20220318011258706"></p>
<p>è®­ç»ƒç”Ÿæˆçš„å›¾åƒå·²ç»èƒ½å¤Ÿä»¥å‡ä¹±çœŸäº†ã€‚</p>
<hr>
<h2 id="CyCleGAN">CyCleGAN</h2>
<p>CycleGANåŒºåˆ«äºå…¶ä»–ç½‘ç»œï¼Œä¸éœ€è¦å›¾åƒé…å¯¹(Paired)å³å¯å¯¹ç›®æ ‡å›¾åƒè¿›è¡Œé£æ ¼ä¸é¢œè‰²çš„è¿ç§»ã€‚</p>
<p><strong>CycleGANèƒ½åšä»€ä¹ˆï¼Ÿ</strong></p>
<p><img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/horse2zebra.gif" alt="horse2zebra"></p>
<p><strong>CycleGANç½‘ç»œæ¶æ„</strong></p>
<p>å¾ªç¯æ¶æ„èƒ½å¤Ÿä¿è¯ç”Ÿæˆçš„å›¾åƒä¸æºå›¾åƒæœ‰å…³ç³»ï¼Œè¦ä¸ç„¶åªè¦æ˜¯![img](file:///C:\Users\lenovo\AppData\Local\Temp\SGPicFaceTpBq\22660\22F3ACEB.png)å°±å¯ä»¥äº†ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub></mrow><annotation encoding="application/x-tex">G_{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ç”¨äºå°†æºå›¾åƒç”Ÿæˆç›®æ ‡å›¾åƒï¼Œè¯¥ç›®æ ‡å›¾åƒè¿›å…¥åˆ¤åˆ«å™¨ä¸çœŸæ—¶å›¾åƒè¿›è¡Œæ¯”å¯¹ã€‚åŒæ—¶ï¼Œä¸ºäº†ä¿è¯å›¾åƒé—´çš„å…³è”ï¼Œè¿˜éœ€è¦é€šè¿‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mrow><mi>B</mi><mi>A</mi></mrow></msub></mrow><annotation encoding="application/x-tex">G_{BA}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ç½‘ç»œå°†ç›®æ ‡å›¾åƒè¿˜åŸè‡³ä¸æºå›¾åƒç›¸ä¼¼çš„å›¾åƒï¼Œå¹¶è¡¡é‡æœ€åç»“æœä¸æºå›¾åƒçš„ç›¸ä¼¼ç¨‹åº¦ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220318085558382.png" alt="image-20220318085558382" style="zoom:33%;">
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mrow><mi>B</mi><mi>A</mi></mrow></msub></mrow><annotation encoding="application/x-tex">G_{BA}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åœ¨å…¶ä¸­ä¹Ÿæœ‰ç€éå¸¸é‡è¦çš„ä½œç”¨ï¼ŒåŒæ ·éœ€è¦ç»è¿‡è®­ç»ƒã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/image-20220318090444399.png" alt="image-20220318090444399" style="zoom:33%;">
<p>åœ¨æ•´ä½“ç½‘ç»œæ¶æ„ä¸­ï¼Œé€šè¿‡é¢ å€’ç›®æ ‡å›¾åƒä¸æºå›¾åƒçš„æ–¹å¼ï¼Œèƒ½å¤Ÿå¯¹å¾ªç¯ç”Ÿæˆå™¨è¿›è¡Œè®­ç»ƒã€‚</p>
<p><strong>æŸå¤±å‡½æ•°</strong></p>
<ul>
<li>ç”Ÿæˆå™¨æŸå¤±</li>
<li>åˆ¤åˆ«å™¨æŸå¤±</li>
<li>å¾ªç¯æŸå¤±</li>
<li>æ˜ å°„æŸå¤±(å°†ç”Ÿæˆå›¾åƒå†é€šè¿‡ç”Ÿæˆå™¨ï¼Œçœ‹äºŒæ¬¡ç”Ÿæˆä¸ä¸€æ¬¡ç”Ÿæˆçš„å·®åˆ«)</li>
</ul>
<h3 id="é‡ç‚¹ä»£ç è¯¦è§£">é‡ç‚¹ä»£ç è¯¦è§£</h3>
<h3 id="ç»“æœå±•ç¤º-v4">ç»“æœå±•ç¤º</h3>
<p>æ ·æœ¬ç±»Aç¤ºä¾‹</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/264_A.jpg" alt="image-20220318012102085" style="zoom: 50%;">
<p>æ ·æœ¬ç±»Bç¤ºä¾‹</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/264_B.jpg" alt="image-20220318012123535" style="zoom: 50%;">
<p>ç”Ÿæˆå™¨ç»“æœç¤ºä¾‹</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%BF%AB%E9%80%9F%E5%9B%BE%E5%83%8F%E9%A2%9C%E8%89%B2%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/1002_A_fake.png" alt="image-20220318012123535" style="zoom: 110%;">
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
            <tag> æœºå™¨è§†è§‰ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PointNetç½‘ç»œ]]></title>
      <url>/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet%E7%BD%91%E7%BB%9C/</url>
      <content type="html"><![CDATA[<h1>PointNetç½‘ç»œè¯¦è§£</h1>
<hr>
<h2 id="ä¸€ã€ç‚¹äº‘æ•°æ®çš„ç‰¹ç‚¹">ä¸€ã€ç‚¹äº‘æ•°æ®çš„ç‰¹ç‚¹</h2>
<ul>
<li>æ— åºæ€§</li>
<li>è¿‘å¯†è¿œç–</li>
<li>éç»“æ„åŒ–æ•°æ®</li>
<li>å±€éƒ¨ç»“æ„è¯­ä¹‰</li>
</ul>
<h2 id="äºŒã€PointNet">äºŒã€PointNet</h2>
<h3 id="2-1-PointNetæ€æƒ³">2.1  PointNetæ€æƒ³</h3>
<p>ä¼ ç»Ÿçš„å·ç§¯ç¥ç»ç½‘ç»œæ˜¯å¯¹å›¾åƒåƒç´ è¿›è¡Œå·ç§¯ï¼Œå¦‚æœåœ¨ä¸åŒæ–¹å‘å°†ç‚¹äº‘æ•°æ®è¿›è¡ŒæŠ•å½±ï¼Œå†åˆ©ç”¨å·ç§¯ç¥ç»ç½‘ç»œä¹Ÿèƒ½å®ç°åˆ†å‰²ï¼Œä½†æ˜¯ç®—æ³•å¤æ‚ä¸”æ•ˆæœä¸å¥½ã€‚PointNetè€ƒè™‘çš„æ˜¯ç›´æ¥è¾“å…¥ç‚¹äº‘æ•°æ®ï¼Œå®ç°ä¸€ä¸ªç«¯åˆ°ç«¯çš„ç½‘ç»œã€‚</p>
<p>ä½†æ˜¯ç‚¹äº‘æ•°æ®ä¸åŒäºå›¾åƒæ•°æ®ï¼Œé¦–å…ˆæ˜¯ç‚¹å…·æœ‰<strong>ç½®æ¢ä¸å˜æ€§</strong>ï¼Œå³äº¤æ¢ä»»æ„ç‚¹ä¹‹é—´çš„ä½ç½®ï¼Œä¸ä¼šå¯¹æ•´ä½“é€ æˆå½±å“(ä¸è€ƒè™‘å›æ³¢å’Œè¾å°„å¼ºåº¦æ—¶)ã€‚</p>
<p>PointNetéœ€è¦æ»¡è¶³è¿™ç§ä¸å˜æ€§ï¼Œå³:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>â‰¡</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>Ï€</mi><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mrow><mi>Ï€</mi><mn>2</mn></mrow></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>x</mi><mrow><mi>Ï€</mi><mi>n</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x_1,x_2,...,x_n)\equiv f(x_{\pi1},x_{\pi2},...,x_{\pi n})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Ï€n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>å…¶å®æœ‰å¾ˆå¤šç§æ–¹å¼èƒ½æ»¡è¶³è¿™ç§ä¸å˜æ€§ï¼ŒPointNeté‡‡ç”¨äº†æœ€å¤§æ± åŒ–(maxå‡½æ•°)æ¥å®ç°ã€‚ä½†æ˜¯è¯¥æ–¹æ³•å¤ªè¿‡ä¸€åˆ€åˆ‡äº†ï¼Œä¼šä¸¢å¤±å¾ˆå¤šçš„ä¿¡æ¯ã€‚ä¸ºäº†ç¡®ä¿ä¿¡æ¯é‡ï¼ŒPointNeté‡‡ç”¨å‡ç»´çš„æ–¹å¼ï¼Œæ„å»ºæ›´å¤šçš„éšå«ä¿¡æ¯ã€‚</p>
<p>æœ€ç®€å•çš„å°±æ˜¯é€šè¿‡å…¨è¿æ¥å±‚æˆ–è€…å·ç§¯è¿›è¡Œç‰¹å¾æå–ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet%E7%BD%91%E7%BB%9C/image-20220328001047560.png" alt="image-20220328001047560" style="zoom:33%;">
<p>å…¶ç½‘ç»œæ¶æ„å¦‚ä¸‹ï¼š</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet%E7%BD%91%E7%BB%9C/image-20220328124916753.png" alt="image-20220328124916753" style="zoom: 33%;">
<p>å¤§è‡´æµç¨‹ä¸ºï¼š</p>
<ul>
<li>è¾“å…¥ä¸€ä¸ªåŒ…å«nä¸ªç‚¹äº‘çš„é›†åˆï¼Œè¡¨ç¤ºä¸º<code>n*3</code>çš„<code>tensor</code>ï¼Œä¸‰ä¸ªç»´åº¦åˆ†åˆ«å¯¹åº”<code>xyz</code>åæ ‡ã€‚</li>
<li>è¾“å…¥çš„æ•°æ®ä¸€èˆ¬éœ€è¦è·Ÿä¸€ä¸ª<code>T-Net</code>å­¦ä¹ åˆ°çš„è½¬ç§»çŸ©é˜µç›¸ä¹˜æ¥å¯¹å…¶ï¼Œè¿™æ ·ä¿è¯äº†æ¨¡å‹çš„å¯¹ç‰¹å®šç©ºé—´è½¬æ¢çš„ä¸å˜æ€§ã€‚</li>
<li>æœ€ç»ˆåˆ©ç”¨<code>maxpooling</code>åœ¨å„ä¸ªç»´åº¦ä¸Šæ“ä½œå¾—åˆ°å…¨å±€ç‰¹å¾ã€‚</li>
</ul>
<p>å¯¹äºåˆ†ç±»å·¥ä½œï¼Œæ˜¯å°†è¾“å…¥æ•°æ®å…ˆåšä¸€ä¸ªæ•°æ®å¢å¼ºï¼Œç„¶ååˆ©ç”¨å¤šå±‚æ„ŸçŸ¥æœºè¿›è¡Œå‡ç»´ï¼Œåœ¨è·å–åˆ°1024ç»´çš„ä¿¡æ¯ä¹‹åï¼Œé‡‡ç”¨æœ€å¤§æ± åŒ–è·å–å…¨å±€ä¿¡æ¯ã€‚æ¥ç€åœ¨å¯¹è¿™1024ç»´è¿›è¡Œé™ç»´åˆ°kç»´ï¼Œè¿›è¡Œåˆ†ç±»ã€‚</p>
<p>è€Œé’ˆå¯¹åˆ†å‰²ä»»åŠ¡ï¼Œåˆ™æ˜¯å°†å…¨å±€é«˜ç»´ä¿¡æ¯ä¸64ç»´çš„ä½ç»´ä¿¡æ¯èåˆ(ç­‰äº64ç»´åé¢ç›´æ¥é»ä¸Š1024ç»´)ååšé™ç»´ã€‚</p>
<h3 id="2-2-PointNetå®ç°">2.2  PointNetå®ç°</h3>
<p>æœ¬æ–‡ä»£ç å‚è€ƒè‡ªï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/yanx27/Pointnet_Pointnet2_pytorch">https://link.zhihu.com/?target=https%3A//github.com/yanx27/Pointnet_Pointnet2_pytorch</a>.</p>
<h4 id="2-2-1-T-Net">2.2.1  <strong>T-Net</strong></h4>
<p>T-Netæ˜¯ç”¨æ¥æ¨¡æ‹Ÿæ¨¡å‹å¯¹ç‰¹å®šç©ºé—´è½¬æ¢çš„ä¸å˜æ€§ï¼Œåœ¨åŸæ–‡ä¸­ç»™å‡ºäº†å¦‚ä¸‹çš„è§£é‡Šï¼š<em>The semantic labeling of a point cloud has to be invariant if the point cloud undergoes certain geometric transformations, such as rigid transformation. We therefore expect that the learnt representation by our point set is invariant to these transformations.</em></p>
<p>æœ¬è´¨ä¸Šæ˜¯åšäº†<strong>åˆšä½“å˜æ¢</strong>(Rigid Transformation)ï¼Œå³å˜æ¢å‰åä¸¤ç‚¹é—´è·ç¦»ä»ä¿æŒä¸å˜ã€‚å…·ä½“åŸç†å¯ä»¥å‚è€ƒ<a href="https://www.cnblogs.com/xinxue/archive/2017/09/28/7513192.html">æ–‡ç« </a>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">STN3d</span>(nn.Module):</span><br><span class="line">    <span class="comment"># T-Netåœ¨ä¸‰ç»´æƒ…å†µä¸‹</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,channel</span>):</span><br><span class="line">        <span class="built_in">super</span>(STN3d, self).__init__()</span><br><span class="line">        self.conv1=nn.Conv1d(channel,<span class="number">64</span>,<span class="number">1</span>)</span><br><span class="line">        self.conv2=nn.Conv1d(<span class="number">64</span>,<span class="number">128</span>,<span class="number">1</span>)</span><br><span class="line">        self.conv3=nn.Conv1d(<span class="number">128</span>,<span class="number">1024</span>,<span class="number">1</span>)</span><br><span class="line">        self.fc1=nn.Linear(<span class="number">1024</span>,<span class="number">512</span>)</span><br><span class="line">        self.fc2=nn.Linear(<span class="number">512</span>,<span class="number">256</span>)</span><br><span class="line">        <span class="comment"># è¿™é‡Œçš„9æ˜¯3*3å˜æ¢æ¥çš„</span></span><br><span class="line">        self.fc3=nn.Linear(<span class="number">256</span>,<span class="number">9</span>)</span><br><span class="line">        self.relu=nn.ReLU()</span><br><span class="line"></span><br><span class="line">        self.bn1=nn.BatchNorm1d(<span class="number">64</span>)</span><br><span class="line">        self.bn2=nn.BatchNorm1d(<span class="number">128</span>)</span><br><span class="line">        self.bn3=nn.BatchNorm1d(<span class="number">1024</span>)</span><br><span class="line">        self.bn4=nn.BatchNorm1d(<span class="number">512</span>)</span><br><span class="line">        self.bn5=nn.BatchNorm1d(<span class="number">256</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        batchsize=x.size(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¼€å§‹è·å–é«˜ç»´æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># shape: [ batch , num , 3 ]</span></span><br><span class="line">        x=F.relu(self.bn1(self.conv1(x)))</span><br><span class="line">        <span class="comment"># shape: [ batch , num , 64 ]</span></span><br><span class="line">        x=F.relu(self.bn2(self.conv2(x)))</span><br><span class="line">        <span class="comment"># shape: [ batch , num , 128 ]</span></span><br><span class="line">        x=F.relu(self.bn3(self.conv3(x)))</span><br><span class="line">        <span class="comment"># shape: [ batch , num , 1024 ]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æœ€å¤§æ± åŒ–è·å–å…¨å±€ä¿¡æ¯</span></span><br><span class="line">        x=torch.<span class="built_in">max</span>(x,<span class="number">2</span>,keepdim=<span class="literal">True</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å±•å¹³åšçº¿æ€§å±‚</span></span><br><span class="line">        x=x.view(-<span class="number">1</span>,<span class="number">1024</span>)</span><br><span class="line">        <span class="comment"># shape: [ 1, 1024 ]</span></span><br><span class="line">        x=F.relu(self.bn4(self.fc1(x)))</span><br><span class="line">        <span class="comment"># shape: [ 1, 512 ]</span></span><br><span class="line">        x=F.relu(self.bn5(self.fc2(x)))</span><br><span class="line">        <span class="comment"># shape: [ 1, 256 ]</span></span><br><span class="line">        x=self.fc3(x)</span><br><span class="line">        <span class="comment"># shape: [ 1, 9 ]</span></span><br><span class="line">        <span class="comment"># åŸæœ¬çš„ä¸‰ç»´xyzå˜æ¢åˆ°äº†9ç»´(3*3)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å…³äºidenï¼Œè¿™ä¸œè¥¿å°±æ˜¯ä¸€ä¸ªeyesçŸ©é˜µï¼Œæœ¬è´¨ä¸Šç›¸å½“äºç»™å˜æ¢çš„ç»“æœåŠ ä¸Šinputæœ¬èº«</span></span><br><span class="line">        iden=Variable(torch.from_numpy(np.array([<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>]).astype(np.float32)))\</span><br><span class="line">            .view(<span class="number">1</span>,<span class="number">9</span>).repeat(batchsize,<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># shape: [ batch , 9 ]</span></span><br><span class="line">        <span class="keyword">if</span> x.is_cuda:</span><br><span class="line">            iden=iden.cuda()</span><br><span class="line"></span><br><span class="line">        x+=iden</span><br><span class="line">        <span class="comment"># è½¬æ¢æˆ[ batch , 3 , 3 ]çš„çŸ©é˜µè¿›è¡Œè¾“å‡º</span></span><br><span class="line">        <span class="comment"># è¯¥çŸ©é˜µç”¨äºå¯¹åŸå§‹å‘é‡åšåˆšä½“å˜æ¢</span></span><br><span class="line">        x=x.view(-<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet%E7%BD%91%E7%BB%9C/image-20220328200404491.png" alt="image-20220328200404491" style="zoom:50%;">
<p><code>T-Net</code>å°±ç›¸å½“äºä¸€ä¸ªå¾®å‹ç½‘ç»œï¼Œèƒ½å¤Ÿè·å¾—ä¸€ä¸ªç”¨äºå˜æ¢çš„æ•°æ®ï¼Œä¸”è¯¥æ•°æ®æ˜¯èƒ½è‡ªé€‚åº”çš„ã€‚</p>
<p>è¾“å…¥æ•°æ®å¦‚æœæ˜¯ä¸€ä¸ª<code>3*1000</code>çš„ç‚¹äº‘ï¼Œå¾—åˆ°çš„ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (<span class="built_in">type</span>)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv1d-<span class="number">1</span>             [-<span class="number">1</span>, <span class="number">64</span>, <span class="number">1000</span>]             <span class="number">256</span></span><br><span class="line">       BatchNorm1d-<span class="number">2</span>             [-<span class="number">1</span>, <span class="number">64</span>, <span class="number">1000</span>]             <span class="number">128</span></span><br><span class="line">            Conv1d-<span class="number">3</span>            [-<span class="number">1</span>, <span class="number">128</span>, <span class="number">1000</span>]           <span class="number">8</span>,<span class="number">320</span></span><br><span class="line">       BatchNorm1d-<span class="number">4</span>            [-<span class="number">1</span>, <span class="number">128</span>, <span class="number">1000</span>]             <span class="number">256</span></span><br><span class="line">            Conv1d-<span class="number">5</span>           [-<span class="number">1</span>, <span class="number">1024</span>, <span class="number">1000</span>]         <span class="number">132</span>,096</span><br><span class="line">       BatchNorm1d-<span class="number">6</span>           [-<span class="number">1</span>, <span class="number">1024</span>, <span class="number">1000</span>]           <span class="number">2</span>,048</span><br><span class="line">            Linear-<span class="number">7</span>                  [-<span class="number">1</span>, <span class="number">512</span>]         <span class="number">524</span>,<span class="number">800</span></span><br><span class="line">       BatchNorm1d-<span class="number">8</span>                  [-<span class="number">1</span>, <span class="number">512</span>]           <span class="number">1</span>,024</span><br><span class="line">            Linear-<span class="number">9</span>                  [-<span class="number">1</span>, <span class="number">256</span>]         <span class="number">131</span>,<span class="number">328</span></span><br><span class="line">      BatchNorm1d-<span class="number">10</span>                  [-<span class="number">1</span>, <span class="number">256</span>]             <span class="number">512</span></span><br><span class="line">           Linear-<span class="number">11</span>                    [-<span class="number">1</span>, <span class="number">9</span>]           <span class="number">2</span>,<span class="number">313</span></span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">803</span>,081</span><br><span class="line">Trainable params: <span class="number">803</span>,081</span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.01</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">18.57</span></span><br><span class="line">Params size (MB): <span class="number">3.06</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">21.64</span></span><br><span class="line">----------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<p>æ‰©å±•åˆ°<code>k</code>ç»´ï¼Œåˆ™æ˜¯è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">STNkd</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, k=<span class="number">64</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(STNkd, self).__init__()</span><br><span class="line">        self.conv1 = torch.nn.Conv1d(k, <span class="number">64</span>, <span class="number">1</span>)</span><br><span class="line">        self.conv2 = torch.nn.Conv1d(<span class="number">64</span>, <span class="number">128</span>, <span class="number">1</span>)</span><br><span class="line">        self.conv3 = torch.nn.Conv1d(<span class="number">128</span>, <span class="number">1024</span>, <span class="number">1</span>)</span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">1024</span>, <span class="number">512</span>)</span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">512</span>, <span class="number">256</span>)</span><br><span class="line">        self.fc3 = nn.Linear(<span class="number">256</span>, k * k)</span><br><span class="line">        self.relu = nn.ReLU()</span><br><span class="line"></span><br><span class="line">        self.bn1 = nn.BatchNorm1d(<span class="number">64</span>)</span><br><span class="line">        self.bn2 = nn.BatchNorm1d(<span class="number">128</span>)</span><br><span class="line">        self.bn3 = nn.BatchNorm1d(<span class="number">1024</span>)</span><br><span class="line">        self.bn4 = nn.BatchNorm1d(<span class="number">512</span>)</span><br><span class="line">        self.bn5 = nn.BatchNorm1d(<span class="number">256</span>)</span><br><span class="line"></span><br><span class="line">        self.k = k</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        batchsize = x.size()[<span class="number">0</span>]</span><br><span class="line">        x = F.relu(self.bn1(self.conv1(x)))</span><br><span class="line">        x = F.relu(self.bn2(self.conv2(x)))</span><br><span class="line">        x = F.relu(self.bn3(self.conv3(x)))</span><br><span class="line">        x = torch.<span class="built_in">max</span>(x, <span class="number">2</span>, keepdim=<span class="literal">True</span>)[<span class="number">0</span>]</span><br><span class="line">        x = x.view(-<span class="number">1</span>, <span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">        x = F.relu(self.bn4(self.fc1(x)))</span><br><span class="line">        x = F.relu(self.bn5(self.fc2(x)))</span><br><span class="line">        x = self.fc3(x)</span><br><span class="line"></span><br><span class="line">        iden = Variable(torch.from_numpy(np.eye(self.k).flatten().astype(np.float32))).view(<span class="number">1</span>, self.k * self.k).repeat(</span><br><span class="line">            batchsize, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> x.is_cuda:</span><br><span class="line">            iden = iden.cuda()</span><br><span class="line">        x = x + iden</span><br><span class="line">        x = x.view(-<span class="number">1</span>, self.k, self.k)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<p><img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet%E7%BD%91%E7%BB%9C/image-20220328200431913.png" alt="image-20220328200431913"></p>
<h4 id="2-2-2-PointNet">2.2.2  <strong>PointNet</strong></h4>
<p>å®ç°èµ·æ¥ä¹Ÿç›¸å¯¹ç®€å•ï¼Œä¸<code>T-Net</code>çš„å·®åˆ«å…¶å®ä¸å¤§ã€‚</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PointNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,global_feat=<span class="literal">True</span>,feature_transform=<span class="literal">False</span>,channel=<span class="number">3</span></span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param global_feat: æ˜¯å¦è¿”å›å…¨å±€ç‰¹å¾,è¯¥å€¼ä¸ºFalseçš„æ—¶å€™ä¼šè¿”å›æ‹¼æ¥çš„ä¿¡æ¯</span></span><br><span class="line"><span class="string">        :param feature_transform: è¦ç´ è½¬æ¢é˜¶æ®µï¼Œæ˜¯å¦è¦è¿›è¡Œè¦ç´ è½¬æ¢</span></span><br><span class="line"><span class="string">        :param channel: è¾“å…¥æ•°æ®çš„ç»´åº¦ï¼Œé»˜è®¤æ˜¯åªå«æœ‰xyzåæ ‡</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        self.stn=STN3d(channel)</span><br><span class="line">        self.conv1 = torch.nn.Conv1d(channel, <span class="number">64</span>, <span class="number">1</span>)</span><br><span class="line">        self.conv2 = torch.nn.Conv1d(<span class="number">64</span>, <span class="number">128</span>, <span class="number">1</span>)</span><br><span class="line">        self.conv3 = torch.nn.Conv1d(<span class="number">128</span>, <span class="number">1024</span>, <span class="number">1</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm1d(<span class="number">64</span>)</span><br><span class="line">        self.bn2 = nn.BatchNorm1d(<span class="number">128</span>)</span><br><span class="line">        self.bn3 = nn.BatchNorm1d(<span class="number">1024</span>)</span><br><span class="line">        self.global_feat=global_feat</span><br><span class="line">        self.feature_transform=feature_transform</span><br><span class="line">        <span class="keyword">if</span> self.feature_transform:</span><br><span class="line">            self.fstn=STNkd(k=<span class="number">64</span>)</span><br><span class="line">        </span><br><span class="line">        self.mlp1=nn.Linear(<span class="number">1024</span>,<span class="number">128</span>)</span><br><span class="line">        self.mlp2=nn.Linear(<span class="number">128</span>,<span class="number">64</span>)</span><br><span class="line">        self.mlp3=nn.Linear(<span class="number">64</span>,n)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        B, D, N=x.size() <span class="comment"># batch , deep , num</span></span><br><span class="line">        trans=self.stn(x) <span class="comment"># return : shape: [ b , 3 , 3 ]</span></span><br><span class="line">        x=x.transpose(<span class="number">2</span>,<span class="number">1</span>) <span class="comment"># [ b , num , deep ]</span></span><br><span class="line">        <span class="keyword">if</span> D&gt;<span class="number">3</span>:</span><br><span class="line">            <span class="comment"># æ­¤æ—¶éœ€è¦åˆ†å‰²è¦ç´ </span></span><br><span class="line">            <span class="comment"># æˆ‘ä»¬åšåˆšä½“å˜æ¢çš„åªæœ‰ä½ç½®æ•°æ®</span></span><br><span class="line">            x,feature=x.split(<span class="number">3</span>,dim=<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># æ­¤æ—¶åšçŸ©é˜µä¹˜æ³•ï¼Œbmmè¿™ä¸ªæ–¹æ³•ä¸€å®šè¦ä¸‰ç»´æ‰èƒ½è¿›è¡Œ</span></span><br><span class="line">        <span class="comment"># ç›¸å½“äº[x&#x27;,y&#x27;,z&#x27;]+[x,y,z]</span></span><br><span class="line">        <span class="comment"># [x&#x27;,y&#x27;,z&#x27;]æ¥è‡ªäºtransçŸ©é˜µçš„å˜æ¢</span></span><br><span class="line">        x=torch.bmm(x,trans) <span class="comment"># [ num , deep ] * [ deep , deep ]-&gt; [ num , deep ]</span></span><br><span class="line">        <span class="keyword">if</span> D&gt;<span class="number">3</span>:</span><br><span class="line">            x=torch.cat([x,feature],dim=<span class="number">2</span>)</span><br><span class="line">        x.transpose(<span class="number">2</span>,<span class="number">1</span>) <span class="comment"># [ b , d , n ]</span></span><br><span class="line"></span><br><span class="line">        x=F.relu(self.bn1(self.conv1(x)))</span><br><span class="line">        <span class="comment"># 64ä¸ªç‰¹å¾æ—¶æ˜¯å¦éœ€è¦åšfeature_transform</span></span><br><span class="line">        <span class="keyword">if</span> self.feature_transform:</span><br><span class="line">            trans_feat=self.fstn(x)</span><br><span class="line">            x=x.transpose(<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">            x=torch.bmm(x,trans_feat)</span><br><span class="line">            x=x.transpose(<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            trans_feat=<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¤æ—¶è‹¥æ˜¯å¤„ç†åˆ†å‰²ä»»åŠ¡ï¼Œåˆ™å°†è¯¥éƒ¨åˆ†(64ç»´ç‰¹å¾)ä½œä¸ºæ‹¼æ¥é¡¹</span></span><br><span class="line">        pointfeat=x</span><br><span class="line">        <span class="comment"># æ¥ç€è¿›è¡Œå·ç§¯</span></span><br><span class="line">        x=F.relu(self.bn2(self.conv2(x)))</span><br><span class="line">        x=self.bn3(self.conv3(x))</span><br><span class="line">        x=torch.argmax(x,<span class="number">2</span>,keepdim=<span class="literal">True</span>)[<span class="number">0</span>]</span><br><span class="line">        x=x.view(-<span class="number">1</span>,<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> self.global_feat:</span><br><span class="line">            <span class="comment"># åˆ†ç±»ä»»åŠ¡</span></span><br><span class="line">            <span class="comment"># transæ˜¯input_transformçš„3*3çŸ©é˜µ</span></span><br><span class="line">            <span class="comment"># transæ˜¯feature_transformçš„64*64çŸ©é˜µ</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œåœ¨ç¼–ç å™¨ä¸ŠåŠ ä¸Šäº†è§£ç å™¨çš„å·¥ä½œ</span></span><br><span class="line">            <span class="comment"># å®é™…ä¸Šæ²¡æœ‰ä¸‹é¢ä¸‰è¡Œ</span></span><br><span class="line">            x=F.relu(self.bn2(self.mlp1(x)))</span><br><span class="line">            x=F.relu(self.bn1(self.mlp2(x)))</span><br><span class="line">            x=self.mlp3(x)</span><br><span class="line">            <span class="keyword">return</span> x,trans,trans_feat</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># åˆ†å‰²ä»»åŠ¡ï¼Œéœ€è¦å°†å…¨å±€ä¿¡æ¯é»è´´åˆ°ä¸­é—´å±‚ä¿¡æ¯ä¸­</span></span><br><span class="line">            x=x.view(-<span class="number">1</span>,<span class="number">1024</span>,<span class="number">1</span>).repeat(<span class="number">1</span>,<span class="number">1</span>,N)</span><br><span class="line">            <span class="keyword">return</span> torch.cat([x,pointfeat],<span class="number">1</span>),trans,trans_feat</span><br></pre></td></tr></table></figure>
<p>è®ºæ–‡ä¸­æåˆ°ï¼Œ64*64ç»´çš„çŸ©é˜µå¾ˆéš¾ä¼˜åŒ–ï¼Œä½†ä½œè€…å‘ç°å¦‚æœè¯¥çŸ©é˜µçº¦ç­‰äºæ­£äº¤çŸ©é˜µï¼Œä¼˜åŒ–å°±ä¼šå®¹æ˜“å¾ˆå¤šã€‚æ ¹æ®æ­£äº¤çŸ©é˜µçš„æ€§è´¨ï¼šæ­£äº¤çŸ©é˜µä¹˜ä»¥è½¬ç½®ç­‰äºå•ä½çŸ©é˜µï¼Œä½œè€…é¢å¤–å¢åŠ äº†æŸå¤±å‡½æ•°ã€‚</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mrow><mi>r</mi><mi>e</mi><mi>g</mi></mrow></msub><mo>=</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>I</mi><mo>âˆ’</mo><mi>A</mi><msup><mi>A</mi><mi>T</mi></msup><mi mathvariant="normal">âˆ£</mi><msubsup><mi mathvariant="normal">âˆ£</mi><mi>F</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">L_{reg}=||I-AA^T||^2_F
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£âˆ£</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord">âˆ£</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>æ˜¯é€šè¿‡<code>T-Net</code>å¾—åˆ°çš„<code>64*64</code>å¯¹é½çŸ©é˜µï¼Œåœ¨æœ¬éƒ¨åˆ†ä¸­ï¼Œä½œè€…ç»™å‡ºçš„æŸå¤±å‡½æ•°ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">feature_transform_reguliarzer</span>(<span class="params">trans</span>):</span><br><span class="line">    <span class="comment"># å®šä¹‰æŸå¤±è§„åˆ™</span></span><br><span class="line">    d = trans.size()[<span class="number">1</span>] <span class="comment"># deep</span></span><br><span class="line">    I = torch.eye(d)[<span class="literal">None</span>, :, :] <span class="comment"># [ 1 , deep , deep ]</span></span><br><span class="line">    <span class="keyword">if</span> trans.is_cuda:</span><br><span class="line">        I = I.cuda()</span><br><span class="line">    loss = torch.mean(torch.norm(torch.bmm(trans, trans.transpose(<span class="number">2</span>, <span class="number">1</span>) - I), dim=(<span class="number">1</span>, <span class="number">2</span>)))</span><br><span class="line">    <span class="comment"># è™½ç„¶ä½†æ˜¯...æŒ‰ç…§å…¬å¼å†™åº”è¯¥æ˜¯</span></span><br><span class="line">    <span class="comment">#  loss = torch.mean(torch.norm(torch.bmm(trans, trans.transpose(2, 1))- I, dim=(1, 2)))</span></span><br><span class="line">    <span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure>
<p>è¯è¯´FèŒƒæ•°å°±æ˜¯å¯¹å‘é‡çš„æ‰€æœ‰å…ƒç´ å¹³æ–¹æ±‚å’Œå†å¼€æ–¹ï¼Œæœ¬è´¨ä¸Šæ˜¯å‘é‡æ¨¡çš„åº¦é‡ã€‚å¦‚æœå‘é‡å†…çš„æ•°æ®éƒ½æ˜¯æ— é‡çº²çš„ï¼Œé‚£ä¹ˆå¼€ä¸å¼€æ–¹å½±å“å°±ä¸å¤§äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸‹ç½‘ç»œçš„ç»“æ„ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (<span class="built_in">type</span>)               Output Shape         Param <span class="comment">#</span></span><br><span class="line">================================================================</span><br><span class="line">            Conv1d-<span class="number">1</span>             [-<span class="number">1</span>, <span class="number">64</span>, <span class="number">1000</span>]             <span class="number">256</span></span><br><span class="line">       BatchNorm1d-<span class="number">2</span>             [-<span class="number">1</span>, <span class="number">64</span>, <span class="number">1000</span>]             <span class="number">128</span></span><br><span class="line">            Conv1d-<span class="number">3</span>            [-<span class="number">1</span>, <span class="number">128</span>, <span class="number">1000</span>]           <span class="number">8</span>,<span class="number">320</span></span><br><span class="line">       BatchNorm1d-<span class="number">4</span>            [-<span class="number">1</span>, <span class="number">128</span>, <span class="number">1000</span>]             <span class="number">256</span></span><br><span class="line">            Conv1d-<span class="number">5</span>           [-<span class="number">1</span>, <span class="number">1024</span>, <span class="number">1000</span>]         <span class="number">132</span>,096</span><br><span class="line">       BatchNorm1d-<span class="number">6</span>           [-<span class="number">1</span>, <span class="number">1024</span>, <span class="number">1000</span>]           <span class="number">2</span>,048</span><br><span class="line">            Linear-<span class="number">7</span>                  [-<span class="number">1</span>, <span class="number">512</span>]         <span class="number">524</span>,<span class="number">800</span></span><br><span class="line">       BatchNorm1d-<span class="number">8</span>                  [-<span class="number">1</span>, <span class="number">512</span>]           <span class="number">1</span>,024</span><br><span class="line">            Linear-<span class="number">9</span>                  [-<span class="number">1</span>, <span class="number">256</span>]         <span class="number">131</span>,<span class="number">328</span></span><br><span class="line">      BatchNorm1d-<span class="number">10</span>                  [-<span class="number">1</span>, <span class="number">256</span>]             <span class="number">512</span></span><br><span class="line">           Linear-<span class="number">11</span>                    [-<span class="number">1</span>, <span class="number">9</span>]           <span class="number">2</span>,<span class="number">313</span></span><br><span class="line">            STN3d-<span class="number">12</span>                 [-<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>]               <span class="number">0</span></span><br><span class="line">           Conv1d-<span class="number">13</span>             [-<span class="number">1</span>, <span class="number">64</span>, <span class="number">1000</span>]             <span class="number">256</span></span><br><span class="line">      BatchNorm1d-<span class="number">14</span>             [-<span class="number">1</span>, <span class="number">64</span>, <span class="number">1000</span>]             <span class="number">128</span></span><br><span class="line">           Conv1d-<span class="number">15</span>            [-<span class="number">1</span>, <span class="number">128</span>, <span class="number">1000</span>]           <span class="number">8</span>,<span class="number">320</span></span><br><span class="line">      BatchNorm1d-<span class="number">16</span>            [-<span class="number">1</span>, <span class="number">128</span>, <span class="number">1000</span>]             <span class="number">256</span></span><br><span class="line">           Conv1d-<span class="number">17</span>           [-<span class="number">1</span>, <span class="number">1024</span>, <span class="number">1000</span>]         <span class="number">132</span>,096</span><br><span class="line">      BatchNorm1d-<span class="number">18</span>           [-<span class="number">1</span>, <span class="number">1024</span>, <span class="number">1000</span>]           <span class="number">2</span>,048</span><br><span class="line">================================================================</span><br><span class="line">Total params: <span class="number">946</span>,<span class="number">185</span></span><br><span class="line">Trainable params: <span class="number">946</span>,<span class="number">185</span></span><br><span class="line">Non-trainable params: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): <span class="number">0.01</span></span><br><span class="line">Forward/backward <span class="keyword">pass</span> size (MB): <span class="number">37.12</span></span><br><span class="line">Params size (MB): <span class="number">3.61</span></span><br><span class="line">Estimated Total Size (MB): <span class="number">40.74</span></span><br><span class="line">----------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h4 id="2-2-3-æ•°æ®åŠ è½½">2.2.3  <strong>æ•°æ®åŠ è½½</strong></h4>
<p>è¿™é‡Œæˆ‘ä»¬éšä¾¿æµ‹è¯•ä¸‹æ•°æ®ï¼ŒåŠ è½½å™¨å°±éšä¾¿å†™å†™äº†</p>
<p>æ³¨æ„Modelæ˜¯åˆšåˆšå®šä¹‰çš„æ¨¡å‹æ–‡ä»¶å¤¹ï¼Œpointnetæ˜¯å†™PointNetçš„.pyæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> Model <span class="keyword">import</span> pointnet</span><br><span class="line"><span class="keyword">from</span> torch.nn <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°±å•ç‹¬å–ä¸€ä¸ªç±»è¯•è¯•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path=<span class="string">r&quot;.modelnet40_normal_resampled\car\\&quot;</span></span><br><span class="line">file_list=os.listdir(path)</span><br></pre></td></tr></table></figure>
<p>æ¥ç€å®šä¹‰æ•°æ®è¯»å–æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªæ•°æ®è¯»å–ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PCDataset</span>(Data.Dataset):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,file_list</span>):</span><br><span class="line">        self.file_list=file_list</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(path + file_list[idx]) <span class="keyword">as</span> f:</span><br><span class="line">            data = f.readlines()</span><br><span class="line">        data = [i.split(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>].split(<span class="string">&quot;,&quot;</span>) <span class="keyword">for</span> i <span class="keyword">in</span> data]</span><br><span class="line">        data=np.array(data,dtype=<span class="built_in">float</span>)</span><br><span class="line">        <span class="keyword">return</span> data,<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.file_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å…¥æ•°æ®</span></span><br><span class="line">Dataset=PCDataset(file_list)</span><br><span class="line">train_loader=Data.DataLoader(</span><br><span class="line">    dataset=Dataset,</span><br><span class="line">    shuffle=<span class="literal">True</span>,</span><br><span class="line">    batch_size=<span class="number">9</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç½‘ç»œæ­å»º</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ„å»ºPointNet</span></span><br><span class="line">pn=pointnet.PointNet(<span class="number">3</span>)</span><br><span class="line">criterion=nn.NLLLoss()</span><br><span class="line">optimizer=torch.optim.Adam(pn.parameters(),lr=<span class="number">0.0003</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®€å•æµ‹è¯•ä¸‹</span></span><br><span class="line">loss_list=[]</span><br><span class="line">acc_list=[]</span><br><span class="line"></span><br><span class="line">device=torch.device(<span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>)</span><br><span class="line">pn.to(device)</span><br><span class="line">criterion.to(device)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> step,(bx,by) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">    bx,by=bx.to(device),by.to(device)</span><br><span class="line">    out = pn(bx.to(torch.float32))[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Result&#x27;s Size&quot;</span>, out.shape)</span><br><span class="line">    out = F.softmax(out, dim=<span class="number">1</span>)</span><br><span class="line">    pre_lab = torch.argmax(out, dim=<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;class&quot;</span>, pre_lab)</span><br><span class="line">    <span class="built_in">print</span>(by)</span><br><span class="line">    loss = criterion(out, by)</span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    loss.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line">    loss_list.append(loss.item())</span><br><span class="line">    acc_list.append(accuracy_score(pre_lab,by))</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¯è§†åŒ–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">8</span>))</span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="built_in">len</span>(train_loader)),loss_list,<span class="string">&quot;ro-&quot;</span>,label=<span class="string">&quot;loss&quot;</span>)</span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="built_in">len</span>(train_loader)),acc_list,<span class="string">&quot;bs-&quot;</span>,label=<span class="string">&quot;acc&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet%E7%BD%91%E7%BB%9C/image-20220329152205605.png" alt="image-20220329152205605" style="zoom: 33%;">
<p>æŸå¤±å‡½æ•°å‡ºç°è´Ÿå€¼æ˜¯å› ä¸ºç”¨çš„å‡½æ•°æ˜¯NLLossï¼Œç„¶åå°batchçš„è®­ç»ƒå…¶å®æ²¡å¤šå¤§æ„ä¹‰ï¼Œè¿™é‡Œåªæ˜¯æµ‹è¯•ä¸‹ã€‚</p>
<h3 id="2-3-PointNetç¼ºç‚¹">2.3  PointNetç¼ºç‚¹</h3>
<ul>
<li>PointNetä¸å½“ä¸‹ä¸»æµç½‘ç»œä¸ç¬¦ï¼Œåªæ˜¯åšäº†å…¨å±€ä¿¡æ¯çš„èåˆï¼Œå¹¶æ²¡æœ‰è€ƒè™‘åˆ°å±€éƒ¨çš„è¯­ä¹‰</li>
<li>ç‚¹å¯¹ä¹‹é—´çš„ç‰¹å¾å…³ç³»å¹¶æ²¡æœ‰è€ƒè™‘</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ç‚¹äº‘ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PointNet++ç½‘ç»œ]]></title>
      <url>/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet-%E7%BD%91%E7%BB%9C/</url>
      <content type="html"><![CDATA[<h1>PointNet++ç½‘ç»œè¯¦è§£</h1>
<hr>
<h2 id="ä¸€ã€PointNet-æ”¹è¿›æ€æƒ³">ä¸€ã€PointNet++æ”¹è¿›æ€æƒ³</h2>
<p>å…³äºPointNetå¯ä»¥å‚è€ƒå‰ä¸€ç¯‡<a href="https://blog.csdn.net/qq_45957458/article/details/123822694?spm=1001.2014.3001.5502">æ–‡æ¡£</a>ã€‚</p>
<p>å‰æ–‡ä¸­å·²ç»æåˆ°ï¼ŒPointNetå¹¶æ²¡æœ‰åšå±€éƒ¨ç‰¹å¾æå–ï¼Œè€Œæ˜¯é€šè¿‡æœ€å¤§æ± åŒ–å±‚è·å–å…¨å±€çš„ä¿¡æ¯ã€‚è¿™ä¸å½“å‰ä¸»æµçš„ç½‘ç»œä¸ç¬¦ã€‚åœ¨CNNä¸­ï¼Œæœ‰ç€æ„Ÿå—é‡çš„æ¦‚å¿µï¼Œé€šè¿‡ä¸æ–­å·ç§¯è·å¾—çš„é«˜ç»´ç‰¹å¾ç‚¹å¯¹åº”ç€ä½å±‚çš„ä¸€ä¸ªåŒºåŸŸã€‚è€Œåœ¨PointNetä¸­ï¼Œåˆ™æ²¡æœ‰è¿™ç§å±€éƒ¨ç‰¹å¾èåˆçš„æœºåˆ¶ã€‚</p>
<p>é’ˆå¯¹PointNetçš„ä¸è¶³ï¼ŒPointNet++åº”è¿è€Œç”Ÿã€‚</p>
<p>PointNet++ç›¸è¾ƒäºPointNetï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ”¹è¿›é¡¹ï¼š</p>
<ul>
<li>é’ˆå¯¹ç‚¹äº‘å›¾ç‚¹å¯¹æ•°é‡çš„ä¸è§„åˆ™ï¼Œé‡‡ç”¨<strong>æœ€è¿œç‚¹é‡‡æ ·</strong>é€‰å–å…¶ä¸­çš„<code>N</code>ä¸ªç‚¹ï¼Œæ—¢èƒ½ä¿è¯æ¯ä¸ªæ•°æ®èƒ½å¤Ÿæœ‰ç›¸åŒçš„å½¢çŠ¶ï¼Œä¹Ÿèƒ½è®©å…¶å°½å¯èƒ½ä¿ç•™å¤šçš„ä¿¡æ¯é‡ã€‚</li>
<li>é€šè¿‡æ„å»ºçƒå½¢æœç´¢åŒºåŸŸï¼Œè·å–å­åŒºåŸŸçš„ç‚¹å¯¹ï¼Œå®ç°å±€éƒ¨ç‰¹å¾æå–</li>
<li>æå–å¤šå°ºåº¦ç‰¹å¾ï¼Œå¯¹ä¸åŒå­åŒºåŸŸçš„ç‰¹å¾è¿›è¡Œæå–ä¸èšåˆã€‚</li>
<li>æå‡ºåŸºäºè·ç¦»å·®å€¼çš„åˆ†å±‚ç‰¹å¾ä¼ æ’­ç®—æ³•ï¼Œå°†å±€éƒ¨ç‰¹å¾ä¸Šé‡‡æ ·ä¼ æ’­ç»™åœ¨ç‰¹å¾èåˆè¿‡ç¨‹ä¸­ä¸¢å¤±çš„ç‚¹ä¸­ã€‚</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬é’ˆå¯¹è¿™äº›æ”¹è¿›é¡¹è¿›è¡Œä¸€äº›æ¯”è¾ƒç»†è‡´çš„åˆ†æã€‚</p>
<p>æ³¨ï¼š<strong>B</strong>è¡¨ç¤ºbatchï¼›<strong>N</strong>è¡¨ç¤ºnumï¼›<strong>C</strong>å’Œ<strong>D</strong>éƒ½è¡¨ç¤ºç‰¹å¾ç»´åº¦(Cæ˜¯xyz)ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet-%E7%BD%91%E7%BB%9C/image-20220401131840067.png" alt="image-20220401131840067" style="zoom: 33%;">
<hr>
<h2 id="äºŒã€æœ€è¿œç‚¹é‡‡æ ·FPSç®—æ³•">äºŒã€æœ€è¿œç‚¹é‡‡æ ·FPSç®—æ³•</h2>
<p>æœ€è¿œç‚¹é‡‡æ ·èƒ½å¤Ÿå¯¹å…¨å±€ç‚¹è¿›è¡Œé‡‡æ ·ï¼Œåœ¨ä¿è¯æ¯ä¸ªç‚¹äº‘æ•°æ®å…·æœ‰ç›¸åŒçš„ç‚¹æ•°é‡çš„åŒæ—¶ï¼Œå°½å¯èƒ½ä¿ç•™æ›´å¤šçš„ä¿¡æ¯é‡ã€‚</p>
<p>å…¶ä¸­çš„<strong>è¾“å…¥</strong>ä¸ºï¼š</p>
<ul>
<li>xyz: ç‚¹äº‘åæ ‡æ•°æ®ï¼Œshapeä¸º [B,N,3]</li>
<li>npoint: éœ€è¦æå–çš„ç‚¹äº‘æ•°é‡</li>
</ul>
<p><strong>è¾“å‡º</strong>ä¸ºï¼š</p>
<ul>
<li>centroid: ç‚¹äº‘ä¸­å¿ƒç‚¹<strong>ç´¢å¼•</strong>ï¼Œshapeä¸º [B,npoint]</li>
</ul>
<p>FPS(Farthest Point Sample)çš„æ ¸å¿ƒæ€æƒ³å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¯¹è¾“å…¥çš„æ¯ä¸€æ‰¹ç‚¹äº‘åˆ†åˆ«<strong>æ„å»ºç°‡ä¸­å¿ƒ</strong></li>
<li>æ„å»º<strong>è·ç¦»çŸ©é˜µ</strong>ï¼Œç”¨äºæ¯æ¬¡æœ€è¿œè·è¿­ä»£</li>
<li>åœ¨ç‚¹äº‘ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç‚¹ä½œä¸ºç°‡åˆå§‹ç‚¹</li>
<li>é€‰æ‹©ä¸è¯¥ç°‡è·ç¦»æœ€è¿œçš„ç‚¹ï¼ŒåŠ å…¥ç°‡ï¼Œå¹¶å°†è¯¥ç‚¹ä½œä¸ºä¸‹ä¸€æ¬¡è¿­ä»£çš„ç‚¹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">farthest_point_sample</span>(<span class="params">xyz,npoint</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Input:</span></span><br><span class="line"><span class="string">        xyz: pointcloud data, [B, N, 3]</span></span><br><span class="line"><span class="string">        npoint: number of samples</span></span><br><span class="line"><span class="string">    Return:</span></span><br><span class="line"><span class="string">        centroids: sampled pointcloud index, [B, npoint]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    device = xyz.device</span><br><span class="line">    B, N, C = xyz.shape</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºä¸­å¿ƒç°‡ ï¼Œ å¤§å°ä¸º: [ batch , npoint ]</span></span><br><span class="line">    centroids=torch.zeros(B,npoint,dtype=torch.long).to(device)</span><br><span class="line">    <span class="comment"># æ„å»ºè·ç¦»çŸ©é˜µ</span></span><br><span class="line">    distance=torch.ones(B,N).to(device)*<span class="number">1e10</span></span><br><span class="line">    <span class="comment"># å¯¹batchç»†åˆ†</span></span><br><span class="line">    batch_indices=torch.arange(B,dtype=torch.long).to(device)</span><br><span class="line">    <span class="comment"># æœ€è¿œç‚¹åˆå§‹åŒ– éšæœºé€‰æ‹©ä¸€ä¸ªç‚¹</span></span><br><span class="line">    farthest=torch.randint(<span class="number">0</span>,N,(B,),dtype=torch.long).to(device)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(npoint):</span><br><span class="line">        centroids[:,i]=farthest</span><br><span class="line">        <span class="comment"># è·å–å½“å‰é‡‡æ ·ç‚¹åæ ‡å€¼</span></span><br><span class="line">        centroid=xyz[batch_indices,farthest,:].view(B,<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">        <span class="comment"># è®¡ç®—å½“å‰ç‚¹ä¸å…¶ä»–ç‚¹çš„è·ç¦»</span></span><br><span class="line">        dist=torch.<span class="built_in">sum</span>((xyz-centroid)**<span class="number">2</span>,-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è·å–æ»¡è¶³æ¡ä»¶çš„é€»è¾‘çŸ©é˜µ</span></span><br><span class="line">        mask=dist&lt;distance</span><br><span class="line">        <span class="comment"># é€‰æ‹©è·ç¦»æœ€è¿‘çš„ç‚¹æ¥æ›´æ–°è·ç¦»</span></span><br><span class="line">        distance[mask]=dist[mask]</span><br><span class="line">        farthest=torch.<span class="built_in">max</span>(distance,-<span class="number">1</span>)[<span class="number">1</span>] <span class="comment"># è·å¾—æœ€è¿œç‚¹çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">return</span> centroid</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å…³äºè·ç¦»æ›´æ–°ç®—æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æ»¡è¶³æ¡ä»¶çš„é€»è¾‘çŸ©é˜µ</span></span><br><span class="line">mask=dist&lt;distance</span><br><span class="line"><span class="comment"># é€‰æ‹©è·ç¦»æœ€è¿‘çš„ç‚¹æ¥æ›´æ–°è·ç¦»</span></span><br><span class="line">distance[mask]=dist[mask]</span><br><span class="line">farthest=torch.<span class="built_in">max</span>(distance,-<span class="number">1</span>)[<span class="number">1</span>] <span class="comment"># è·å¾—æœ€è¿œç‚¹çš„ç´¢å¼•</span></span><br></pre></td></tr></table></figure>
<p>åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†<code>distance</code>åˆå§‹åŒ–ä¸º<code>1e10</code>ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€æ¬¡æ›´æ–°æ—¶ï¼Œå°±ä¼šå°†æ‰€æœ‰ç‚¹è·ç¦»è¿›è¡Œæ›´æ–°ã€‚</p>
<p>ä¸”è®¡ç®—æ˜¯ä¼šå°†è‡ªèº«è®¡ç®—è¿›å»çš„(è‡ªå·±åˆ°è‡ªå·±çš„è·ç¦»æ˜¯0)ï¼Œæ‰€ä»¥æ¯æ›´æ–°ä¸€æ¬¡çŸ©é˜µï¼Œéƒ½æœ‰ä¸€ä¸ªç‚¹çš„è·ç¦»è¢«æ›´æ–°ä¸º0ã€‚</p>
<p><code>distance</code>åœ¨è¿™é‡Œçš„ä½œç”¨ï¼Œå°±ç›¸å½“äºä¸€ä¸ªè®°å½•è¡¨ï¼Œç”¨æ¥è®°å½•æ¯æ¬¡çš„çŠ¶æ€å˜åŒ–ã€‚è¿™æ ·ï¼Œæ¯æœ‰ä¸€ä¸ªç‚¹è¢«åŠ å…¥ï¼Œå°±æœ‰æœ‰ä¸€ä¸ª0å€¼è¢«å¯»å¾—ï¼Œè¯´æ˜è¯¥ç‚¹å·²ç»è¢«ä½¿ç”¨ï¼Œä¸å†å‚ä¸æ›´æ–°ã€‚</p>
<hr>
<h2 id="ä¸‰ã€å±€éƒ¨ç‰¹å¾æå–ç®—æ³•">ä¸‰ã€å±€éƒ¨ç‰¹å¾æå–ç®—æ³•</h2>
<p>åœ¨CNNä¸­çš„å±€éƒ¨ç‰¹å¾ä¸€èˆ¬æ˜¯é€šè¿‡ä¸åŒå¤§å°çš„å·ç§¯æ ¸ç‚¹ä¹˜å¾—åˆ°çš„ï¼Œè€Œåœ¨PointNet++ä¸­ï¼Œä½œè€…ä¹Ÿé‡‡ç”¨äº†è¿™ç±»çš„æ€æƒ³ï¼Œç”¨æ¥æå–å­åŒºåŸŸã€‚</p>
<p>å…¶æ ¸å¿ƒæ€æƒ³ä¸ºï¼š</p>
<ul>
<li>é¢„è®¾ä¸€ä¸ª<strong>æœç´¢åŠå¾„</strong><code>radius</code>å’Œ<strong>å­åŒºåŸŸ</strong>çš„ç‚¹æ•°é‡<code>k</code></li>
<li>åœ¨æœ€è¿œç‚¹é‡‡æ ·ä¸­è·å–çš„ç°‡ä¸­å¿ƒ<strong>æ„é€ çƒä½“</strong>ï¼ŒåŠå¾„ç­‰äºæœç´¢åŠå¾„</li>
<li>è®¡ç®—æ¯ä¸ªç‚¹ç¦»ä¸­å¿ƒç°‡çš„è·ç¦»ï¼Œè‹¥è¯¥ç‚¹<strong>è½åœ¨çƒä½“å†…</strong>ï¼Œåˆ™å°†å…¶åŠ å…¥åˆ°ç°‡ä¸­</li>
<li>è‹¥çƒä½“å†…çš„ç‚¹å°äºå­åŒºåŸŸç‚¹æ•°é‡<code>k</code>ï¼Œåˆ™å¤åˆ¶æœ€è¿‘çš„ç‚¹ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶ï¼Œè‹¥å¤§äºï¼Œåˆ™é€‰å–å‰<code>k</code>ä¸ªç‚¹ã€‚</li>
<li>ç°åœ¨æ¯ä¸ªä¸­å¿ƒéƒ½æœ‰<code>k</code>ä¸ªç‚¹äº†ï¼Œç±»ä¼¼äºCNNçš„<code>k*k</code>å­åŒºåŸŸ</li>
</ul>
<p><strong>è¾“å…¥</strong>ä¸ºï¼š</p>
<ul>
<li>radius: æœç´¢åŠå¾„</li>
<li>nsample: é‡‡æ ·ç‚¹æ•°é‡</li>
<li>xyz: æ‰€æœ‰ç‚¹çš„ä½ç½®ä¿¡æ¯</li>
<li>new_xyz: ç°‡ä¸­å¿ƒ</li>
</ul>
<p><strong>è¾“å‡º</strong>ä¸ºï¼š</p>
<ul>
<li>ä¸€ç»„ç°‡ç‚¹çš„ç´¢å¼•ï¼Œshapeä¸º [B,S,nsample]</li>
</ul>
<p>å¦‚ä½•å»è·å–å„ç‚¹çš„è·ç¦»å‘¢ï¼Ÿè¿™é‡Œé‡‡ç”¨äº†å¦‚ä¸‹ç®—æ³•ï¼š</p>
<p>å¯¹äºè¾“å…¥<code>src</code>,shapeä¸º[B,N,3]ï¼›å¯¹äºè¾“å…¥<code>dst</code>,shapeä¸º[B,S,3]</p>
<p>è·ç¦»å…¬å¼è¡¨ç¤ºä¸ºï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo>âˆ’</mo><msub><mi>x</mi><mi>m</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo>âˆ’</mo><msub><mi>y</mi><mi>m</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>z</mi><mi>n</mi></msub><mo>âˆ’</mo><msub><mi>z</mi><mi>m</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mspace linebreak="newline"></mspace><mo>=</mo><msubsup><mi>x</mi><mi>n</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>x</mi><mi>m</mi><mn>2</mn></msubsup><mo>âˆ’</mo><mn>2</mn><msub><mi>x</mi><mi>n</mi></msub><msub><mi>x</mi><mi>m</mi></msub><mo>+</mo><msubsup><mi>y</mi><mi>n</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>y</mi><mi>m</mi><mn>2</mn></msubsup><mo>âˆ’</mo><mn>2</mn><msub><mi>y</mi><mi>n</mi></msub><msub><mi>y</mi><mi>m</mi></msub><mo>+</mo><mspace linebreak="newline"></mspace><msubsup><mi>z</mi><mi>n</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>z</mi><mi>m</mi><mn>2</mn></msubsup><mo>âˆ’</mo><mn>2</mn><msub><mi>z</mi><mi>n</mi></msub><msub><mi>z</mi><mi>m</mi></msub><mspace linebreak="newline"></mspace><mo>=</mo><mi>s</mi><mi>r</mi><msup><mi>c</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><mi>s</mi><msup><mi>t</mi><mn>2</mn></msup><mo>âˆ’</mo><mo stretchy="false">(</mo><mi>s</mi><mi>r</mi><msup><mi>c</mi><mi>T</mi></msup><mo>âˆ—</mo><mi>d</mi><mi>s</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">dis=(x_n-x_m)^2+(y_n-y_m)^2+(z_n-z_m)^2
\\=x_n^2+x_m^2-2x_nx_m+y_n^2+y_m^2-2y_ny_m+\\
z_n^2+z_m^2-2z_nz_m
\\
=src^2+dst^2-(src^T*dst)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7944em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7944em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">sr</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">s</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">sr</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">square_distance</span>(<span class="params">src,dst</span>):</span><br><span class="line">    <span class="comment"># è®¡ç®—å„ç‚¹é—´çš„è·ç¦»</span></span><br><span class="line">    B,N,_=src.shape</span><br><span class="line">    _,M,_=dst.shape</span><br><span class="line">    <span class="comment"># shape: [B,N,M]</span></span><br><span class="line">    dist=-<span class="number">2</span>*torch.matmul(src,dst.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>))</span><br><span class="line">    <span class="comment"># shape: [B,N,M]+[B,N,1]</span></span><br><span class="line">    dist+=torch.<span class="built_in">sum</span>(src**<span class="number">2</span>,-<span class="number">1</span>).view(B,N,<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># shape: [B,N,M]+[B,1,M]</span></span><br><span class="line">    dist+=torch.<span class="built_in">sum</span>(dst**<span class="number">2</span>,-<span class="number">1</span>).view(B,<span class="number">1</span>,M)</span><br><span class="line">    <span class="keyword">return</span> dist</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨è®¡ç®—ä¸­ï¼Œéœ€è¦å…ˆæ„å»ºä¸€ä¸ªç´¢å¼•ç»„ã€‚æ ¹æ®è®¡ç®—å¾—åˆ°çš„è·ç¦»å¼ é‡ï¼Œå°†è¶…è¿‡æœç´¢åŠå¾„çš„è·ç¦»ç‚¹ç´¢å¼•è®¾ç½®ä¸º<strong>æœ€å¤§å€¼</strong>ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†<strong>å®é™…</strong>è½åœ¨åœ†å†…çš„ç‚¹ã€‚</p>
<p>æ¥ç€å†åšå‡åºæ’åºï¼Œé€‰å–æˆ‘ä»¬éœ€è¦çš„<code>nsample</code>ä¸ªç‚¹ã€‚å½“ç„¶ï¼Œä¼šå‡ºç°ç‚¹æ•°ä¸è¶³çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬å¤åˆ¶æœ€è¿‘çš„ç‚¹ï¼Œå–æœ€å¤§å€¼çš„ä½ç½®åšæ©è†œ<code>mask=group_idx==N</code>ï¼Œå°†æ©è†œä½ç½®ä¿®æ­£ä¸ºç¬¬ä¸€ä¸ªç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">query_ball_point</span>(<span class="params">radius,nsample,xyz,new_xyz</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Input:</span></span><br><span class="line"><span class="string">        radius: local region radius</span></span><br><span class="line"><span class="string">        nsample: max sample number in local region</span></span><br><span class="line"><span class="string">        xyz: all points, [B, N, 3]</span></span><br><span class="line"><span class="string">        new_xyz: query points, [B, S, 3]</span></span><br><span class="line"><span class="string">    Return:</span></span><br><span class="line"><span class="string">        group_idx: grouped points index, [B, S, nsample]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    device=xyz.device</span><br><span class="line">    B,N,C=xyz.shape</span><br><span class="line">    _,S,_=new_xyz.shape</span><br><span class="line">    group_idx=torch.<span class="built_in">range</span>(N,dtype=torch.long).to(device).view(<span class="number">1</span>,<span class="number">1</span>,N).repeat([B,S,<span class="number">1</span>])</span><br><span class="line">    <span class="comment"># å¾—åˆ°ä¸€ç»„[ B , S , N ] çš„æ•°æ®ï¼Œå³new_xyzä¸xyzä¸­æ¯ä¸ªç‚¹çš„è·ç¦»</span></span><br><span class="line">    sqrdists=square_distance(new_xyz,xyz)</span><br><span class="line">    <span class="comment"># (x1-x2)**2+(y1-y2)**2+(z1-z2)**2&gt;r**2</span></span><br><span class="line">    <span class="comment"># è¿™éƒ¨åˆ†ç‚¹å·²ç»è¶…è¿‡äº†æœç´¢åŠå¾„äº†ï¼Œæ‰€ä»¥ä»¤å…¶ç´¢å¼•ç­‰äºæœ€å¤§å€¼N(ä¹‹å‰æœ‰æ•ˆçš„æœ€å¤§å€¼æ˜¯N-1)</span></span><br><span class="line">    group_idx[sqrdists&gt;radius**<span class="number">2</span>]=N</span><br><span class="line">    <span class="comment"># tensor.sortä¼šè¿”å›ä¸€ä¸ªvalueå’Œä¸€ä¸ªindex</span></span><br><span class="line">    <span class="comment"># åšäº†ä¸ªå‡åºæ’åºï¼Œnsampleå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç°‡é—´ç‚¹</span></span><br><span class="line">    group_idx=group_idx.sort(dim=-<span class="number">1</span>)[<span class="number">0</span>][...,:nsample]</span><br><span class="line">    <span class="comment"># é’ˆå¯¹åŠå¾„ç‚¹ä¸è¶³çš„æƒ…å†µï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªç‚¹è¿›è¡Œæ›¿ä»£</span></span><br><span class="line">    <span class="comment"># shape: [B,S,nsample]</span></span><br><span class="line">    group_first=group_idx[...,<span class="number">0</span>].view(B,S,<span class="number">1</span>).repeat([<span class="number">1</span>,<span class="number">1</span>,nsample])</span><br><span class="line">    mask=group_idx==N</span><br><span class="line">    group_idx=group_first[mask]</span><br><span class="line">    <span class="comment"># [B,S,nsample]</span></span><br><span class="line">    <span class="keyword">return</span> group_idx</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å››ã€é‡‡æ ·æ‰“ç»„">å››ã€é‡‡æ ·æ‰“ç»„</h2>
<p>åœ¨åŸæ–‡ä¸­ï¼ŒäºŒå’Œä¸‰è¢«å®šä¹‰ä¸ºSampling layerå’ŒGrouping layerï¼Œå¼ é‡ç»´åº¦çš„å˜æ¢å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># input</span></span><br><span class="line">shape: [B,N,d+C]</span><br><span class="line">-----&gt;</span><br><span class="line"><span class="comment"># sampling layer</span></span><br><span class="line">shape: [B,S,d+C]</span><br><span class="line">-----&gt;</span><br><span class="line"><span class="comment"># grouping layer</span></span><br><span class="line">shape: [B,S,K,d+C]</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">B: batch</span></span><br><span class="line"><span class="string">N: ç‚¹äº‘æ€»æ•°</span></span><br><span class="line"><span class="string">S: é‡‡æ ·ç°‡æ•°é‡</span></span><br><span class="line"><span class="string">K: ç°‡ä¸­ç‚¹äº‘æ•°é‡</span></span><br><span class="line"><span class="string">d: ä½ç½®ä¿¡æ¯xyz</span></span><br><span class="line"><span class="string">C: ç‰¹å¾</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºä»ç´¢å¼•ä¸­è·å–ç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">index_points</span>(<span class="params">points,idx</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Input:</span></span><br><span class="line"><span class="string">        points: input points data, [B, N, C]</span></span><br><span class="line"><span class="string">        idx: sample index data, [B, S]</span></span><br><span class="line"><span class="string">    Return:</span></span><br><span class="line"><span class="string">        new_points:, indexed points data, [B, S, C]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    device = points.device</span><br><span class="line">    B = points.shape[<span class="number">0</span>]</span><br><span class="line">    view_shape = <span class="built_in">list</span>(idx.shape)</span><br><span class="line">    <span class="comment"># [ B , 1 ]</span></span><br><span class="line">    view_shape[<span class="number">1</span>:] = [<span class="number">1</span>] * (<span class="built_in">len</span>(view_shape) - <span class="number">1</span>)</span><br><span class="line">    repeat_shape = <span class="built_in">list</span>(idx.shape)</span><br><span class="line">    <span class="comment"># [ 1 , S ]</span></span><br><span class="line">    repeat_shape[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="comment"># [ B , S ]</span></span><br><span class="line">    batch_indices = torch.arange(B, dtype=torch.long).to(device).view(view_shape).repeat(repeat_shape)</span><br><span class="line">    <span class="comment"># row: batch_indices</span></span><br><span class="line">    <span class="comment"># col: idx</span></span><br><span class="line">    new_points = points[batch_indices, idx, :]</span><br><span class="line">    <span class="keyword">return</span> new_points</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…³äºtensorç´¢å¼•ä¸ºä¸€ä¸ªçŸ©é˜µçš„æƒ…å†µã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># row</span></span><br><span class="line">b=[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line"><span class="comment"># col</span></span><br><span class="line">i=[[<span class="number">4</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># poi</span></span><br><span class="line">points=torch.arange(<span class="number">25</span>).view(<span class="number">5</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">points:</span></span><br><span class="line"><span class="string">tensor([[ 0,  1,  2,  3,  4],</span></span><br><span class="line"><span class="string">        [ 5,  6,  7,  8,  9],</span></span><br><span class="line"><span class="string">        [10, 11, 12, 13, 14],</span></span><br><span class="line"><span class="string">        [15, 16, 17, 18, 19],</span></span><br><span class="line"><span class="string">        [20, 21, 22, 23, 24]])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">points[b,i]</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">tensor([[ 9, 13],</span></span><br><span class="line"><span class="string">        [17, 21]])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯å¯¹bå’Œiåšç»„åˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®é™…å–å¾—çš„ç‚¹å¯¹ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[[points[<span class="number">1</span>,<span class="number">4</span>], <span class="comment"># 9</span></span><br><span class="line">points[<span class="number">2</span>,<span class="number">3</span>]] <span class="comment"># 13</span></span><br><span class="line">[points[<span class="number">3</span>,<span class="number">2</span>], <span class="comment"># 17</span></span><br><span class="line">points[<span class="number">4</span>,<span class="number">1</span>]]] <span class="comment"># 21</span></span><br></pre></td></tr></table></figure>
<p>å®ç°çš„ç®—æ³•ä¸ºï¼š</p>
<p><strong>è¾“å…¥</strong>:</p>
<ul>
<li>npoint: ç°‡ä¸­å¿ƒæ•°é‡</li>
<li>radius: æœç´¢åŠå¾„</li>
<li>nsample: ç°‡å†…ç‚¹æ•°é‡</li>
<li>xyz: ä½ç½®ä¿¡æ¯</li>
<li>points: å…¨å±€ç‚¹ï¼Œä¸»è¦æ˜¯æœ‰å…¶ä»–ç»´åº¦æ—¶ä½¿ç”¨</li>
<li>returnfps: æ˜¯å¦è¿”å›æœ€è¿‘ç‚¹ä¿¡æ¯</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sample_and_group</span>(<span class="params">npoint, radius, nsample, xyz, points, returnfps=<span class="literal">False</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Input:</span></span><br><span class="line"><span class="string">        npoint: the number of points</span></span><br><span class="line"><span class="string">        radius: search radius</span></span><br><span class="line"><span class="string">        nsample: the number of points which in cluster</span></span><br><span class="line"><span class="string">        xyz: input points position data, [B, N, 3]</span></span><br><span class="line"><span class="string">        points: input points data, [B, N, D]</span></span><br><span class="line"><span class="string">    Return:</span></span><br><span class="line"><span class="string">        new_xyz: sampled points position data, [B, npoint, nsample, 3]</span></span><br><span class="line"><span class="string">        new_points: sampled points data, [B, npoint, nsample, 3+D]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    B,N,C=xyz.shape</span><br><span class="line">    S=npoint</span><br><span class="line">   </span><br><span class="line">    <span class="comment"># sampling layer</span></span><br><span class="line">    <span class="comment"># æ•°æ®çš„å½¢çŠ¶ä¸º: [ B , npoint , C ]</span></span><br><span class="line">    fps_idx=farthest_point_sample(xyz,npoint)</span><br><span class="line">    torch.cuda.empty_cache() <span class="comment"># æ¸…ç©ºæ˜¾å­˜</span></span><br><span class="line">    <span class="comment"># è·å–å½“å‰ç‚¹å¯¹</span></span><br><span class="line">    new_xyz=index_points(xyz,fps_idx)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># groupling layer</span></span><br><span class="line">    <span class="comment"># [ B , npoint , nsample ]</span></span><br><span class="line">    idx=query_ball_point(radius,nsample,xyz,new_xyz)</span><br><span class="line">    torch.cuda.empty_cache() <span class="comment"># æ¸…ç©ºæ˜¾å­˜</span></span><br><span class="line">    <span class="comment"># [ B , npoint , nsample , C]</span></span><br><span class="line">    grouped_xyz=index_points(xyz,idx)</span><br><span class="line">    torch.cuda.empty_cache() <span class="comment"># æ¸…ç©ºæ˜¾å­˜</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä¸­å¿ƒåŒ–</span></span><br><span class="line">    <span class="comment"># ä¸»è¦æ˜¯å‡å»ä¸­å¿ƒç‚¹çš„åæ ‡</span></span><br><span class="line">    grouped_xyz_norm=grouped_xyz-new_xyz.view(B,S,<span class="number">1</span>,C)</span><br><span class="line">    torch.cuda.empty_cache() <span class="comment"># æ¸…ç©ºæ˜¾å­˜</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¶ä»–ç»´åº¦ç‰¹å¾èåˆ</span></span><br><span class="line">    <span class="keyword">if</span> points <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        grouped_points=index_points(points,idx)</span><br><span class="line">        new_points=torch.cat([grouped_xyz_norm,grouped_points],dim=-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        new_points=grouped_xyz_norm</span><br><span class="line">    <span class="keyword">if</span> returnfps:</span><br><span class="line">        <span class="keyword">return</span> new_xyz,new_points,grouped_xyz,fps_idx</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> new_xyz,new_points</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äº”ã€å±€éƒ¨ç‰¹å¾æå–">äº”ã€å±€éƒ¨ç‰¹å¾æå–</h2>
<p>PointNet++çš„å±€éƒ¨ç‰¹å¾æå–ä¸PointNetç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡ä¸€ä¸ª<code>max pool</code>æ¥å®ç°çš„ã€‚ä¸CNNä¸åŒï¼ŒCNNæ˜¯åœ¨åšå·ç§¯åŠ æƒæ±‚å’Œï¼Œè€ŒPointNet++åˆ™æ˜¯é€šè¿‡æœ€å¤§æ± åŒ–æ¥å®Œæˆã€‚åœ¨ç½‘ç»œä¸­ï¼Œä½œè€…ä½¿ç”¨äº†<code>sampling layer</code>+<code>grouping layer</code>+<code>pointnet</code>æ¥å®Œæˆæ•´ä¸ªæµç¨‹ã€‚å¹¶å°†è¯¥è¿‡ç¨‹ç§°ä½œ<code>set abstraction</code>ã€‚SAé‡‡æ ·èƒ½å¾—åˆ°ä¸€ä¸ªèåˆäº†å±€éƒ¨ç‰¹å¾çš„å…¨å±€ç‰¹å¾ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet-%E7%BD%91%E7%BB%9C/image-20220401132016315.png" alt="image-20220401132016315" style="zoom:50%;">
<p><strong>è¾“å…¥</strong>ï¼š</p>
<ul>
<li>xyz: <code>N</code>ä¸ªç‚¹çš„ä½ç½®
<ul>
<li>ç±»ä¼¼äºCNNçš„å·ç§¯ï¼Œå¤šæ¬¡SAæ“ä½œåè¾“å…¥çš„<code>N</code>ä¼šå˜æˆ<code>npoint</code></li>
</ul>
</li>
<li>points: å…¨éƒ¨çš„æ•°æ®</li>
</ul>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<ul>
<li>new_xyz: å¯¹åŸå§‹æ•°æ®è¿›è¡Œé‡‡æ ·åï¼Œèåˆäº†å±€éƒ¨ç‰¹å¾çš„æ–°çš„xyzã€‚shape: [B , C , npoint]</li>
<li>new_points: shape: [B , C+N , npoint]</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PointNetSetAbstraction</span>(nn.Module):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,npoint,radius,nsample,in_channel,mlp,group_all</span>):</span><br><span class="line">        <span class="built_in">super</span>(PointNetSetAbstraction, self).__init__()</span><br><span class="line">        self.npoint=npoint</span><br><span class="line">        self.radius=radius</span><br><span class="line">        self.nsample=nsample</span><br><span class="line">        self.mlp_convs=nn.ModuleList()</span><br><span class="line">        self.mlp_bns=nn.ModuleList()</span><br><span class="line">        last_channel=in_channel</span><br><span class="line">        <span class="keyword">for</span> out_channel <span class="keyword">in</span> mlp:</span><br><span class="line"></span><br><span class="line">            self.mlp_convs.append(nn.Conv2d(last_channel,out_channel,<span class="number">1</span>))</span><br><span class="line">            self.mlp_bns.append(nn.BatchNorm2d(out_channel))</span><br><span class="line">            last_channel=out_channel</span><br><span class="line">        self.group_all=group_all</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,xyz,points</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">              Input:</span></span><br><span class="line"><span class="string">                  xyz: input points position data, [B, C, N]</span></span><br><span class="line"><span class="string">                  points: input points data, [B, D, N]</span></span><br><span class="line"><span class="string">              Return:</span></span><br><span class="line"><span class="string">                  new_xyz: sampled points position data, [B, C, S]</span></span><br><span class="line"><span class="string">                  new_points_concat: sample points feature data, [B, D&#x27;, S]</span></span><br><span class="line"><span class="string">              &quot;&quot;&quot;</span></span><br><span class="line">        xyz = xyz.permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> points <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            points = points.permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.group_all:</span><br><span class="line">            new_xyz,new_points=sample_and_group_all(xyz,points)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">		 new_xyz,new_points=sample_and_group(self.npoint,self.radius,self.nsample,xyz,points)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># new_xyz: å¸¦æœ‰ä½ç½®çš„é‡‡æ ·ç‚¹æ•°æ®ï¼Œå½¢çŠ¶ä¸ºï¼š [ B , npoint ,C ]</span></span><br><span class="line">        <span class="comment"># new_points: é‡‡æ ·ç‚¹æ•°æ®(èšç±»åçš„) [ B , npoint, nsample ,C+D ]</span></span><br><span class="line">        new_points=new_points.permute(<span class="number">0</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment"># [ B , C+D , nsample , npoint ]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿™æ­¥æ˜¯ä¸€ä¸ªPointNet</span></span><br><span class="line">        <span class="keyword">for</span> i,conv <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.mlp_convs):</span><br><span class="line">            bn=self.mlp_bns[i]</span><br><span class="line">            new_points=F.relu(bn(conv(new_points)))</span><br><span class="line">        </span><br><span class="line">        new_points=torch.<span class="built_in">max</span>(new_points,<span class="number">2</span>)[<span class="number">0</span>] <span class="comment"># [ B , C+D , npoint]</span></span><br><span class="line">       </span><br><span class="line">        new_xyz=new_xyz.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> new_xyz,new_points</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å…­ã€ç‚¹äº‘ä¸å‡åŒ€åŒºåŸŸèåˆ">å…­ã€ç‚¹äº‘ä¸å‡åŒ€åŒºåŸŸèåˆ</h2>
<p>ä½œè€…åœ¨åŸæ–‡ä¸­æåˆ°ï¼š</p>
<p><strong>Features learned in dense data</strong> <strong>may not generalize to sparsely sampled regions</strong>.</p>
<p>å¯†é›†åŒºç‰¹å¾ä¸ç¨€ç–åŒºç‰¹å¾å¯èƒ½ä¼šå‡ºç°ä¸é€‚é…ï¼Œè¿™æ˜¯å› ä¸ºé‡‡æ ·æ—¶åœ¨ç¨€ç–åŒºåŸŸé‡‡ç”¨äº†æœ€è¿‘ç‚¹è¡¥å…¨çš„æ–¹æ³•ï¼Œä¸”å—äºå°ºåº¦çš„å½±åƒï¼Œåœ¨ç¨€ç–åŒºçš„ç‚¹å¾€å¾€åˆ†å¸ƒçš„å¾ˆå¼€ï¼Œå¯†é›†åŒºåˆ™ç›¸å¯¹é›†ä¸­ï¼Œè¿™ä¹Ÿä¼šå¯¹ç»“æœé€ æˆè¾ƒå¤§çš„å½±åƒã€‚</p>
<p>ä½œè€…æå‡ºäº†ä¸¤ç§ç‰¹å¾èåˆçš„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯<code>Multi-scale grouping</code>(MSG å¤šå°ºåº¦ç»„åˆ)ï¼Œ<code>Multiresolution grouping</code>(MRG å¤šåˆ†è¾¨ç‡ç»„åˆ)ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet-%E7%BD%91%E7%BB%9C/image-20220401131928359.png" alt="image-20220401131928359" style="zoom:50%;">
<p>å…³äºå°ºåº¦å’Œåˆ†è¾¨ç‡ï¼Œå°ºåº¦å°±æ˜¯è§‚æµ‹äº‹ç‰©çš„ä¸€ç§åº¦é‡ï¼Œä¾‹å¦‚çœ‹åˆ°ä¸€è¾†è½¦ï¼Œè§‚å¯Ÿè½¦çª—å’Œè§‚å¯Ÿè½¦èº«å°±æ˜¯ä¸åŒçš„å°ºåº¦ã€‚åœ¨å›¾åƒä¸Šçš„è¡¨ç°ä¸ºæ„Ÿå—é‡çš„ä¸åŒï¼Œæˆ–è€…è¯´ä¸åŒå°ºå¯¸çš„å·ç§¯æ ¸å·ç§¯åçš„å°ºåº¦ä¸åŒã€‚è€Œåˆ†è¾¨ç‡åˆ™æ˜¯è§‚å¯Ÿæ±½è½¦ï¼Œæˆ´çœ¼é•œçœ‹å’Œä¸æˆ´çœ¼é•œçœ‹ï¼Œéƒ½æ˜¯æ±½è½¦ï¼Œä½†æ˜¯æœ‰æ¨¡ç³Šå’Œæ¸…æ¥šä¹‹åˆ†ã€‚åœ¨å›¾åƒä¸Šç±»ä¼¼äºåŒä¸€å±‚åšæ± åŒ–ã€‚</p>
<p>å¯¹äºå¤šå°ºåº¦ç»„åˆMSGè€Œè¨€ï¼Œå°±æ˜¯é€‰å–ä¸åŒåŠå¾„çš„å­åŒºåŸŸ(åœ¨å›¾åƒä¸Šå°±æ˜¯é€‰æ‹©ä¸åŒå¤§å°çš„å·ç§¯æ ¸)è¿›è¡Œç‰¹å¾æå–åå †å ã€‚</p>
<p>å…¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PointNetSetAbstractionMsg</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,npoint,radius_list,nasmple_list,in_channel,mlp_list</span>):</span><br><span class="line">        <span class="built_in">super</span>(PointNetSetAbstractionMsg, self).__init__()</span><br><span class="line">        self.npoint=npoint</span><br><span class="line">        self.radius_list=radius_list</span><br><span class="line">        self.nsample_list=nasmple_list</span><br><span class="line">        self.conv_block=nn.ModuleList()</span><br><span class="line">        self.bn_block=nn.ModuleList()</span><br><span class="line">        <span class="keyword">for</span> idx,mlp <span class="keyword">in</span> mlp_list:</span><br><span class="line">            convs=nn.ModuleList()</span><br><span class="line">            bns=nn.ModuleList()</span><br><span class="line">            last_channel=in_channel+<span class="number">3</span></span><br><span class="line">            <span class="keyword">for</span> output <span class="keyword">in</span> mlp:</span><br><span class="line">                convs.append(nn.Conv2d(last_channel,output,<span class="number">1</span>))</span><br><span class="line">                bns.append(nn.BatchNorm2d(output))</span><br><span class="line">                last_channel=output</span><br><span class="line">            self.conv_block.append(convs)</span><br><span class="line">            self.bn_block.append(bns)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,xyz,points</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        Input:</span></span><br><span class="line"><span class="string">            xyz: input points position data, [B, C, N]</span></span><br><span class="line"><span class="string">            points: input points data, [B, D, N]</span></span><br><span class="line"><span class="string">        Return:</span></span><br><span class="line"><span class="string">            new_xyz: sampled points position data, [B, C, S]</span></span><br><span class="line"><span class="string">            new_points_concat: sample points feature data, [B, D&#x27;, S]</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment"># xyzæ˜¯åæ ‡ç‚¹ä½ç½®ç‰¹å¾</span></span><br><span class="line">        xyz=xyz.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment"># [B,N,C]</span></span><br><span class="line">        <span class="keyword">if</span> points <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># æå–åˆ°çš„é¢å¤–ç‰¹å¾</span></span><br><span class="line">            points=points.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment"># [B,N,D]</span></span><br><span class="line"></span><br><span class="line">        B,N,C=xyz.shape</span><br><span class="line">        S=self.npoint</span><br><span class="line">        <span class="comment"># é‡‡æ ·åçš„åæ ‡ç‚¹</span></span><br><span class="line">        new_xyz=index_points(xyz,farthest_point_sample(xyz,S))</span><br><span class="line"></span><br><span class="line">        new_points_list=[]</span><br><span class="line">        <span class="comment"># å¤šå°ºåº¦ç‰¹å¾æå–</span></span><br><span class="line">        <span class="keyword">for</span> i,radius <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.radius_list):</span><br><span class="line">            k=self.nsample_list[i]</span><br><span class="line">            group_idx=query_ball_point(radius,k,xyz,new_xyz)</span><br><span class="line">            group_xyz=index_points(xyz,group_idx)</span><br><span class="line">            <span class="comment"># ä¸­å¿ƒåŒ–</span></span><br><span class="line">            group_xyz-=new_xyz.view(B,S,<span class="number">1</span>,C)</span><br><span class="line">            <span class="keyword">if</span> points <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                group_points=index_points(points,group_idx)</span><br><span class="line">                group_points=torch.cat([group_points,group_xyz],dim=-<span class="number">1</span>)</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                group_points=group_xyz</span><br><span class="line"></span><br><span class="line">            group_points=group_points.permute(<span class="number">0</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment"># [B,D,K,S]</span></span><br><span class="line">           </span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.conv_block[i])):</span><br><span class="line">                conv=self.conv_block[i][j]</span><br><span class="line">                bn=self.bn_block[i][j]</span><br><span class="line">                group_points=F.relu(bn(conv(group_points)))</span><br><span class="line">           </span><br><span class="line">            <span class="comment"># [B,D&#x27;,S]</span></span><br><span class="line">            new_points=torch.<span class="built_in">max</span>(group_points,<span class="number">2</span>)[<span class="number">0</span>]</span><br><span class="line">            </span><br><span class="line">            new_points_list.append(new_points)</span><br><span class="line"></span><br><span class="line">        new_xyz=new_xyz.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># å¤šå°ºåº¦ç‰¹å¾èåˆ</span></span><br><span class="line">        new_points_concat=torch.cat(new_points_list,dim=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> new_xyz,new_points_concat</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ä¸ƒã€ç‚¹äº‘ä¸Šé‡‡æ ·">ä¸ƒã€ç‚¹äº‘ä¸Šé‡‡æ ·</h2>
<p>åœ¨è¿ç»­çš„SAå±‚ä¸­ï¼Œä¸æ–­å¯¹åŸå§‹ç‚¹è¿›è¡Œä¸‹é‡‡æ ·è€Œè·å¾—æ•°é‡æ›´å°‘çš„ç‰¹å¾ç‚¹ï¼Œä½†è‹¥æ˜¯åšåˆ†å‰²ä»»åŠ¡ï¼Œåˆ™éœ€è¦æŠŠç‚¹äº‘ä¸­çš„æ‰€æœ‰ç‚¹éƒ½å¸¦ä¸Šè¯­ä¹‰æ ‡ç­¾ã€‚è‹¥æ˜¯ç”¨ä¹‹å‰åˆ†ç±»çš„æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯å¯¹æ‰€æœ‰ç‚¹åšåœ†è¿›è¡Œå±€éƒ¨ç‰¹å¾æå–ï¼Œå®åœ¨æ˜¯å¤ªè€—è´¹æ—¶é—´äº†ã€‚äºæ˜¯ä½œè€…æå‡ºäº†åŸºäºä¸Šé‡‡æ ·çš„æ–¹å¼ï¼Œå°†å·²æå–ç‰¹å¾çš„ç‚¹ä¼ é€’ç»™å…¶ä»–ç‚¹ã€</p>
<p>åœ¨æœ¬éƒ¨åˆ†ï¼Œä½œè€…æå‡ºä¸€ç§åŸºäºåè·ç¦»æƒé‡å·®å€¼çš„ç‰¹å¾ä¼ æ’­ç®—æ³•ã€‚</p>
<p>å…¶æ ¸å¿ƒæ€æƒ³åœ¨äºï¼š</p>
<ul>
<li>
<p><strong>åè·ç¦»æ’å€¼</strong>ï¼Œå¯¹æ¯ä¸ªç‚¹çš„<code>k</code>ä¸ªä¸´è¿‘ç‚¹æŒ‰ç…§IDWè¿›è¡Œå·®å€¼ã€‚å…¬å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></munderover><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msubsup><mi>f</mi><mi>i</mi><mrow><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></msubsup></mrow><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></munderover><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">f^{(j)}(x)=\frac{\sum_{i=1}^k w_i(x)f_i^{(j)}}{\sum_{i=1}^kw_i(x)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.188em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9132em;vertical-align:-1.1787em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7345em;"><span style="top:-2.1658em;"><span class="pstrut" style="height:3.0448em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.989em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-3.2748em;"><span class="pstrut" style="height:3.0448em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.7345em;"><span class="pstrut" style="height:3.0448em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.989em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2769em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.1787em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<ul>
<li>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>d</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mi>p</mi></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">w_i(x)=\frac {1}{d(x,x_i)^p}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2574em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å°†æ’å€¼å¾—åˆ°çš„ç‰¹å¾ä¸SAé˜¶æ®µå¾—åˆ°çš„ç‰¹å¾é€šè¿‡skip-linkè¿æ¥åè¿›è¡Œç‰¹å¾å †å ã€‚</p>
</li>
<li>
<p>ç‰¹å¾å †å åè¾“å…¥åˆ°<code>unit pointnet</code>ä¸­è¿›ä¸€æ­¥æå–</p>
</li>
</ul>
<p><strong>è¾“å…¥</strong>ï¼š</p>
<ul>
<li>xyz1: æ‰€æœ‰ç‚¹å¯¹åæ ‡</li>
<li>xyz2: é™é‡‡æ ·åçš„ç‚¹åæ ‡</li>
<li>points1: SAå±‚çš„ç‚¹</li>
<li>points2: é™é‡‡æ ·åçš„ç‚¹</li>
</ul>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<ul>
<li>skip-linkåçš„ç‰¹å¾ç‚¹</li>
</ul>
<img src="/2022/08/01/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91PointNet-%E7%BD%91%E7%BB%9C/image-20220401132057972.png" alt="image-20220401132057972" style="zoom:50%;">
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PointNetFeaturePropagation</span>(nn.Module):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_channel, mlp</span>):</span><br><span class="line">        <span class="built_in">super</span>(PointNetFeaturePropagation, self).__init__()</span><br><span class="line">        self.mlp_convs = nn.ModuleList()</span><br><span class="line">        self.mlp_bns = nn.ModuleList()</span><br><span class="line">        last_channel = in_channel</span><br><span class="line">        <span class="keyword">for</span> out_channel <span class="keyword">in</span> mlp:</span><br><span class="line">            self.mlp_convs.append(nn.Conv1d(last_channel, out_channel, <span class="number">1</span>))</span><br><span class="line">            self.mlp_bns.append(nn.BatchNorm1d(out_channel))</span><br><span class="line">            last_channel = out_channel</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,xyz1,xyz2,points1,points2</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Input:</span></span><br><span class="line"><span class="string">            xyz1: input points position data, [B, C, N]</span></span><br><span class="line"><span class="string">            xyz2: sampled input points position data, [B, C, S]</span></span><br><span class="line"><span class="string">            points1: input points data, [B, D, N]</span></span><br><span class="line"><span class="string">            points2: input points data, [B, D, S]</span></span><br><span class="line"><span class="string">        Return:</span></span><br><span class="line"><span class="string">            new_points: upsampled points data, [B, D&#x27;, N]</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        xyz1,xyz2=xyz1.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>),xyz2.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">        points2=points2.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        B,N,C=xyz1.shape</span><br><span class="line">        _,S,_=xyz2.shape</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> S==<span class="number">1</span>:</span><br><span class="line">            <span class="comment"># æ­¤æ—¶ä»…æœ‰ä¸€ä¸ªé‡‡æ ·ç‚¹</span></span><br><span class="line">            interpolated_points=points2.repeat(<span class="number">1</span>,N,<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># ä¸Šé‡‡æ ·ï¼ŒæŠŠå½“å‰ç‚¹çš„ç‰¹å¾copy N æ¬¡</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dists=square_distance(xyz1,xyz2)</span><br><span class="line">            <span class="comment"># è·ç¦»å¼ é‡</span></span><br><span class="line">            <span class="built_in">print</span>(dists.shape)</span><br><span class="line">            dists,idx=dists.sort(dim=-<span class="number">1</span>)</span><br><span class="line">            dists,idx=dists[...,:<span class="number">3</span>],idx[...,:<span class="number">3</span>]</span><br><span class="line">            <span class="comment"># åè·ç¦»æƒé‡æ³•</span></span><br><span class="line">            dist_recip=<span class="number">1.0</span>/(dists+<span class="number">1e-8</span>)</span><br><span class="line">            <span class="comment"># ä¸ºäº†è®©æƒé‡å½’ä¸€</span></span><br><span class="line">            norm=torch.<span class="built_in">sum</span>(dist_recip,dim=<span class="number">2</span>,keepdim=<span class="literal">True</span>)</span><br><span class="line">            weight=dist_recip/norm</span><br><span class="line">            interpolated_points=torch.<span class="built_in">sum</span>(index_points(points2,idx)* weight.view(B, N, <span class="number">3</span>, <span class="number">1</span>), dim=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> points1 <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            points1=points1.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># è·ŸåŸå…ˆä½ç½®çš„ç‚¹åšskip-link</span></span><br><span class="line">            new_points=torch.cat([points1,interpolated_points],dim=-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            new_points=interpolated_points</span><br><span class="line">        new_points=new_points.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># unit pointnet éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">for</span> i,conv <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.mlp_convs):</span><br><span class="line">            bn=self.mlp_bns[i]</span><br><span class="line">            new_points=F.relu(bn(conv(new_points)))</span><br><span class="line">        <span class="keyword">return</span> new_points</span><br></pre></td></tr></table></figure>
<p>æ•´ä¸ªåˆ†ç±»ä»»åŠ¡å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">get_model</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,num_class,normal_channel=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(get_model, self).__init__()</span><br><span class="line">        in_channel=<span class="number">3</span> <span class="keyword">if</span> normal_channel <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        self.normal_channel=normal_channel</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># SAå±‚</span></span><br><span class="line">        self.sa1 = PointNetSetAbstractionMsg(<span class="number">512</span>, [<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.4</span>], [<span class="number">16</span>, <span class="number">32</span>, <span class="number">128</span>], in_channel,[[<span class="number">32</span>, <span class="number">32</span>, <span class="number">64</span>], [<span class="number">64</span>, <span class="number">64</span>, <span class="number">128</span>], [<span class="number">64</span>, <span class="number">96</span>, <span class="number">128</span>]])</span><br><span class="line">        self.sa2 = PointNetSetAbstractionMsg(<span class="number">128</span>, [<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.8</span>], [<span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>], <span class="number">320</span>,[[<span class="number">64</span>, <span class="number">64</span>, <span class="number">128</span>], [<span class="number">128</span>, <span class="number">128</span>, <span class="number">256</span>], [<span class="number">128</span>, <span class="number">128</span>, <span class="number">256</span>]])</span><br><span class="line">        self.sa3 = PointNetSetAbstraction(<span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="number">640</span> + <span class="number">3</span>, [<span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span>], <span class="literal">True</span>)</span><br><span class="line">		<span class="comment"># SAè¿”å›æ¥çš„æ˜¯å…¨å±€ç‰¹å¾</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æœ€åçš„åˆ¤åˆ«å±‚</span></span><br><span class="line">        self.fc1=nn.Linear(<span class="number">1024</span>,<span class="number">512</span>)</span><br><span class="line">        self.bn1=nn.BatchNorm1d(<span class="number">512</span>)</span><br><span class="line">        self.drop1=nn.Dropout(<span class="number">0.4</span>)</span><br><span class="line">        self.fc2=nn.Linear(<span class="number">512</span>,<span class="number">256</span>)</span><br><span class="line">        self.bn2=nn.BatchNorm1d(<span class="number">256</span>)</span><br><span class="line">        self.drop2=nn.Dropout(<span class="number">0.5</span>)</span><br><span class="line">        self.fc3=nn.Linear(<span class="number">256</span>,num_class)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,xyz</span>):</span><br><span class="line">        B,_,_=xyz.shape</span><br><span class="line">        <span class="keyword">if</span> self.normal_channel:</span><br><span class="line">            norm=xyz[:,<span class="number">3</span>:,:] <span class="comment"># è¿™ä¸ªæ˜¯ç‰¹å¾</span></span><br><span class="line">            xyz=xyz[:,:<span class="number">3</span>,:] <span class="comment"># è¿™ä¸ªæ˜¯ä½ç½®</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            norm=<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        l1_xyz,l1_points=self.sa1(xyz,norm) <span class="comment"># return [B,C+D,npoint]</span></span><br><span class="line">        l2_xyz, l2_points = self.sa2(l1_xyz, l1_points)</span><br><span class="line">        l3_xyz, l3_points = self.sa3(l2_xyz, l2_points)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># çº¿æ€§å±•å¹³</span></span><br><span class="line">        x=l3_points.view(B,<span class="number">1024</span>)</span><br><span class="line">        <span class="comment"># é¢„æµ‹ç±»åˆ«</span></span><br><span class="line">        x = self.drop1(F.relu(self.bn1(self.fc1(x))))</span><br><span class="line">        x = self.drop2(F.relu(self.bn2(self.fc2(x))))</span><br><span class="line">        x = self.fc3(x)</span><br><span class="line">        x=F.log_softmax(x,-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> x,l3_points</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">get_loss</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(get_loss, self).__init__()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,pred,target,trans_feat=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="keyword">if</span> trans_feat:</span><br><span class="line">            total_loss=trans_feat(pred,target)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            total_loss=F.nll_loss(pred,target)</span><br><span class="line">        <span class="keyword">return</span> total_loss</span><br></pre></td></tr></table></figure>
<p>è€Œåˆ†å‰²ä»»åŠ¡åˆ™æ˜¯ä½¿ç”¨äº†ç‰¹å¾ä¼ é€’å±‚çš„ç‰¹å¾èåˆï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">get_model</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes, normal_channel=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(get_model, self).__init__()</span><br><span class="line">        <span class="keyword">if</span> normal_channel:</span><br><span class="line">            additional_channel = <span class="number">3</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            additional_channel = <span class="number">0</span></span><br><span class="line">        self.normal_channel = normal_channel</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># SAå±‚</span></span><br><span class="line">        self.sa1 = PointNetSetAbstractionMsg(<span class="number">512</span>, [<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.4</span>], [<span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>], <span class="number">3</span>+additional_channel, [[<span class="number">32</span>, <span class="number">32</span>, <span class="number">64</span>], [<span class="number">64</span>, <span class="number">64</span>, <span class="number">128</span>], [<span class="number">64</span>, <span class="number">96</span>, <span class="number">128</span>]])</span><br><span class="line">        self.sa2 = PointNetSetAbstractionMsg(<span class="number">128</span>, [<span class="number">0.4</span>,<span class="number">0.8</span>], [<span class="number">64</span>, <span class="number">128</span>], <span class="number">128</span>+<span class="number">128</span>+<span class="number">64</span>, [[<span class="number">128</span>, <span class="number">128</span>, <span class="number">256</span>], [<span class="number">128</span>, <span class="number">196</span>, <span class="number">256</span>]])</span><br><span class="line">        self.sa3 = PointNetSetAbstraction(npoint=<span class="literal">None</span>, radius=<span class="literal">None</span>, nsample=<span class="literal">None</span>, in_channel=<span class="number">512</span> + <span class="number">3</span>, mlp=[<span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span>], group_all=<span class="literal">True</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># FPå±‚</span></span><br><span class="line">        self.fp3 = PointNetFeaturePropagation(in_channel=<span class="number">1536</span>, mlp=[<span class="number">256</span>, <span class="number">256</span>])</span><br><span class="line">        self.fp2 = PointNetFeaturePropagation(in_channel=<span class="number">576</span>, mlp=[<span class="number">256</span>, <span class="number">128</span>])</span><br><span class="line">        self.fp1 = PointNetFeaturePropagation(in_channel=<span class="number">150</span>+additional_channel, mlp=[<span class="number">128</span>, <span class="number">128</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># MLPå±‚</span></span><br><span class="line">        self.conv1 = nn.Conv1d(<span class="number">128</span>, <span class="number">128</span>, <span class="number">1</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm1d(<span class="number">128</span>)</span><br><span class="line">        self.drop1 = nn.Dropout(<span class="number">0.5</span>)</span><br><span class="line">        self.conv2 = nn.Conv1d(<span class="number">128</span>, num_classes, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, xyz, cls_label</span>):</span><br><span class="line">        <span class="comment"># Set Abstraction layers</span></span><br><span class="line">        B,C,N = xyz.shape</span><br><span class="line">        <span class="keyword">if</span> self.normal_channel:</span><br><span class="line">            l0_points = xyz</span><br><span class="line">            l0_xyz = xyz[:,:<span class="number">3</span>,:]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            l0_points = xyz</span><br><span class="line">            l0_xyz = xyz</span><br><span class="line">        l1_xyz, l1_points = self.sa1(l0_xyz, l0_points)</span><br><span class="line">        l2_xyz, l2_points = self.sa2(l1_xyz, l1_points)</span><br><span class="line">        l3_xyz, l3_points = self.sa3(l2_xyz, l2_points)</span><br><span class="line">        <span class="comment"># Feature Propagation layers</span></span><br><span class="line">        l2_points = self.fp3(l2_xyz, l3_xyz, l2_points, l3_points)</span><br><span class="line">        l1_points = self.fp2(l1_xyz, l2_xyz, l1_points, l2_points)</span><br><span class="line">        <span class="comment"># è·å–ç±»åˆ«çš„one-hotç¼–ç </span></span><br><span class="line">        cls_label_one_hot = cls_label.view(B,<span class="number">16</span>,<span class="number">1</span>).repeat(<span class="number">1</span>,<span class="number">1</span>,N)</span><br><span class="line">        l0_points = self.fp1(l0_xyz, l1_xyz, torch.cat([cls_label_one_hot,l0_xyz,l0_points],<span class="number">1</span>), l1_points)</span><br><span class="line">        <span class="comment"># FC layers</span></span><br><span class="line">        feat = F.relu(self.bn1(self.conv1(l0_points)))</span><br><span class="line">        x = self.drop1(feat)</span><br><span class="line">        x = self.conv2(x)</span><br><span class="line">        x = F.log_softmax(x, dim=<span class="number">1</span>)</span><br><span class="line">        x = x.permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> x, l3_points</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ç‚¹äº‘ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Open3Dç‚¹äº‘å¤„ç†]]></title>
      <url>/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/</url>
      <content type="html"><![CDATA[<h1>Open3Dç‚¹äº‘å¤„ç†</h1>
<hr>
<h2 id="ä¸€ã€Open3D">ä¸€ã€Open3D</h2>
<p><em>Open3D is an open-source library that supports rapid development of software that deals with 3D data. The Open3D frontend exposes a set of carefully selected data structures and algorithms in both C++ and Python. The backend is highly optimized and is set up for parallelization.</em></p>
<p>Open3Dæ˜¯ä¸€ä¸ªæ”¯æŒ3Dæ•°æ®å¤„ç†è½¯ä»¶å¿«é€Ÿå¼€å‘çš„å¼€æºåº“ï¼Œåœ¨å‰ç«¯æä¾›äº†ä¸€ç»„ç²¾æŒ‘ç»†é€‰çš„C++å’ŒPythonæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‚å¹¶ä¸”åœ¨åç«¯é«˜åº¦ä¼˜åŒ–ä¸”æ”¯æŒå¹¶è¡ŒåŒ–ã€‚</p>
<p>å…¶<strong>æ ¸å¿ƒè¦ç´ </strong>åŒ…æ‹¬ï¼š</p>
<ul>
<li>3Dæ•°æ®ç»“æ„</li>
<li>3Dæ•°æ®å¤„ç†ç®—æ³•</li>
<li>åœºæ™¯é‡å»º</li>
<li>3Då¯è§†åŒ–</li>
<li>3Dæœºå™¨å­¦ä¹ ç­‰</li>
</ul>
<p><strong>Pythonç‰ˆå¿«é€Ÿå®‰è£…</strong></p>
<p>éœ€è¦çš„ç¯å¢ƒä¸ºï¼š</p>
<ul>
<li>OSï¼šUbuntu 18.04+ã€macOS 10.15+ã€Windows 10(64-bit)</li>
<li>Python: 3.6-3.9</li>
<li>Pre-packages: <code>pip</code> and <code>conda</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install</span></span><br><span class="line">pip install open3d</span><br><span class="line"></span><br><span class="line"><span class="comment"># Verify installation</span></span><br><span class="line">python -c <span class="string">&quot;import open3d as o3d; print(o3d.__version__)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python API</span></span><br><span class="line">python -c <span class="string">&quot;import open3d as o3d; \</span></span><br><span class="line"><span class="string">           mesh = o3d.geometry.TriangleMesh.create_sphere(); \</span></span><br><span class="line"><span class="string">           mesh.compute_vertex_normals(); \</span></span><br><span class="line"><span class="string">           o3d.visualization.draw(mesh, raw_mode=True)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Open3D CLI</span></span><br><span class="line">open3d example visualization/draw</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="äºŒã€Open3Dç‚¹äº‘åŠ è½½ä¸æ˜¾ç¤º">äºŒã€Open3Dç‚¹äº‘åŠ è½½ä¸æ˜¾ç¤º</h2>
<h3 id="2-1-ç‚¹äº‘è¯»å–">2.1 ç‚¹äº‘è¯»å–</h3>
<p>Open3Dæä¾›äº†ç›´æ¥ä»æ–‡ä»¶ä¸­è¯»å–ç‚¹äº‘æ•°æ®çš„APIï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open3d.io.read_point_cloud(filename, <span class="built_in">format</span>=<span class="string">&#x27;auto&#x27;</span>, remove_nan_points=<span class="literal">False</span>, remove_infinite_points=<span class="literal">False</span>, print_progress=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p><strong>Parameters</strong></p>
<ul>
<li><strong>filename</strong> (<em>str</em>) â€“ æ–‡ä»¶è·¯å¾„</li>
<li><strong>format</strong> (<em>str</em>,<em>optional</em>,<em>default=â€˜autoâ€™</em>) â€“ æ–‡ä»¶çš„æ ¼å¼ï¼Œé»˜è®¤æ˜¯<code>auto</code>ï¼Œå°†å½±å“å¦‚ä½•è¯»å–æ–‡ä»¶</li>
<li><strong>remove_nan_points</strong> (<em>bool</em>*,* <em>optional</em>*,* <em>default=False</em>) â€“ æ˜¯å¦ç§»é™¤å€¼ä¸º<code>nan</code>çš„ç‚¹</li>
<li><strong>remove_infinite_points</strong> (<em>bool</em>*,* <em>optional</em>*,* <em>default=False</em>) â€“ æ˜¯å¦ç§»é™¤å€¼ä¸º<code>inf</code>çš„ç‚¹</li>
<li><strong>print_progress</strong> (<em>bool</em>*,* <em>optional</em>*,* <em>default=False</em>) â€“ å½“è¯¥å€¼ä¸ºTrueæ—¶ï¼Œå°†ä¼šåœ¨å¯è§†åŒ–æ—¶å‡ºç°ä¸€ä¸ªè¿‡ç¨‹æ¡</li>
</ul>
<p><strong>Return</strong></p>
<ul>
<li>open3d.geometry.PointCloudå¯¹è±¡</li>
</ul>
<p>å…¶ä¸­ï¼Œ<code>format</code>å‚æ•°çš„å¯é€‰å‚æ•°ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ ¼å¼</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">xyz</td>
<td style="text-align:center">æ¯ä¸€è¡ŒåŒ…å«[x,y,z]</td>
</tr>
<tr>
<td style="text-align:center">xyzn</td>
<td style="text-align:center">æ¯ä¸€è¡ŒåŒ…å«[x,y,z,nx,ny,nz]</td>
</tr>
<tr>
<td style="text-align:center">xyzrgb</td>
<td style="text-align:center">æ¯ä¸€è¡ŒåŒ…æ‹¬[x,y,z,r,g,b] rgbä¸º[0,1]ä¹‹é—´çš„floatç±»å‹</td>
</tr>
<tr>
<td style="text-align:center">pts</td>
<td style="text-align:center">ç¬¬ä¸€è¡Œè¡¨ç¤ºç‚¹æ•°ï¼Œä¹‹åæ¯è¡ŒåŒ…æ‹¬[x,y,z,i,r,g,b] rgbä¸ºunit8ç±»å‹</td>
</tr>
<tr>
<td style="text-align:center">ply</td>
<td style="text-align:center">plyæ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">pcd</td>
<td style="text-align:center">pcdæ–‡ä»¶</td>
</tr>
</tbody>
</table>
<p>æˆ‘ä»¬æ¥å°è¯•è¯»å–ä¸€ä¸‹æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> open3d <span class="keyword">as</span> o3d</span><br><span class="line"></span><br><span class="line">pcd=o3d.io.read_point_cloud(<span class="string">r&quot;Cloud.pcd&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(pcd)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">PointCloud with 2001009 points.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># æ­¤æ—¶ç‚¹äº‘æ•°æ®å·²ç»è¢«è¯»å…¥äº†</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå¯¹äºæŸäº›æ ¼å¼ç¨€å¥‡å¤æ€ªçš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è½¬æˆ<code>ndarray</code>ç„¶åå†è¿›è¡Œè¯»å–ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> open3d <span class="keyword">as</span> o3d</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–åˆ°ndarray</span></span><br><span class="line">data=np.genfromtxt(<span class="string">r&#x27;modelnet40_normal_resampled\airplane\airplane_0001.txt&#x27;</span>,delimiter=<span class="string">&quot;,&quot;</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºPointCloudç±»</span></span><br><span class="line">pcd=o3d.geometry.PointCloud()</span><br><span class="line">pcd.points=o3d.utility.Vector3dVector(data[:,:<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(pcd)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">PointCloud with 10000 points.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å…³äºPointCloudçš„å±æ€§ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å››ç±»ï¼š</p>
<ul>
<li>colors: é¢œè‰²ä¿¡æ¯ï¼Œåœ¨å¯è§†åŒ–æ—¶èƒ½ä¸ºå‡ ä½•ä½“èµ‹äºˆè§†è§‰ä¿¡æ¯</li>
<li>covariances: åæ–¹å·®</li>
<li>normal: æ³•å‘é‡</li>
<li>points: ä½ç½®ä¿¡æ¯</li>
</ul>
<h3 id="2-2-ç‚¹äº‘å¯è§†åŒ–">2.2  ç‚¹äº‘å¯è§†åŒ–</h3>
<p>åœ¨Open3Dä¸­ï¼Œç‚¹äº‘å¯è§†åŒ–å…¶ä¸­ä¹‹ä¸€çš„APIä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">draw_geometries(geometry_list, window_name=â€™Open3Dâ€™, width=<span class="number">1920</span>, height=<span class="number">1080</span>, left=<span class="number">50</span>, top=<span class="number">50</span>, point_show_normal=<span class="literal">False</span>, mesh_show_wireframe=<span class="literal">False</span>, mesh_show_back_face=<span class="literal">False</span>, lookat, up, front, zoom)</span><br></pre></td></tr></table></figure>
<p><strong>Parameters</strong></p>
<ul>
<li><strong>geometry_list</strong> (List[open3d.geometry.Geometry]) â€“ éœ€è¦å¯è§†åŒ–çš„å‡ ä½•ä½“åˆ—è¡¨.</li>
<li><strong>window_name</strong> (<em>str</em>, <em>optional</em>, <em>default=â€˜Open3Dâ€™</em>) â€“ çª—å£åç§°</li>
<li><strong>width</strong> (<em>int</em>, <em>optional</em>, <em>default=1920</em>) â€“ çª—å£å®½åº¦</li>
<li><strong>height</strong> (<em>int</em>, <em>optional</em>, <em>default=1080</em>) â€“ çª—å£é«˜åº¦</li>
<li><strong>left</strong> (<em>int</em>, <em>optional</em>, <em>default=50</em>) â€“ çª—å£å·¦è¾¹ç•Œ</li>
<li><strong>top</strong> (<em>int</em>, <em>optional</em>, <em>default=50</em>) â€“ çª—å£é¡¶éƒ¨è¾¹ç•Œ</li>
<li><strong>point_show_normal</strong> (<em>bool</em>, <em>optional</em>, <em>default=False</em>) â€“ æ˜¯å¦å±•ç¤ºæ³•å‘é‡</li>
<li><strong>mesh_show_wireframe</strong> (<em>bool</em>, <em>optional</em>, <em>default=False</em>) â€“ æ˜¯å¦å¯è§†åŒ–ç½‘æ ¼çº¿æ¡†</li>
<li><strong>mesh_show_back_face</strong> (<em>bool</em>, <em>optional,</em> <em>default=False</em>) â€“ åŒæ—¶å¯è§†åŒ–æ ¼ç½‘ä¸‰è§’å½¢èƒŒéƒ¨</li>
<li>**lookat ** (<em>numpy.ndarray[float64[3,1]]</em>) â€“ ç›¸æœºæ³¨è§†å‘é‡</li>
<li><strong>up</strong>  (<em>numpy.ndarray[float64[3,1]]</em>) â€“ ç›¸æœºçš„ä¸Šæ–¹å‘å‘é‡</li>
<li><strong>front</strong>  (<em>numpy.ndarray[float64[3,1]]</em>) â€“ ç›¸æœºçš„å‰çŸ¢é‡</li>
<li><strong>zoom</strong>  (<em>float</em>) â€“ ç›¸æœºç¼©æ”¾å€æ•°</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None</li>
</ul>
<p>æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o3d.visualization.draw_geometries([pcd])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220418232334893.png" alt="image-20220418232334893" style="zoom:50%;">
<p>æ˜¾ç¤ºæ³•å‘é‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pcd.normals=o3d.utility.Vector3dVector(data[:,<span class="number">3</span>:])</span><br><span class="line">o3d.visualization.draw_geometries([pcd],window_name=<span class="string">&quot;o3d&quot;</span>,width=<span class="number">1920</span>,height=<span class="number">1080</span>,</span><br><span class="line">                                  left=<span class="number">50</span>,top=<span class="number">50</span>,point_show_normal=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220418232509254.png" alt="image-20220418232509254" style="zoom:50%;">
<p>çœ‹èµ·æ¥è·Ÿæ¯›æ¯›è™«ä¸€æ ·â€¦</p>
<p>æä¾›äº†ä¸€ç»„ç”¨æˆ·äº¤äº’æŒ‡ä»¤ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- Mouse view control --</span><br><span class="line">  Left button + drag         : Rotate.</span><br><span class="line">  Ctrl + left button + drag  : Translate.</span><br><span class="line">  Wheel button + drag        : Translate.</span><br><span class="line">  Shift + left button + drag : Roll.</span><br><span class="line">  Wheel                      : Zoom <span class="keyword">in</span>/out.</span><br><span class="line"></span><br><span class="line">-- Keyboard view control --</span><br><span class="line">  [/]          : Increase/decrease field of view.</span><br><span class="line">  R            : Reset view point.</span><br><span class="line">  Ctrl/Cmd + C : Copy current view status into the clipboard.</span><br><span class="line">  Ctrl/Cmd + V : Paste view status <span class="keyword">from</span> clipboard.</span><br><span class="line"></span><br><span class="line">-- General control --</span><br><span class="line">  Q, Esc       : Exit window.</span><br><span class="line">  H            : Print <span class="built_in">help</span> message.</span><br><span class="line">  P, PrtScn    : Take a screen capture.</span><br><span class="line">  D            : Take a depth capture.</span><br><span class="line">  O            : Take a capture of current rendering settings.</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220418232806941.png" alt="image-20220418232806941" style="zoom: 33%;">
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220418232817005.png" alt="image-20220418232817005" style="zoom: 33%;">
<p>ä¹Ÿå¯ä»¥æŒ‡å®šç‚¹äº‘çš„é¢œè‰²ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pcd.colors=o3d.utility.Vector3dVector(data[:,<span class="number">3</span>:])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220418232939457.png" alt="image-20220418232939457" style="zoom:50%;">
<p>å‚æ•°<code>geometry_list</code>æ”¯æŒå¤šä¸ªç©ºé—´é›†åˆå¯¹è±¡ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_txt</span>(<span class="params">path</span>):</span><br><span class="line">    data=np.genfromtxt(path,delimiter=<span class="string">&quot;,&quot;</span>)</span><br><span class="line">    pcd=o3d.geometry.PointCloud()</span><br><span class="line">    pcd.points = o3d.utility.Vector3dVector(data[:, :<span class="number">3</span>])</span><br><span class="line">    pcd.normals = o3d.utility.Vector3dVector(data[:, <span class="number">3</span>:])</span><br><span class="line">    pcd.colors = o3d.utility.Vector3dVector(data[:, <span class="number">3</span>:])</span><br><span class="line">    <span class="keyword">return</span> pcd</span><br><span class="line"></span><br><span class="line">path=<span class="string">r&#x27;\airplane&#x27;</span></span><br><span class="line">pcd1=read_txt(path+<span class="string">r&quot;\airplane_0001.txt&quot;</span>)</span><br><span class="line">pcd2=read_txt(path+<span class="string">r&quot;\airplane_0012.txt&quot;</span>)</span><br><span class="line">o3d.visualization.draw_geometries([pcd1,pcd2],window_name=<span class="string">&quot;o3d&quot;</span>,width=<span class="number">1920</span>,height=<span class="number">1080</span>,</span><br><span class="line">                                  left=<span class="number">50</span>,top=<span class="number">50</span>,mesh_show_back_face=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220418233416184.png" alt="image-20220418233416184" style="zoom:33%;">
<p>o3dæä¾›äº†è‡ªåŠ¨è®¡ç®—æ³•å‘é‡çš„APIï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">radius=<span class="number">0.01</span> <span class="comment"># æœç´¢åŠå¾„</span></span><br><span class="line">max_nn=<span class="number">30</span> <span class="comment"># é‚»åŸŸå†…ç”¨äºä¼°ç®—æ³•çº¿çš„æœ€å¤§ç‚¹æ•°</span></span><br><span class="line"><span class="comment"># æ‰§è¡ŒKDæ ‘æœç´¢</span></span><br><span class="line">pcd1.estimate_normals(search_param=o3d.geometry.KDTreeSearchParamHybrid(radius,max_nn))</span><br><span class="line">o3d.visualization.draw_geometries([pcd1],window_name=<span class="string">&quot;o3d&quot;</span>,width=<span class="number">1920</span>,height=<span class="number">1080</span>,</span><br><span class="line">                                  left=<span class="number">50</span>,top=<span class="number">50</span>,point_show_normal=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># åŒæ ·èƒ½ç”¨KDæ ‘æ„å»ºåæ–¹å·®è¡¨</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-ç‚¹äº‘ä¿å­˜">2.3  ç‚¹äº‘ä¿å­˜</h3>
<p>APIå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open3d.io.write_point_cloud(filename, pointcloud, write_ascii=<span class="literal">False</span>, compressed=<span class="literal">False</span>, print_progress=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p><strong>Parameters</strong></p>
<ul>
<li><strong>filename</strong> (<em>str</em>) â€“ æ–‡ä»¶è·¯å¾„</li>
<li><strong>pointcloud</strong> (<a href="http://www.open3d.org/docs/release/python_api/open3d.geometry.PointCloud.html#open3d.geometry.PointCloud"><em>open3d.geometry.PointCloud</em></a>) â€“ ç‚¹äº‘å¯¹è±¡</li>
<li><strong>write_ascii</strong> (<em>bool</em>ï¼Œ<em>optional</em>,<em>default=False</em>) â€“ è¯¥å‚æ•°ä¸ºTrueæ—¶ï¼Œå°†ä¼šå†™å…¥ASCIIç ï¼Œå¦åˆ™ä¸€èˆ¬å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶</li>
<li><strong>compressed</strong> (<em>bool</em>,<em>optional</em>,<em>default=False</em>) â€“ æ˜¯å¦ä»¥å‹ç¼©æ ¼å¼è¿›è¡Œè¾“å‡º</li>
<li><strong>print_progress</strong> (<em>bool</em>,<em>optional</em>,<em>default=False</em>) â€“æ˜¯å¦åœ¨æ§åˆ¶å°æ‰“å°ä¸€ä¸ªè¿›åº¦æ¡</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>bool</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o3d.io.write_point_cloud(<span class="string">&quot;02.pcd&quot;</span>,pcd2,write_ascii=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯ä»¥çœ‹åˆ°å·²ç»å°†è¯»å–çš„ç‚¹äº‘å†™å…¥åˆ°æ–‡ä»¶ä¸­äº†ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220418234823724.png" alt="image-20220418234823724" style="zoom:50%;">
<hr>
<h2 id="ä¸‰ã€Open3Dç‚¹äº‘å¸¸è§æ“ä½œ">ä¸‰ã€Open3Dç‚¹äº‘å¸¸è§æ“ä½œ</h2>
<h3 id="3-1-ä½“ç´ ä¸‹é‡‡æ ·">3.1  ä½“ç´ ä¸‹é‡‡æ ·</h3>
<p>ä½“ç´ ä¸‹é‡‡æ ·(Voxel downsampling)é‡‡ç”¨è§„åˆ™ä½“ç´ æ ¼ç½‘ä»è¾“å…¥ç‚¹äº‘ä¸­åˆ›å»ºåˆ†å¸ƒå‡åŒ€çš„ä¸‹é‡‡æ ·ç‚¹äº‘ï¼Œæ˜¯è®¸å¤šç‚¹äº‘å¤„ç†ä»»åŠ¡çš„é¢„å¤„ç†æ­¥éª¤ã€‚è¯¥ç®—æ³•ä¸»è¦åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ul>
<li>åˆ›å»ºæŒ‡å®šå¤§å°(åˆ†è¾¨ç‡)çš„ä½“ç´ ç½‘ç»œ</li>
<li>å½“ç‚¹äº‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªç‚¹è½åœ¨æŸä¸ªä½“ç´ å†…ï¼Œåˆ™è®¤ä¸ºè¯¥ä½“ç´ è¢«å ç”¨ï¼Œä½“ç´ çš„é¢œè‰²(å±æ€§)æ˜¯è¯¥ä½“ç´ å†…æ‰€æœ‰ç‚¹çš„å¹³å‡å€¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Downsample the point cloud with a voxel of 0.05&quot;</span>)</span><br><span class="line">downpcd = pcd1.voxel_down_sample(voxel_size=<span class="number">0.05</span>)</span><br><span class="line">o3d.visualization.draw_geometries([downpcd])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The number of PC is : &quot;</span>,pcd1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The number of downPC is : &quot;</span>,downpcd)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Downsample the point cloud with a voxel of 0.05</span></span><br><span class="line"><span class="string">The number of PC is :  PointCloud with 10000 points.</span></span><br><span class="line"><span class="string">The number of downPC is :  PointCloud with 1389 points.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Downsample the point cloud with a voxel of 0.005</span></span><br><span class="line"><span class="string">The number of PC is :  PointCloud with 10000 points.</span></span><br><span class="line"><span class="string">The number of downPC is :  PointCloud with 9825 points.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419170509887.png" alt="image-20220419170509887" style="zoom:33%;">
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419170527120.png" alt="image-20220419170527120" style="zoom:33%;">
<h3 id="3-2-ç‚¹äº‘æ­£æ€ä¼°è®¡">3.2  ç‚¹äº‘æ­£æ€ä¼°è®¡</h3>
<p>åœ¨äº¤äº’é¡µé¢ï¼Œå¯ä»¥é€šè¿‡<code>N</code>æŸ¥çœ‹ç‚¹æ³•çº¿ï¼Œ<code>+</code>,<code>-</code>æ§åˆ¶æ³•çº¿é•¿åº¦ã€‚</p>
<p>ä½œä¸ºç‚¹äº‘çš„åŸºæœ¬æ“ä½œä¹‹ä¸€ï¼Œç‚¹äº‘æ­£æ€ä¼°è®¡é€šè¿‡æŒ‡å®šç®—æ³•å‚æ•°ä¼°æµ‹æ¯ä¸ªç‚¹å¯èƒ½çš„æ³•å‘é‡ï¼Œ<code>estimate_normals</code>æŸ¥æ‰¾æŒ‡å®šæœç´¢åŠå¾„å†…çš„ä¸´è¿‘ç‚¹ï¼Œé€šè¿‡è¿™äº›ä¸´è¿‘ç‚¹çš„åæ–¹å·®è®¡ç®—å…¶ä¸»è½´ï¼Œä»è€Œä¼°è®¡æ³•å‘é‡ã€‚æ­£å¸¸æƒ…å†µä¸‹ä¼šäº§ç”Ÿä¸¤ä¸ªæ–¹å‘ç›¸åçš„æ³•å‘é‡ï¼Œåœ¨ä¸çŸ¥é“å‡ ä½•ä½“çš„å…¨å±€ç»“æ„ä¸‹ï¼Œä¸¤è€…éƒ½å¯ä»¥æ˜¯æ­£ç¡®çš„ã€‚Open3Dä¼šå°è¯•è°ƒæ•´æ³•çº¿çš„æ–¹å‘ï¼Œä½¿å…¶ä¸åŸå§‹æ³•çº¿å¯¹é½ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Recompute the normal of the downsampled point cloud&quot;</span>)</span><br><span class="line">downpcd.estimate_normals(</span><br><span class="line">    search_param=o3d.geometry.KDTreeSearchParamHybrid(radius=<span class="number">0.1</span>, max_nn=<span class="number">30</span>))</span><br><span class="line">o3d.visualization.draw_geometries([downpcd],</span><br><span class="line">                                  zoom=<span class="number">0.3412</span>,</span><br><span class="line">                                  front=[<span class="number">0.4257</span>, -<span class="number">0.2125</span>, -<span class="number">0.8795</span>],</span><br><span class="line">                                  lookat=[<span class="number">2.6172</span>, <span class="number">2.0475</span>, <span class="number">1.532</span>],</span><br><span class="line">                                  up=[-<span class="number">0.0694</span>, -<span class="number">0.9768</span>, <span class="number">0.2024</span>],</span><br><span class="line">                                  point_show_normal=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419171325646.png" alt="image-20220419171325646" style="zoom:33%;">
<p>å¦‚æœæƒ³è¦è®¿é—®é¡¶ç‚¹æ³•çº¿çš„è¯ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç´¢å¼•è·å–ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Print a normal vector of the 0th point&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(downpcd.normals[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Print a normal vector of the 0th point</span></span><br><span class="line"><span class="string">[ 0.99552379 -0.03798043  0.08654404]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥å°†å…¶è½¬ä¸º<code>numpy</code>æ•°ç»„:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Print the normal vectors of the first 10 points&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(np.asarray(downpcd.normals)[:<span class="number">10</span>, :])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Print the normal vectors of the first 10 points</span></span><br><span class="line"><span class="string">[[ 0.99552379 -0.03798043  0.08654404]</span></span><br><span class="line"><span class="string"> [-0.00180642 -0.97317626  0.23005372]</span></span><br><span class="line"><span class="string"> [-0.03311035  0.95990356 -0.27836821]</span></span><br><span class="line"><span class="string"> [-0.18007638 -0.98233851 -0.05082867]</span></span><br><span class="line"><span class="string"> [ 0.03201738 -0.92865206  0.36956763]</span></span><br><span class="line"><span class="string"> [-0.09411325  0.9584897  -0.26914715]</span></span><br><span class="line"><span class="string"> [-0.00804695  0.97716482 -0.21233029]</span></span><br><span class="line"><span class="string"> [-0.95046739 -0.20590633  0.2328397 ]</span></span><br><span class="line"><span class="string"> [ 0.58566868  0.7923609   0.17075245]</span></span><br><span class="line"><span class="string"> [-0.19273423 -0.87191173  0.45013714]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-ç‚¹äº‘è£å‰ª">3.3  ç‚¹äº‘è£å‰ª</h3>
<p>Open3Dçš„ç‚¹äº‘è£å‰ªéœ€è¦é€šè¿‡<code>read_selection_polygon_volume</code>è¯»å–å¤šè¾¹å½¢é€‰æ‹©åŒºåŸŸçš„jsonæ–‡ä»¶ï¼Œæ¥ç€é€šè¿‡<code>.crop_point_cloud()</code>æ–¹æ³•è¿‡æ»¤å‡ºç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Load a polygon volume and use it to crop the original point cloud&quot;</span>)</span><br><span class="line">demo_crop_data = o3d.data.DemoCropPointCloud()</span><br><span class="line">pcd = o3d.io.read_point_cloud(demo_crop_data.point_cloud_path)</span><br><span class="line">vol = o3d.visualization.read_selection_polygon_volume(demo_crop_data.cropped_json_path)</span><br><span class="line">chair = vol.crop_point_cloud(pcd)</span><br><span class="line">o3d.visualization.draw_geometries([chair],</span><br><span class="line">                                  zoom=<span class="number">0.7</span>,</span><br><span class="line">                                  front=[<span class="number">0.5439</span>, -<span class="number">0.2333</span>, -<span class="number">0.8060</span>],</span><br><span class="line">                                  lookat=[<span class="number">2.4615</span>, <span class="number">2.1331</span>, <span class="number">1.338</span>],</span><br><span class="line">                                  up=[-<span class="number">0.1781</span>, -<span class="number">0.9708</span>, <span class="number">0.1608</span>])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419173314661.png" alt="image-20220419173314661" style="zoom:33%;">
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419173114201.png" alt="image-20220419173114201" style="zoom:33%;">
<h3 id="3-4-ç»˜åˆ¶ç‚¹äº‘">3.4  ç»˜åˆ¶ç‚¹äº‘</h3>
<p><code>paint_uniform_color</code>å¯ä»¥å°†ç‚¹äº‘é¢œè‰²ç»˜åˆ¶æˆåŒä¸€çš„è‰²å½©ã€‚æ³¨æ„é¢œè‰²æ˜¯åœ¨[0,1]ä¹‹é—´çš„<code>float</code>ç±»å‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Paint chair&quot;</span>)</span><br><span class="line">chair.paint_uniform_color([<span class="number">1</span>, <span class="number">0.706</span>, <span class="number">0</span>])</span><br><span class="line">o3d.visualization.draw_geometries([chair],</span><br><span class="line">                                  zoom=<span class="number">0.7</span>,</span><br><span class="line">                                  front=[<span class="number">0.5439</span>, -<span class="number">0.2333</span>, -<span class="number">0.8060</span>],</span><br><span class="line">                                  lookat=[<span class="number">2.4615</span>, <span class="number">2.1331</span>, <span class="number">1.338</span>],</span><br><span class="line">                                  up=[-<span class="number">0.1781</span>, -<span class="number">0.9708</span>, <span class="number">0.1608</span>])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419173716954.png" alt="image-20220419173716954" style="zoom:33%;">
<h3 id="3-5-é€‰æ‹©ç‚¹äº‘">3.5  é€‰æ‹©ç‚¹äº‘</h3>
<p>åœ¨Open3Dä¸­ï¼Œå¯ä»¥é€šè¿‡ç‚¹äº‘ç´¢å¼•æ¥è¿›è¡Œç­›é€‰ã€‚<code>select_by_index</code>ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹<code>invert</code>æ–¹æ³•è¿›è¡Œåå‘é€‰å–ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inner=pcd1.select_by_index([i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(pcd1.points)) <span class="keyword">if</span> i%<span class="number">2</span>==<span class="number">0</span>])</span><br><span class="line">outer=pcd1.select_by_index([i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)],invert=<span class="literal">True</span>)</span><br><span class="line">o3d.visualization.draw_geometries([pcd1])</span><br><span class="line">o3d.visualization.draw_geometries([inner])</span><br><span class="line">o3d.visualization.draw_geometries([outer])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419194816196.png" alt="image-20220419194816196" style="zoom:33%;">
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419194824728.png" alt="image-20220419194824728" style="zoom:33%;">
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419194833429.png" alt="image-20220419194833429" style="zoom:33%;">
<hr>
<h2 id="å››ã€ç‚¹äº‘æ•°æ®è®¡ç®—">å››ã€ç‚¹äº‘æ•°æ®è®¡ç®—</h2>
<h3 id="4-1-ç‚¹äº‘è·ç¦»">4.1  ç‚¹äº‘è·ç¦»</h3>
<p>Open3Dæä¾›äº†<code>compute_point_cloud_distance</code>æ–¹æ³•ï¼Œèƒ½å¤Ÿè®¡ç®—æºç‚¹äº‘åˆ°ç›®æ ‡ç‚¹äº‘çš„<strong>æœ€è¿‘è·ç¦»</strong>ï¼Œè¯¥æ–¹æ³•ä¹Ÿèƒ½ç”¨äºè®¡ç®—ä¸¤ç‚¹äº‘ä¹‹é—´çš„åˆ‡è§’è·ç¦»ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">demo_crop_data = o3d.data.DemoCropPointCloud()</span><br><span class="line">pcd = o3d.io.read_point_cloud(demo_crop_data.point_cloud_path)</span><br><span class="line">vol = o3d.visualization.read_selection_polygon_volume(demo_crop_data.cropped_json_path)</span><br><span class="line">chair = vol.crop_point_cloud(pcd)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»åŸå§‹å›¾åƒåˆ°è£å‰ªå›¾åƒä¸­æœ€è¿‘ç‚¹çš„è·ç¦»</span></span><br><span class="line">dists=pcd.compute_point_cloud_distance(chair)</span><br><span class="line">dists=np.asarray(dists)</span><br><span class="line">ind=np.where(dists&gt;<span class="number">0.1</span>)[<span class="number">0</span>]</span><br><span class="line">pcd_without_chair = pcd.select_by_index(ind)</span><br><span class="line">o3d.visualization.draw_geometries([pcd_without_chair],</span><br><span class="line">                                  zoom=<span class="number">0.3412</span>,</span><br><span class="line">                                  front=[<span class="number">0.4257</span>, -<span class="number">0.2125</span>, -<span class="number">0.8795</span>],</span><br><span class="line">                                  lookat=[<span class="number">2.6172</span>, <span class="number">2.0475</span>, <span class="number">1.532</span>],</span><br><span class="line">                                  up=[-<span class="number">0.0694</span>, -<span class="number">0.9768</span>, <span class="number">0.2024</span>])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419174501565.png" alt="image-20220419174501565" style="zoom: 33%;">
<h3 id="4-2-è¾¹ç•Œä½“ç§¯">4.2  è¾¹ç•Œä½“ç§¯</h3>
<p>ä¸å…¶å‡ ä½•ç±»å‹ç›¸ä¼¼ï¼Œ<code>PointCloud</code>ä¹Ÿå…·æœ‰è¾¹ç•Œä½“ç§¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">aabb = chair.get_axis_aligned_bounding_box()</span><br><span class="line">aabb.color = (<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">obb = chair.get_oriented_bounding_box()</span><br><span class="line">obb.color = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">o3d.visualization.draw_geometries([chair, aabb, obb],</span><br><span class="line">                                  zoom=<span class="number">0.7</span>,</span><br><span class="line">                                  front=[<span class="number">0.5439</span>, -<span class="number">0.2333</span>, -<span class="number">0.8060</span>],</span><br><span class="line">                                  lookat=[<span class="number">2.4615</span>, <span class="number">2.1331</span>, <span class="number">1.338</span>],</span><br><span class="line">                                  up=[-<span class="number">0.1781</span>, -<span class="number">0.9708</span>, <span class="number">0.1608</span>])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419174746069.png" alt="image-20220419174746069" style="zoom: 33%;">
<h3 id="4-3-å‡¸åŒ…è®¡ç®—">4.3  å‡¸åŒ…è®¡ç®—</h3>
<p>ç‚¹äº‘å‡¸åŒ…æ˜¯åŒ…å«æ‰€æœ‰ç‚¹çš„æœ€å°å‡¸é›†ï¼Œåœ¨Open3Dä¸­ï¼Œå¯é‡‡ç”¨<code>compute_convex_hull</code>è®¡ç®—ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bunny = o3d.data.BunnyMesh()</span><br><span class="line">mesh = o3d.io.read_triangle_mesh(bunny.path)</span><br><span class="line">mesh.compute_vertex_normals()</span><br><span class="line"></span><br><span class="line">pcl = mesh.sample_points_poisson_disk(number_of_points=<span class="number">2000</span>)</span><br><span class="line">hull, _ = pcl.compute_convex_hull()</span><br><span class="line">hull_ls = o3d.geometry.LineSet.create_from_triangle_mesh(hull)</span><br><span class="line">hull_ls.paint_uniform_color((<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">o3d.visualization.draw_geometries([pcl, hull_ls])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419175508582.png" alt="image-20220419175508582" style="zoom: 33%;">
<h3 id="4-4-DBSCANèšç±»">4.4  DBSCANèšç±»</h3>
<p>DBSCANæ˜¯Esteråœ¨1996å¹´æå‡ºçš„ä¸€ç§èšç±»ç®—æ³•ï¼ŒOpen3Dä¸­ä¹Ÿæä¾›äº†è¯¥ç®—æ³•çš„API<code>pc.cluster_dbscan(eps,min_points,print_progress)</code>ï¼Œ<code>eps</code>å®šä¹‰äº†ç°‡çš„åŠå¾„è·ç¦»ï¼Œè€Œ<code>min_points</code>å®šä¹‰å½¢æˆç°‡çš„æœ€å°ç‚¹æ•°é‡ã€‚è¿”å›æ˜¯ä¸€ä¸ªæ ‡ç­¾å¯¹è±¡ï¼Œè‹¥å€¼ä¸º<code>-1</code>åˆ™è¡¨ç¤ºå™ªå£°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">ply_point_cloud = o3d.data.PLYPointCloud()</span><br><span class="line">pcd = o3d.io.read_point_cloud(ply_point_cloud.path)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> o3d.utility.VerbosityContextManager(</span><br><span class="line">        o3d.utility.VerbosityLevel.Debug) <span class="keyword">as</span> cm:</span><br><span class="line">    labels = np.array(</span><br><span class="line">        pcd.cluster_dbscan(eps=<span class="number">0.02</span>, min_points=<span class="number">10</span>, print_progress=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line">max_label = labels.<span class="built_in">max</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;point cloud has <span class="subst">&#123;max_label + <span class="number">1</span>&#125;</span> clusters&quot;</span>)</span><br><span class="line">colors = plt.get_cmap(<span class="string">&quot;tab20&quot;</span>)(labels / (max_label <span class="keyword">if</span> max_label &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span>))</span><br><span class="line">colors[labels &lt; <span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">pcd.colors = o3d.utility.Vector3dVector(colors[:, :<span class="number">3</span>])</span><br><span class="line">o3d.visualization.draw_geometries([pcd],</span><br><span class="line">                                  zoom=<span class="number">0.455</span>,</span><br><span class="line">                                  front=[-<span class="number">0.4999</span>, -<span class="number">0.1659</span>, -<span class="number">0.8499</span>],</span><br><span class="line">                                  lookat=[<span class="number">2.1813</span>, <span class="number">2.0619</span>, <span class="number">2.0999</span>],</span><br><span class="line">                                  up=[<span class="number">0.1204</span>, -<span class="number">0.9852</span>, <span class="number">0.1</span></span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419192728206.png" alt="image-20220419192728206" style="zoom: 33%;">
<h3 id="4-5-å¹³é¢åˆ†å‰²">4.5  å¹³é¢åˆ†å‰²</h3>
<p>Open3Dæ”¯æŒä½¿ç”¨<code>RANSAC</code>æ–¹æ³•ä»ç‚¹äº‘ä¸­åˆ†å‰²å‡ ä½•åŸºå…ƒ(geometric primitives)ã€‚é€šè¿‡<code>segment_plane</code>æ–¹æ³•ï¼Œå¯ä»¥æ‰¾åˆ°ç‚¹äº‘ä¸­çš„æœ€å¤§æ”¯æŒå¹³é¢(the plane with the largest support)ã€‚è¯¥æ–¹æ³•æä¾›äº†ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>distance_threshold</code>ï¼šå®šä¹‰äº†ä¸€ä¸ªç‚¹å¯è¢«è§†ä¸ºå†…åµŒç‚¹çš„ä¼°è®¡å¹³é¢çš„æœ€å¤§è·ç¦»</li>
<li><code>ransac_n</code>ï¼šå®šä¹‰ç”¨æ¥ä¼°è®¡å¹³é¢çš„éšæœºæŠ½æ ·ç‚¹æ•°é‡</li>
<li><code>num_iterations</code>ï¼šå®šä¹‰äº†éšæœºå¹³é¢æŠ½æ ·å’ŒéªŒè¯çš„é¢‘ç‡</li>
</ul>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419194854087.png" alt="image-20220419194854087" style="zoom:33%;">
<h3 id="4-6-æ¶ˆéšç‚¹">4.6  æ¶ˆéšç‚¹</h3>
<p>å½“æˆ‘ä»¬ä»ç»™å®šè§†è§’æ¸²æŸ“ç‚¹äº‘æ—¶ï¼Œç”±äºå‰æ–¹æ²¡æœ‰é®æŒ¡ï¼Œå¯èƒ½ä¼šæœ‰èƒŒé¢çš„ç‚¹æ¸—å…¥åˆ°å‰æ™¯ä¸­ã€‚Katzæå‡ºäº†ä¸€ç§æ¶ˆéšç®—æ³•(Hidden point removal),å¯ä»¥ä»ç»™å®šçš„è§†å›¾ä¸­è¿‘ä¼¼åœ°è·å¾—ç‚¹äº‘çš„å¯è§æ€§ï¼Œè€Œæ— éœ€è¡¨é¢é‡å»ºæˆ–æ­£å¸¸çš„ä¼°è®¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Convert mesh to a point cloud and estimate dimensions&quot;</span>)</span><br><span class="line">armadillo = o3d.data.ArmadilloMesh()</span><br><span class="line">mesh = o3d.io.read_triangle_mesh(armadillo.path)</span><br><span class="line">mesh.compute_vertex_normals()</span><br><span class="line"></span><br><span class="line">pcd = mesh.sample_points_poisson_disk(<span class="number">5000</span>)</span><br><span class="line">diameter = np.linalg.norm(</span><br><span class="line">    np.asarray(pcd.get_max_bound()) - np.asarray(pcd.get_min_bound()))</span><br><span class="line">o3d.visualization.draw_geometries([pcd])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419195442181.png" alt="image-20220419195442181" style="zoom:33%;">
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Define parameters used for hidden_point_removal&quot;</span>)</span><br><span class="line">camera = [<span class="number">0</span>, <span class="number">0</span>, diameter]</span><br><span class="line">radius = diameter * <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Get all points that are visible from given view point&quot;</span>)</span><br><span class="line">_, pt_map = pcd.hidden_point_removal(camera, radius)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Visualize result&quot;</span>)</span><br><span class="line">pcd = pcd.select_by_index(pt_map)</span><br><span class="line">o3d.visualization.draw_geometries([pcd])</span><br></pre></td></tr></table></figure>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91open3d%E7%82%B9%E4%BA%91%E5%A4%84%E7%90%86/image-20220419195457783.png" alt="image-20220419195457783" style="zoom:33%;">
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç‚¹äº‘ </tag>
            
            <tag> Open3D </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç‚¹äº‘æ•°æ®ç®€ä»‹]]></title>
      <url>/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/</url>
      <content type="html"><![CDATA[<h1>ç‚¹äº‘æ•°æ®æ¦‚è¿°</h1>
<hr>
<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯ç‚¹äº‘">ä¸€ã€ä»€ä¹ˆæ˜¯ç‚¹äº‘</h2>
<p>ç‚¹äº‘(Point Cloud)æ˜¯æŒ‡ç›®æ ‡è¡¨é¢ç‰¹æ€§çš„æµ·é‡ç‚¹é›†åˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow></mrow><mrow><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></msup></mrow><annotation encoding="application/x-tex">^{[1]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mtight">1</span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡æ¿€å…‰æµ‹é‡æˆ–æ‘„å½±æµ‹é‡è·å¾—çš„ã€‚èƒ½å¤Ÿä»¥è¾ƒé«˜çš„ç²¾åº¦ååº”åœ°è¡¨çš„çœŸå®æƒ…å†µï¼Œå¦‚åœ°é¢çŠ¶æ€ã€åœ°ç‰©åå°„ç‰¹å¾ç­‰ç­‰ã€‚</p>
<p><strong>æ¿€å…‰ç‚¹äº‘ä¸æ‘„å½±ç‚¹äº‘</strong></p>
<p>å¯¹äºæ¿€å…‰æµ‹é‡å¾—åˆ°çš„ç‚¹äº‘ï¼ŒåŒ…æ‹¬ä¸‰ç»´åæ ‡(XYZ)å’Œæ¿€å…‰åå°„å¼ºåº¦ã€‚è¿™ç±»ç‚¹äº‘é€šå¸¸å¯ä»¥é€šè¿‡å›æ³¢ç‰¹æ€§å’Œåå°„å¼ºåº¦åˆ¤åˆ«ç‰©ä½“çš„çŠ¶æ€ï¼Œä¾‹å¦‚æ¤è¢«ä¼šæœ‰å¤šæ¬¡å›æ³¢ï¼Œåå°„å¼ºåº¦ä¹Ÿè¦å¼±äºå»ºç­‘ã€‚</p>
<p>å¯¹äºæ‘„å½±æµ‹é‡å¾—åˆ°çš„ç‚¹äº‘ï¼Œé€šå¸¸åŒ…æ‹¬ä¸‰ç»´åæ ‡(XYZ)å’Œé¢œè‰²ä¿¡æ¯ã€‚é¢œè‰²ä¿¡æ¯åœ¨è¯†åˆ«ç‰©ä½“ä¸Šæœ‰ç€é‡è¦çš„è¯­ä¹‰ã€‚</p>
<p><strong>ç¨€ç–ç‚¹äº‘ä¸å¯†é›†ç‚¹äº‘</strong></p>
<p>ä¸‰ç»´åæ ‡æµ‹é‡æœºè·å¾—çš„ç‚¹æ•°é‡è¾ƒå°‘ï¼Œç‚¹ä¸ç‚¹çš„é—´è·ä¹Ÿè¾ƒå¤§ï¼Œç§°ä¸ºç¨€ç–ç‚¹äº‘(å¦‚å…¨ç«™ä»ªè·å–çš„ç‚¹äº‘)ã€‚</p>
<p>è€Œä¸‰ç»´æ¿€å…‰æ‰«æä»ªæˆ–ç…§ç›¸å¼æ‰«æä»ªå¾—åˆ°çš„ç‚¹äº‘ï¼Œæ•°é‡è¾ƒå¤šä¸”è¾ƒå¯†é›†ï¼Œç§°ä¸ºå¯†é›†ç‚¹äº‘ã€‚</p>
<p><strong>ç‚¹äº‘çš„æ ¼å¼</strong></p>
<p>äº‹å®ä¸Šç‚¹äº‘çš„å­˜å‚¨å°±æ˜¯ä¸€å¼ å±æ€§è¡¨ï¼Œå¸¸è§çš„æ ¼å¼æœ‰pts,asc,dat,stl,imw,xyz,txt,csvç­‰ã€‚</p>
<p>ä¸‹å›¾æ˜¯ç”¨CloudCompareè½¯ä»¶æ‰“å¼€çš„ç‚¹äº‘æ•°æ®ï¼š</p>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/image-20220327184915038.png" alt="image-20220327184915038" style="zoom: 33%;">
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/image-20220327185328465.png" alt="image-20220327185328465" style="zoom:33%;">
<hr>
<h2 id="äºŒã€ç‚¹äº‘èƒ½åšä»€ä¹ˆ">äºŒã€ç‚¹äº‘èƒ½åšä»€ä¹ˆ</h2>
<p>åŸºäºç‚¹äº‘æ•°æ®çš„ç‰¹æ€§ï¼Œç”Ÿäº§æ´»åŠ¨ä¸­å¸¸å¸¸å°†å…¶è¿ç”¨äºä¸‰ç»´å®ä½“é‡å»ºã€è‡ªåŠ¨é©¾é©¶ã€åœ°ç‰©åˆ†å‰²ã€åœ°å›¾ç»˜åˆ¶ã€æœºå™¨è§†è§‰ã€å®‰å…¨éšæ‚£æ’é™¤ç­‰é¢†åŸŸã€‚</p>
<h2 id="ä¸‰ã€ç‚¹äº‘ç ”ç©¶é¢†åŸŸ">ä¸‰ã€ç‚¹äº‘ç ”ç©¶é¢†åŸŸ</h2>
<p><strong>ç‚¹äº‘åˆ†å‰²</strong></p>
<p>ä¸€èˆ¬æ˜¯é€ä½“ç´ å¯¹ç‚¹äº‘æ•°æ®è¿›è¡Œåˆ¤åˆ«ï¼Œç±»ä¼¼å…¨å·ç§¯ä¸­çš„é€åƒç´ åˆ†å‰²ã€‚ç‚¹äº‘åˆ†å‰²åˆå¯ä»¥åˆ†ä¸º<strong>éƒ¨ä»¶</strong>åˆ†å‰²å’Œ<strong>æ•´ä½“</strong>åˆ†å‰²ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/image-20220327212317160.png" alt="image-20220327212317160" style="zoom: 33%;">
<p><strong>ç‚¹äº‘è¡¥å…¨</strong></p>
<p>ç‚¹äº‘è¡¥å…¨ç±»ä¼¼äºGANï¼Œå°±æ˜¯ç¼–ç å™¨å’Œè§£ç å™¨çš„å¯¹æŠ—è¿‡ç¨‹ã€‚èƒ½å¤Ÿå°†ç¼ºå¤±çš„ç‚¹äº‘éƒ¨ä»¶è¡¥å…¨ã€‚</p>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/image-20220327213827668.png" alt="image-20220327213827668" style="zoom: 33%;">
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/image-20220327213846262.png" alt="image-20220327213846262" style="zoom: 33%;">
<p><strong>ç‚¹äº‘é…å‡†</strong></p>
<p>ç‚¹äº‘é…å‡†ä¸€èˆ¬ç”¨äºåŒ»å­¦å’Œåœ°å›¾å­¦é¢†åŸŸï¼Œå°†ä¸¤ä¸ªä¸åŒæ‹æ‘„è§’åº¦çš„ç‚¹äº‘æ•°æ®è¿›è¡Œæ‹¼æ¥ã€èåˆã€‚</p>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/image-20220327214904741.png" alt="image-20220327214904741" style="zoom: 33%;">
<p><strong>ç‚¹äº‘æ£€æµ‹</strong></p>
<p>ç±»ä¼¼äºå›¾åƒè¯†åˆ«ï¼Œç‚¹äº‘æ£€æµ‹å¯¹ç‚¹äº‘ä¸­çš„åœ°ç‰©è¿›è¡Œè¯†åˆ«ã€è·Ÿè¸ªã€‚</p>
<img src="/2022/08/01/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E7%AE%80%E4%BB%8B/image-20220327220625693.png" alt="image-20220327220625693" style="zoom: 33%;">
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>[1] <a href="https://baike.baidu.com/item/%E7%82%B9%E4%BA%91/10823598?fr=aladdin">https://baike.baidu.com/item/ç‚¹äº‘/10823598?fr=aladdin</a></p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç‚¹äº‘ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è‹±è¯­å¸¸è§å‰ç¼€]]></title>
      <url>/2022/08/01/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91%E8%8B%B1%E8%AF%AD%E5%B8%B8%E8%A7%81%E5%89%8D%E7%BC%80/</url>
      <content type="html"><![CDATA[<h2 id="å¸¸è§å‰ç¼€">å¸¸è§å‰ç¼€</h2>
<h3 id="ä¸€ã€å¤–-å‡º">ä¸€ã€å¤–/å‡º</h3>
<ul>
<li>e</li>
<li>ex</li>
<li>ef</li>
</ul>
<p><code>export å‡ºå£</code></p>
<p><strong>åŠ©è®°</strong></p>
<p><code>e</code>ï¼Œæ˜¯æ¨é¢œ<code>xf</code>è¯¶ï¼Œä»–å‡ºå»æ‰¾æ–¯å¡è’‚äº†</p>
<h3 id="äºŒã€å†…-è¿›">äºŒã€å†…/è¿›</h3>
<ul>
<li>in</li>
<li>im</li>
</ul>
<p><code>inject æ³¨å°„</code></p>
<p><strong>åŠ©è®°</strong></p>
<p><code>i</code>å°æ™ºï¼Œä»Šå¤©çœ‹åˆ°<code>nm</code>èµ°è¿›å¤§æœ¨åšå£«å®¶äº†ã€‚</p>
<hr>
<h3 id="ä¸‰ã€å‰">ä¸‰ã€å‰</h3>
<p><strong>åŠ¨æ€å‘å‰</strong></p>
<ul>
<li>pro</li>
</ul>
<p><code>progress è¿›æ­¥ promote å‡å€¼ propel ä¿ƒè¿›</code></p>
<p><strong>é™æ€åœ¨å‰</strong></p>
<ul>
<li>pre</li>
</ul>
<p><code>prepare å‡†å¤‡ predicté¢„æµ‹</code></p>
<p><strong>åŠ©è®°</strong></p>
<p>åœ¨<code>p</code>æ°´èŠ‚æ—¶ï¼Œäººä»¬å¸¸å¸¸æ‹¿å‡º<code>ro</code>æ³¼å‘å‰æ–¹ï¼Œå³ä½¿å‰æ–¹æœ‰<code>re</code></p>
<h3 id="å››ã€å›-é‡æ–°">å››ã€å›/é‡æ–°</h3>
<ul>
<li>re</li>
</ul>
<p><code>return è¿”å› recede è¡°é€€</code></p>
<p><strong>åŠ©è®°</strong></p>
<p><code>re</code>è¿˜éœ€è¦è®°ï¼Ÿ</p>
<hr>
<h3 id="äº”ã€èšé›†-ä¸€èµ·-å…±åŒ">äº”ã€èšé›†/ä¸€èµ·/å…±åŒ</h3>
<ul>
<li>co</li>
<li>con</li>
<li>com</li>
<li>col</li>
</ul>
<p><code>collaborate åˆä½œ cooperate åˆä½œ combine ç»“åˆ</code></p>
<p><strong>åŠ©è®°</strong></p>
<p><code>c</code>ï¼Œ<code>o</code>å‘ç°äº†ï¼Œä¸ºå•¥<code>nmsl</code>å”¯ç‹¬å°‘äº†<code>s</code>ï¼Œè¿™è¿˜ç®—ä¸ªå…±åŒä½“å—ï¼Ÿ</p>
<h3 id="å…­ã€åˆ†æ•£-åˆ†å¼€">å…­ã€åˆ†æ•£/åˆ†å¼€</h3>
<ul>
<li>di</li>
<li>dis</li>
<li>dif</li>
</ul>
<p><code>divorce ç¦»å©š divide åˆ†æˆ distribute åˆ†é…</code></p>
<p><strong>åŠ©è®°</strong></p>
<p>å³ä½¿ä½ <code>di</code>ä¸€ç›´åœ¨<code>dis</code>ä»–ï¼Œä½†åœ¨æ²¡<code>f</code>æ°”ä¹‹å‰ï¼Œä»–ä»¬æ˜¯ä¸ä¼šåˆ†å¼€çš„</p>
<hr>
<h3 id="ä¸ƒã€ä¸Š-è¶…è¿‡">ä¸ƒã€ä¸Š/è¶…è¿‡</h3>
<ul>
<li>super</li>
<li>over</li>
<li>sur</li>
</ul>
<p><code>surrealism è¶…ç°å®ä¸»ä¹‰ surpass è¶…è¿‡</code></p>
<p><strong>åŠ©è®°</strong></p>
<p><code>superman</code>é£ä¸Šäº†å¤©ï¼è¦æ”¾æ¿€å…‰çœ¼äº†ï¼</p>
<p><code>over</code>ï¼Œæ”¶åˆ°ï¼é©¬ä¸Šå‡†å¤‡ç†Ÿäººsur~</p>
<h3 id="å…«ã€ä¸‹-ä¸è¶³">å…«ã€ä¸‹/ä¸è¶³</h3>
<ul>
<li>under</li>
<li>de</li>
<li>sub</li>
<li>sup</li>
</ul>
<p><code>decrease å‘ä¸‹</code></p>
<p><strong>åŠ©è®°</strong></p>
<p>é¢ï¼Œ<code>under</code>ä¸éœ€è¦ï¼Œä¸Šæ˜¯<code>r</code>ï¼Œä¸Šé¢åšå¥½äº†åè‡ªç„¶è¦åšä¸‹é¢<code>de</code>çš„<code>bp</code>ï¼Œ</p>
<hr>
<h3 id="ä¹ã€è½¬ç§»-è½¬å˜">ä¹ã€è½¬ç§»/è½¬å˜</h3>
<ul>
<li>trans</li>
</ul>
<p><code>transfer è½¬å˜</code></p>
<h3 id="åã€ç›¸äº’ä¹‹é—´">åã€ç›¸äº’ä¹‹é—´</h3>
<ul>
<li>inter</li>
</ul>
<p><code>internet äº’è”ç½‘</code></p>
<hr>
<h3 id="åä¸€ã€a-åŒå†™è¾…éŸ³å­—æ¯-å¼ºè°ƒ-æ— æ„ä¹‰">åä¸€ã€a+åŒå†™è¾…éŸ³å­—æ¯ = å¼ºè°ƒ/æ— æ„ä¹‰</h3>
<p><code>accompany é™ªåŒ affirm ç”³æ˜</code></p>
<h3 id="åäºŒã€å¦å®šå‰ç¼€">åäºŒã€å¦å®šå‰ç¼€</h3>
<ul>
<li>un</li>
<li>mis</li>
<li>in</li>
<li>im</li>
<li>dis</li>
<li>ab</li>
<li>il</li>
</ul>
<p><strong>åŠ©è®°</strong></p>
<p>ç‰©(<code>un</code>)<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mtext>ç†</mtext><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">ç†^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord cjk_fallback">ç†</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span>(<code>il</code>)è€å¸ˆæ€»æ˜¯æƒ³ç€è¿›å…¥(<code>inm</code>)AngleBaby(<code>ab</code>)çš„å®¶ï¼Œå³ä½¿è¿™æ ·åšä¼šè¢«äºº<code>dis</code>ï¼Œä½†ä»–å®åœ¨æ˜¯å¤ªæƒ³å¿µäº†<code>mis</code></p>
<p><strong>è¯æ ¹åŠ©è®°</strong></p>
<p>æœ‰æ‰‡é—¨å¯ä»¥<strong>è¿›å‡º</strong>ï¼Œå°æ™ºå¾€<strong>å‰</strong>èµ°å‡ºäº†é—¨ï¼Œä½†å‘ç°ç²¾çµçƒæ²¡æ‹¿ï¼Œåˆ<strong>å›</strong>å»äº†ã€‚éšåå°æ˜è·Ÿç€å°éœå°åˆš<strong>ä¸€èµ·</strong>å»æ—…è¡Œï¼Œä½†æœ€ç»ˆ<strong>åˆ†å¼€</strong>ã€‚å°æ˜å¾€<strong>ä¸Š</strong>èµ°ï¼Œ<strong>è¶…è¿‡</strong>äº†ç«ç®­é˜Ÿï¼Œä½†å‘ç°é’±<strong>ä¸å¤Ÿ</strong>äº†ï¼Œåˆå¾€<strong>ä¸‹</strong>èµ°è¿«ä½¿ç«ç®­é˜Ÿå°†ä»–ä»¬çš„é’±<strong>è½¬äº¤</strong>ç»™å°æ™ºï¼Œå‡ äºº<strong>ç›¸äº’</strong>ä¹‹é—´ç¬‘çš„å¯å¼€å¿ƒäº†ã€‚è™½ç„¶<strong>æ¯«æ— æ„ä¹‰</strong>ï¼Œä½†åˆ«<strong>å¦å®š</strong>å°æ™ºçš„åŠªåŠ›å“¦ã€‚</p>
<hr>
<h2 id="åç¼€">åç¼€</h2>
<h3 id="åŠ¨è¯åç¼€">åŠ¨è¯åç¼€</h3>
<ul>
<li>ate(å¤§éƒ¨åˆ†)</li>
<li>ize</li>
<li>ify</li>
<li>ish</li>
</ul>
<p><strong>åŠ©è®°</strong></p>
<p>è¿™åªå¤§å°ºå¯¸<code>size</code>çš„é±¼<code>fish</code>ï¼Œå…¶å®å¹¶æ²¡æœ‰å¸¦ä¸ŠåŠ¨è¯è¯æ ¹çš„å‘½è¿<code>fate</code>ï¼Œæˆ‘ä»¬å¯ä»¥è¯æ˜<code>exemplify</code></p>
<h3 id="å½¢å®¹è¯åç¼€">å½¢å®¹è¯åç¼€</h3>
<ul>
<li>ent</li>
<li>ful</li>
<li>ous</li>
<li>al</li>
<li>ive</li>
<li>ible</li>
<li>able</li>
<li>ant</li>
</ul>
<p><strong>åŠ©è®°</strong></p>
<p>ntå®¶æ—æœ‰ä¸¤å¤§å°‘çˆ·ï¼Œä¸€ä¸ªå«<code>e</code>ä¸€ä¸ªå«<code>a</code>ï¼Œä»–ä»¬æœ‰ä¸¤æŠŠæ­¦å™¨ï¼Œåˆ†è´æ˜¯<code>ible</code>å’Œ<code>able</code>ã€‚<code>a</code>å°‘çˆ·å­¦çš„æ˜¯<code>al</code>ä¸“ä¸šï¼Œç»©ç‚¹å…¨æ˜¯<code>ful</code>æ»¡åˆ†ã€‚<code>e</code>å°‘çˆ·åˆ™æ˜¯ä½œä¸ºå¶åƒå‡ºé“<code>ive</code>ï¼Œè·Ÿå¤§å®¶çš„å…³ç³»<code>ous</code>éƒ½ä¸é”™ã€‚</p>
<p><strong>åè¯åç¼€</strong></p>
<ul>
<li>ion</li>
<li>tion</li>
<li>ation</li>
<li>ness</li>
<li>ity</li>
<li>ality</li>
<li>ment</li>
<li>ence</li>
<li>ance</li>
<li>ism</li>
</ul>
<p><strong>åŠ©è®°</strong></p>
<p><code>ion</code>å®¶æ—ã€<code>nce</code>å®¶æ—ã€<code>ity</code>å®¶æ—ï¼Œ<code>ism</code>å’Œ<code>ment</code>ï¼Œ<code>ness</code>ç‹¬ä¸€æ¡£</p>
<hr>
<h2 id="è¯æ ¹">è¯æ ¹</h2>
<h3 id="Day1">Day1</h3>
<p><strong>radi</strong></p>
<p>æ¤ç‰©çš„<strong>æ ¹</strong>åœ¨ruaåœ°~</p>
<ul>
<li>radical adj. æ ¹æœ¬çš„ï¼Œå½»åº•çš„</li>
<li>eradicate v. æ ¹é™¤</li>
<li>radiate v. è¾å°„/å‘æ•£</li>
<li>radiant adj. è¾å°„çš„ï¼Œå®¹å…‰ç„•å‘çš„</li>
<li>radio n. æ”¶éŸ³æœº</li>
<li>radioactive adj. æ”¾å°„æ€§çš„</li>
<li>radium n. é•­</li>
</ul>
<p><strong>pose</strong></p>
<p><strong>æ‘†æ”¾</strong>ä¸€ä¸ªpose~</p>
<ul>
<li>
<p>expose v. æš´éœ²ï¼Œæ­éœ²</p>
</li>
<li>
<p>compose v. ç»„æˆï¼Œåˆ›ä½œï¼Œåˆ›é€ </p>
</li>
<li>
<p>compositon n. ä½œæ–‡/å“/æ›²</p>
</li>
<li>
<p>composite adj. å¤åˆçš„ï¼Œåˆæˆçš„</p>
</li>
<li>
<p>propose v. æ±‚å©š/æå/æè®®</p>
</li>
<li>
<p>dispose v. å¤„ç†/æ‰”æ‰/å®‰æ’</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Man propose, God dispose</span><br><span class="line"><span class="comment"># å°½äººäº‹ï¼Œå¬å¤©å‘½</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>oppose v. åå¯¹</p>
</li>
<li>
<p>opponent n. æ•Œäºº/å¯¹æ‰‹</p>
</li>
<li>
<p>depose v. åºŸé™¤/ç½¢å…</p>
</li>
<li>
<p>deposit n. æ²‰æ·€ç‰©/å®šé‡‘</p>
</li>
</ul>
<p><strong>vers(t)</strong></p>
<p>å—¡å—¡å—¡<strong>è½¬</strong>èµ·æ¥å–½ï¼</p>
<ul>
<li>
<p>reverse v. æ‰­è½¬ï¼Œé¢ å€’</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reverse the trend. <span class="comment"># æ‰­è½¬è¶‹åŠ¿</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>avert v. è½¬ç§»ï¼Œé¿å…</p>
</li>
<li>
<p>convert v. è½¬å˜/æ¢ç®—/æ”¹å˜ä¿¡ä»°</p>
</li>
<li>
<p>divert v. è½¬ç§»/æ”¹é“</p>
</li>
<li>
<p>diverse adj. å¤šæ ·æ€§çš„</p>
</li>
<li>
<p>introvert n. å†…å‘çš„äºº</p>
</li>
<li>
<p>extrovert n. å¤–å‘çš„äºº</p>
</li>
<li>
<p>anniversary n. å‘¨å¹´çºªå¿µ</p>
</li>
<li>
<p>controversy n. äº‰è®º/äº‰åµ</p>
</li>
</ul>
<p><strong>press</strong></p>
<p><strong>å‹</strong></p>
<ul>
<li>compress v. å‹ç¼© condense æµ“ç¼©</li>
<li>depress v. ä½¿å‹æŠ‘/è§æ¡/ä½è¿· depression å‹æŠ‘</li>
<li>suppress v. é•‡å‹/æŠ‘åˆ¶/æ§åˆ¶</li>
<li>impress v. ä½¿å°è±¡æ·±åˆ»</li>
<li>express v. è¡¨è¾¾ adj. ç‰¹å¿«çš„ n. å¿«é€’</li>
<li>repress v. æŠ‘åˆ¶/å¿ä½(æ„Ÿæƒ…)</li>
</ul>
<p><strong>duce</strong></p>
<p>èµŒåš<code>du</code>ä¼šæŠŠè­¦è½¦<code>ce</code><strong>å¼•</strong>æ¥çš„å“¦</p>
<ul>
<li>produce v. ç”Ÿäº§/äº§ç”Ÿã€å¼•èµ·</li>
<li>induce v. ä¼˜åŒ–/å¼•è¯± = tempt</li>
<li>seduce v. è¯±æƒ‘/è‰²è¯±/å‹¾å¼•</li>
<li>deduce v. æ¨ç†/æ¨æ–­ = conclude = learn from = infer</li>
<li>educe v. ä½¿æ˜¾ç° educate v. æ•™è‚²</li>
<li>traduce v. ä¸­ä¼¤/è¯½è°¤</li>
<li>introduce v. ä»‹ç»/å¼•å…¥/æå‡º</li>
<li>reduce v. å‡å°‘/ç¼©å°/é™ä½</li>
</ul>
<p><strong>gress</strong></p>
<p><strong>èµ°</strong>åœ¨è‰åœ°(grass)ä¸Š</p>
<ul>
<li>congress n. å›½ä¼š/ä»£è¡¨å¤§ä¼š</li>
<li>regress v. å€’é€€/é€€åŒ– ----&gt; recede v. é€€æ½®/è¡°é€€</li>
<li>aggressive adj. æ¿€è¿›çš„</li>
<li>progress n. è¿›æ­¥/è¿›å±• --&gt;advance v. è¿›æ­¥/å‰è¿›</li>
<li>transgress v. è¶Šè½¨/è¿å/è¿èƒŒ</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¤è¯—]]></title>
      <url>/2022/08/01/%E3%80%90%E8%AF%97%E8%AF%8D%E5%90%8D%E5%8F%A5%E3%80%91%E5%8F%A4%E8%AF%97/</url>
      <content type="html"><![CDATA[<hr>
<h2 id="æµ£æºªæ²™Â·è°å¿µè¥¿é£ç‹¬è‡ªå‡‰">æµ£æºªæ²™Â·è°å¿µè¥¿é£ç‹¬è‡ªå‡‰</h2>
<p>(æ¸…)çº³å…°æ€§å¾·</p>
<p>è°å¿µè¥¿é£ç‹¬è‡ªå‡‰ï¼Œè§è§é»„å¶é—­ç–çª—ï¼Œæ²‰æ€å¾€äº‹ç«‹æ®‹é˜³ã€‚</p>
<p>è¢«é…’è«æƒŠæ˜¥ç¡é†’ï¼ŒèµŒä¹¦æ¶ˆå¾—æ³¼èŒ¶é¦™ï¼Œå½“æ—¶åªé“æ˜¯å¯»å¸¸ã€‚</p>
<hr>
<h2 id="èµ åˆ˜ä¾å¾¡äºŒé¦–Â·å…¶ä¸€">èµ åˆ˜ä¾å¾¡äºŒé¦–Â·å…¶ä¸€</h2>
<p>(æ˜)ç‹å®ˆä»</p>
<p>é“è‡ªå‡æ²‰å®æœ‰å®šï¼Œå¿ƒå­˜æ°”èŠ‚ä¸æ— åã€‚</p>
<p>çŸ¥å›å·²å¾—è™šèˆŸæ„ï¼Œéšå¤„é£æ³¢åªæ™ç„¶ã€‚</p>
<hr>
<h2 id="å®¢ä¸­è¡Œ">å®¢ä¸­è¡Œ</h2>
<p>æç™½</p>
<p>å…°é™µç¾é…’éƒé‡‘é¦™ï¼Œç‰ç¢—ç››æ¥ç¥ç€å…‰ã€‚</p>
<p>ä½†ä½¿ä¸»äººèƒ½é†‰å®¢ï¼Œä¸çŸ¥ä½•å¤„æ˜¯ä»–ä¹¡ã€‚0</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> æ¢¦æ—¶é£æœˆ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è¯—æ–‡ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Argparseæ¨¡å—å¸¸è§ç”¨æ³•]]></title>
      <url>/2022/07/29/%E3%80%90Python%E3%80%91Argparse/</url>
      <content type="html"><![CDATA[<h1>Argparseæ¨¡å—å¸¸è§ç”¨æ³•</h1>
<hr>
<p><code>argparse</code>æ¨¡å—æ˜¯Pythonä¸­ç”¨æ¥è¯»å–å‘½ä»¤è¡Œå‚æ•°çš„æ¨¡å—ï¼Œç¨‹åºå®šä¹‰å®ƒéœ€è¦çš„å‚æ•°ï¼Œç„¶å<code>argparse</code>ä¼šè‡ªåŠ¨ä»<code>sys.argv</code>ä¸­è§£æå‡ºè¿™äº›å‚æ•°ã€‚</p>
<h2 id="ä¸€ã€åˆ›å»ºä¸€ä¸ªè§£é‡Šå™¨">ä¸€ã€åˆ›å»ºä¸€ä¸ªè§£é‡Šå™¨</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  argparse</span><br><span class="line"></span><br><span class="line">parser=argparse.ArgumentParser(description=<span class="string">&quot;Test&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>æ¥ç€æˆ‘ä»¬è¯•è¯•æ‰§è¡Œè¯¥ç¨‹åºï¼Œä½¿ç”¨<code>-h</code>å‚æ•°æ‰“å°å¸®åŠ©æ–‡æ¡£ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python main.py -h</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">usage: main.py [-h]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Test</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">optional arguments:</span></span><br><span class="line"><span class="string">  -h, --help  show this help message and exit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>description</code>æ˜¯åœ¨å¸®åŠ©æ–‡æ¡£è§£é‡Šå‚æ•°å‰æä¾›çš„æ–‡æœ¬ä¿¡æ¯ã€‚</p>
<p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œç»™å‡ºäº†ArgumentParseå¯¹è±¡çš„å‚æ•°è§£é‡Šï¼š</p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#prog">prog</a> - é¡¹ç›®åç§° (default: <code>os.path.basename(sys.argv[0])</code>)</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#usage">usage</a> - æè¿°ç¨‹åºç”¨é€”çš„å­—ç¬¦ä¸²ï¼ˆé»˜è®¤å€¼ï¼šä»æ·»åŠ åˆ°è§£æå™¨çš„å‚æ•°ç”Ÿæˆï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#description">description</a> - åœ¨å‚æ•°å¸®åŠ©æ–‡æ¡£ä¹‹å‰æ˜¾ç¤ºçš„æ–‡æœ¬ï¼ˆé»˜è®¤å€¼ï¼šæ— ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#epilog">epilog</a> - åœ¨å‚æ•°å¸®åŠ©æ–‡æ¡£ä¹‹åæ˜¾ç¤ºçš„æ–‡æœ¬ï¼ˆé»˜è®¤å€¼ï¼šæ— ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#parents">parents</a> - ä¸€ä¸ª <a href="https://docs.python.org/zh-cn/3/library/argparse.html#argparse.ArgumentParser"><code>ArgumentParser</code></a> å¯¹è±¡çš„åˆ—è¡¨ï¼Œå®ƒä»¬çš„å‚æ•°ä¹Ÿåº”åŒ…å«åœ¨å†…</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#formatter-class">formatter_class</a> - ç”¨äºè‡ªå®šä¹‰å¸®åŠ©æ–‡æ¡£è¾“å‡ºæ ¼å¼çš„ç±»</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#prefix-chars">prefix_chars</a> - å¯é€‰å‚æ•°çš„å‰ç¼€å­—ç¬¦é›†åˆï¼ˆé»˜è®¤å€¼ï¼š â€˜-â€™ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#fromfile-prefix-chars">fromfile_prefix_chars</a> - å½“éœ€è¦ä»æ–‡ä»¶ä¸­è¯»å–å…¶ä»–å‚æ•°æ—¶ï¼Œç”¨äºæ ‡è¯†æ–‡ä»¶åçš„å‰ç¼€å­—ç¬¦é›†åˆï¼ˆé»˜è®¤å€¼ï¼š <code>None</code>ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#argument-default">argument_default</a> - å‚æ•°çš„å…¨å±€é»˜è®¤å€¼ï¼ˆé»˜è®¤å€¼ï¼š <code>None</code>ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#conflict-handler">conflict_handler</a> - è§£å†³å†²çªé€‰é¡¹çš„ç­–ç•¥ï¼ˆé€šå¸¸æ˜¯ä¸å¿…è¦çš„ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#add-help">add_help</a> - ä¸ºè§£æå™¨æ·»åŠ ä¸€ä¸ª <code>-h/--help</code> é€‰é¡¹ï¼ˆé»˜è®¤å€¼ï¼š <code>True</code>ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#allow-abbrev">allow_abbrev</a> - å¦‚æœç¼©å†™æ˜¯æ— æ­§ä¹‰çš„ï¼Œåˆ™å…è®¸ç¼©å†™é•¿é€‰é¡¹ ï¼ˆé»˜è®¤å€¼ï¼š<code>True</code>ï¼‰</li>
<li><a href="https://docs.python.org/zh-cn/3/library/argparse.html#exit-on-error">exit_on_error</a> - å†³å®šå½“é”™è¯¯å‘ç”Ÿæ—¶æ˜¯å¦è®© ArgumentParser é™„å¸¦é”™è¯¯ä¿¡æ¯é€€å‡ºã€‚ (é»˜è®¤å€¼: <code>True</code>)</li>
</ul>
<hr>
<h2 id="äºŒã€ä¸ºè§£é‡Šå™¨æ·»åŠ å‚æ•°">äºŒã€ä¸ºè§£é‡Šå™¨æ·»åŠ å‚æ•°</h2>
<p>æ­¤æ—¶éœ€è¦ä½¿ç”¨parserçš„<code>add_argument</code>æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯å¸¸è§ç”¨æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&#x27;-n&#x27;</span>,<span class="string">&#x27;--name&#x27;</span>,default=<span class="string">&quot;Torture&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-u&#x27;</span>,<span class="string">&#x27;--university&#x27;</span>,default=<span class="string">&quot;UCAS&quot;</span>,<span class="built_in">help</span>=<span class="string">&quot;å‘ç”Ÿä»€ä¹ˆäº‹äº†&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(parser.parse_args())</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡æ‰“å°<code>parser.parse_args()</code>æ¥æŸ¥çœ‹å½“å‰çš„è§£é‡Šå™¨å‚æ•°çŠ¶æ€ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Namespace(name=&#x27;Torture&#x27;, university=&#x27;UCAS&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå‘½ä»¤<code>python main.py -h</code>æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">usage: main.py [-h] [-n NAME] [-u UNIVERSITY]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Test</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">optional arguments:</span></span><br><span class="line"><span class="string">  -h, --help            show this help message and exit</span></span><br><span class="line"><span class="string">  -n NAME, --name NAME</span></span><br><span class="line"><span class="string">  -u UNIVERSITY, --university UNIVERSITY</span></span><br><span class="line"><span class="string">                        å‘ç”Ÿä»€ä¹ˆäº‹äº†</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å‘ç°ï¼Œç°åœ¨çš„å‚æ•°æœ‰ä¸‰ä¸ªäº†ã€‚å¯ä»¥é€šè¿‡<code>-h</code>,<code>-n</code>,<code>-u</code>æ¥è°ƒç”¨è¿™äº›å‚æ•°ã€‚å…³äº<code>add_argument</code>æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨äºå­˜æ”¾åç§°æˆ–é€‰é¡¹å­—ç¬¦ä¸²çš„ã€‚å‰é¢ä¸€ä¸ªå‚æ•°<code>-u</code>æ˜¯ç®€åŒ–çš„è¾“å…¥ï¼Œåªæœ‰<code>-</code>å‰ç¼€ä¼šè¢«ä»¥<strong>é€‰é¡¹</strong>è¿›è¡Œè¯†åˆ«ï¼Œå‰©ä¸‹çš„å‚æ•°éƒ½ä¼šè¢«å‡å®šä¸º<strong>ä½ç½®å‚æ•°</strong>ã€‚æ‰€ä»¥ï¼Œ<code>--university</code>åˆ™æ˜¯è¯¥å‚æ•°çš„åç§°ã€‚å½“ç„¶é€šè¿‡<code>-u</code>æˆ–æ˜¯<code>--university</code>éƒ½èƒ½å¾€è¯¥å‚æ•°ä¸­è¾“å…¥ã€‚</p>
<p><code>default</code>æ˜¯é»˜è®¤å€¼å‚æ•°ï¼Œç”¨äºè®¾å®šé»˜è®¤å€¼çš„ï¼Œè€Œ<code>help</code>åˆ™æ˜¯åœ¨å¸®åŠ©æ–‡æ¡£ä¸­ç”¨æ¥æè¿°è¯¥å‚æ•°ã€‚</p>
<h4 id="æŒ‡å®šå‚æ•°åŠ¨ä½œ">æŒ‡å®šå‚æ•°åŠ¨ä½œ</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&#x27;-f&#x27;</span>,<span class="string">&#x27;--foo&#x27;</span>,action=<span class="string">&#x27;store&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><code>action</code>ç”¨æ¥æŒ‡å®šåŠ¨ä½œï¼Œ&quot;store&quot;æ˜¯é»˜è®¤å€¼ï¼Œç”¨äºå­˜å‚¨å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python main.py -f <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Namespace(foo=&#x27;10&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šå­˜å‚¨å¸ƒå°”å‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&#x27;-f&#x27;</span>,<span class="string">&#x27;--foo&#x27;</span>,action=<span class="string">&#x27;store_true&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Namespace(foo=False)</span></span><br></pre></td></tr></table></figure>
<p><code>append</code>æ˜¯å­˜å‚¨ä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†æ¯ä¸ªå‚æ•°çš„å€¼è¿½åŠ ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&#x27;-f&#x27;</span>,<span class="string">&#x27;--foo&#x27;</span>,action=<span class="string">&#x27;append&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(parser.parse_args(<span class="string">&#x27;-f 1 -f 2 -f 3&#x27;</span>.split()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Namespace(foo=[&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;])</span></span><br></pre></td></tr></table></figure>
<h4 id="æŒ‡å®šç‰ˆæœ¬ä¿¡æ¯">æŒ‡å®šç‰ˆæœ¬ä¿¡æ¯</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parser=argparse.ArgumentParser(description=<span class="string">&quot;Test&quot;</span>,prog=<span class="string">&quot;ARGPARSE&quot;</span>)</span><br><span class="line"></span><br><span class="line">parser.add_argument(<span class="string">&#x27;-v&#x27;</span>,<span class="string">&#x27;--version&#x27;</span>,action=<span class="string">&#x27;version&#x27;</span>,version=<span class="string">&#x27;%(prog)s 2.0&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æŒ‡å®š<code>version</code>åŠ¨ä½œå’Œ<code>version</code>å‚æ•°è¿›è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python main.py -v</span><br><span class="line"></span><br><span class="line"><span class="comment">#  ARGPARSE 2.0</span></span><br></pre></td></tr></table></figure>
<h4 id="æŒ‡å®šå‚æ•°ç±»å‹">æŒ‡å®šå‚æ•°ç±»å‹</h4>
<p><code>type</code>å‚æ•°å¯ä»¥æŒ‡å®šç±»å‹ï¼Œä¸€èˆ¬è¯»è¿›æ¥çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡<code>type</code>å‚æ•°è½¬æ¢åˆ°éœ€è¦çš„æ ¼å¼</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">parser=argparse.ArgumentParser(description=<span class="string">&quot;Test&quot;</span>,prog=<span class="string">&quot;ARGPARSE&quot;</span>)</span><br><span class="line"></span><br><span class="line">parser.add_argument(<span class="string">&quot;-d&quot;</span>,<span class="string">&#x27;--data&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-f&#x27;</span>,<span class="string">&#x27;--float&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">float</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-p&#x27;</span>,<span class="string">&#x27;--path&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">open</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-c&#x27;</span>,<span class="string">&#x27;--code&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">ord</span>)</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥å‚æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python main.py -d <span class="number">10</span> -f <span class="number">10.658</span> -p <span class="number">1.</span>txt -c <span class="string">&#x27;t&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°çš„ç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Namespace(data=<span class="number">10</span>, <span class="built_in">float</span>=<span class="number">10.658</span>, path=&lt;_io.TextIOWrapper name=<span class="string">&#x27;1.txt&#x27;</span> mode=<span class="string">&#x27;r&#x27;</span> encoding=<span class="string">&#x27;cp936&#x27;</span>&gt;, code=<span class="number">116</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‡å®šå‚æ•°æ•°é‡">æŒ‡å®šå‚æ•°æ•°é‡</h4>
<p>é€šè¿‡<code>nargs</code>å‚æ•°å¯ä»¥å…³è”ä¸åŒæ•°ç›®çš„å‘½ä»¤è¡Œå‚æ•°åˆ°å•ä¸€çš„åŠ¨ä½œï¼Œæ”¯æŒçš„å€¼æœ‰ï¼š</p>
<p><strong>N</strong></p>
<ul>
<li>
<p>æ•´æ•°ï¼Œå‘½ä»¤è¡Œä¸­çš„<strong>N</strong>ä¸ªå‚æ•°ä¼šè¢«èšé›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&quot;-d&quot;</span>,<span class="string">&#x27;--data&#x27;</span>,nargs=<span class="number">2</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-f&#x27;</span>,<span class="string">&#x27;--float&#x27;</span>,nargs=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(parser.parse_args(<span class="string">&quot;-d 1 2 -f 1.0&quot;</span>.split()))</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Namespace(data=[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>], <span class="built_in">float</span>=[<span class="string">&#x27;1.0&#x27;</span>])</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>+</strong></p>
<ul>
<li>è‡³å°‘æœ‰ä¸€ä¸ªå€¼è¢«åŠ å…¥å‚æ•°</li>
<li>æ²¡æœ‰çš„è¯ä¼šæŠ¥é”™</li>
</ul>
<p><strong>?</strong></p>
<ul>
<li>è‡³å°‘æœ‰é›¶ä¸ªå€¼è¢«åŠ å…¥å‚æ•°</li>
<li>æ²¡æœ‰çš„è¯ä¼šè°ƒç”¨defaultå€¼</li>
</ul>
<hr>
<h2 id="ä¸‰ã€è·å–å‚æ•°">ä¸‰ã€è·å–å‚æ•°</h2>
<p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªè½½å…¥çš„å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">arg_parse</span>():</span><br><span class="line">    parser=argparse.ArgumentParser(description=<span class="string">&quot;Test&quot;</span>,prog=<span class="string">&quot;ARGPARSE&quot;</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&quot;-d&quot;</span>,<span class="string">&#x27;--data&#x27;</span>,nargs=<span class="number">2</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-f&#x27;</span>,<span class="string">&#x27;--float&#x27;</span>,nargs=<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> parser.parse_args()</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„å°†<code>parser</code>è¿”å›å›æ¥</p>
<p>ç„¶åå¯ä»¥é€šè¿‡è¯¥å‡½æ•°è·å–å‚æ•°ä¿¡æ¯äº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arg=arg_parse()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;data :&quot;</span>,arg.data)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">python main.py -d 1 2 -f 3.2</span></span><br><span class="line"><span class="string">data : [&#x27;1&#x27;, &#x27;2&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<hr>
<p>æ›´å¤šå†…å®¹è¯¦è§å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.python.org/zh-cn/3/library/argparse.html#the-add-argument-method">https://docs.python.org/zh-cn/3/library/argparse.html#the-add-argument-method</a>.</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ’ä»¶å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Unit3 å½¢å®¹è¯å’Œå‰¯è¯]]></title>
      <url>/2022/07/29/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit3%20%E5%BD%A2%E5%AE%B9%E8%AF%8D%E5%92%8C%E5%89%AF%E8%AF%8D/</url>
      <content type="html"><![CDATA[<h1>Unit3 å½¢å®¹è¯å’Œå‰¯è¯</h1>
<hr>
<p>å½¢å®¹è¯æ˜¯ç”¨æ¥ä¿®é¥°åè¯ï¼Œè¯´æ˜äº‹ç‰©æˆ–äººçš„æ€§è´¨ã€çŠ¶æ€æˆ–ç‰¹å¾çš„è¯ï¼Œä¸€èˆ¬åœ¨å¥ä¸­ä¸»è¦å……å½“å®šè¯­æˆ–è¡¨è¯­ï¼Œè¿˜èƒ½åšè¡¥è¯­å’ŒçŠ¶è¯­ã€‚</p>
<p>å‰¯è¯ä¸»è¦ç”¨æ¥ä¿®é¥°åŠ¨è¯ã€å½¢å®¹è¯ã€å‰¯è¯æˆ–å…¶ä»–ç»“æ„çš„è¯ã€‚ä¸€èˆ¬åšçŠ¶è¯­ã€‚</p>
<hr>
<h2 id="ä¸€ã€å½¢å®¹è¯">ä¸€ã€å½¢å®¹è¯</h2>
<blockquote>
<p>è¡¨è¯­ï¼šè¯´æ˜ä¸»è¯­çš„èº«ä»½ã€æ€§è´¨ã€å“æ€§ã€ç‰¹å¾å’ŒçŠ¶æ€ï¼Œä¾‹å¦‚ï¼šHe is [a student].</p>
<p>å®šè¯­ï¼šä¿®é¥°ã€é™å®šã€è¯´æ˜åè¯æˆ–ä»£è¯çš„æ€§è´¨ã€å“è´¨ã€ç‰¹å¾ï¼Œä¾‹å¦‚ï¼šItâ€™s a [bad] manner.</p>
</blockquote>
<h3 id="1-1-ä½œå®šè¯­æ—¶çš„åŸºæœ¬ç”¨æ³•">1.1  ä½œå®šè¯­æ—¶çš„åŸºæœ¬ç”¨æ³•</h3>
<p>å•ä¸ªå½¢å®¹è¯ä½œå®šè¯­ï¼Œä¸€èˆ¬æ”¾åœ¨æ‰€ä¿®é¥°çš„åè¯ä¹‹å‰ã€‚å½¢å®¹è¯çŸ­è¯­åšå®šè¯­æ—¶ï¼Œéœ€æ”¾åœ¨æ‰€ä¿®é¥°çš„åè¯ä¹‹åã€‚</p>
<p>è€Œåœ¨ä¿®é¥°å¤åˆä¸å®šä»£è¯æ—¶(å¦‚<code>somebody, someone, something</code>ç­‰)åˆ™å¿…é¡»æ”¾åœ¨ä¸å®šä»£è¯åé¢ã€‚</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">He read an interesting storybook this morning.</span><br><span class="line">I know an actor suitable <span class="keyword">for</span> hte part <span class="keyword">in</span> the play.</span><br><span class="line">I would like something cheaper.</span><br></pre></td></tr></table></figure>
<h3 id="1-2-å¤šä¸ªå½¢å®¹è¯ä¿®é¥°åè¯çš„é¡ºåº">1.2  å¤šä¸ªå½¢å®¹è¯ä¿®é¥°åè¯çš„é¡ºåº</h3>
<ol>
<li>å† è¯ã€ä»£è¯</li>
<li>åºæ•°è¯ã€åŸºæ•°è¯</li>
<li>ä¸€èˆ¬æç»˜æ€§å½¢å®¹è¯</li>
<li>å¤§å°ã€é•¿çŸ­ã€å½¢çŠ¶</li>
<li>å¹´é¾„ã€æ–°æ—§</li>
<li>é¢œè‰²</li>
<li>å›½ç±ã€å‡ºå¤„</li>
<li>ææ–™</li>
<li>ç”¨é€”ã€ç±»åˆ«</li>
</ol>
<p><strong>å† ä»£</strong>å±±ä¸‹ï¼Œæœ‰ä¸€ä½<strong>æ•°</strong>ç†<strong>åŸº</strong>åœ°ç­çš„å­¦ç”Ÿåœ¨ç”»ç”»ï¼Œå®£çº¸ä¸Šä»–å°†å±±çš„å¤–åœ¨<strong>è½®å»“</strong>ç»˜åˆ¶äº†ä¸‹æ¥ã€‚æ­¤æ—¶ï¼Œä¸€ä½ç™½å‘ç¿©ç„¶çš„<strong>è€</strong>è€…å‡ºç°åœ¨ä»–çš„èº«åï¼Œ<strong>æ–°ä¸æ—§</strong>çš„æ—¶ä»£ä¼¼ä¹ä¸æ­¤äº¤æ±‡ã€‚è€äººçœ‹å­¦ç”Ÿçš„ç”»ç²¾å¦™ç»ä¼¦ï¼Œå¯æƒœæ²¡æœ‰<strong>è‰²å½©</strong>ï¼Œä¾¿ä¸Šå‰è¯¢é—®å­¦ç”Ÿçš„<strong>å›½ç±</strong>å’Œ<strong>å‡ºå¤„</strong>ã€‚æ²¡æƒ³åˆ°ï¼Œè¿™ä½å­¦ç”Ÿç«Ÿç„¶æ˜¯ä¸ªé—´è°ï¼Œèº«ä¸Šæ‰€æœ‰çš„<strong>ææ–™</strong>éƒ½æ˜¯å¦™å¦™å·¥å…·ï¼è¿™äº›å–µå–µå·¥å…·æŒ‰ç…§<strong>ç±»åˆ«</strong>ï¼Œå„æœ‰å…¶<strong>ç”¨é€”</strong>ã€‚</p>
<h3 id="1-3-åŒä¸€å½¢å®¹è¯åšå‰ç½®å®šè¯­å’Œåç½®å®šè¯­çš„åŒºåˆ«">1.3  åŒä¸€å½¢å®¹è¯åšå‰ç½®å®šè¯­å’Œåç½®å®šè¯­çš„åŒºåˆ«</h3>
<p>éƒ¨åˆ†å½¢å®¹è¯åšå‰ç½®å’Œåšåç½®å®Œå…¨ä¸åŒ</p>
<table>
<thead>
<tr>
<th style="text-align:center">å½¢å®¹è¯</th>
<th style="text-align:center">å‰ç½®å«ä¹‰</th>
<th style="text-align:center">åç½®å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">absent</td>
<td style="text-align:center">èŒ«ç„¶çš„ï¼Œææƒšçš„</td>
<td style="text-align:center">ç¼ºå¸­çš„</td>
</tr>
<tr>
<td style="text-align:center">present</td>
<td style="text-align:center">ç°åœ¨çš„</td>
<td style="text-align:center">å‡ºå¸­çš„</td>
</tr>
<tr>
<td style="text-align:center">concerned</td>
<td style="text-align:center">å¿§å¿ƒå¿¡å¿¡çš„</td>
<td style="text-align:center">æœ‰å…³çš„</td>
</tr>
<tr>
<td style="text-align:center">responsible</td>
<td style="text-align:center">å¯é çš„</td>
<td style="text-align:center">åº”è´Ÿè´£çš„</td>
</tr>
<tr>
<td style="text-align:center">involved</td>
<td style="text-align:center">å¤æ‚éš¾æ‡‚çš„</td>
<td style="text-align:center">ç›¸å…³çš„ï¼Œæœ‰å…³çš„</td>
</tr>
</tbody>
</table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">I am an accountant. It&#x27;s a responsible position, I suppose, but not very exciting.</span><br><span class="line"># æˆ‘æ˜¯ä¸ªä¼šè®¡ï¼Œè™½ç„¶æ˜¯è´£ä»»é‡å¤§çš„èŒä½ï¼Œä½†å¹¶ä¸æœ‰è¶£</span><br><span class="line">The man responsible for finding the volunteers is Dr.Charles Weber.</span><br><span class="line"># è´Ÿè´£å¯»æ‰¾å¿—æ„¿è€…çš„äººæ˜¯æŸ¥å°”æ–¯éŸ¦ä¼¯</span><br></pre></td></tr></table></figure>
<h3 id="1-4-ä»¥-a-å¼€å¤´çš„å½¢å®¹è¯">1.4  ä»¥**a-**å¼€å¤´çš„å½¢å®¹è¯</h3>
<p>è¿™äº›è¯åªèƒ½åšè¡¨è¯­ï¼Œä¸åšå‰ç½®å®šè¯­ï¼Œå¯ä»¥åšåç½®å®šè¯­ï¼Œç›¸å½“äºä¸€ä¸ªå®šè¯­ä»å¥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">afraid</span><br><span class="line">asleep</span><br><span class="line">alike</span><br><span class="line">alive</span><br><span class="line">awake</span><br><span class="line">alone</span><br><span class="line">ashamed</span><br><span class="line"></span><br><span class="line">Time alone will show who was right.</span><br><span class="line"><span class="comment"># å”¯ç‹¬æ—¶é—´èƒ½è¯æ˜è°æ˜¯å¯¹çš„</span></span><br><span class="line">aloneç›¸å½“äº which/that <span class="keyword">is</span> alone</span><br></pre></td></tr></table></figure>
<h3 id="1-5-å½¢å®¹è¯æˆ–å½¢å®¹è¯çŸ­è¯­ä½œçŠ¶è¯­">1.5  å½¢å®¹è¯æˆ–å½¢å®¹è¯çŸ­è¯­ä½œçŠ¶è¯­</h3>
<p>è¿™ç§æƒ…å†µä¸€èˆ¬ç”¨äºæ„ä¹‰ä¸Šçš„å¢è¡¥ï¼Œä½ç½®ååˆ†çµæ´»ã€‚</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Crusoe stared at the footprint, full of fear.</span><br><span class="line">Tom, very ill, sent <span class="keyword">for</span> a doctor.</span><br><span class="line">Old <span class="keyword">or</span> young, they <span class="built_in">all</span> like these cartoon pictures.</span><br></pre></td></tr></table></figure>
<h3 id="1-6-ä»¥-ingã€-edç»“å°¾çš„å½¢å®¹è¯">1.6  ä»¥-ingã€-edç»“å°¾çš„å½¢å®¹è¯</h3>
<p>æ­¤ç±»å½¢å®¹è¯ç”±åŠ¨è¯å˜åŒ–è€Œæ¥ï¼Œ<strong>-ing</strong>ä¸€èˆ¬ä¿®é¥°ç‰©ï¼Œè¡¨ç¤º&quot;ä»¤äººâ€¦çš„&quot;ï¼Œå¸¸åšå®šè¯­ï¼›<strong>-ed</strong>ä¸€èˆ¬ä¿®é¥°äººï¼Œè¡¨ç¤º&quot;(äºº)â€¦çš„&quot;ï¼Œå¸¸åšè¡¨è¯­ã€‚<strong>-ed</strong>åˆ†è¯è¡¨ç¤ºè¢«åŠ¨å«ä¹‰ï¼Œè€Œ**-ing**è¡¨ç¤ºä¸»åŠ¨å«ä¹‰ã€‚</p>
<h2 id="äºŒã€å‰¯è¯">äºŒã€å‰¯è¯</h2>
<h3 id="2-1-å½¢å®¹è¯è½¬åŒ–ä¸ºå‰¯è¯">2.1  å½¢å®¹è¯è½¬åŒ–ä¸ºå‰¯è¯</h3>
<p><strong>å£è¯€</strong>ï¼šâ€œå…ƒeâ€å»â€œeâ€åŠ ï¼Œâ€œè¾…yâ€æ”¹iåŠ ï¼Œâ€œleâ€ç»“å°¾æ”¹eä¸ºy</p>
<ol>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ç›´æ¥åŠ <strong>ly</strong>7</li>
<li>å…ƒéŸ³+<strong>e</strong>ç»“å°¾ä¸€èˆ¬å»æ‰<strong>e</strong>å†åŠ <strong>ly</strong>ï¼Œè¾…éŸ³+<strong>e</strong>ç›´æ¥åŠ <strong>ly</strong></li>
<li>è¾…éŸ³+<strong>y</strong>ç»“å°¾éœ€è¦æ”¹æˆ<strong>i</strong>(åŒåŒ–è§„åˆ™)ï¼Œè¦æ±‚<strong>y</strong>è¯»éŸ³ä¸º/i/ï¼Œè€Œå½“<strong>y</strong>è¯»éŸ³ä¸º/ai/æ—¶ä¸éœ€è¦æ”¹</li>
<li>è¾…éŸ³+<strong>le</strong>å»<strong>e</strong>åŠ <strong>y</strong></li>
<li>ä»¥<strong>ic</strong>ç»“å°¾çš„åŠ <strong>ally</strong></li>
<li>ä»¥<strong>ll</strong>ç»“å°¾åªéœ€åŠ <strong>y</strong></li>
</ol>
<p>æœ‰äº›å½¢å®¹è¯æœ‰ä¸¤ç§å‰¯è¯ï¼Œä¸€ç§å½¢å‰¯åŒå½¢ï¼Œä¸€ç§åŠ <strong>ly</strong>ï¼ŒåŠ <strong>ly</strong>å¾€å¾€æœ‰å¦å¤–çš„æ„æ€ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Type 1</th>
<th style="text-align:center">Type 2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">hard åˆ»è‹¦åœ°ï¼ŒçŒ›çƒˆåœ°ï¼Œå›°éš¾åœ°</td>
<td style="text-align:center">hardly å‡ ä¹ä¸</td>
</tr>
<tr>
<td style="text-align:center">free å…è´¹åœ°</td>
<td style="text-align:center">freely è‡ªç”±åœ°</td>
</tr>
<tr>
<td style="text-align:center">late æ™šï¼Œè¿Ÿ</td>
<td style="text-align:center">lately æœ€è¿‘</td>
</tr>
<tr>
<td style="text-align:center">high é«˜é«˜åœ°</td>
<td style="text-align:center">highly é«˜åº¦åœ°</td>
</tr>
<tr>
<td style="text-align:center">close æ¥è¿‘åœ°</td>
<td style="text-align:center">closely ä»”ç»†åœ°</td>
</tr>
<tr>
<td style="text-align:center">direct å¾„ç›´åœ°ã€ç›´æ¥åœ°</td>
<td style="text-align:center">directly (æŠ½è±¡)ç«‹åˆ»é©¬ä¸Š</td>
</tr>
<tr>
<td style="text-align:center">deep æ·±åº¦(åªèƒ½ä¿®é¥°åŠ¨è¯ï¼Œå¤šè¡¨ç¤ºç©ºé—´)</td>
<td style="text-align:center">deeply (æŠ½è±¡ï¼Œå¯ä¿®é¥°å¤šç§ï¼Œå¤šè¡¨ç¤ºæƒ…æ„Ÿ0s)</td>
</tr>
<tr>
<td style="text-align:center">wide å……åˆ†åœ°ï¼Œå®Œå…¨åœ°</td>
<td style="text-align:center">widely å¹¿æ³›åœ°</td>
</tr>
</tbody>
</table>
<p>wide awake å®Œå…¨æ¸…é†’</p>
<p>å½“ç„¶ï¼Œæœ‰äº›è¯æ˜¯ä»¥<strong>ly</strong>ç»“å°¾çš„ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯å½¢å®¹è¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">likely <span class="comment"># å¯èƒ½çš„</span></span><br><span class="line">costly <span class="comment"># èŠ±è´¹å¤§çš„</span></span><br><span class="line">orderly <span class="comment"># æ•´é½çš„</span></span><br><span class="line">deadly <span class="comment"># è‡´å‘½çš„</span></span><br><span class="line">ugly <span class="comment"># ä¸‘çš„</span></span><br><span class="line">lively <span class="comment"># æ´»æ³¼çš„</span></span><br><span class="line">lonely <span class="comment"># å­¤ç‹¬çš„ï¼Œå¯‚å¯çš„</span></span><br><span class="line">friendly <span class="comment"># å‹å¥½çš„</span></span><br><span class="line">daily <span class="comment"># æ¯å¤©çš„</span></span><br><span class="line">weekly <span class="comment"># æ¯å‘¨çš„</span></span><br><span class="line">monthly <span class="comment"># æ¯æœˆçš„</span></span><br><span class="line">yearly <span class="comment"># æ¯å¹´çš„</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-è¿æ¥å‰¯è¯">2.2  è¿æ¥å‰¯è¯</h3>
<p>å¸¸è§çš„è¿æ¥å‰¯è¯æœ‰ï¼š</p>
<ul>
<li>therefore</li>
<li>besides</li>
<li>otherwise</li>
<li>however</li>
<li>moreover</li>
<li>still</li>
<li>thus</li>
<li>meanwhile</li>
<li>nevertheless</li>
</ul>
<h3 id="2-3-è¯„æ³¨æ€§å‰¯è¯">2.3  è¯„æ³¨æ€§å‰¯è¯</h3>
<p>ç”¨æ¥ä¿®é¥°æ•´ä¸ªå¥å­ï¼Œé€šå¸¸è¡¨ç¤ºè¯´è¯äººçš„æ€åº¦å’Œçœ‹é—®é¢˜çš„è§’åº¦ã€‚</p>
<ul>
<li>è¡¨ç¤ºè¯´è¯äººè§‚ç‚¹çš„å‰¯è¯
<ul>
<li>clearly</li>
<li>certainly</li>
<li>surely</li>
<li>fortunately</li>
<li>hopefully</li>
<li>naturally</li>
<li>obviously</li>
<li>possibly</li>
<li>strangely</li>
<li>surprisingly</li>
<li>undoubtedly</li>
</ul>
</li>
<li>è¡¨ç¤ºäººè¯´è¯çš„è§’åº¦
<ul>
<li>briefly</li>
<li>exactly</li>
<li>frankly</li>
<li>generally</li>
<li>honestly</li>
<li>roughly</li>
<li>seriously</li>
</ul>
</li>
<li>è¡¨ç¤ºçœ‹é—®é¢˜çš„è§’åº¦
<ul>
<li>economically</li>
<li>historically</li>
<li>physically</li>
<li>scientifically</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ä¸‰ã€-æ¯”è¾ƒçº§">ä¸‰ã€ æ¯”è¾ƒçº§</h2>
<h3 id="3-1-æ¯”è¾ƒçº§å’Œæœ€é«˜çº§å˜åŒ–è§„åˆ™">3.1  æ¯”è¾ƒçº§å’Œæœ€é«˜çº§å˜åŒ–è§„åˆ™</h3>
<h4 id="3-1-1-ç›´æ¥åŠ -er-est">3.1.1  ç›´æ¥åŠ -er, -est</h4>
<p>ä¸€èˆ¬å•éŸ³èŠ‚è¯å’Œå°‘æ•°ä»¥-er, -ow ç»“å°¾çš„åŒéŸ³èŠ‚è¯ï¼Œæ¯”è¾ƒçº§åŠ -erï¼Œ æœ€é«˜çº§åŠ -est</p>
<h4 id="3-1-2-åŠ -r-st">3.1.2  åŠ -r, -st</h4>
<p>ä»¥ä¸å‘éŸ³<code>e</code>ç»“å°¾çš„å•éŸ³èŠ‚è¯ï¼Œæ¯”è¾ƒçº§ç›´æ¥åŠ <code>r</code>ï¼Œæœ€é«˜çº§åŠ <code>st</code></p>
<h4 id="3-1-3-åŒå†™æœ«å°¾è¾…éŸ³åŠ -erï¼Œ-est">3.1.3  åŒå†™æœ«å°¾è¾…éŸ³åŠ <code>-er</code>ï¼Œ<code>-est</code></h4>
<p>é‡è¯»é—­éŸ³èŠ‚(è¾…éŸ³+å…ƒéŸ³+è¾…éŸ³)ä¸­ï¼Œå…ˆåŒå†™æœ«å°¾çš„è¾…éŸ³å­—æ¯ï¼Œæ¯”è¾ƒçº§åŠ <code>-er</code>ï¼Œæœ€é«˜çº§åŠ <code>-est</code></p>
<h4 id="3-1-4-æŠŠyè¾¹iåå†åŠ er-est">3.1.4  æŠŠyè¾¹iåå†åŠ er,est</h4>
<p>è¾…éŸ³å­—æ¯+yç»“å°¾çš„åŒéŸ³èŠ‚ï¼Œéœ€è¦æŠŠyæ”¹æˆi</p>
<h4 id="3-1-5-åŒéŸ³èŠ‚æˆ–å¤šéŸ³èŠ‚">3.1.5  åŒéŸ³èŠ‚æˆ–å¤šéŸ³èŠ‚</h4>
<p>éœ€è¦åœ¨å‰é¢åŠ ä¸Šmostæˆ–more</p>
<h4 id="3-1-6-ä¸è§„åˆ™æƒ…å†µ">3.1.6  ä¸è§„åˆ™æƒ…å†µ</h4>
<table>
<thead>
<tr>
<th style="text-align:center">åŸå½¢</th>
<th style="text-align:center">æ¯”è¾ƒçº§</th>
<th style="text-align:center">æœ€é«˜çº§</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">good/well</td>
<td style="text-align:center">better</td>
<td style="text-align:center">best</td>
</tr>
<tr>
<td style="text-align:center">many/much</td>
<td style="text-align:center">more</td>
<td style="text-align:center">most</td>
</tr>
<tr>
<td style="text-align:center">old</td>
<td style="text-align:center">older/elder</td>
<td style="text-align:center">oldest/eldest</td>
</tr>
<tr>
<td style="text-align:center">little</td>
<td style="text-align:center">less</td>
<td style="text-align:center">least</td>
</tr>
<tr>
<td style="text-align:center">bad/ill/badly</td>
<td style="text-align:center">worse</td>
<td style="text-align:center">worst</td>
</tr>
<tr>
<td style="text-align:center">far</td>
<td style="text-align:center">further/father</td>
<td style="text-align:center">furthest/farthest</td>
</tr>
</tbody>
</table>
<h2 id="3-2-å½¢å®¹è¯ã€å‰¯è¯æ¯”è¾ƒçº§å’Œæœ€é«˜çº§çš„ç”¨æ³•">3.2  å½¢å®¹è¯ã€å‰¯è¯æ¯”è¾ƒçº§å’Œæœ€é«˜çº§çš„ç”¨æ³•</h2>
<h4 id="3-2-1-ä¸€èˆ¬ç”¨æ³•">3.2.1  ä¸€èˆ¬ç”¨æ³•</h4>
<ul>
<li>
<p>A+è°“è¯­åŠ¨è¯+å½¢å®¹è¯/å‰¯è¯æ¯”è¾ƒçº§+than+B</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This tree is taller than that one.</span><br><span class="line">Gary runs faster than Jack.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æœ€é«˜çº§è¿˜èƒ½è¡¨ç¤ºä¸‰ä¸ªæˆ–æ˜¯ä»¥ä¸Š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tome <span class="keyword">is</span> the smartest of the three boys.</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶äº†ï¼Œåœ¨å«æœ‰è¿è¯<strong>than</strong>çš„æ¯”è¾ƒçº§ä¸­ï¼Œå‰åçš„æ¯”è¾ƒå¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªèŒƒç•´çš„ï¼Œä¸”åœ¨æ¯”è¾ƒçº§å‰é¢å¯ä»¥ä½¿ç”¨<code>a bit, a little, rather than, much, far, by far, many, a lot, lots, a great deal, any, still, even</code>ã€‚è€Œä¸”<code>very</code>å’Œ<code>quite</code>ä¸€èˆ¬åªèƒ½ä¿®é¥°åŸçº§ã€‚</p>
</li>
</ul>
<h4 id="3-2-2-æ¯”è¾ƒçº§-and-æ¯”è¾ƒçº§æˆ–more-and-more-åŸçº§">3.2.2  æ¯”è¾ƒçº§+and+æ¯”è¾ƒçº§æˆ–more and more+åŸçº§</h4>
<p>&quot;æ¯”è¾ƒçº§+and+æ¯”è¾ƒçº§&quot;æˆ–è€…&quot;more and more + åŸçº§&quot;è¡¨ç¤ºè¶Šæ¥è¶Š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">It becomes warmer <span class="keyword">and</span> warmer when spring comes.</span><br><span class="line">Our school <span class="keyword">is</span> becoming more <span class="keyword">and</span> more beautiful.</span><br></pre></td></tr></table></figure>
<h4 id="3-2-3-â€œthe-æ¯”è¾ƒçº§â€¦-the-æ¯”è¾ƒçº§â€">3.2.3  â€œthe+æ¯”è¾ƒçº§â€¦,the+æ¯”è¾ƒçº§â€</h4>
<p>è¡¨ç¤ºè¶Šæ¥è¶Š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The harder you work, the greater progress you will make.</span><br></pre></td></tr></table></figure>
<h4 id="3-2-4-è¡¨ç¤ºå€æ•°çš„æ¯”è¾ƒçº§ç”¨æ³•">3.2.4  è¡¨ç¤ºå€æ•°çš„æ¯”è¾ƒçº§ç”¨æ³•</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A <span class="keyword">is</span> ... times the size/height/length/width of B. <span class="comment">#  X times the åè¯</span></span><br><span class="line">A <span class="keyword">is</span> ... times <span class="keyword">as</span> big/high/long/wide/large <span class="keyword">as</span> B. <span class="comment"># X times as å½¢å®¹è¯ as </span></span><br><span class="line">A <span class="keyword">is</span> ... times larger/higher/lnger/wider than B. <span class="comment"># X times æ¯”è¾ƒçº§ than</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œasâ€¦, asâ€¦ä½œä¸ºä¹ æƒ¯ç”¨è¯­ï¼Œä¹Ÿæœ‰ç‰¹å®šçš„å«ä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">as</span> long <span class="keyword">as</span> <span class="comment"># åªè¦</span></span><br><span class="line"><span class="keyword">as</span> soon <span class="keyword">as</span> <span class="comment"># ä¸€...å°±...</span></span><br><span class="line"><span class="keyword">as</span> far <span class="keyword">as</span> <span class="comment"># è¿œåˆ°...,æ®...</span></span><br><span class="line"><span class="keyword">as</span> well <span class="keyword">as</span> <span class="comment"># å’Œï¼Œä¹Ÿ</span></span><br><span class="line"><span class="keyword">as</span> good <span class="keyword">as</span> <span class="comment"># å‡ ä¹ï¼Œå®é™…ä¸Š</span></span><br></pre></td></tr></table></figure>
<hr>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å›¾å·ç§¯ç¥ç»ç½‘ç»œ(GCN)ç»¼è¿°ä¸å®ç°]]></title>
      <url>/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      <content type="html"><![CDATA[<h1>å›¾å·ç§¯ç¥ç»ç½‘ç»œ(GCN)ç»¼è¿°ä¸å®ç°ï¼ˆPyTorchç‰ˆ)</h1>
<hr>
<p>æœ¬æ–‡çš„å®éªŒç¯å¢ƒä¸º<code>PyTorch = 1.11.0 + cu113ï¼ŒPyG = 2.0.4</code>ï¼Œç›¸å…³ä¾èµ–åº“å’Œæ•°æ®é›†çš„ä¸‹è½½è¯·è§<a href="https://blog.csdn.net/qq_45957458/article/details/125260352?spm=1001.2014.3001.5502">é“¾æ¥</a>ã€‚</p>
<hr>
<h2 id="ä¸€ã€å›¾å·ç§¯ç¥ç»ç½‘ç»œä»‹ç»">ä¸€ã€å›¾å·ç§¯ç¥ç»ç½‘ç»œä»‹ç»</h2>
<h3 id="1-1-ä¼ ç»Ÿå›¾åƒå·ç§¯">1.1  ä¼ ç»Ÿå›¾åƒå·ç§¯</h3>
<p>å·ç§¯ç¥ç»ç½‘ç»œä¸­çš„<strong>å·ç§¯(Convolution)<strong>æŒ‡çš„æ˜¯åœ¨å›¾åƒä¸Šè¿›è¡Œçš„è¾“å…¥å’Œå·ç§¯æ ¸ä¹‹é—´</strong>ç¦»æ•£å†…ç§¯è¿ç®—</strong>ï¼Œå…¶æœ¬è´¨ä¸Šå°±æ˜¯åˆ©ç”¨<strong>å…±äº«å‚æ•°</strong>çš„æ»¤æ³¢å™¨ï¼Œé€šè¿‡è®¡ç®—ä¸­å¿ƒå€¼ä»¥åŠç›¸é‚»èŠ‚ç‚¹çš„å€¼è¿›è¡Œ<strong>åŠ æƒ</strong>è·å¾—å¸¦æœ‰<strong>å±€éƒ¨ç©ºé—´ç‰¹å¾</strong>çš„ç‰¹å¾æå–å™¨ã€‚</p>
<p>å…¶å…·æœ‰ä¸‰ä¸ªé‡è¦çš„ç‰¹å¾ï¼Œåˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li><strong>ç¨€ç–è¿æ¥</strong>
<ul>
<li>ç›¸è¾ƒäºå…¨è¿æ¥å±‚ï¼Œå·ç§¯å±‚è¾“å…¥å’Œè¾“å‡ºé—´çš„è¿æ¥æ˜¯ç¨€ç–çš„ï¼Œèƒ½å¤Ÿå¤§å¤§å‡å°‘å‚æ•°çš„æ•°é‡ï¼ŒåŠ å¿«ç½‘ç»œçš„è®­ç»ƒé€Ÿåº¦ã€‚</li>
</ul>
</li>
<li><strong>å‚æ•°å…±äº«</strong>
<ul>
<li>å·ç§¯æ ¸çš„æƒé‡å‚æ•°å¯ä»¥è¢«å¤šä¸ªå‡½æ•°æˆ–æ“ä½œå…±äº«ï¼Œè¿™æ ·åªéœ€è¦è®­ç»ƒä¸€ä¸ªå‚æ•°é›†ï¼Œè€Œä¸éœ€è¦å¯¹æ¯ä¸ªä½ç½®éƒ½è®­ç»ƒä¸€ä¸ªå‚æ•°é›†ã€‚æ­¤å¤–ï¼Œç”±äºå·ç§¯æ ¸çš„å¤§å°ä¸€èˆ¬æ˜¯å°äºè¾“å…¥å¤§å°ï¼Œä¹Ÿèƒ½èµ·åˆ°å‡å°‘å‚æ•°æ•°é‡çš„ä½œç”¨</li>
</ul>
</li>
<li><strong>ç­‰å˜è¡¨ç¤º</strong>
<ul>
<li>äº‹å®ä¸Šï¼Œæ¯ä¸ªå·ç§¯å±‚å¯ä»¥é€šè¿‡å¤šä¸ªå·ç§¯æ ¸æ¥è¿›è¡Œç‰¹å¾æå–ï¼Œå¹¶ä¸”åœ¨å·ç§¯è¿ç®—åï¼Œå·ç§¯ç¥ç»ç½‘ç»œå¯¹è¾“å…¥çš„å›¾åƒå…·æœ‰å¹³ç§»ä¸å˜æ€§(æœ‰ä¸¥æ ¼çš„æ•°å­¦è®ºè¯)</li>
</ul>
</li>
</ul>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220729002859162.png" alt="image-20220729002859162" style="zoom:50%;">
<p>ä¸€èˆ¬åœ¨å·ç§¯å±‚åï¼Œä¼šé€šè¿‡ä¸€ä¸ª<strong>æ± åŒ–å±‚</strong>è¿›è¡Œé™ç»´ï¼Œè¿›ä¸€æ­¥é™ä½ç½‘ç»œçš„å¤æ‚åº¦å’Œéçº¿æ€§ç¨‹åº¦ã€‚åœ¨é‚£ä¹‹åï¼Œå¯ä»¥å°†é€šè¿‡å·ç§¯æ± åŒ–å±‚åçš„ç‰¹å¾è¾“å…¥å…¨è¿æ¥å±‚æˆ–åå·ç§¯å±‚è¿›è¡Œè¿›ä¸€æ­¥çš„åˆ†ç±»ã€åˆ†å‰²ã€é‡å»ºå·¥ä½œã€‚å½“ç„¶ï¼Œä¼ ç»Ÿçš„å·ç§¯æ“ä½œä¸€èˆ¬é€‚ç”¨äºç»“æ„åŒ–æ•°æ®ã€‚</p>
<h3 id="1-2-å›¾ç»“æ„">1.2  å›¾ç»“æ„</h3>
<p>å›¾ä½œä¸ºä¸€ç§å…¸å‹çš„éç»“æ„åŒ–éçº¿æ€§æ•°æ®(éæ¬§å‡ é‡Œå¾—æ•°æ®)ï¼Œå…¶å¯ä»¥è¡¨ç¤ºä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šçš„å…³ç³»ï¼Œå› è€Œå¸¸è¢«ç”¨äºæè¿°å¤æ‚çš„æ•°æ®å¯¹è±¡ï¼Œè­¬å¦‚ç¤¾äº¤ç½‘ç»œã€çŸ¥è¯†å›¾è°±ã€åŸå¸‚è·¯ç½‘ã€3Dç‚¹äº‘ç­‰ã€‚ä¸ç»“æ„åŒ–æ•°æ®ä¸åŒï¼Œå›¾çš„å±€éƒ¨è¾“å…¥ç»´åº¦å¯å˜ï¼Œå³æ¯ä¸ªèŠ‚ç‚¹çš„é‚»å±…èŠ‚ç‚¹æ•°é‡ä¸åŒï¼›å›¾å…·æœ‰æ— åºæ€§ï¼Œå³èŠ‚ç‚¹é—´å¹¶ä¸å­˜åœ¨å…ˆåå…³ç³»ï¼Œä»…å­˜åœ¨è¿æ¥å…³ç³»(ç‚¹äº‘æ˜¯ç½®æ¢ä¸å˜æ€§ï¼Œåœ¨æ— åºæ€§çš„åŸºç¡€ä¸Šï¼Œäº¤æ¢ä¸¤ç‚¹æˆ–å¤šç‚¹ä¸ä¼šå½±å“æ•´ä½“ç»“æœ)ã€‚ç”±äºå›¾ç»“æ„çš„ç‰¹æ®Šæ€§ï¼Œä¼ ç»ŸCNNå’ŒRNNå¯¹å…¶çš„è¡¨å¾èƒ½åŠ›å¹¶ä¸ç†æƒ³ã€‚</p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220613221407489.png" alt="image-20220613221407489" style="zoom:50%;">
<p>å¯¹äºå›¾ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æŠ½è±¡è¡¨ç¤ºä¸ºï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>V</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G=(V,E)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></span></p>
<p>åœ¨è¿™é‡Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>è¡¨ç¤ºå›¾ä¸­èŠ‚ç‚¹çš„é›†åˆï¼Œè€Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span>ä¸ºè¾¹çš„é›†åˆã€‚å¯¹äºå›¾ç‰¹å¾ï¼Œæˆ‘ä»¬ä¸€èˆ¬æœ‰ä¸‰ä¸ªé‡è¦çŸ©é˜µè¿›è¡Œè¡¨ç¤ºã€‚</p>
<ul>
<li>é‚»æ¥çŸ©é˜µ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>ï¼š<code>adjacency matrix</code>ç”¨æ¥è¡¨ç¤ºèŠ‚ç‚¹é—´çš„è¿æ¥å…³ç³»ã€‚</li>
</ul>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220729003011071.png" alt="image-20220729003011071" style="zoom:50%;">
$$
\begin{vmatrix}
&0 & 1 & 0 & 0&\\
&0 & 0 & 1 & 0&\\
&1 & 1 & 0 & 0&\\
&0 & 1 & 1 & 0&\\
\end{vmatrix}
$$
â€‹		å¯¹äºå¸¦æƒçš„å›¾ï¼Œé‚»æ¥çŸ©é˜µå°†æŠŠ1æ›¿æ¢ä¸ºå¯¹åº”çš„æƒé‡
<ul>
<li>
<p>åº¦çŸ©é˜µ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span>ï¼š<code>degree matrix</code>ç”¨æ¥è¡¨ç¤ºèŠ‚ç‚¹çš„è¿æ¥æ•°ï¼Œå¯ä»¥è¡¨å¾æŸä¸ªèŠ‚ç‚¹åœ¨å›¾ä¸­çš„é‡è¦ç¨‹åº¦ï¼Œæ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µï¼Œä¾‹å¦‚é’ˆå¯¹ä¸Šå›¾çš„å…¥åº¦çŸ©é˜µï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow><annotation encoding="application/x-tex">\begin{vmatrix}
&amp;1 &amp; 0 &amp; 0 &amp; 0&amp;\\
&amp;0 &amp; 3 &amp; 0 &amp; 0&amp;\\
&amp;0 &amp; 0 &amp; 2 &amp; 0&amp;\\
&amp;0 &amp; 0 &amp; 0 &amp; 0&amp;\\
\end{vmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8121em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>ç‰¹å¾çŸ©é˜µ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>ï¼š<code>feature matrix</code>ç”¨æ¥è¡¨ç¤ºèŠ‚ç‚¹çš„ç‰¹å¾</p>
</li>
</ul>
<h3 id="1-3-å›¾å·ç§¯ç¥ç»ç½‘ç»œ">1.3  å›¾å·ç§¯ç¥ç»ç½‘ç»œ</h3>
<p>ç›®å‰ä¸»æµçš„å›¾å·ç§¯åŸºæœ¬ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç§æ˜¯åŸºäºè°±çš„å›¾å·ç§¯ï¼Œä¸€ç§æ˜¯åŸºäºç©ºåŸŸçš„å›¾å·ç§¯ã€‚</p>
<p>åŸºäºè°±çš„å›¾å·ç§¯é€šè¿‡å‚…é‡Œå¶å˜æ¢(FFTå¹²çš„ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¿æ¥ç©ºåŸŸå’Œé¢‘åŸŸ)å°†èŠ‚ç‚¹æ˜ å°„åˆ°é¢‘åŸŸç©ºé—´ï¼Œé€šè¿‡é¢‘åŸŸç©ºé—´ä¸Šçš„å·ç§¯æ¥å®ç°æ—¶åŸŸä¸Šçš„å·ç§¯ï¼Œæœ€åå°†ç‰¹å¾æ˜ å°„å›ç©ºåŸŸã€‚è€ŒåŸºäºç©ºåŸŸçš„å›¾å·ç§¯åˆ™æ˜¯ç›´æ¥åŸºäºèŠ‚ç‚¹ä¸é‚»å±…è¿›è¡Œå·ç§¯æå–ç‰¹å¾ï¼Œæ²¡æœ‰åšåŸŸä¸Šçš„å˜æ¢ã€‚</p>
<p>å›¾å·ç§¯ç®—å­å¯è¡¨ç¤ºä¸ºï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>h</mi><mi>i</mi><mrow><mi>l</mi><mo>+</mo><mn>1</mn></mrow></msubsup><mo>=</mo><mi>Ïƒ</mi><mo stretchy="false">(</mo><munder><mo>âˆ‘</mo><mrow><mi>j</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>i</mi></msub></mrow></munder><mfrac><mn>1</mn><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mfrac><msubsup><mi>h</mi><mi>j</mi><mi>l</mi></msubsup><msubsup><mi>w</mi><msub><mi>R</mi><mi>j</mi></msub><mi>l</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h_i^{l+1}=\sigma(\sum_{j\in N_i}\frac{1}{C_{ij}}h_j^lw_{R_j}^l)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1661em;vertical-align:-0.267em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-2.433em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.267em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.7519em;vertical-align:-1.4304em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8557em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">âˆˆ</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.109em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4304em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0077em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4443em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>å…¶ä¸­ï¼Œè®¾ä¸­å¿ƒç»“ç‚¹ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>h</mi><mi>i</mi><mi>l</mi></msubsup></mrow><annotation encoding="application/x-tex">h_i^l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1078em;vertical-align:-0.2587em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-2.4413em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºç»“ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>å±‚çš„ç‰¹å¾è¡¨è¾¾ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span></span></span></span>æ˜¯éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>åˆ™æ˜¯å½’ä¸€åŒ–å› å­ï¼Œè­¬å¦‚ç»“ç‚¹åº¦çš„å€’æ•°ã€åè·ç¦»æƒé‡ã€é«˜æ–¯è¡°å‡æƒé‡ç­‰ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">N_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯ç»“ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>çš„é‚»æ¥èŠ‚ç‚¹(åŒ…æ‹¬è‡ªèº«)ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è¡¨ç¤ºèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>çš„ç±»å‹ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><msub><mi>R</mi><mi>j</mi></msub></msub></mrow><annotation encoding="application/x-tex">W_{R_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0307em;vertical-align:-0.3473em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0077em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3473em;"><span></span></span></span></span></span></span></span></span></span>è¡¨ç¤º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">R_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>ç±»å‹çš„èŠ‚ç‚¹å˜æ¢æƒé‡å‚æ•°ã€‚</p>
<hr>
<p>ä¸‹é¢å›´ç»•<a href="https://arxiv.org/pdf/1609.02907.pdf">Semi-supervised Classification with Graph Convolutional Networks</a>ä¸€æ–‡ä¸­æå‡ºçš„GCNç»“æ„è¿›è¡Œåˆ†æã€‚</p>
<p>è¯¥ç¯‡æ–‡ç« ç”±é˜¿å§†æ–¯ç‰¹ä¸¹(the University of Amsterdam)å¤§å­¦æœºå™¨å­¦ä¹ ä¸“ä¸šçš„Thomas Kipf åšå£«äº2016å¹´æå‡ºï¼Œå¹¶äº2017å¹´è¢«æ·±åº¦å­¦ä¹ çš„é¡¶ä¼šICLR(International Conference on Learning Representations)æ¥æ”¶ï¼è¿™ä½å¤§ä½¬çš„ç ”ç©¶æ–¹å‘æ˜¯å­¦ä¹ ç»“æ„åŒ–æ•°æ®å’Œç»“æ„åŒ–è¡¨ç¤º/è®¡ç®—ï¼ŒåŒ…æ‹¬æ¨ç†ã€(å¤šæ™ºèƒ½ä½“)å¼ºåŒ–å­¦ä¹ å’Œç»“æ„åŒ–æ·±åº¦ç”Ÿæˆæ¨¡å‹ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong></p>
<p>è¯¥ç¯‡æ–‡ç« æå‡ºäº†ä¸€ç§æ–°çš„ç½‘ç»œç»“æ„ï¼Œç”¨äºå¤„ç†éç»“æ„åŒ–çš„å›¾æ•°æ®ï¼Œå¹¶è§£å†³äº†åœ¨ä¸€ä¸ªå›¾ä¸­ï¼Œåªæœ‰å°‘éƒ¨åˆ†èŠ‚ç‚¹çš„æ ‡ç­¾æ˜¯å·²çŸ¥æƒ…å†µä¸‹çš„èŠ‚ç‚¹åˆ†ç±»é—®é¢˜(åŠç›‘ç£å­¦ä¹ )ã€‚</p>
<p>å¯¹äºå¸¦æœ‰ç‰¹å¾çš„å›¾ç»“æ„ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>Ã—</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">n\times3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>ç½‘ç»œç»“æ„ï¼Œæœ‰éƒ¨åˆ†æ˜¯å¸¦æœ‰æ ‡è¯†çš„ï¼Œè€Œæœ‰éƒ¨åˆ†åˆ™æ˜¯æ— æ ‡è¯†çš„ã€‚</p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614012201305.png" alt="image-20220614012201305" style="zoom:50%;">
<p>GCNé€šè¿‡è€ƒè™‘èŠ‚ç‚¹æœ¬èº«ä»¥åŠé‚»å±…èŠ‚ç‚¹çš„ç‰¹å¾ä¿¡æ¯æ¥æå–æ½œåœ¨çš„å…³ç³»ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸­å¿ƒèŠ‚ç‚¹æ‹¼æ¥äº†é‚»å±…çš„ç‰¹å¾åï¼Œä½¿ç”¨å¹³å‡æ± åŒ–çš„æ–¹å¼å¯¹è¿™äº›ç‰¹å¾è¿›è¡Œèšåˆï¼Œå†é€šè¿‡æµ…å±‚ç½‘ç»œè¿›è¡Œå­¦ä¹ è®­ç»ƒå¾—åˆ°æ–°çš„æ•°æ®ã€‚</p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614012428581.png" alt="image-20220614012428581" style="zoom:50%;">
<p>æ¯ä¸ªGCNå±‚åšçš„äº‹æƒ…ï¼š</p>
<ul>
<li>è·å–å½“å‰èŠ‚ç‚¹å’Œé‚»æ¥èŠ‚ç‚¹ç‰¹å¾</li>
<li>é€šè¿‡èšåˆå‡½æ•°è·å–å±€éƒ¨ç‰¹å¾(å¸¦æœ‰æ‹“æ‰‘å…³ç³»)</li>
<li>æµ…å±‚å­¦ä¹ è®­ç»ƒï¼Œè·å–é«˜ç»´ç‰¹å¾</li>
</ul>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614012503541.png" alt="image-20220614012503541" style="zoom:50%;">
<p><strong>æ•°å­¦æ¨å¯¼</strong></p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614014620294.png" alt="image-20220614014620294" style="zoom:50%;">
<p>å¯¹äºä¸€ä¸ªå¦‚ä¸Šå›¾æ‰€ç¤ºçš„æ— å‘å›¾ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆæ ·æ‰èƒ½è·å–åˆ°æŸä¸ªèŠ‚ç‚¹ä»¥åŠå…¶é‚»å±…èŠ‚ç‚¹çš„ç‰¹å¾å‘¢ï¼Ÿä¸€ç§éå¸¸ç›´è§‚çš„æƒ³æ³•ğŸ’¡æ˜¯ï¼Œåœ¨å½“å‰èŠ‚ç‚¹çš„ç‰¹å¾ä¹‹åï¼Œæ ¹æ®æƒé‡<strong>æ‹¼æ¥</strong>ä¸ä¹‹<strong>ç›¸é‚»èŠ‚ç‚¹</strong>çš„ç‰¹å¾ã€‚æ­¤æ—¶ï¼Œç©ºåŸŸä¸Šçš„è·ç¦»å¾€å¾€æˆä¸ºäº†æƒé‡çš„å½±å“å› ç´ ã€‚</p>
<p>é‚£ä¹ˆï¼Œé‚»æ¥è¡¨å°±æˆäº†æˆ‘ä»¬è€ƒè™‘èŠ‚ç‚¹é—´æ‹“æ‰‘å…³ç³»æœ€é‡è¦çš„ç»“æ„ã€‚æˆ‘ä»¬å†™æˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>Ã—</mo><mi>X</mi><mo>Ã—</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">A\times X\times W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>æ˜¯é‚»æ¥çŸ©é˜µï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>æ˜¯ç‰¹å¾çŸ©é˜µï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>æ˜¯æƒé‡ã€‚å³ä¹˜ç›¸å½“äºæ§åˆ¶è¡Œï¼Œå·¦ä¹˜ç›¸å½“äºæ§åˆ¶åˆ—ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>å·¦ä¹˜<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>ï¼Œç›¸å½“äºåœ¨å¯¹åº”èŠ‚ç‚¹å¤„ï¼Œä½¿ç”¨å“ªäº›èŠ‚ç‚¹ç‰¹å¾æ„å»ºæ–°çš„ç‰¹å¾ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow><mo>Ã—</mo><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>40</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>40</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>40</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>40</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow><mo>=</mo><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>43</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>43</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>43</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>43</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>42</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>42</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>42</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>42</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{vmatrix}
&amp;0 &amp; 1 &amp; 0&amp;0&amp;\\
&amp;0 &amp; 0 &amp; 1&amp;1&amp;\\
&amp;0 &amp; 1 &amp; 0&amp;1&amp;\\
&amp;1 &amp; 1 &amp; 0&amp;0&amp;\\
\end{vmatrix}\times
\begin{vmatrix}
&amp;1 &amp; 1 &amp; 1&amp;1&amp;\\
&amp;2 &amp; 2 &amp; 2&amp;2&amp;\\
&amp;3 &amp; 3 &amp; 3&amp;3&amp;\\
&amp;40 &amp; 40 &amp; 40&amp;40&amp;\\
\end{vmatrix}=
\begin{vmatrix}
&amp;2 &amp; 2 &amp; 2&amp;2&amp;\\
&amp;43 &amp; 43 &amp; 43&amp;43&amp;\\
&amp;42 &amp; 42 &amp; 42&amp;42&amp;\\
&amp;3 &amp; 3 &amp; 3&amp;3&amp;\\
\end{vmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8121em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:4.8121em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">40</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">40</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">40</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">40</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.8121em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">43</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">42</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">43</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">42</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">43</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">42</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">43</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">42</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>è¯¶ï¼Œç³Ÿç³•ï¼Œè¿™çŸ©é˜µæ•°æ•°æ•°ç€æ•°ç€å’‹æŠŠè‡ªå·±ç»™å¿˜äº†å‘€ï¼è€Œä¸”ä¼¼ä¹â€¦æœ‰äº›å°æœ‹å‹å‘è‚²çš„è¿‡äºè‰¯å¥½ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆåŒ–ä¸è‰¯çš„ï¼(æ¢¯åº¦çˆ†ç‚¸æˆ–æ¶ˆå¤±é—®é¢˜)</p>
<p>ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¼•å…¥äº†æ–°çš„é‚»æ¥çŸ©é˜µ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>A</mi><mo>~</mo></mover></mrow><annotation encoding="application/x-tex">\tilde A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9202em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span></span></span></span>ç”¨äºæ‰¿è½½å½“å‰èŠ‚ç‚¹ä¿¡æ¯~</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>A</mi><mo>~</mo></mover><mo>=</mo><mi>A</mi><mo>+</mo><mi>Î»</mi><msub><mi>I</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">\tilde A =A+\lambda I_N
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9202em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord mathnormal">Î»</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>å½“æƒé‡å› å­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">Î»</span></span></span></span>å–<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>æ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>A</mi><mo>~</mo></mover><mo>=</mo><mi>A</mi><mo>+</mo><msub><mi>I</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">\tilde A =A+I_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9202em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæ­¤æ—¶æ„å‘³ç€èŠ‚ç‚¹ä¸­å¿ƒå’Œé‚»å±…ä¸€æ ·é‡è¦å•¦ã€‚ğŸ‰</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">Î»</span></span></span></span>æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥ç”±è®­ç»ƒå¾—åˆ°çš„å‚æ•°ã€‚</p>
<p>é’ˆå¯¹æ¢¯åº¦é—®é¢˜å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¯¹è§’çŸ©é˜µå®ç°æ ‡å‡†åŒ–ï¼Œè­¬å¦‚åˆ©ç”¨åº¦çŸ©é˜µçš„é€†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\tilde D^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9202em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>è¿›è¡Œå¹³å‡åŒ–çš„æ“ä½œï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow><mover><mo stretchy="true" minsize="3.0em">â†’</mo><mpadded width="+0.6em" lspace="0.3em"><mrow><mi>i</mi><mi>n</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>e</mi></mrow></mpadded></mover><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{vmatrix}
&amp;2 &amp; 0 &amp; 0&amp;0&amp;\\
&amp;0 &amp; 3 &amp; 0&amp;0&amp;\\
&amp;0 &amp; 0 &amp; 4&amp;0&amp;\\
&amp;0 &amp;0 &amp; 0&amp;1&amp;\\
\end{vmatrix}\xrightarrow{inverse}
\begin{vmatrix}
&amp;1/2 &amp; 0 &amp; 0&amp;0&amp;\\
&amp;0 &amp; 1/3 &amp; 0&amp;0&amp;\\
&amp;0 &amp; 0 &amp; 1/4&amp;0&amp;\\
&amp;0 &amp;0 &amp;0&amp;1&amp;\\
\end{vmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8121em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0837em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mathnormal mtight">erse</span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"></span><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.011em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.8121em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1/2</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1/3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1/4</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>äºæ˜¯ä¹ï¼Œæ–°çš„å…¬å¼è¯ç”Ÿå•¦ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mover accent="true"><mi>A</mi><mo>~</mo></mover><mi>X</mi><mo stretchy="false">)</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">\tilde D^{-1}(\tilde AX)W
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1702em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span></span></p>
<p>ä½†æˆ‘ä»¬åœ¨è¿™é‡Œä»…ä»…å¯¹è¡Œè¿›è¡Œäº†æ ‡å‡†åŒ–ï¼Œåœ¨åˆ—æ–¹å‘ä¸Šå¹¶æ²¡æœ‰è¢«æ ‡å‡†åŒ–ï¼Œæ‰€ä»¥ï¼Œä¿®æ­£åçš„å…¬å¼ä¸ºï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mover accent="true"><mi>A</mi><mo>~</mo></mover><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">)</mo><mi>X</mi><mi>W</mi><mspace linebreak="newline"></mspace><mi>L</mi><mi>e</mi><mi>t</mi><mtext>â€˜</mtext><mi>s</mi><mspace width="1em"><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mspace width="1em"><mover accent="true"><mi>A</mi><mo stretchy="true">^</mo></mover><mo>=</mo><mo stretchy="false">(</mo><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mover accent="true"><mi>A</mi><mo>~</mo></mover><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">)</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">(\tilde D^{-1}\tilde A\tilde D^{-1})XW
\\
Letâ€˜s\quad call\quad \widehat{A}=(\tilde D^{-1}\tilde A\tilde D^{-1})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1702em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9233em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord">â€˜</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span><span class="mspace" style="margin-right:1em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9233em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span class="svg-align" style="width:calc(100% - 0.2778em);margin-left:0.2778em;top:-3.6833em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1702em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>å½“ç„¶äº†ï¼Œè¡Œåšäº†ä¸€æ¬¡æ ‡å‡†åŒ–ï¼Œåˆ—åšäº†ä¸€æ¬¡æ ‡å‡†åŒ–ï¼Œé‚£ä¹ˆå¯¹äºå…ƒç´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>æ¥è¯´ï¼Œé‚£å°±æ˜¯åšäº†ä¸¤æ¬¡æ ‡å‡†åŒ–è¯¶ï¼æˆ‘ä»¬å†å¼€ä¸ªæ–¹å§:happy:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mover accent="true"><mi>A</mi><mo>~</mo></mover><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo stretchy="false">)</mo><mi>X</mi><mi>W</mi><mspace linebreak="newline"></mspace><mi>L</mi><mi>e</mi><mi>t</mi><mtext>â€˜</mtext><mi>s</mi><mspace width="1em"><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mspace width="1em"><mover accent="true"><mi>A</mi><mo stretchy="true">^</mo></mover><mo>=</mo><mo stretchy="false">(</mo><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mover accent="true"><mi>A</mi><mo>~</mo></mover><msup><mover accent="true"><mi>D</mi><mo>~</mo></mover><mrow><mo>âˆ’</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo stretchy="false">)</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">(\tilde D^{-1/2}\tilde A\tilde D^{-1/2})XW\\
Letâ€˜s\quad call\quad \widehat{A}=(\tilde D^{-1/2}\tilde A\tilde D^{-1/2})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.188em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1/2</span></span></span></span></span></span></span></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1/2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9233em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord">â€˜</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span><span class="mspace" style="margin-right:1em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9233em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span class="svg-align" style="width:calc(100% - 0.2778em);margin-left:0.2778em;top:-3.6833em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.188em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1/2</span></span></span></span></span></span></span></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9202em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span><span style="top:-3.6023em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1/2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>äºæ˜¯ä¹ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„æ ‡å‡†æ ¼å¼ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Z</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mover accent="true"><mi>A</mi><mo stretchy="true">^</mo></mover><mi>R</mi><mi>e</mi><mi>L</mi><mi>U</mi><mo stretchy="false">(</mo><mover accent="true"><mi>A</mi><mo stretchy="true">^</mo></mover><mi>X</mi><msup><mi>W</mi><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo><msup><mi>W</mi><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Z=f(X,A)=softmax(\widehat A ReLU(\widehat AXW^{(0)})W^{(1)})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.188em;vertical-align:-0.25em;"></span><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9233em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span class="svg-align" style="width:calc(100% - 0.2778em);margin-left:0.2778em;top:-3.6833em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10903em;">LU</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9233em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span class="svg-align" style="width:calc(100% - 0.2778em);margin-left:0.2778em;top:-3.6833em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>æ˜¯å¯è®­ç»ƒçš„æƒé‡ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>A</mi><mo stretchy="true">^</mo></mover></mrow><annotation encoding="application/x-tex">\widehat A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9233em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9233em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span class="svg-align" style="width:calc(100% - 0.2778em);margin-left:0.2778em;top:-3.6833em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span></span></span></span></span></span></span>æ˜¯æ ‡å‡†åŒ–åçš„é‚»æ¥çŸ©é˜µã€‚</p>
<p>æ­¤æ—¶æˆ‘ä»¬åœ¨å›è¿‡å¤´æ¥çœ‹è¿™ä¸ªå›¾å·ç§¯ç®—å­ï¼Œæ˜¯ä¸æ˜¯æœ‰äº›æç„¶å¤§æ‚Ÿäº†å‘¢ğŸ¤”</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>h</mi><mi>i</mi><mrow><mi>l</mi><mo>+</mo><mn>1</mn></mrow></msubsup><mo>=</mo><mi>Ïƒ</mi><mo stretchy="false">(</mo><munder><mo>âˆ‘</mo><mrow><mi>j</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>i</mi></msub></mrow></munder><mfrac><mn>1</mn><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mfrac><msubsup><mi>h</mi><mi>j</mi><mi>l</mi></msubsup><msubsup><mi>w</mi><msub><mi>R</mi><mi>j</mi></msub><mi>l</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h_i^{l+1}=\sigma(\sum_{j\in N_i}\frac{1}{C_{ij}}h_j^lw_{R_j}^l)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1661em;vertical-align:-0.267em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-2.433em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.267em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.7519em;vertical-align:-1.4304em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8557em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">âˆˆ</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.109em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4304em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0077em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4443em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>Thomasç»è¿‡å®éªŒæ¯”å¯¹ï¼Œæµ…å±‚çš„GCN(ä¸€èˆ¬ä¸º2å±‚)å–å¾—çš„æ•ˆæœå¾€å¾€è¦æ¯”æ²¡æœ‰åŠ å…¥æ®‹å·®å—çš„æ·±å±‚GCNæ¥çš„å¥½ã€‚GCNçš„ç½‘ç»œå±‚æ•°ä»£è¡¨ç€èŠ‚ç‚¹ç‰¹å¾æ‰€èƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»ï¼Œæˆ–è€…è¯´èŠ‚ç‚¹ä¿¡æ¯çš„ä¼ æ’­è·ç¦»ã€‚æ·±å±‚çš„ç½‘ç»œå¯èƒ½ä¼šä»¤èŠ‚ç‚¹ä¿¡æ¯ä¼ æ’­åˆ°æ•´ä¸ªç½‘ç»œï¼Œåè€Œæ•ˆæœä¸é‚£ä¹ˆå¥½ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„æ —å­~ğŸˆ</p>
<p>å‡è®¾æœ‰é‚»æ¥çŸ©é˜µ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow></mrow><annotation encoding="application/x-tex">A=\begin{vmatrix}
&amp;0&amp;1&amp;0&amp;0&amp;\\
&amp;1&amp;0&amp;1&amp;1&amp;\\
&amp;0&amp;1&amp;0&amp;1&amp;\\
&amp;0&amp;1&amp;1&amp;1&amp;\\
\end{vmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.8121em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.45em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-3.466em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span><span style="top:-4.064em;"><span class="pstrut" style="height:5.6161em;"></span><span style="height:3.6161em;width:0.3333em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.3333em" height="3.6161em" style="width:0.3333em" viewbox="0 0 333.33000000000004 3616" preserveaspectratio="xMinYMin"><path d="M145 0 H188 V3616 H145z M145 0 H188 V3616 H145z"/></svg></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:5.6161em;"></span><span class="delimsizinginner delim-size1"><span>âˆ£</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å¯¹äºèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">A_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ¥è¯´ï¼Œè·Ÿä»–æ¥è½¨çš„åªæœ‰èŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">A_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€å±‚è®¡ç®—åï¼ŒèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">A_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>èšåˆäº†æ¥è‡ªèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">A_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ç‰¹å¾ã€‚è€Œå¯¹äºèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">A_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä¸ä¹‹æ¥è½¨çš„åˆ™æœ‰èŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">A_1,A_3,A_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œç»è¿‡ç¬¬ä¸€å±‚åï¼Œè¯¥èŠ‚ç‚¹èšåˆäº†æ‰€æœ‰èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚é‚£ä¹ˆåœ¨ç¬¬äºŒå±‚ï¼Œç”±äºå›¾ç»“æ„ä¸æ˜¯åŠ¨æ€æ›´æ–°çš„ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">A_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆä¼šèšåˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">A_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ç‰¹å¾ä¿¡æ¯ï¼Œä½†æ­¤æ—¶çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">A_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å·²ç»èšåˆäº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">A_3,A_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ç‰¹å¾ä¿¡æ¯ï¼æ¢è¨€ä¹‹ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">A_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ„Ÿå—åˆ°äº†æ¥è‡ªè¿œæ–¹çš„å¬å”¤ï¼(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">A_3,A_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ä¿¡æ¯ç»è¿‡ä¸¤å±‚ç½‘ç»œåä¼ é€’åˆ°äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">A_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¤„ï¼Œä¼ é€’è¿‡ç¨‹ç±»ä¼¼äºå¹¶æŸ¥é›†å•¦)</p>
<p>æœ€åå¯¹äºè¿™äº›åˆ†ç±»ä»»åŠ¡ï¼Œé‡‡ç”¨äº¤å‰ç†µå‡½æ•°ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œè®¡ç®—è·å–æœ€å¯èƒ½çš„æƒ…å†µå³å¯ã€‚</p>
<hr>
<h2 id="äºŒã€åŸºäºPyGçš„å›¾å·ç§¯ç¥ç»ç½‘ç»œåŠç›‘ç£åˆ†ç±»">äºŒã€åŸºäºPyGçš„å›¾å·ç§¯ç¥ç»ç½‘ç»œåŠç›‘ç£åˆ†ç±»</h2>
<h3 id="2-1-æ¨¡å‹å‡†å¤‡">2.1  æ¨¡å‹å‡†å¤‡</h3>
<p>æ¨¡å—å¯¼å…¥é˜¶æ®µï¼Œåœ¨æœ¬å®éªŒä¸­ï¼Œ<code>networkx</code>ä¸»è¦ç”¨äºå›¾ç»“æ„å¯è§†åŒ–ï¼Œ<code>argparse</code>ç”¨äºå‚æ•°çš„è¯»å†™</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch_geometric.nn <span class="keyword">import</span> GCNConv</span><br><span class="line"><span class="keyword">from</span> torch_geometric.datasets <span class="keyword">import</span> Planetoid</span><br><span class="line"><span class="keyword">from</span> torch_geometric.utils <span class="keyword">import</span> to_networkx</span><br><span class="line"><span class="keyword">import</span> networkx <span class="keyword">as</span> nx</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">from</span> sklearn.manifold <span class="keyword">import</span> TSNE</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn.semi_supervised <span class="keyword">import</span> _label_propagation</span><br><span class="line"><span class="keyword">import</span> argparse</span><br></pre></td></tr></table></figure>
<h3 id="2-2-æ•°æ®æ¢æŸ¥">2.2  æ•°æ®æ¢æŸ¥</h3>
<p>æˆ‘ä»¬å¯¼å…¥Coraæ•°æ®é›†ã€‚</p>
<p>Coraæ•°æ®é›†ç”±2078ç¯‡æœºå™¨å­¦ä¹ é¢†åŸŸçš„è®ºæ–‡æ„æˆï¼Œæ¯ä¸ªæ ·æœ¬ç‚¹éƒ½æ˜¯ä¸€ç¯‡è®ºæ–‡ï¼Œè¿™äº›è®ºæ–‡ä¸»è¦åˆ†ä¸ºäº†7ä¸ªç±»åˆ«ï¼Œåˆ†åˆ«ä¸ºåŸºäºæ¡ˆä¾‹ã€é—ä¼ ç®—æ³•ã€ç¥ç»ç½‘ç»œã€æ¦‚ç‡æ–¹æ³•ã€å¼ºåŒ–å­¦ä¹ ã€è§„åˆ™å­¦ä¹ ä¸ç†è®ºã€‚åœ¨è¯¥æ•°æ®é›†ä¸­ï¼Œæ¯ç¯‡è®ºæ–‡éƒ½è‡³å°‘å¼•ç”¨äº†è¯¥æ•°æ®é›†ä¸­çš„å¦ä¸€ç¯‡è®ºæ–‡ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰€ä»£è¡¨çš„è®ºæ–‡ï¼Œéƒ½ç”±ä¸€ä¸ª1433ç»´çš„è¯å‘é‡è¡¨ç¤ºï¼Œå³è¯¥å›¾ä¸Šæ¯ä¸ªèŠ‚ç‚¹éƒ½å…·æœ‰1433ä¸ªç‰¹å¾ï¼Œè¯å‘é‡çš„æ¯ä¸ªå…ƒç´ éƒ½å¯¹åº”ä¸€ä¸ªè¯ï¼Œä¸”è¯¥å…ƒç´ ä»…æœ‰0æˆ–1ä¸¤ä¸ªå–å€¼ï¼Œå–0è¡¨ç¤ºè¯¥å…ƒç´ å¯¹åº”çš„è¯ä¸åœ¨è®ºæ–‡ä¸­ï¼Œå–1è¡¨ç¤ºåœ¨ã€‚</p>
<h3 id="Coraå‚æ•°-v2">Coraå‚æ•°</h3>
<ul>
<li><strong>ind.cora.x</strong> : è®­ç»ƒé›†èŠ‚ç‚¹ç‰¹å¾å‘é‡ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šscipy.sparse.csr.csr_matrixï¼Œå®é™…å±•å¼€åå¤§å°ä¸ºï¼š (140, 1433)</li>
<li><strong>ind.cora.tx</strong> : æµ‹è¯•é›†èŠ‚ç‚¹ç‰¹å¾å‘é‡ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šscipy.sparse.csr.csr_matrixï¼Œå®é™…å±•å¼€åå¤§å°ä¸ºï¼š (1000, 1433)</li>
<li><strong>ind.cora.allx</strong> : åŒ…å«æœ‰æ ‡ç­¾å’Œæ— æ ‡ç­¾çš„è®­ç»ƒèŠ‚ç‚¹ç‰¹å¾å‘é‡ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šscipy.sparse.csr.csr_matrixï¼Œå®é™…å±•å¼€åå¤§å°ä¸ºï¼š(1708, 1433)ï¼Œå¯ä»¥ç†è§£ä¸ºé™¤æµ‹è¯•é›†ä»¥å¤–çš„å…¶ä»–èŠ‚ç‚¹ç‰¹å¾é›†åˆï¼Œè®­ç»ƒé›†æ˜¯å®ƒçš„å­é›†</li>
<li><strong>ind.cora.y</strong> : one-hotè¡¨ç¤ºçš„è®­ç»ƒèŠ‚ç‚¹çš„æ ‡ç­¾ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šnumpy.ndarray</li>
<li><strong>ind.cora.ty</strong> : one-hotè¡¨ç¤ºçš„æµ‹è¯•èŠ‚ç‚¹çš„æ ‡ç­¾ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šnumpy.ndarray</li>
<li><strong>ind.cora.ally</strong> : one-hotè¡¨ç¤ºçš„ind.cora.allxå¯¹åº”çš„æ ‡ç­¾ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šnumpy.ndarray</li>
<li><strong>ind.cora.graph</strong> : ä¿å­˜èŠ‚ç‚¹ä¹‹é—´è¾¹çš„ä¿¡æ¯ï¼Œä¿å­˜æ ¼å¼ä¸ºï¼š{ index : [ index_of_neighbor_nodes ] }</li>
<li><strong>ind.cora.test.index</strong> : ä¿å­˜æµ‹è¯•é›†èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šListï¼Œç”¨äºåé¢çš„å½’çº³å­¦ä¹ è®¾ç½®ã€‚</li>
</ul>
<p>é€šè¿‡ä»¥ä¸‹è¯­å¥ä¸‹è½½æˆ–è¯»å–ï¼Œè‹¥å½“å‰è·¯å¾„ä¸‹æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶ï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥Coraæ•°æ®é›†</span></span><br><span class="line">dataset=Planetoid(root=<span class="string">r&quot;./Cora&quot;</span>,name=<span class="string">&quot;Cora&quot;</span>) <span class="comment"># root: æŒ‡å®šè·¯å¾„ name: æ•°æ®é›†åç§°</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ•°æ®çš„åŸºæœ¬æƒ…å†µ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®åŒ…å«çš„ç±»æ•°é‡:&quot;</span>,dataset.num_classes)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®è¾¹çš„ç‰¹å¾æ•°é‡:&quot;</span>,dataset.num_edge_features)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®è¾¹çš„æ•°é‡:&quot;</span>,dataset.data.edge_index.shape[<span class="number">1</span>]/<span class="number">2</span>) <span class="comment"># é™¤ä»¥2æ˜¯OOCçš„ç»„ç»‡å½¢å¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„ç‰¹å¾æ•°é‡:&quot;</span>,dataset.num_node_features)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„æ•°é‡:&quot;</span>,dataset.data.x.shape[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºçš„ç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç½‘ç»œæ•°æ®åŒ…å«çš„ç±»æ•°é‡: <span class="number">7</span></span><br><span class="line">ç½‘ç»œæ•°æ®è¾¹çš„ç‰¹å¾æ•°é‡: <span class="number">0</span></span><br><span class="line">ç½‘ç»œæ•°æ®è¾¹çš„æ•°é‡: <span class="number">5278.0</span></span><br><span class="line">ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„ç‰¹å¾æ•°é‡: <span class="number">1433</span></span><br><span class="line">ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„æ•°é‡: <span class="number">2708</span></span><br><span class="line">ç½‘ç»œçš„è¾¹çš„æ•°é‡:  <span class="number">5278</span></span><br><span class="line">ç½‘ç»œçš„èŠ‚ç‚¹çš„æ•°é‡:  <span class="number">2708</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒCoraæ•°æ®é›†å›Šæ‹¬äº†ä¸ƒä¸ªç±»å…±2708ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¸¦æœ‰1433ä¸ªç‰¹å¾ï¼Œä¸€å…±æœ‰5278æ¡è¾¹ï¼Œè¾¹æ²¡æœ‰åŒ…å«ç‰¹å¾ã€‚</p>
<p>é‡ç‚¹æ¥çœ‹<code>dataset.data</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Data(x=[<span class="number">2708</span>, <span class="number">1433</span>], edge_index=[<span class="number">2</span>, <span class="number">10556</span>], y=[<span class="number">2708</span>], train_mask=[<span class="number">2708</span>], val_mask=[<span class="number">2708</span>], test_mask=[<span class="number">2708</span>])</span><br></pre></td></tr></table></figure>
<p>è¯¥æ•°æ®ä¸­çš„xæ˜¯èŠ‚ç‚¹å’Œå¯¹åº”çš„ç‰¹å¾çŸ©é˜µï¼Œyæ˜¯æ ‡ç­¾å€¼ï¼Œedge_indexåˆ™æ˜¯COOçš„ç½‘ç»œè¿æ¥æ ¼å¼(ç¬¬ä¸€è¡Œè¡¨ç¤ºèŠ‚ç‚¹é¡ºåºï¼Œç¬¬äºŒè¡Œè¡¨ç¤ºè¿æ¥å¯¹è±¡ï¼Œå› è€Œæ¯æ¡è¾¹ä¼šå‡ºç°ä¸¤æ¬¡)ï¼Œmaskå¯¹è±¡åˆ™æ˜¯ä¸€ä¸ªé€»è¾‘å‘é‡(ä¸èŠ‚ç‚¹æ•°é‡ç›¸åŒ)ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹çš„ç”¨é€”ã€‚</p>
<h3 id="2-3-ç»“æ„å¯è§†åŒ–">2.3  ç»“æ„å¯è§†åŒ–</h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°åˆ†ææ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†å›¾ç»“æ„å¯è§†åŒ–ï¼Œä½†ä½¿ç”¨å¼ é‡æ ¼å¼çš„æ•°æ®ååˆ†ä¸æ–¹ä¾¿ï¼ŒPyGæä¾›äº†<code>to_networkx()</code>å‡½æ•°ï¼Œå¯ç”¨äºå°†<code>torch_geometric.data.Data</code>å¯¹è±¡è½¬åŒ–ä¸º<code>networkx</code>åº“ä¸­çš„æœ‰å‘å›¾æ•°æ®ï¼Œæ–¹ä¾¿è¿›ä¸€æ­¥çš„åˆ†æå’Œå¯è§†åŒ–ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡networkxåº“è¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line">CoraNet=to_networkx(dataset.data) <span class="comment"># type : networkx.classes.graph.Graph</span></span><br><span class="line">CoraNet=CoraNet.to_undirected() <span class="comment"># è½¬åŒ–ä¸ºæ— å‘å›¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç½‘ç»œæƒ…å†µ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œçš„è¾¹çš„æ•°é‡: &quot;</span>,CoraNet.number_of_edges())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œçš„èŠ‚ç‚¹çš„æ•°é‡: &quot;</span>,CoraNet.number_of_nodes())</span><br><span class="line">Node_class=dataset.data.y.data.numpy()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;èŠ‚ç‚¹åˆ†ç±»:&quot;</span>,Node_class)</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç½‘ç»œçš„è¾¹çš„æ•°é‡:  <span class="number">5278</span></span><br><span class="line">ç½‘ç»œçš„èŠ‚ç‚¹çš„æ•°é‡:  <span class="number">2708</span></span><br><span class="line">èŠ‚ç‚¹åˆ†ç±»: [<span class="number">3</span> <span class="number">4</span> <span class="number">4</span> ... <span class="number">3</span> <span class="number">3</span> <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æ•°æ®å·²ç»ç”±<code>Tensor</code>æ ¼å¼è½¬åŒ–ä¸º<code>Graph</code>æ ¼å¼å•¦ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†æ ‡ç­¾<code>y</code>å•ç‹¬æå–å‡ºæ¥ï¼Œæ–¹ä¾¿æ¥ä¸‹æ¥çš„æ“ä½œã€‚</p>
<p>åœ¨<code>Graph</code>ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Graph.degree</code>æ–¹æ³•è®¡ç®—åº¦ï¼Œåº¦è¶Šå¤§çš„èŠ‚ç‚¹ï¼Œè¯´æ˜è·Ÿå…¶ä»–èŠ‚ç‚¹çš„è¿é€šæ€§è¶Šå¥½ï¼Œåœ¨æ•´ä¸ªç½‘ç»œä¸­å…·æœ‰æ›´å¤§çš„è´¡çŒ®åº¦ï¼Œå³è¶Šé‡è¦ã€‚ä¸‹é¢æˆ‘ä»¬å¯¹å‰ä¸‰åçš„èŠ‚ç‚¹è¿›è¡Œå¯è§†åŒ–ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—èŠ‚ç‚¹çš„åº¦</span></span><br><span class="line">Node_degree=pd.DataFrame(data=CoraNet.degree,columns=[<span class="string">&quot;Node&quot;</span>,<span class="string">&quot;Degree&quot;</span>])</span><br><span class="line">Node_degree=Node_degree.sort_values(by=[<span class="string">&quot;Degree&quot;</span>],ascending=<span class="literal">False</span>)</span><br><span class="line">Node_degree=Node_degree.reset_index(drop=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç›´æ–¹å›¾å¯è§†åŒ–åº¦è¾ƒå¤šçš„å‰ä¸‰åä¸ªèŠ‚ç‚¹</span></span><br><span class="line">Node_degree.iloc[<span class="number">0</span>:<span class="number">30</span>,:].plot(x=<span class="string">&quot;Node&quot;</span>,y=<span class="string">&quot;Degree&quot;</span>,kind=<span class="string">&quot;bar&quot;</span>,figsize=(<span class="number">10</span>,<span class="number">7</span>))</span><br><span class="line">plt.xlabel(<span class="string">&quot;Node&quot;</span>,size=<span class="number">12</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Degree&quot;</span>,size=<span class="number">12</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614200700531.png" alt="image-20220614200700531" style="zoom:50%;">
<p>æ¥ç€å€ŸåŠ©<code>networkx</code>åº“å¯¹ç½‘ç»œç»“æ„è¿›è¡Œå¯è§†åŒ–ï¼Œ<code>nx.spring_layout(Graph)</code>ä¼šè‡ªåŠ¨è®¡ç®—ç½‘ç»œèŠ‚ç‚¹ä¸­çš„å¸ƒå±€æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…æœ‰ï¼š</p>
<ul>
<li>ä¸ºä¸åŒç±»çš„èŠ‚ç‚¹æŒ‡å®šä¸åŒçš„é¢œè‰²
<ul>
<li><code>draw_networkx_nodes(Graph,pos,nodelist,nodesize,node_color,alpha)</code>å¯ç”¨äºä»¥ç‰¹å®šé¢œè‰²ç»˜åˆ¶ä¸€å¼ å›¾é‡Œé¢çš„æŒ‡å®šç´¢å¼•çš„èŠ‚ç‚¹</li>
</ul>
</li>
<li>ä¸ºç½‘ç»œæ·»åŠ è¾¹
<ul>
<li><code>draw_networkx_edges(Graph,pos,width,edge_color)</code>ç”¨äºç»˜åˆ¶å›¾ç»“æ„çš„è¾¹</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nxå›¾ç»“æ„å¯è§†åŒ–</span></span><br><span class="line">pos=nx.spring_layout(CoraNet) <span class="comment"># ç½‘ç»œå›¾ä¸­èŠ‚ç‚¹çš„å¸ƒå±€æ–¹å¼</span></span><br><span class="line">nodecolor=[<span class="string">&quot;red&quot;</span>,<span class="string">&quot;blue&quot;</span>,<span class="string">&quot;green&quot;</span>,<span class="string">&quot;yellow&quot;</span>,<span class="string">&quot;peru&quot;</span>,<span class="string">&quot;violet&quot;</span>,<span class="string">&quot;cyan&quot;</span>]</span><br><span class="line">nodelabel=np.array(<span class="built_in">list</span>(CoraNet.nodes))</span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>,<span class="number">12</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸åŒçš„ç±»ä½¿ç”¨ä¸åŒçš„é¢œè‰²</span></span><br><span class="line"><span class="keyword">for</span> ii <span class="keyword">in</span> np.arange(<span class="built_in">len</span>(np.unique(Node_class))):</span><br><span class="line">    nodelist=nodelabel[Node_class==ii]</span><br><span class="line">    <span class="comment"># ç»˜åˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    nx.draw_networkx_nodes(CoraNet,pos,nodelist=<span class="built_in">list</span>(nodelist),node_size=<span class="number">20</span>,</span><br><span class="line">                           node_color=nodecolor[ii],alpha=<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºç½‘ç»œæ·»åŠ è¾¹</span></span><br><span class="line">nx.draw_networkx_edges(CoraNet,pos,width=<span class="number">1</span>,edge_color=<span class="string">&quot;gray&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614200734449.png" alt="image-20220614200734449" style="zoom: 25%;">
<p>æˆ‘ä»¬å¯ä»¥å†å¯¹è®­ç»ƒé›†å•ç‹¬ç»˜åˆ¶ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯è§†åŒ–è®­ç»ƒé›†çš„èŠ‚ç‚¹åˆ†å¸ƒ</span></span><br><span class="line">nodelabel=np.arange(<span class="number">0</span>,<span class="number">140</span>) <span class="comment"># è®­ç»ƒé›†èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line">Node_class=dataset.data.y.data.numpy()[<span class="number">0</span>:<span class="number">140</span>]</span><br><span class="line"><span class="comment"># nxå¯è§†åŒ–</span></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">6</span>))</span><br><span class="line"><span class="keyword">for</span> ii <span class="keyword">in</span> np.arange(<span class="built_in">len</span>(np.unique(Node_class))):</span><br><span class="line">    nodelist=nodelabel[Node_class==ii]</span><br><span class="line">    <span class="comment"># ç»˜åˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    nx.draw_networkx_nodes(CoraNet,pos,nodelist=<span class="built_in">list</span>(nodelist),node_size=<span class="number">20</span>,</span><br><span class="line">                           node_color=nodecolor[ii],alpha=<span class="number">0.8</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>ç®€å•æ¥è¯´ï¼Œè®­ç»ƒé›†çš„åˆ†å¸ƒå¤§è‡´ä½“ç°äº†åŸå§‹æ•°æ®çš„åˆ†å¸ƒ</p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614200756459.png" alt="image-20220614200756459" style="zoom: 50%;">
<h3 id="2-4-ç½‘ç»œæ­å»º">2.4  ç½‘ç»œæ­å»º</h3>
<p>æˆ‘ä»¬è¿™è¾¹ç›´æ¥ä½¿ç”¨PyGçš„GCNConvè¿›è¡Œæ­å»ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GCNNet</span>(torch.nn.Module):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,input_feature,num_classes</span>):</span><br><span class="line">            <span class="built_in">super</span>(GCNNet, self).__init__()</span><br><span class="line">            self.input_feature=input_feature</span><br><span class="line">            self.num_classes=num_classes</span><br><span class="line">            <span class="comment"># è¿™é‡Œæˆ‘ä»¬ç”¨äº†ä¸¤ä¸ªå›¾å·ç§¯å±‚</span></span><br><span class="line">            <span class="comment"># 1433-&gt;32</span></span><br><span class="line">            self.conv1=GCNConv(input_feature,<span class="number">32</span>)</span><br><span class="line">            <span class="comment"># 32-&gt;num_classes</span></span><br><span class="line">            self.conv2=GCNConv(<span class="number">32</span>,num_classes)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,data</span>):</span><br><span class="line">            x,edge_index=data.x,data.edge_index</span><br><span class="line">            <span class="comment"># éœ€è¦è¾“å…¥çš„æ˜¯èŠ‚ç‚¹çš„æ•°æ®(index,feature)</span></span><br><span class="line">            <span class="comment"># ä»¥åŠè¾¹ç´¢å¼•COOï¼Œç”¨äºæ„å»ºé‚»æ¥çŸ©é˜µå’Œå…¥åº¦çŸ©é˜µ</span></span><br><span class="line">            x=F.relu(self.conv1(x,edge_index))</span><br><span class="line">            x=F.relu(self.conv2(x,edge_index))</span><br><span class="line">            <span class="keyword">return</span> F.softmax(x,dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-5-ç½‘ç»œè®­ç»ƒ">2.5  ç½‘ç»œè®­ç»ƒ</h3>
<p>åœ¨è¿›è¡Œè®­ç»ƒå‰ï¼Œéœ€è¦å…ˆè®¾å®šå¥½å…¨å±€å˜é‡ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>argparse</code>åº“è¿›è¡Œæ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parse_args</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;PARAMETERS&#x27;&#x27;&#x27;</span></span><br><span class="line">    parser=argparse.ArgumentParser(<span class="string">&quot;GCN&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-e&#x27;</span>,<span class="string">&#x27;--epochs&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">int</span>,default=<span class="number">500</span>,<span class="built_in">help</span>=<span class="string">&#x27;number of epoch in training [default: 200]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-lr&#x27;</span>,<span class="string">&#x27;--learning_rate&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">float</span>,default=<span class="number">0.01</span>, <span class="built_in">help</span>=<span class="string">&#x27;learning rate in training [default: 0.01]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-op&#x27;</span>,<span class="string">&#x27;--optimizer&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;Adam&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;optimizer for training [default: Adam]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-g&#x27;</span>,<span class="string">&#x27;--gpu&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;0&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;specify gpu device [default: 0]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-p&#x27;</span>,<span class="string">&#x27;--path&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;./save&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;the path of file saving [default: ./save]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-dr&#x27;</span>,<span class="string">&#x27;--decay_rate&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">5e-4</span>, <span class="built_in">help</span>=<span class="string">&#x27;decay rate [default: 5e-4]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> parser.parse_args()</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªä¿å­˜è·¯å¾„ï¼Œç”¨äºå­˜æ”¾æœ€ä¼˜çš„æ¨¡å‹å‚æ•°å’Œæœ€ä¼˜çš„ä¼˜åŒ–å™¨å‚æ•°ï¼Œè­¬å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¯å¢ƒ</span></span><br><span class="line">    args = args</span><br><span class="line">    savepath = args.path</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(savepath):</span><br><span class="line">        os.makedirs(savepath)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># ä¿å­˜</span></span><br><span class="line">    <span class="keyword">if</span> å½“å‰ç²¾åº¦&gt;æœ€ä¼˜ç²¾åº¦:</span><br><span class="line">            sp=savepath+<span class="string">&quot;/best_model.pth&quot;</span></span><br><span class="line">            state=&#123;</span><br><span class="line">                <span class="string">&quot;epoch&quot;</span>:epoch,</span><br><span class="line">                <span class="string">&quot;accuracy&quot;</span>:acc,</span><br><span class="line">                <span class="string">&quot;model_state_dict&quot;</span>:model.state_dict(),</span><br><span class="line">                <span class="string">&quot;optimizer_state_dict&quot;</span>:optimizer.state_dict()</span><br><span class="line">            &#125;</span><br><span class="line">            torch.save(state,sp)</span><br><span class="line">            best_acc = acc</span><br><span class="line"><span class="comment"># è¯»å–</span></span><br><span class="line"> <span class="comment"># è¯»å–æ¨¡å‹</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        checkpoint=torch.load(savepath+<span class="string">&quot;/best_model.pth&quot;</span>)</span><br><span class="line">        mygcn.load_state_dict(checkpoint[<span class="string">&#x27;model_state_dict&#x27;</span>])</span><br><span class="line">        start_epoch = checkpoint[<span class="string">&#x27;epoch&#x27;</span>]</span><br><span class="line">        optimizer.load_state_dict(checkpoint[<span class="string">&#x27;optimizer_state_dict&#x27;</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        mygcn=GCNNet(input_feature,num_classes)</span><br><span class="line">        start_epoch=<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>é‚£é¦–å…ˆè¿›è¡Œç½‘ç»œçš„åˆå§‹åŒ–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–ç½‘ç»œ</span></span><br><span class="line">   args = args</span><br><span class="line">   savepath = args.path</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(savepath):</span><br><span class="line">       os.makedirs(savepath)</span><br><span class="line"></span><br><span class="line">   input_feature = dataset.num_node_features</span><br><span class="line">   num_classes = dataset.num_classes</span><br><span class="line">   mygcn = GCNNet(input_feature, num_classes)</span><br><span class="line">   model=mygcn</span><br><span class="line">   data = dataset[<span class="number">0</span>]</span><br><span class="line">   os.environ[<span class="string">&quot;CUDA_VISIBLE_DEVICES&quot;</span>] = args.gpu</span><br></pre></td></tr></table></figure>
<p>æ¥ç€å’±å®šä¹‰ä¼˜åŒ–å™¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¼˜åŒ–å™¨</span></span><br><span class="line">    <span class="keyword">if</span> args.optimizer == <span class="string">&#x27;Adam&#x27;</span>:</span><br><span class="line">        optimizer = torch.optim.Adam(</span><br><span class="line">            model.parameters(),</span><br><span class="line">            lr=args.learning_rate,</span><br><span class="line">            <span class="comment"># betas=(0.9, 0.999),</span></span><br><span class="line">            <span class="comment"># eps=1e-08,</span></span><br><span class="line">            weight_decay=args.decay_rate</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.01</span>, momentum=<span class="number">0.9</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å†æ¥è¯»å–æ¨¡å‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–æ¨¡å‹</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        checkpoint=torch.load(savepath+<span class="string">&quot;/best_model.pth&quot;</span>)</span><br><span class="line">        mygcn.load_state_dict(checkpoint[<span class="string">&#x27;model_state_dict&#x27;</span>])</span><br><span class="line">        start_epoch = checkpoint[<span class="string">&#x27;epoch&#x27;</span>]</span><br><span class="line">        optimizer.load_state_dict(checkpoint[<span class="string">&#x27;optimizer_state_dict&#x27;</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        mygcn=GCNNet(input_feature,num_classes)</span><br><span class="line">        start_epoch=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(mygcn)</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶çš„è¾“å‡ºä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">GCNNet(</span></span><br><span class="line"><span class="string">  (conv1): GCNConv(1433, 32)</span></span><br><span class="line"><span class="string">  (conv2): GCNConv(32, 7)</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†è¿›è¡Œç½‘ç»œçš„è®­ç»ƒï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç½‘ç»œè®­ç»ƒ</span></span><br><span class="line">   train_loss_all=[]</span><br><span class="line">   val_loss_all=[]</span><br><span class="line">   best_acc=<span class="number">0</span></span><br><span class="line">   train_acc_all=[]</span><br><span class="line">   model.train()</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(start_epoch,args.epochs):</span><br><span class="line">       optimizer.zero_grad()</span><br><span class="line">       out=model(data)</span><br><span class="line">       loss=F.cross_entropy(out[data.train_mask],data.y[data.train_mask])</span><br><span class="line">       loss.backward()</span><br><span class="line">       optimizer.step()</span><br><span class="line"></span><br><span class="line">       train_loss_all.append(loss.data.cpu().numpy())</span><br><span class="line"></span><br><span class="line">       <span class="comment"># è®¡ç®—åœ¨éªŒè¯é›†ä¸Šçš„æŸå¤±</span></span><br><span class="line">       loss=F.cross_entropy(out[data.val_mask],data.y[data.val_mask])</span><br><span class="line">       val_loss_all.append(loss.data.cpu().numpy())</span><br><span class="line">       _,pred=out.<span class="built_in">max</span>(dim=<span class="number">1</span>)</span><br><span class="line">       acc=<span class="built_in">float</span>(pred[data.train_mask].eq(data.y[data.train_mask]).<span class="built_in">sum</span>().item())/data.train_mask.<span class="built_in">sum</span>().item()</span><br><span class="line">       train_acc_all.append(acc)</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> acc&gt;best_acc:</span><br><span class="line">           sp=savepath+<span class="string">&quot;/best_model.pth&quot;</span></span><br><span class="line">           state=&#123;</span><br><span class="line">               <span class="string">&quot;epoch&quot;</span>:epoch,</span><br><span class="line">               <span class="string">&quot;accuracy&quot;</span>:acc,</span><br><span class="line">               <span class="string">&quot;model_state_dict&quot;</span>:model.state_dict(),</span><br><span class="line">               <span class="string">&quot;optimizer_state_dict&quot;</span>:optimizer.state_dict()</span><br><span class="line">           &#125;</span><br><span class="line">           torch.save(state,sp)</span><br><span class="line">           best_acc = acc</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> epoch%<span class="number">20</span>==<span class="number">0</span>:</span><br><span class="line">           <span class="built_in">print</span>(<span class="string">&quot;Epoch:&quot;</span>,epoch,<span class="string">&quot;;Train Loss:&quot;</span>,train_loss_all[-<span class="number">1</span>],<span class="string">&quot;;Val Loss:&quot;</span>,val_loss_all[-<span class="number">1</span>],<span class="string">&quot;Train acc:&quot;</span>,train_acc_all[-<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>æœ€åè‡ªç„¶æ˜¯ç»“æœçš„å¯è§†åŒ–å•¦ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯è§†åŒ–æŸå¤±å‡½æ•°å˜åŒ–</span></span><br><span class="line">   plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">   plt.plot(train_loss_all,<span class="string">&quot;ro-&quot;</span>,label=<span class="string">&quot;Train Loss&quot;</span>)</span><br><span class="line">   plt.plot(val_loss_all,<span class="string">&quot;bs-&quot;</span>,label=<span class="string">&quot;Val Loss&quot;</span>)</span><br><span class="line">   plt.legend()</span><br><span class="line">   plt.grid()</span><br><span class="line">   plt.xlabel(<span class="string">&quot;epoch&quot;</span>,size=<span class="number">13</span>)</span><br><span class="line">   plt.ylabel(<span class="string">&quot;loss&quot;</span>,size=<span class="number">13</span>)</span><br><span class="line">   plt.title(<span class="string">&quot;Graph Convolutional Networks&quot;</span>,size=<span class="number">14</span>)</span><br><span class="line">   plt.show()</span><br><span class="line"></span><br><span class="line">   <span class="comment"># è®¡ç®—é¢„æµ‹ç²¾åº¦</span></span><br><span class="line">   model.<span class="built_in">eval</span>()</span><br><span class="line">   _,pred=model(data).<span class="built_in">max</span>(dim=<span class="number">1</span>)</span><br><span class="line">   correct=<span class="built_in">float</span>(pred[data.test_mask].eq(data.y[data.test_mask]).<span class="built_in">sum</span>().item())</span><br><span class="line">   acc=correct/data.test_mask.<span class="built_in">sum</span>().item()</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;Accuracy: &#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(acc))</span><br></pre></td></tr></table></figure>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614211702630.png" alt="image-20220614211702630" style="zoom:50%;">
<p>å¯ä»¥å‘ç°ï¼Œåˆ°200ä¸ªepochåï¼Œæ¨¡å‹å·²ç»æ”¶æ•›ã€‚å½“ç„¶æœ‰å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰éšæœºå–å‡ºæ•°æ®é›†(ç”¨çš„æ˜¯å›ºå®šé¡ºåº)ï¼Œæœ€ç»ˆçš„ç²¾åº¦ç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Accuracy: <span class="number">0.8060</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ç›´è§‚ä½“ç°ç½‘ç»œçš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯¹éšè—å±‚è·å¾—çš„32ç»´ç‰¹å¾åœ¨ç©ºé—´ä¸­çš„åˆ†å¸ƒæƒ…å†µè¿›è¡Œå¯è§†åŒ–,ä¸åŸå§‹æ•°æ®1433ç»´è¿›è¡Œæ¯”è¾ƒï¼Œç»Ÿä¸€ä½¿ç”¨TSNEç®—æ³•é™åˆ°äºŒç»´ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç”¨äºTSNEç»˜åˆ¶çš„å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹åŸå§‹æ•°æ®åˆ†å¸ƒè¿›è¡Œå±•ç¤º</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">x_tsne,text</span>):</span><br><span class="line">       plt.figure(figsize=(<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">       axl = plt.subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">       X = x_tsne[:, <span class="number">0</span>]</span><br><span class="line">       Y = x_tsne[:, <span class="number">1</span>]</span><br><span class="line">       axl.set_xlim([<span class="built_in">min</span>(X), <span class="built_in">max</span>(X)])</span><br><span class="line">       axl.set_ylim([<span class="built_in">min</span>(Y), <span class="built_in">max</span>(Y)])</span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> ii <span class="keyword">in</span> <span class="built_in">range</span>(x_tsne.shape[<span class="number">0</span>]):</span><br><span class="line">           text = data.y.data.numpy()[ii]</span><br><span class="line">           axl.text(X[ii], Y[ii], <span class="built_in">str</span>(text), fontsize=<span class="number">5</span>,</span><br><span class="line">                    bbox=<span class="built_in">dict</span>(boxstyle=<span class="string">&quot;round&quot;</span>, facecolor=plt.cm.Set1(text), alpha=<span class="number">0.7</span>))</span><br><span class="line"></span><br><span class="line">       axl.set_xlabel(<span class="string">&quot;TSNE Feature 1&quot;</span>, size=<span class="number">13</span>)</span><br><span class="line">       axl.set_xlabel(<span class="string">&quot;TSNE Feature 2&quot;</span>, size=<span class="number">13</span>)</span><br><span class="line">       axl.set_title(t, size=<span class="number">15</span>)</span><br><span class="line">       plt.show()</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥ç»˜åˆ¶åŸå§‹æ•°æ®ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x_tsne=TSNE(n_components=<span class="number">2</span>).fit_transform(dataset.data.x.data.numpy())</span><br><span class="line">    draw(x_tsne,<span class="string">&quot;Original feature TSNE&quot;</span>)</span><br></pre></td></tr></table></figure>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614212707458.png" alt="image-20220614212707458" style="zoom: 33%;">
<p>æ¥ç€å‘¢ï¼Œåˆ©ç”¨<code>hook</code>å‡½æ•°è·å–ä¸­é—´å±‚çš„è¾“å…¥ï¼Œæ¿å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹ä¸­é—´å±‚32ç»´æ•°æ®è¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line">   activation=&#123;&#125; <span class="comment"># ä¿å­˜ä¸åŒå±‚çš„è¾“å‡º</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">get_activation</span>(<span class="params">name</span>):</span><br><span class="line">       <span class="keyword">def</span> <span class="title function_">hook</span>(<span class="params">model,<span class="built_in">input</span>,output</span>):</span><br><span class="line">           activation[name]=output.detach()</span><br><span class="line">       <span class="keyword">return</span> hook</span><br><span class="line">   </span><br><span class="line">   model.conv1.register_forward_hook(get_activation(<span class="string">&quot;conv1&quot;</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»˜åˆ¶32ç»´ç‰¹å¾</span></span><br><span class="line">    _=model(data)</span><br><span class="line">    conv1=activation[<span class="string">&quot;conv1&quot;</span>].data.cpu().numpy()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;conv1.shape: &quot;</span>,conv1.shape)</span><br><span class="line"></span><br><span class="line">    x_tsne=TSNE(n_components=<span class="number">2</span>).fit_transform(conv1)</span><br><span class="line">    draw(x_tsne,<span class="string">&quot;GCNConv Feature TSNE&quot;</span>)</span><br></pre></td></tr></table></figure>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220614212727353.png" alt="image-20220614212727353" style="zoom:33%;">
<p>å¯ä»¥å‘ç°ï¼Œåœ¨é«˜ç»´ç‰¹å¾ä¸­æŒ–æ˜å‡ºäº†æ¯ä¸ªç±»çš„æ½œåœ¨å…³ç³»ã€‚</p>
<h3 id="2-6-æ¨¡å‹æ¯”è¾ƒ">2.6  æ¨¡å‹æ¯”è¾ƒ</h3>
<p>æˆ‘ä»¬å†ç”¨GCNå¯¹æ¯”ä¸‹ä¼ ç»Ÿçš„SVMå’ŒLP(Label Propagation)ç®—æ³•:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨SVMè¿›è¡Œè®¡ç®—</span></span><br><span class="line">   X=dataset.data.x.data.numpy()</span><br><span class="line">   Y=dataset.data.y.data.numpy()</span><br><span class="line"></span><br><span class="line">   train_mask=dataset.data.train_mask.data.numpy()</span><br><span class="line">   test_mask=dataset.data.test_mask.data.numpy()</span><br><span class="line"></span><br><span class="line">   train_x=X[:<span class="number">140</span>,:]</span><br><span class="line">   train_y=Y[train_mask]</span><br><span class="line">   test_x=X[<span class="number">1708</span>:<span class="number">2709</span>,:]</span><br><span class="line">   test_y=Y[test_mask]</span><br><span class="line"></span><br><span class="line">   svmmodel=SVC()</span><br><span class="line">   svmmodel.fit(train_x,train_y)</span><br><span class="line">   prelab=svmmodel.predict(test_x)</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;SVMçš„é¢„æµ‹ç²¾åº¦ï¼š&quot;</span>,accuracy_score(test_y,prelab))</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆçš„ç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SVMçš„é¢„æµ‹ç²¾åº¦ï¼š <span class="number">0.56</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨LabelPropagationæ¨¡å‹è¿›è¡Œè®¡ç®—</span></span><br><span class="line"><span class="comment"># å¯¹äºä¸æ˜¯æœ‰ç›‘ç£çš„è®­ç»ƒæ•°æ®çš„æ ·æœ¬æ ‡ç­¾ä½¿ç”¨-1è¡¨ç¤º</span></span><br><span class="line">   train_y=Y.copy()</span><br><span class="line">   train_y[test_mask==<span class="literal">True</span>]=-<span class="number">1</span> <span class="comment"># ä½¿ç”¨éæµ‹è¯•æ•°æ®ä½œä¸ºç”±è¡¨äº²å•Šçš„è®­ç»ƒé›†</span></span><br><span class="line">   <span class="comment"># é¢„æµ‹æ•°æ®</span></span><br><span class="line">   test_y=Y[test_mask]</span><br><span class="line">   lp_model=_label_propagation.LabelPropagation(kernel=<span class="string">&quot;knn&quot;</span>,n_neighbors=<span class="number">3</span>)</span><br><span class="line">   lp_model.fit(X,train_y)</span><br><span class="line">   prelab=lp_model.transduction_</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;LPæ¨¡å‹çš„é¢„æµ‹ç²¾åº¦ï¼š&quot;</span>,accuracy_score(Y[test_mask],prelab[test_mask]))</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LPæ¨¡å‹çš„é¢„æµ‹ç²¾åº¦ï¼š <span class="number">0.45</span></span><br></pre></td></tr></table></figure>
<p>GCNåœ¨ç²¾åº¦ä¸Šè¿œé«˜äºä¸Šé¢ä¸¤ä¸ªæ¨¡å‹ï¼Œå…·ä½“åŸå› åœ¨å‰é¢å·²ç»ä»‹ç»è¿‡äº†ã€‚</p>
<h3 id="2-7-å®Œæ•´ä»£ç ">2.7  å®Œæ•´ä»£ç </h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®Œæ•´ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch_geometric.nn <span class="keyword">import</span> GCNConv</span><br><span class="line"><span class="keyword">from</span> torch_geometric.datasets <span class="keyword">import</span> Planetoid</span><br><span class="line"><span class="keyword">from</span> torch_geometric.utils <span class="keyword">import</span> to_networkx</span><br><span class="line"><span class="keyword">import</span> networkx <span class="keyword">as</span> nx</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">from</span> sklearn.manifold <span class="keyword">import</span> TSNE</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn.semi_supervised <span class="keyword">import</span> _label_propagation</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">dataset=Planetoid(root=<span class="string">r&quot;./Cora&quot;</span>,name=<span class="string">&quot;Cora&quot;</span>) <span class="comment"># root: æŒ‡å®šè·¯å¾„ name: æ•°æ®é›†åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_args</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;PARAMETERS&#x27;&#x27;&#x27;</span></span><br><span class="line">    parser=argparse.ArgumentParser(<span class="string">&quot;GCN&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-e&#x27;</span>,<span class="string">&#x27;--epochs&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">int</span>,default=<span class="number">500</span>,<span class="built_in">help</span>=<span class="string">&#x27;number of epoch in training [default: 200]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-lr&#x27;</span>,<span class="string">&#x27;--learning_rate&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">float</span>,default=<span class="number">0.01</span>, <span class="built_in">help</span>=<span class="string">&#x27;learning rate in training [default: 0.01]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-op&#x27;</span>,<span class="string">&#x27;--optimizer&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;Adam&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;optimizer for training [default: Adam]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-g&#x27;</span>,<span class="string">&#x27;--gpu&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;0&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;specify gpu device [default: 0]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-p&#x27;</span>,<span class="string">&#x27;--path&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;./save&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;the path of file saving [default: ./save]&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-dr&#x27;</span>,<span class="string">&#x27;--decay_rate&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">5e-4</span>, <span class="built_in">help</span>=<span class="string">&#x27;decay rate [default: 5e-4]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GCNNet</span>(torch.nn.Module):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,input_feature,num_classes</span>):</span><br><span class="line">            <span class="built_in">super</span>(GCNNet, self).__init__()</span><br><span class="line">            self.input_feature=input_feature</span><br><span class="line">            self.num_classes=num_classes</span><br><span class="line">            <span class="comment"># è¿™é‡Œæˆ‘ä»¬ç”¨äº†ä¸¤ä¸ªå›¾å·ç§¯å±‚</span></span><br><span class="line">            <span class="comment"># 1433-&gt;32</span></span><br><span class="line">            self.conv1=GCNConv(input_feature,<span class="number">32</span>)</span><br><span class="line">            <span class="comment"># 32-&gt;num_classes</span></span><br><span class="line">            self.conv2=GCNConv(<span class="number">32</span>,num_classes)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,data</span>):</span><br><span class="line">            x,edge_index=data.x,data.edge_index</span><br><span class="line">            <span class="comment"># éœ€è¦è¾“å…¥çš„æ˜¯èŠ‚ç‚¹çš„æ•°æ®(index,feature)</span></span><br><span class="line">            <span class="comment"># ä»¥åŠè¾¹ç´¢å¼•COOï¼Œç”¨äºæ„å»ºé‚»æ¥çŸ©é˜µå’Œå…¥åº¦çŸ©é˜µ</span></span><br><span class="line">            x=F.relu(self.conv1(x,edge_index))</span><br><span class="line">            x=F.relu(self.conv2(x,edge_index))</span><br><span class="line">            <span class="keyword">return</span> F.softmax(x,dim=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">dataset,args</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–ç½‘ç»œ</span></span><br><span class="line">    args = args</span><br><span class="line">    savepath = args.path</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(savepath):</span><br><span class="line">        os.makedirs(savepath)</span><br><span class="line"></span><br><span class="line">    input_feature = dataset.num_node_features</span><br><span class="line">    num_classes = dataset.num_classes</span><br><span class="line">    data = dataset[<span class="number">0</span>]</span><br><span class="line">    os.environ[<span class="string">&quot;CUDA_VISIBLE_DEVICES&quot;</span>] = args.gpu</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¼˜åŒ–å™¨</span></span><br><span class="line">    <span class="keyword">if</span> args.optimizer == <span class="string">&#x27;Adam&#x27;</span>:</span><br><span class="line">        optimizer = torch.optim.Adam(</span><br><span class="line">            model.parameters(),</span><br><span class="line">            lr=args.learning_rate,</span><br><span class="line">            <span class="comment"># betas=(0.9, 0.999),</span></span><br><span class="line">            <span class="comment"># eps=1e-08,</span></span><br><span class="line">            weight_decay=args.decay_rate</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.01</span>, momentum=<span class="number">0.9</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯»å–æ¨¡å‹</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        checkpoint=torch.load(savepath+<span class="string">&quot;/best_model.pth&quot;</span>)</span><br><span class="line">        mygcn.load_state_dict(checkpoint[<span class="string">&#x27;model_state_dict&#x27;</span>])</span><br><span class="line">        start_epoch = checkpoint[<span class="string">&#x27;epoch&#x27;</span>]</span><br><span class="line">        optimizer.load_state_dict(checkpoint[<span class="string">&#x27;optimizer_state_dict&#x27;</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        mygcn=GCNNet(input_feature,num_classes)</span><br><span class="line">        start_epoch=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(mygcn)</span><br><span class="line">	model=mygcn</span><br><span class="line">    <span class="comment"># ç½‘ç»œè®­ç»ƒ</span></span><br><span class="line">    train_loss_all=[]</span><br><span class="line">    val_loss_all=[]</span><br><span class="line">    best_acc=<span class="number">0</span></span><br><span class="line">    train_acc_all=[]</span><br><span class="line">    model.train()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(start_epoch,args.epochs):</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        out=model(data)</span><br><span class="line">        loss=F.cross_entropy(out[data.train_mask],data.y[data.train_mask])</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">        train_loss_all.append(loss.data.cpu().numpy())</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—åœ¨éªŒè¯é›†ä¸Šçš„æŸå¤±</span></span><br><span class="line">        loss=F.cross_entropy(out[data.val_mask],data.y[data.val_mask])</span><br><span class="line">        val_loss_all.append(loss.data.cpu().numpy())</span><br><span class="line">        _,pred=out.<span class="built_in">max</span>(dim=<span class="number">1</span>)</span><br><span class="line">        acc=<span class="built_in">float</span>(pred[data.train_mask].eq(data.y[data.train_mask]).<span class="built_in">sum</span>().item())/data.train_mask.<span class="built_in">sum</span>().item()</span><br><span class="line">        train_acc_all.append(acc)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> acc&gt;best_acc:</span><br><span class="line">            sp=savepath+<span class="string">&quot;/best_model.pth&quot;</span></span><br><span class="line">            state=&#123;</span><br><span class="line">                <span class="string">&quot;epoch&quot;</span>:epoch,</span><br><span class="line">                <span class="string">&quot;accuracy&quot;</span>:acc,</span><br><span class="line">                <span class="string">&quot;model_state_dict&quot;</span>:model.state_dict(),</span><br><span class="line">                <span class="string">&quot;optimizer_state_dict&quot;</span>:optimizer.state_dict()</span><br><span class="line">            &#125;</span><br><span class="line">            torch.save(state,sp)</span><br><span class="line">            best_acc = acc</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> epoch%<span class="number">20</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Epoch:&quot;</span>,epoch,<span class="string">&quot;;Train Loss:&quot;</span>,train_loss_all[-<span class="number">1</span>],<span class="string">&quot;;Val Loss:&quot;</span>,val_loss_all[-<span class="number">1</span>],<span class="string">&quot;Train acc:&quot;</span>,train_acc_all[-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯è§†åŒ–æŸå¤±å‡½æ•°å˜åŒ–</span></span><br><span class="line">    plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">    plt.plot(train_loss_all,<span class="string">&quot;ro-&quot;</span>,label=<span class="string">&quot;Train Loss&quot;</span>)</span><br><span class="line">    plt.plot(val_loss_all,<span class="string">&quot;bs-&quot;</span>,label=<span class="string">&quot;Val Loss&quot;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.grid()</span><br><span class="line">    plt.xlabel(<span class="string">&quot;epoch&quot;</span>,size=<span class="number">13</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&quot;loss&quot;</span>,size=<span class="number">13</span>)</span><br><span class="line">    plt.title(<span class="string">&quot;Graph Convolutional Networks&quot;</span>,size=<span class="number">14</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—é¢„æµ‹ç²¾åº¦</span></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line">    _,pred=model(data).<span class="built_in">max</span>(dim=<span class="number">1</span>)</span><br><span class="line">    correct=<span class="built_in">float</span>(pred[data.test_mask].eq(data.y[data.test_mask]).<span class="built_in">sum</span>().item())</span><br><span class="line">    acc=correct/data.test_mask.<span class="built_in">sum</span>().item()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Accuracy: &#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(acc))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¸ºäº†ç›´è§‚ä½“ç°ç½‘ç»œçš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯¹éšè—å±‚è·å¾—çš„32ç»´ç‰¹å¾åœ¨ç©ºé—´ä¸­çš„åˆ†å¸ƒæƒ…å†µè¿›è¡Œå¯è§†åŒ–,</span></span><br><span class="line">    <span class="comment"># ä¸åŸå§‹æ•°æ®1433ç»´è¿›è¡Œæ¯”è¾ƒï¼Œç»Ÿä¸€ä½¿ç”¨TSNEç®—æ³•é™ç»´</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹åŸå§‹æ•°æ®åˆ†å¸ƒè¿›è¡Œå±•ç¤º</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">x_tsne,t</span>):</span><br><span class="line">        plt.figure(figsize=(<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">        axl = plt.subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        X = x_tsne[:, <span class="number">0</span>]</span><br><span class="line">        Y = x_tsne[:, <span class="number">1</span>]</span><br><span class="line">        axl.set_xlim([<span class="built_in">min</span>(X), <span class="built_in">max</span>(X)])</span><br><span class="line">        axl.set_ylim([<span class="built_in">min</span>(Y), <span class="built_in">max</span>(Y)])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ii <span class="keyword">in</span> <span class="built_in">range</span>(x_tsne.shape[<span class="number">0</span>]):</span><br><span class="line">            text = data.y.data.numpy()[ii]</span><br><span class="line">            axl.text(X[ii], Y[ii], <span class="built_in">str</span>(text), fontsize=<span class="number">5</span>,</span><br><span class="line">                     bbox=<span class="built_in">dict</span>(boxstyle=<span class="string">&quot;round&quot;</span>, facecolor=plt.cm.Set1(text), alpha=<span class="number">0.7</span>))</span><br><span class="line"></span><br><span class="line">        axl.set_xlabel(<span class="string">&quot;TSNE Feature 1&quot;</span>, size=<span class="number">13</span>)</span><br><span class="line">        axl.set_xlabel(<span class="string">&quot;TSNE Feature 2&quot;</span>, size=<span class="number">13</span>)</span><br><span class="line">        axl.set_title(t, size=<span class="number">15</span>)</span><br><span class="line">        plt.show()</span><br><span class="line"></span><br><span class="line">    x_tsne=TSNE(n_components=<span class="number">2</span>).fit_transform(dataset.data.x.data.numpy())</span><br><span class="line">    draw(x_tsne,<span class="string">&quot;Original feature TSNE&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹ä¸­é—´å±‚32ç»´æ•°æ®è¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line">    activation=&#123;&#125; <span class="comment"># ä¿å­˜ä¸åŒå±‚çš„è¾“å‡º</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_activation</span>(<span class="params">name</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">hook</span>(<span class="params">model,<span class="built_in">input</span>,output</span>):</span><br><span class="line">            activation[name]=output.detach()</span><br><span class="line">        <span class="keyword">return</span> hook</span><br><span class="line"></span><br><span class="line">    model.conv1.register_forward_hook(get_activation(<span class="string">&quot;conv1&quot;</span>))</span><br><span class="line">    _=model(data)</span><br><span class="line">    conv1=activation[<span class="string">&quot;conv1&quot;</span>].data.cpu().numpy()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;conv1.shape: &quot;</span>,conv1.shape)</span><br><span class="line"></span><br><span class="line">    x_tsne=TSNE(n_components=<span class="number">2</span>).fit_transform(conv1)</span><br><span class="line">    draw(x_tsne,<span class="string">&quot;GCNConv Feature TSNE&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨SVMè¿›è¡Œè®¡ç®—</span></span><br><span class="line">    X=dataset.data.x.data.numpy()</span><br><span class="line">    Y=dataset.data.y.data.numpy()</span><br><span class="line"></span><br><span class="line">    train_mask=dataset.data.train_mask.data.numpy()</span><br><span class="line">    test_mask=dataset.data.test_mask.data.numpy()</span><br><span class="line"></span><br><span class="line">    train_x=X[:<span class="number">140</span>,:]</span><br><span class="line">    train_y=Y[train_mask]</span><br><span class="line">    test_x=X[<span class="number">1708</span>:<span class="number">2709</span>,:]</span><br><span class="line">    test_y=Y[test_mask]</span><br><span class="line"></span><br><span class="line">    svmmodel=SVC()</span><br><span class="line">    svmmodel.fit(train_x,train_y)</span><br><span class="line">    prelab=svmmodel.predict(test_x)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;SVMçš„é¢„æµ‹ç²¾åº¦ï¼š&quot;</span>,accuracy_score(test_y,prelab))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨LabelPropagationæ¨¡å‹è¿›è¡Œè®¡ç®—</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹äºä¸æ˜¯æœ‰ç›‘ç£çš„è®­ç»ƒæ•°æ®çš„æ ·æœ¬æ ‡ç­¾ä½¿ç”¨-1è¡¨ç¤º</span></span><br><span class="line">    train_y=Y.copy()</span><br><span class="line">    train_y[test_mask==<span class="literal">True</span>]=-<span class="number">1</span> <span class="comment"># ä½¿ç”¨éæµ‹è¯•æ•°æ®ä½œä¸ºç”±è¡¨äº²å•Šçš„è®­ç»ƒé›†</span></span><br><span class="line">    <span class="comment"># é¢„æµ‹æ•°æ®</span></span><br><span class="line">    test_y=Y[test_mask]</span><br><span class="line">    lp_model=_label_propagation.LabelPropagation(kernel=<span class="string">&quot;knn&quot;</span>,n_neighbors=<span class="number">3</span>)</span><br><span class="line">    lp_model.fit(X,train_y)</span><br><span class="line">    prelab=lp_model.transduction_</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;LPæ¨¡å‹çš„é¢„æµ‹ç²¾åº¦ï¼š&quot;</span>,accuracy_score(Y[test_mask],prelab[test_mask]))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    args=parse_args()</span><br><span class="line">    main(dataset,args)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ä¸‰ã€å›¾å·ç§¯å±‚åº•å±‚åŸç†">ä¸‰ã€å›¾å·ç§¯å±‚åº•å±‚åŸç†</h2>
<h3 id="3-1-åŸºäºPythonçš„Graph-Convolutionç»“æ„">3.1  åŸºäºPythonçš„Graph Convolutionç»“æ„</h3>
<p>æˆ‘ä»¬å¯¹PyGçš„Graph Convolutionç»“æ„è¿›è¡Œåˆ†æï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">glorot</span>(<span class="params">tensor</span>):</span><br><span class="line">    <span class="comment"># å‚æ•°æ ‡å‡†åŒ–(æ–¹å·®)</span></span><br><span class="line">    <span class="keyword">if</span> tensor <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        stdv = math.sqrt(<span class="number">6.0</span> / (tensor.size(-<span class="number">2</span>) + tensor.size(-<span class="number">1</span>)))</span><br><span class="line">        tensor.data.uniform_(-stdv, stdv)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">zeros</span>(<span class="params">tensor</span>):</span><br><span class="line">    <span class="comment"># å½’é›¶</span></span><br><span class="line">    <span class="keyword">if</span> tensor <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        tensor.data.fill_(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GCNConv</span>(<span class="title class_ inherited__">MessagePassing</span>):</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_channels, out_channels, improved=<span class="literal">False</span>, cached=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">                 bias=<span class="literal">True</span>, normalize=<span class="literal">True</span>, **kwargs</span>):</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">super</span>(GCNConv, self).__init__(aggr=<span class="string">&#x27;add&#x27;</span>, **kwargs)</span><br><span class="line">        </span><br><span class="line">        self.in_channels = in_channels <span class="comment"># è¾“å…¥ç»´åº¦</span></span><br><span class="line">        self.out_channels = out_channels <span class="comment"># è¾“å‡ºç»´åº¦</span></span><br><span class="line">        self.improved = improved <span class="comment"># å½±å“è‡ªç¯æƒé‡ï¼Œä¹Ÿå°±æ˜¯hat A = A+\lambda I ä¸­çš„\lambda</span></span><br><span class="line">        self.cached = cached <span class="comment"># ç¼“å­˜è®¡ç®—å€¼</span></span><br><span class="line">        self.normalize = normalize <span class="comment"># æ˜¯å¦æ·»åŠ è‡ªç¯å¹¶å¯¹ç§°æ ‡å‡†åŒ–</span></span><br><span class="line"></span><br><span class="line">        self.weight = Parameter(torch.Tensor(in_channels, out_channels)) <span class="comment"># æƒé‡å‚æ•°ï¼Œsizeä¸º(in,out)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> bias:</span><br><span class="line">            self.bias = Parameter(torch.Tensor(out_channels)) <span class="comment"># åç½®å‚æ•°,sizeä¸º(out)</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.register_parameter(<span class="string">&#x27;bias&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># æˆ‘ä»¬åˆšåˆšåˆå®šä¹‰äº†ä¸¤ä¸ªå‚æ•°ï¼Œç°åœ¨éœ€è¦å†æ¬¡åˆå§‹åŒ–</span></span><br><span class="line">        self.reset_parameters()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset_parameters</span>(<span class="params">self</span>):</span><br><span class="line">        </span><br><span class="line">        glorot(self.weight) <span class="comment"># å‚æ•°æ ‡å‡†åŒ–</span></span><br><span class="line">        zeros(self.bias) <span class="comment"># åç½®å½’é›¶</span></span><br><span class="line">        self.cached_result = <span class="literal">None</span></span><br><span class="line">        self.cached_num_edges = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">norm</span>(<span class="params">edge_index, num_nodes, edge_weight=<span class="literal">None</span>, improved=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">             dtype=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="comment"># è¾¹ç´¢å¼•</span></span><br><span class="line">        <span class="comment"># èŠ‚ç‚¹æ•°é‡</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> edge_weight <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># æ„å»ºè¾¹æƒé‡ï¼Œé»˜è®¤æ˜¯ç­‰æƒæ— å‘å›¾</span></span><br><span class="line">            edge_weight = torch.ones((edge_index.size(<span class="number">1</span>), ), dtype=dtype,</span><br><span class="line">                                     device=edge_index.device)</span><br><span class="line">		<span class="comment"># è¿™ç©æ„å°±æ˜¯lambda , å½±å“è‡ªç¯æƒé‡</span></span><br><span class="line">        fill_value = <span class="number">1</span> <span class="keyword">if</span> <span class="keyword">not</span> improved <span class="keyword">else</span> <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åŠ å…¥è‡ªç¯ï¼Œåšçš„å°±æ˜¯ï¼šA&#x27; = A + \lambda I</span></span><br><span class="line">        edge_index, edge_weight = add_remaining_self_loops(</span><br><span class="line">            edge_index, edge_weight, fill_value, num_nodes)</span><br><span class="line"></span><br><span class="line">        row, col = edge_index</span><br><span class="line">        <span class="comment"># æ„å»ºå¯¹è§’çŸ©é˜µ(degree) D</span></span><br><span class="line">        deg = scatter_add(edge_weight, row, dim=<span class="number">0</span>, dim_size=num_nodes)</span><br><span class="line">        <span class="comment"># D=(D^-0.5)</span></span><br><span class="line">        deg_inv_sqrt = deg.<span class="built_in">pow</span>(-<span class="number">0.5</span>)</span><br><span class="line">        <span class="comment"># æŠŠæŸäº›ç¦»è°±çš„å®¶ä¼™ä¿®æ­£ä¸º0</span></span><br><span class="line">        <span class="comment"># ä¼šå‡ºç°infä¹Ÿæ˜¯å› ä¸ºæµ®ç‚¹çš„è®¡ç®—å¯èƒ½å‡ºç°é—®é¢˜</span></span><br><span class="line">        deg_inv_sqrt[deg_inv_sqrt == <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)] = <span class="number">0</span></span><br><span class="line">		<span class="comment"># return : COOè¾¹,(D^-0.5) W (D^-0.5)</span></span><br><span class="line">        <span class="keyword">return</span> edge_index, deg_inv_sqrt[row] * edge_weight * deg_inv_sqrt[col]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, edge_index, edge_weight=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å…¬å¼ï¼š (D^-0.5) A&#x27; (D^-0.5) X W</span></span><br><span class="line">        <span class="comment"># A&#x27; = A +\lambda I</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è¿™é‡Œåšçš„å°±æ˜¯ X W</span></span><br><span class="line">        x = torch.matmul(x, self.weight)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.cached <span class="keyword">and</span> self.cached_result <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> edge_index.size(<span class="number">1</span>) != self.cached_num_edges:</span><br><span class="line">                <span class="keyword">raise</span> RuntimeError(</span><br><span class="line">                    <span class="string">&#x27;Cached &#123;&#125; number of edges, but found &#123;&#125;. Please &#x27;</span></span><br><span class="line">                    <span class="string">&#x27;disable the caching behavior of this layer by removing &#x27;</span></span><br><span class="line">                    <span class="string">&#x27;the `cached=True` argument in its constructor.&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">                        self.cached_num_edges, edge_index.size(<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.cached <span class="keyword">or</span> self.cached_result <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># è¾¹æ•°é‡</span></span><br><span class="line">            self.cached_num_edges = edge_index.size(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span> self.normalize:</span><br><span class="line">                <span class="comment"># æ˜¯å¦è¿›è¡Œæ ‡å‡†åŒ–(åˆ©ç”¨DçŸ©é˜µï¼Œç›¸å½“äºæƒé‡)</span></span><br><span class="line">                edge_index, norm = self.norm(edge_index, x.size(self.node_dim),</span><br><span class="line">                                             edge_weight, self.improved,</span><br><span class="line">                                             x.dtype)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                norm = edge_weight</span><br><span class="line">            <span class="comment"># è¾¹ç´¢å¼•ï¼Œè¾¹æƒé‡</span></span><br><span class="line">            self.cached_result = edge_index, norm</span><br><span class="line">		</span><br><span class="line">        edge_index, norm = self.cached_result</span><br><span class="line">		</span><br><span class="line">        <span class="comment"># Message.propagate ä¸»è¦æ˜¯åˆ©ç”¨é‚»æ¥çŸ©é˜µå®Œæˆä¸€äº›ä¿¡æ¯çš„å †å </span></span><br><span class="line">        <span class="keyword">return</span> self.propagate(edge_index, x=x, norm=norm)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">message</span>(<span class="params">self, x_j, norm</span>):</span><br><span class="line">        <span class="keyword">return</span> norm.view(-<span class="number">1</span>, <span class="number">1</span>) * x_j <span class="keyword">if</span> norm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> x_j</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, aggr_out</span>):</span><br><span class="line">        <span class="keyword">if</span> self.bias <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            aggr_out = aggr_out + self.bias</span><br><span class="line">        <span class="keyword">return</span> aggr_out</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è¾“å‡ºæ—¶çš„å®ä¾‹ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#123;&#125;(&#123;&#125;, &#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(self.__class__.__name__, self.in_channels,</span><br><span class="line">                                   self.out_channels)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">propagate</span>(<span class="params">self, edge_index: Adj, size: Size = <span class="literal">None</span>, **kwargs</span>):</span><br><span class="line"></span><br><span class="line">    decomposed_layers = <span class="number">1</span> <span class="keyword">if</span> self._explain <span class="keyword">else</span> self.decomposed_layers</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> hook <span class="keyword">in</span> self._propagate_forward_pre_hooks.values():</span><br><span class="line">        res = hook(self, (edge_index, size, kwargs))</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            edge_index, size, kwargs = res</span><br><span class="line"></span><br><span class="line">    size = self.__check_input__(edge_index, size)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Run &quot;fused&quot; message and aggregation (if applicable).</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isinstance</span>(edge_index, SparseTensor) <span class="keyword">and</span> self.fuse</span><br><span class="line">            <span class="keyword">and</span> <span class="keyword">not</span> self._explain):</span><br><span class="line">        coll_dict = self.__collect__(self.__fused_user_args__, edge_index,</span><br><span class="line">                                     size, kwargs)</span><br><span class="line"></span><br><span class="line">        msg_aggr_kwargs = self.inspector.distribute(</span><br><span class="line">            <span class="string">&#x27;message_and_aggregate&#x27;</span>, coll_dict)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> hook <span class="keyword">in</span> self._message_and_aggregate_forward_pre_hooks.values():</span><br><span class="line">            res = hook(self, (edge_index, msg_aggr_kwargs))</span><br><span class="line">            <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                edge_index, msg_aggr_kwargs = res</span><br><span class="line">                </span><br><span class="line">        out = self.message_and_aggregate(edge_index, **msg_aggr_kwargs)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> hook <span class="keyword">in</span> self._message_and_aggregate_forward_hooks.values():</span><br><span class="line">            res = hook(self, (edge_index, msg_aggr_kwargs), out)</span><br><span class="line">            <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                out = res</span><br><span class="line"></span><br><span class="line">        update_kwargs = self.inspector.distribute(<span class="string">&#x27;update&#x27;</span>, coll_dict)</span><br><span class="line">        out = self.update(out, **update_kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Otherwise, run both functions in separation.</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">isinstance</span>(edge_index, Tensor) <span class="keyword">or</span> <span class="keyword">not</span> self.fuse:</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> decomposed_layers &gt; <span class="number">1</span>:</span><br><span class="line">            user_args = self.__user_args__</span><br><span class="line">            decomp_args = &#123;a[:-<span class="number">2</span>] <span class="keyword">for</span> a <span class="keyword">in</span> user_args <span class="keyword">if</span> a[-<span class="number">2</span>:] == <span class="string">&#x27;_j&#x27;</span>&#125;</span><br><span class="line">            decomp_kwargs = &#123;</span><br><span class="line">                a: kwargs[a].chunk(decomposed_layers, -<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">for</span> a <span class="keyword">in</span> decomp_args</span><br><span class="line">            &#125;</span><br><span class="line">            decomp_out = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(decomposed_layers):</span><br><span class="line">            <span class="keyword">if</span> decomposed_layers &gt; <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">for</span> arg <span class="keyword">in</span> decomp_args:</span><br><span class="line">                    kwargs[arg] = decomp_kwargs[arg][i]</span><br><span class="line"></span><br><span class="line">            coll_dict = self.__collect__(self.__user_args__, edge_index,</span><br><span class="line">                                         size, kwargs)</span><br><span class="line"></span><br><span class="line">            msg_kwargs = self.inspector.distribute(<span class="string">&#x27;message&#x27;</span>, coll_dict)</span><br><span class="line">            <span class="keyword">for</span> hook <span class="keyword">in</span> self._message_forward_pre_hooks.values():</span><br><span class="line">                res = hook(self, (msg_kwargs, ))</span><br><span class="line">                <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    msg_kwargs = res[<span class="number">0</span>] <span class="keyword">if</span> <span class="built_in">isinstance</span>(res, <span class="built_in">tuple</span>) <span class="keyword">else</span> res</span><br><span class="line">            out = self.message(**msg_kwargs)</span><br><span class="line">            <span class="keyword">for</span> hook <span class="keyword">in</span> self._message_forward_hooks.values():</span><br><span class="line">                res = hook(self, (msg_kwargs, ), out)</span><br><span class="line">                <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    out = res</span><br><span class="line"></span><br><span class="line">            <span class="comment"># For `GNNExplainer`, we require a separate message and</span></span><br><span class="line">            <span class="comment"># aggregate procedure since this allows us to inject the</span></span><br><span class="line">            <span class="comment"># `edge_mask` into the message passing computation scheme.</span></span><br><span class="line">            <span class="keyword">if</span> self._explain:</span><br><span class="line">                edge_mask = self._edge_mask</span><br><span class="line">                <span class="keyword">if</span> self._apply_sigmoid:</span><br><span class="line">                    edge_mask = edge_mask.sigmoid()</span><br><span class="line">                <span class="comment"># Some ops add self-loops to `edge_index`. We need to do</span></span><br><span class="line">                <span class="comment"># the same for `edge_mask` (but do not train those).</span></span><br><span class="line">                <span class="keyword">if</span> out.size(self.node_dim) != edge_mask.size(<span class="number">0</span>):</span><br><span class="line">                    edge_mask = edge_mask[self._loop_mask]</span><br><span class="line">                    loop = edge_mask.new_ones(size[<span class="number">0</span>])</span><br><span class="line">                    edge_mask = torch.cat([edge_mask, loop], dim=<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">assert</span> out.size(self.node_dim) == edge_mask.size(<span class="number">0</span>)</span><br><span class="line">                out = out * edge_mask.view([-<span class="number">1</span>] + [<span class="number">1</span>] * (out.dim() - <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">            aggr_kwargs = self.inspector.distribute(<span class="string">&#x27;aggregate&#x27;</span>, coll_dict)</span><br><span class="line">            <span class="keyword">for</span> hook <span class="keyword">in</span> self._aggregate_forward_pre_hooks.values():</span><br><span class="line">                res = hook(self, (aggr_kwargs, ))</span><br><span class="line">                <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    aggr_kwargs = res[<span class="number">0</span>] <span class="keyword">if</span> <span class="built_in">isinstance</span>(res, <span class="built_in">tuple</span>) <span class="keyword">else</span> res</span><br><span class="line">            out = self.aggregate(out, **aggr_kwargs)</span><br><span class="line">            <span class="keyword">for</span> hook <span class="keyword">in</span> self._aggregate_forward_hooks.values():</span><br><span class="line">                res = hook(self, (aggr_kwargs, ), out)</span><br><span class="line">                <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    out = res</span><br><span class="line"></span><br><span class="line">            update_kwargs = self.inspector.distribute(<span class="string">&#x27;update&#x27;</span>, coll_dict)</span><br><span class="line">            out = self.update(out, **update_kwargs)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> decomposed_layers &gt; <span class="number">1</span>:</span><br><span class="line">                decomp_out.append(out)</span><br><span class="line">			</span><br><span class="line">        <span class="keyword">if</span> decomposed_layers &gt; <span class="number">1</span>:</span><br><span class="line">            <span class="comment"># è¿™é‡Œåšäº†æ•°æ®çš„å †å </span></span><br><span class="line">            out = torch.cat(decomp_out, dim=-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> hook <span class="keyword">in</span> self._propagate_forward_hooks.values():</span><br><span class="line">        res = hook(self, (edge_index, size, kwargs), out)</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            out = res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>
<hr>
<p>å¥½å¤æ‚å‘€ï¼æˆ‘ä»¬åªéœ€è¦å…¶ä¸­çš„ç²¾åå°±è¡Œå•¦ï¼Œé‚£ä¹ˆæœ‰ä¸€ç§æ¯”è¾ƒç®€å•çš„å®ç°æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GCNConv</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, input_dim, output_dim, use_bias=<span class="literal">True</span></span>):</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>(GCNConv, self).__init__()</span><br><span class="line">        self.input_dim = input_dim <span class="comment"># è¾“å…¥ç»´åº¦</span></span><br><span class="line">        self.output_dim = output_dim <span class="comment"># è¾“å‡ºç»´åº¦</span></span><br><span class="line">        self.use_bias = use_bias <span class="comment"># åç½®</span></span><br><span class="line">        self.weight = nn.Parameter(torch.Tensor(input_dim, output_dim)) <span class="comment"># åˆå§‹æƒé‡</span></span><br><span class="line">        <span class="keyword">if</span> self.use_bias:</span><br><span class="line">            self.bias = nn.Parameter(torch.Tensor(output_dim)) <span class="comment"># åç½®</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.register_parameter(<span class="string">&#x27;bias&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">        self.reset_parameters()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset_parameters</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># é‡æ–°è®¾ç½®å‚æ•°</span></span><br><span class="line">        <span class="comment"># è¿›è¡Œå‡¯æ˜åˆå§‹åŒ–</span></span><br><span class="line">        nn.init.kaiming_uniform_(self.weight)</span><br><span class="line">        <span class="keyword">if</span> self.use_bias:</span><br><span class="line">            <span class="comment"># åç½®å…ˆå…¨ç»™0</span></span><br><span class="line">            nn.init.zeros_(self.bias)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, adjacency, input_feature,l=<span class="number">1</span></span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param adjacency: é‚»æ¥çŸ©é˜µ</span></span><br><span class="line"><span class="string">        :param input_feature: è¾“å…¥ç‰¹å¾</span></span><br><span class="line"><span class="string">        :param l: lambda å½±å“è‡ªç¯æƒé‡å€¼</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment"># å…¬å¼: (D^-0.5) A&#x27; (D^-0.5) X W</span></span><br><span class="line">        size = adjacency.shape[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># X W</span></span><br><span class="line">        support = torch.mm(input_feature, self.weight)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># A&#x27; = A + \lambda I</span></span><br><span class="line">        A=adjacency+l*torch.eye(size)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># D: degree</span></span><br><span class="line">        SUM=A.<span class="built_in">sum</span>(dim=<span class="number">1</span>)</span><br><span class="line">        D=torch.diag_embed(SUM)</span><br><span class="line">        <span class="comment"># D&#x27;=D^(-0.5)</span></span><br><span class="line">        D=D.__pow__(-<span class="number">0.5</span>)</span><br><span class="line">        <span class="comment"># è®©infå€¼å˜æˆ0</span></span><br><span class="line">        D[D==<span class="built_in">float</span>(<span class="string">&quot;inf&quot;</span>)]=<span class="number">0</span></span><br><span class="line">        <span class="comment"># (D^-0.5) A&#x27; (D^-0.5)</span></span><br><span class="line">        adjacency=torch.sparse.mm(D,adjacency)</span><br><span class="line">        adjacency=torch.sparse.mm(adjacency,D)</span><br><span class="line">        <span class="comment"># (D^-0.5) A&#x27; (D^-0.5) X W</span></span><br><span class="line">        output = torch.sparse.mm(adjacency, support)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> self.use_bias:</span><br><span class="line">            <span class="comment"># ä½¿ç”¨åç½®</span></span><br><span class="line">            output += self.bias</span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># æ‰“å°çš„æ—¶å€™å†…å­˜ä¿¡æ¯å±æ€§</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__.__name__ + <span class="string">&#x27; (&#x27;</span> + <span class="built_in">str</span>(self.input_dim) + <span class="string">&#x27; -&gt; &#x27;</span> + <span class="built_in">str</span>(self.output_dim) + <span class="string">&#x27;)&#x27;</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å››ã€å‚è€ƒ">å››ã€å‚è€ƒ</h2>
<p>æœ¬æ–‡ä¸­çš„éƒ¨åˆ†å›¾ç‰‡å‚è€ƒè‡ªåšå®¢ï¼š<a href="https://blog.csdn.net/qq_43787862/article/details/113830925%EF%BC%8C%E9%9D%9E%E5%B8%B8%E6%84%9F%E8%B0%A2%E5%A4%A7%E4%BD%AC%E7%9A%84%E7%BF%BB%E8%AF%91%EF%BC%81">https://blog.csdn.net/qq_43787862/article/details/113830925ï¼Œéå¸¸æ„Ÿè°¢å¤§ä½¬çš„ç¿»è¯‘ï¼</a></p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> å·ç§¯ç¥ç»ç½‘ç»œ </tag>
            
            <tag> å›¾å·ç§¯ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PyG(PyTorch Geometric)å®‰è£…æ•™ç¨‹(é™„Coraæ•°æ®é›†)]]></title>
      <url>/2022/07/29/%E3%80%90Python%E3%80%91%E5%9B%BE%E5%8D%B7%E7%A7%AF%E5%BA%93PyG/</url>
      <content type="html"><![CDATA[<h2 id="PyG-PyTorch-Geometric-å®‰è£…æ•™ç¨‹-é™„Coraæ•°æ®é›†">PyG(PyTorch Geometric)å®‰è£…æ•™ç¨‹(é™„Coraæ•°æ®é›†)</h2>
<hr>
<p>PyGæ˜¯å¤šç‰¹è’™å¾·å·¥ä¸šå¤§å­¦ï¼ˆTechnische University Dortmundï¼‰çš„Matthias Feyåšå£«åŸºäºPyTorchæ¡†æ¶æå‡ºçš„å›¾å·ç§¯(Graph Convolution Net)ç¥ç»ç½‘ç»œæ¡†æ¶ï¼Œç”¨äºæ–¹ä¾¿åœ°ç¼–å†™å’Œè®­ç»ƒå›¾ç¥ç»ç½‘ç»œ(GNNs)ã€‚è¯¥æ¡†æ¶ç”±å„ç§å¯¹å›¾å’Œå…¶ä»–ä¸è§„åˆ™ç»“æ„è¿›è¡Œæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ç»„æˆï¼Œä¸”æä¾›äº†å¤§é‡çš„å…¬å…±åŸºå‡†æ•°æ®é›†ï¼Œå¯ä»¥è¿›è¡Œä»»æ„å›¾å½¢ã€3Dæ ¼ç½‘ç”šè‡³æ˜¯ç‚¹äº‘æ•°æ®çš„å­¦ä¹ å’Œå¤„ç†ã€‚å®˜æ–¹ç½‘å€ï¼š<a href="https://github.com/pyg-team/pytorch_geometric/releases">https://github.com/pyg-team/pytorch_geometric/releases</a></p>
<hr>
<p>æˆ‘ä»¬æ¥ä»‹ç»PyGåœ¨Windowsç¯å¢ƒä¸‹çš„å®‰è£…ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½å¥½å¯¹åº”ç‰ˆæœ¬çš„<code>pytorch</code>ï¼Œè¿™é‡Œä¸åšè¿‡å¤šèµ˜è¿°ã€‚</p>
<p>åœ¨å¯¹åº”ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹condaå‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda install pyg -c pyg</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">pip install torch_geometric</span><br></pre></td></tr></table></figure>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…PyGçš„ä¾èµ–åº“ï¼š<code>torch-spares</code>ã€<code>torch-scatter</code>ï¼Œæ ¹æ®PyTorchç‰ˆæœ¬ä¸åŒï¼Œå®‰è£…çš„æ–¹å¼æœ‰æ‰€ä¸åŒã€‚æ³¨æ„æŸ¥è¯¢Torchçš„ç‰ˆæœ¬ã€‚</p>
<hr>
<h3 id="PyTorch-1-11-ç‰ˆæœ¬âœ…">PyTorch 1.11 ç‰ˆæœ¬âœ…</h3>
<p><code>pip</code>å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install torch-scatter torch-sparse -f https://data.pyg.org/whl/torch-<span class="number">1.11</span><span class="number">.0</span>+$&#123;CUDA&#125;.html</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„å°†<code>$&#123;CUDA&#125;</code>æ¢æˆè‡ªå·±çš„ç‰ˆæœ¬ï¼Œå¦åˆ™ä¼šçˆ†é”™ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘çš„PyTorchç‰ˆæœ¬æ˜¯:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡pip listæŸ¥çœ‹</span></span><br><span class="line"><span class="comment"># æˆ–è€…python import torch print(torch.__version__)</span></span><br><span class="line">torch                 <span class="number">1.11</span><span class="number">.0</span>+cu113</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆï¼Œåªéœ€è¦åšå¦‚ä¸‹æ›¿æ¢ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install torch-scatter torch-sparse -f https://data.pyg.org/whl/torch-<span class="number">1.11</span><span class="number">.0</span>+cu113.html</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>cuxxx</code>å¹¶ä¸æ”¯æŒmacOSã€‚</p>
<hr>
<h3 id="PyTorch-1-10ç‰ˆæœ¬âœ…">PyTorch 1.10ç‰ˆæœ¬âœ…</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install torch-scatter torch-sparse -f https://data.pyg.org/whl/torch-<span class="number">1.10</span><span class="number">.0</span>+$&#123;CUDA&#125;.html</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–ç‰ˆæœ¬çš„éœ€è¦æ ¹æ®PyTorchç‰ˆæœ¬æŒ‡å®šä¾èµ–åº“çš„ç‰ˆæœ¬ï¼</p>
<p>å…¶ä»–ç‰ˆæœ¬è¯·å‚è€ƒhttps://data.pyg.org/whl</p>
<hr>
<h2 id="Coraæ•°æ®é›†ä»‹ç»">Coraæ•°æ®é›†ä»‹ç»</h2>
<p>Coraæ•°æ®é›†ç”±2078ç¯‡æœºå™¨å­¦ä¹ é¢†åŸŸçš„è®ºæ–‡æ„æˆï¼Œæ¯ä¸ªæ ·æœ¬ç‚¹éƒ½æ˜¯ä¸€ç¯‡è®ºæ–‡ï¼Œè¿™äº›è®ºæ–‡ä¸»è¦åˆ†ä¸ºäº†7ä¸ªç±»åˆ«ï¼Œåˆ†åˆ«ä¸ºåŸºäºæ¡ˆä¾‹ã€é—ä¼ ç®—æ³•ã€ç¥ç»ç½‘ç»œã€æ¦‚ç‡æ–¹æ³•ã€å¼ºåŒ–å­¦ä¹ ã€è§„åˆ™å­¦ä¹ ä¸ç†è®ºã€‚åœ¨è¯¥æ•°æ®é›†ä¸­ï¼Œæ¯ç¯‡è®ºæ–‡éƒ½è‡³å°‘å¼•ç”¨äº†è¯¥æ•°æ®é›†ä¸­çš„å¦ä¸€ç¯‡è®ºæ–‡ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰€ä»£è¡¨çš„è®ºæ–‡ï¼Œéƒ½ç”±ä¸€ä¸ª1433ç»´çš„è¯å‘é‡è¡¨ç¤ºï¼Œå³è¯¥å›¾ä¸Šæ¯ä¸ªèŠ‚ç‚¹éƒ½å…·æœ‰1433ä¸ªç‰¹å¾ï¼Œè¯å‘é‡çš„æ¯ä¸ªå…ƒç´ éƒ½å¯¹åº”ä¸€ä¸ªè¯ï¼Œä¸”è¯¥å…ƒç´ ä»…æœ‰0æˆ–1ä¸¤ä¸ªå–å€¼ï¼Œå–0è¡¨ç¤ºè¯¥å…ƒç´ å¯¹åº”çš„è¯ä¸åœ¨è®ºæ–‡ä¸­ï¼Œå–1è¡¨ç¤ºåœ¨ã€‚</p>
<h3 id="Coraå‚æ•°">Coraå‚æ•°</h3>
<ul>
<li><strong>ind.cora.x</strong> : è®­ç»ƒé›†èŠ‚ç‚¹ç‰¹å¾å‘é‡ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šscipy.sparse.csr.csr_matrixï¼Œå®é™…å±•å¼€åå¤§å°ä¸ºï¼š (140, 1433)</li>
<li><strong>ind.cora.tx</strong> : æµ‹è¯•é›†èŠ‚ç‚¹ç‰¹å¾å‘é‡ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šscipy.sparse.csr.csr_matrixï¼Œå®é™…å±•å¼€åå¤§å°ä¸ºï¼š (1000, 1433)</li>
<li><strong>ind.cora.allx</strong> : åŒ…å«æœ‰æ ‡ç­¾å’Œæ— æ ‡ç­¾çš„è®­ç»ƒèŠ‚ç‚¹ç‰¹å¾å‘é‡ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šscipy.sparse.csr.csr_matrixï¼Œå®é™…å±•å¼€åå¤§å°ä¸ºï¼š(1708, 1433)ï¼Œå¯ä»¥ç†è§£ä¸ºé™¤æµ‹è¯•é›†ä»¥å¤–çš„å…¶ä»–èŠ‚ç‚¹ç‰¹å¾é›†åˆï¼Œè®­ç»ƒé›†æ˜¯å®ƒçš„å­é›†</li>
<li><strong>ind.cora.y</strong> : one-hotè¡¨ç¤ºçš„è®­ç»ƒèŠ‚ç‚¹çš„æ ‡ç­¾ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šnumpy.ndarray</li>
<li><strong>ind.cora.ty</strong> : one-hotè¡¨ç¤ºçš„æµ‹è¯•èŠ‚ç‚¹çš„æ ‡ç­¾ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šnumpy.ndarray</li>
<li><strong>ind.cora.ally</strong> : one-hotè¡¨ç¤ºçš„ind.cora.allxå¯¹åº”çš„æ ‡ç­¾ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šnumpy.ndarray</li>
<li><strong>ind.cora.graph</strong> : ä¿å­˜èŠ‚ç‚¹ä¹‹é—´è¾¹çš„ä¿¡æ¯ï¼Œä¿å­˜æ ¼å¼ä¸ºï¼š{ index : [ index_of_neighbor_nodes ] }</li>
<li><strong>ind.cora.test.index</strong> : ä¿å­˜æµ‹è¯•é›†èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œä¿å­˜å¯¹è±¡ä¸ºï¼šListï¼Œç”¨äºåé¢çš„å½’çº³å­¦ä¹ è®¾ç½®ã€‚</li>
</ul>
<h3 id="Coraä¸‹è½½">Coraä¸‹è½½</h3>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­å¥è¿›è¡Œä¸‹è½½ï¼Œå½“ç„¶ï¼Œç”±äºæœåŠ¡å™¨å’Œä¸»æœºä¹‹é—´çš„ç‰©ç†è·ç¦»ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°ä¸‹è½½å¤±è´¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torch_geometric.datasets <span class="keyword">import</span> Planetoid</span><br><span class="line">dataset=Planetoid(root=<span class="string">r&quot;./Cora&quot;</span>,name=<span class="string">&quot;Cora&quot;</span>) <span class="comment"># root: æŒ‡å®šè·¯å¾„ name: æ•°æ®é›†åç§°</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘å°†æ•°æ®é›†æ”¾åœ¨ç™¾åº¦ç½‘ç›˜ä¸Šäº†å“¦ï¼Œæœ‰éœ€è¦çš„å¯ä»¥è‡ªè¡Œä¸‹è½½ï¼š</p>
<p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/18Qlhu_dyIUAOoDEeRDvtHw?pwd=UCAS">https://pan.baidu.com/s/18Qlhu_dyIUAOoDEeRDvtHw?pwd=UCAS</a><br>
æå–ç ï¼šUCAS</p>
<p>æ£€æŸ¥å…¶æ˜¯å¦æˆåŠŸï¼š</p>
<p>å°†æ–‡ä»¶è§£å‹æ”¾åœ¨ç»™å®šçš„<code>root</code>ä¸‹å³å¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®åŒ…å«çš„ç±»æ•°é‡:&quot;</span>,dataset.num_classes)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®è¾¹çš„ç‰¹å¾æ•°é‡:&quot;</span>,dataset.num_edge_features)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®è¾¹çš„æ•°é‡:&quot;</span>,dataset.data.edge_index.shape[<span class="number">1</span>]/<span class="number">2</span>) <span class="comment"># é™¤ä»¥2æ˜¯å› ä¸ºæœ‰å‘å›¾å“¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„ç‰¹å¾æ•°é‡:&quot;</span>,dataset.num_node_features)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„æ•°é‡:&quot;</span>,dataset.data.x.shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç½‘ç»œæ•°æ®åŒ…å«çš„ç±»æ•°é‡: 7</span></span><br><span class="line"><span class="string">ç½‘ç»œæ•°æ®è¾¹çš„ç‰¹å¾æ•°é‡: 0</span></span><br><span class="line"><span class="string">ç½‘ç»œæ•°æ®è¾¹çš„æ•°é‡: 5278.0</span></span><br><span class="line"><span class="string">ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„ç‰¹å¾æ•°é‡: 1433</span></span><br><span class="line"><span class="string">ç½‘ç»œæ•°æ®èŠ‚ç‚¹çš„æ•°é‡: 2708</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ’ä»¶å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[FCNè¯­ä¹‰åˆ†å‰²ç½‘ç»œ]]></title>
      <url>/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/</url>
      <content type="html"><![CDATA[<h1>è¯­ä¹‰åˆ†å‰²ç½‘ç»œ</h1>
<hr>
<p>è¯­ä¹‰åˆ†å‰²æ˜¯å¯¹å›¾åƒåœ¨åƒç´ çº§åˆ«ä¸Šè¿›è¡Œåˆ†ç±»çš„æ–¹æ³•ï¼Œåœ¨ä¸€å¼ å›¾åƒä¸­ï¼Œå±äºåŒä¸€ç±»çš„åƒç´ ç‚¹éƒ½è¦è¢«é¢„æµ‹ä¸ºç›¸åŒçš„ç±»ã€‚å› æ­¤è¯­ä¹‰åˆ†å‰²æ˜¯ä»åƒç´ çº§åˆ«æ¥ç†è§£å›¾åƒã€‚</p>
<p>æ³¨æ„ï¼Œè¯­ä¹‰åˆ†å‰²ä»…ä»…æ˜¯æŠŠæŸä¸€ç±»åˆ’åˆ†å‡ºæ¥ï¼Œè€Œé’ˆå¯¹æ¯ä¸ªä¸ªä½“æ²¡åŠæ³•è¿›è¡Œåˆ†å‰²(å®ä¾‹åˆ†å‰²)ã€‚</p>
<p>å¸¸è§çš„è¯­ä¹‰åˆ†å‰²ç½‘ç»œæœ‰å¾ˆå¤šï¼Œå¦‚FCNã€U-Netã€SegNetã€DeepLabç­‰ã€‚</p>
<h2 id="FCN">FCN</h2>
<p>FCN(Fully Convolutional Networks)å±äºåˆ©ç”¨æ·±åº¦ç½‘ç»œè¿›è¡Œå›¾ç‰‡è¯­ä¹‰åˆ†å‰²çš„å¼€å±±ä¹‹ä½œï¼Œå…¶ä¸»è¦æ€æƒ³ä¸ºï¼š</p>
<ul>
<li>å¯¹äºä¸€èˆ¬çš„CNNç½‘ç»œåˆ†ç±»å›¾åƒï¼Œå¦‚VGGå’ŒResNetï¼Œåœ¨ç½‘ç»œçš„æœ€åæ˜¯é€šè¿‡å…¨è¿æ¥å±‚ï¼Œé€šè¿‡softmaxè¿›è¡Œåˆ†ç±»ï¼Œä½†è¿™åªèƒ½è¡¨ç¤ºæ•´ä¸ªå›¾ç‰‡çš„ç±»åˆ«ã€‚FCNæŠŠæœ€åå‡ ä¸ªå…¨è¿æ¥å±‚éƒ½æ¢æˆäº†å·ç§¯æ“ä½œï¼Œå¾—åˆ°å’Œè¾“å…¥å›¾åƒå°ºå¯¸ç›¸å½“çš„ç‰¹å¾æ˜ å°„ï¼Œæœ€åé€šè¿‡softmaxè·å–æ¯ä¸ªåƒç´ ç‚¹çš„åˆ†ç±»ä¿¡æ¯ï¼Œå®ç°åƒç´ ç‚¹çš„å›¾åƒåˆ†å‰²ã€‚</li>
<li>ç«¯åˆ°ç«¯åƒç´ çº§è¯­ä¹‰åˆ†å‰²ä»»åŠ¡ï¼Œéœ€è¦è¾“å‡ºåˆ†ç±»ç»“æœå°ºå¯¸å’Œè¾“å…¥å›¾åƒå°ºå¯¸ä¸€è‡´ï¼Œé¢å¯¹æ± åŒ–é€ æˆçš„å›¾é¢å°ºå¯¸ç¼©å°ï¼ŒFCNé‡‡ç”¨åå·ç§¯(deconvolution)è¿›è¡Œä¸Šé‡‡æ ·ï¼Œä»è€Œä¿è¯å›¾åƒå¤§å°çš„ä¸€è‡´ã€‚</li>
<li>ä¸ºäº†æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç‰¹å¾æ˜ å°„çš„ä¿¡æ¯ï¼ŒFCNæå‡ºä¸€ç§è·¨å±‚è¿æ¥ç»“æ„ï¼Œå°†ä½å±‚å’Œé«˜å±‚çš„ç›®æ ‡ä½ç½®ä¿¡æ¯çš„ç‰¹å¾æ˜ å°„è¿›è¡Œèåˆï¼Œå³å°†ä½å±‚ä½ç½®å¼ºè¯­ä¹‰å¼±çš„ä¿¡æ¯è·Ÿé«˜å±‚ä½ç½®å¼±è¯­ä¹‰å¼ºçš„ä¿¡æ¯è¿›è¡Œèåˆï¼Œæå‡ç½‘ç»œå¯¹å›¾åƒåˆ†å‰²çš„æ€§èƒ½ã€‚</li>
</ul>
<h2 id="U-Net">U-Net</h2>
<p>U-NetåŸºäºFCNç½‘ç»œæå‡ºï¼Œèƒ½å¤Ÿé€‚åº”è¾ƒå°çš„è®­ç»ƒé›†ã€‚å…¶é‡‡ç”¨å¤§é‡å¼¹æ€§å½¢å˜çš„æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œå¢å¼ºï¼Œè®©æ¨¡å‹æ›´å¥½çš„å­¦ä¹ å½¢å˜ä¸å˜å½¢ã€‚åœ¨ä¸åŒç‰¹å¾èåˆæ–¹å¼ä¸Šï¼ŒU-Neté‡‡ç”¨é€šé“ç»´åº¦ä¸Šçš„æ‹¼æ¥èåˆä»£æ›¿FCNçš„é€ç‚¹ç›¸åŠ ã€‚</p>
<h2 id="SegNet">SegNet</h2>
<p>SegNetçš„ç½‘ç»œç»“æ„å€Ÿé‰´äº†è‡ªç¼–ç ç½‘ç»œçš„æ€æƒ³ï¼Œå…·æœ‰ç¼–ç å™¨ç½‘ç»œå’Œè§£ç å™¨ç½‘ç»œã€‚æœ€åé€šè¿‡softmaxåˆ†ç±»å™¨å¯¹æ¯ä¸ªåƒç´ ç‚¹è¿›è¡Œåˆ†ç±»ã€‚ç½‘ç»œåœ¨ç¼–ç å™¨å¤„ä¼šæ‰§è¡Œå·ç§¯å’Œæœ€å¤§æ± åŒ–ï¼Œåœ¨è§£ç å™¨éƒ¨åˆ†åˆ™ä¼šæ‰§è¡Œä¸Šé‡‡æ ·å’Œå·ç§¯ã€‚</p>
<hr>
<h2 id="åŸºäºPyTorché¢„è®­ç»ƒå¥½çš„è¯­ä¹‰åˆ†å‰²ç½‘ç»œå®ç°VOCæ•°æ®é›†åˆ†ç±»">åŸºäºPyTorché¢„è®­ç»ƒå¥½çš„è¯­ä¹‰åˆ†å‰²ç½‘ç»œå®ç°VOCæ•°æ®é›†åˆ†ç±»</h2>
<h3 id="æ•°æ®é›†">æ•°æ®é›†</h3>
<p>æœ¬æ¬¡ä½¿ç”¨VOC2012æ•°æ®é›†ï¼Œæ¥æºäºï¼š<a href="http://host.robots.ox.ac.uk/pascal/VOC/voc2012/index.html%E3%80%82">http://host.robots.ox.ac.uk/pascal/VOC/voc2012/index.htmlã€‚</a></p>
<p>æ•°æ®é›†ä¸­å­˜åœ¨20ä¸ªç±»åˆ«çš„1ä¸ªèƒŒæ™¯ç±»ï¼š</p>
<p>Person: person</p>
<p>Animal: bird, cat, cow, dog, horse, sheep</p>
<p>Vehicle: aeroplane, bicycle, boat, bus, car, motorbike, train</p>
<p>Indoor: bottle, chair, dining table, potted plant, sofa, tv/monitor</p>
<p>åœ¨Annotationsæ–‡ä»¶å¤¹ä¸­ï¼Œå­˜æ”¾æœ‰å¯¹åº”å›¾ç‰‡çš„æ ‡è®°æ–‡ä»¶ï¼Œä»¥XMLæ ¼å¼å­˜å‚¨ã€‚</p>
<h3 id="ç½‘ç»œ">ç½‘ç»œ</h3>
<p>åœ¨Pytorchä¸­ï¼Œæä¾›è®­ç»ƒå¥½çš„fcnå’Œdeeplabv3ç½‘ç»œï¼Œå¯ä»¥ç”¨ä½œå›¾åƒåˆ†å‰²ã€‚</p>
<h3 id="å®ç°">å®ç°</h3>
<h4 id="1-1-å¯¼å…¥æ¨¡å—">1.1 å¯¼å…¥æ¨¡å—</h4>
<p>éœ€è¦ç”¨åˆ°çš„æ¨¡å—ä¸»è¦æ˜¯<code>torchvision</code>ï¼Œç›´æ¥<code>pip install torchvision</code>å³å¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> PIL.Image <span class="keyword">as</span> Image</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">import</span> torchvisio</span><br></pre></td></tr></table></figure>
<h4 id="1-2-æ•°æ®å¤„ç†">1.2 æ•°æ®å¤„ç†</h4>
<p>æˆ‘ä»¬åŠ è½½torchä¸­è®­ç»ƒå¥½çš„å…¨å·ç§¯æ®‹å·®ç½‘ç»œ<code>fcn_resnet101</code>ï¼Œè®¾ç½®é¢„è®­ç»ƒã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åŠ è½½éœ€è¦åœ¨ç½‘ç»œä¸Šä¸‹è½½å‚æ•°ã€‚</p>
<p>ç”±äºè¯¥ç½‘ç»œå·²ç»è®­ç»ƒå¥½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å†è¿›è¡Œè®­ç»ƒï¼Œä½¿ç”¨å…¶è¯„ä¼°æ¨¡å¼<code>eval</code>ã€‚è¯¥è¯¥æ¨¡å¼ä¸‹ï¼Œä¸å¯ç”¨ Batch Normalization å’Œ Dropoutã€‚å³åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ä¿è¯BNå±‚å‡å€¼æ–¹å·®ä¸å˜ï¼Œåœ¨Dropoutå±‚ä¸éšæœºèˆå¼ƒç¥ç»å…ƒã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥è®­ç»ƒå¥½çš„æ¨¡å—</span></span><br><span class="line">model=torchvision.models.segmentation.fcn_resnet101(pretrained=<span class="literal">True</span>)</span><br><span class="line">model.<span class="built_in">eval</span>()</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±éœ€è¦æŠŠæˆ‘ä»¬çš„å›¾åƒè¯»å–è¿›æ¥å•¦ï¼Œè¿™é‡Œéšæœºé€‰ç”¨ä¸€å¼ VOC2012æ•°æ®ã€‚</p>
<p>å¯¹å›¾ç‰‡éœ€è¦è¿›è¡Œé¢„å¤„ç†ï¼š</p>
<ul>
<li>æ•°æ®æ ¼å¼è½¬åŒ–ä¸ºå¼ é‡</li>
<li>RGBé€šé“æ ‡å‡†åŒ–</li>
<li>æ·»åŠ batchç»´åº¦</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–å›¾ç‰‡</span></span><br><span class="line">image=Image.<span class="built_in">open</span>(<span class="string">r&quot;F:\VOCdevkit\VOC2012\JPEGImages\2007_002488.jpg&quot;</span>)</span><br><span class="line"><span class="comment"># å›¾ç‰‡é¢„å¤„ç†</span></span><br><span class="line">image_transf=transforms.Compose([</span><br><span class="line">    transforms.ToTensor(),</span><br><span class="line">    transforms.Normalize(mean=[<span class="number">0.485</span>,<span class="number">0.456</span>,<span class="number">0.406</span>],</span><br><span class="line">                         std=[<span class="number">0.229</span>,<span class="number">0.224</span>,<span class="number">0.225</span>])</span><br><span class="line">])</span><br><span class="line">image_tensor=image_transf(image).unsqueeze(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="1-3-ç½‘ç»œé¢„æµ‹">1.3  ç½‘ç»œé¢„æµ‹</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">output=model(image_tensor)[<span class="string">&quot;out&quot;</span>]</span><br></pre></td></tr></table></figure>
<h4 id="1-4-ç»“æœå¯è§†åŒ–">1.4  ç»“æœå¯è§†åŒ–</h4>
<p>è¾“å‡ºçš„Tensoræ˜¯ç»“æœåˆ†ç±»çš„ï¼Œä¸ºäº†æ–¹ä¾¿å¯è§†åŒ–ï¼Œéœ€è¦åšä»¥ä¸‹å¤„ç†ï¼š</p>
<ul>
<li>å°†Tensoré‡æ–°è½¬ä¸ºå›¾åƒ</li>
<li>å®šä¹‰æ¯ä¸€ç±»å¯¹åº”çš„è‰²å½©ï¼Œå¹¶å°†å›¾åƒç¼–ç </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†è¾“å‡ºè½¬åŒ–ä¸ºäºŒç»´å›¾åƒ</span></span><br><span class="line">outputarg=torch.argmax(output.squeeze(),dim=<span class="number">0</span>).numpy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æŒ‡å®šé¢œè‰²ç¼–ç </span></span><br><span class="line">label_colors=np.array([(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">128</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">128</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">0</span>,<span class="number">128</span>),(<span class="number">128</span>,<span class="number">0</span>,<span class="number">128</span>),</span><br><span class="line">                       (<span class="number">0</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">128</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">64</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">192</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">64</span>,<span class="number">128</span>,<span class="number">0</span>),(<span class="number">192</span>,<span class="number">128</span>,<span class="number">0</span>),</span><br><span class="line">                       (<span class="number">64</span>,<span class="number">0</span>,<span class="number">128</span>),(<span class="number">192</span>,<span class="number">0</span>,<span class="number">128</span>),(<span class="number">64</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">192</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">0</span>,<span class="number">64</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">64</span>,<span class="number">0</span>),</span><br><span class="line">                       (<span class="number">0</span>,<span class="number">192</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">192</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">64</span>,<span class="number">128</span>)])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å›¾åƒç¼–ç çš„è¯ï¼Œå…ˆç”Ÿæˆä¸‰ä¸ªç»´åº¦çš„åˆå§‹æ•°æ®ï¼Œæ¥ç€è·å–è¾“å‡ºç±»åˆ«çš„ä½ç½®ï¼Œå¹¶åœ¨è¯¥ä½ç½®ä¸Šä¸ºä¸‰ä¸ªç»´åº¦é™„ä¸Šé¢œè‰²å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬å¯¹è¯¥å›¾åƒè¿›è¡Œç¼–ç ï¼Œä»¥ä¾¿å¯è§†åŒ–</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decode_segmaps</span>(<span class="params">image,label_colors,nc=<span class="number">21</span></span>):</span><br><span class="line">    <span class="comment"># å…ˆç”Ÿæˆä¸‰ä¸ªé€šé“ç­‰å¤§å°çš„å½±åƒ</span></span><br><span class="line">    r=np.zeros_like(image).astype(np.uint8)</span><br><span class="line">    g=np.zeros_like(image).astype(np.uint8)</span><br><span class="line">    b=np.zeros_like(image).astype(np.uint8)</span><br><span class="line">    <span class="keyword">for</span> cla <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,nc):</span><br><span class="line">        idx=(image==cla) <span class="comment"># æŸä¸€ç±»çš„ä½ç½®ç´¢å¼•</span></span><br><span class="line">        r[idx]=label_colors[cla,<span class="number">0</span>]</span><br><span class="line">        g[idx]=label_colors[cla,<span class="number">1</span>]</span><br><span class="line">        b[idx]=label_colors[cla,<span class="number">2</span>]</span><br><span class="line">    <span class="comment"># ä¸‰é€šé“è½¬ä¸ºå›¾åƒ</span></span><br><span class="line">    rgbimage=np.stack([r,g,b],axis=<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> rgbimage</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æœ€åè¾“å‡ºå³å¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line">outputrgb=decode_segmaps(outputarg,label_colors)</span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">8</span>))</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">plt.imshow(image)</span><br><span class="line">plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">plt.imshow(outputrgb)</span><br><span class="line">plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">0.05</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="ç»“æœ">ç»“æœ</h3>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/image-20220324203124769.png" alt="image-20220324203124769" style="zoom: 25%;">
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/image-20220324203248135.png" alt="image-20220324203248135" style="zoom: 25%;">
<hr>
<h2 id="è®­ç»ƒè¯­ä¹‰åˆ†å‰²ç½‘ç»œ">è®­ç»ƒè¯­ä¹‰åˆ†å‰²ç½‘ç»œ</h2>
<p>åŸºäºVGG19æ­å»ºå…¨å·ç§¯è¯­ä¹‰åˆ†å‰²ç½‘ç»œã€‚</p>
<p>é¦–å…ˆæ•°æ®æœ‰ä¸€ä¸ªæ ‡è®°é›†ï¼š</p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/image-20220324204811702.png" alt="image-20220324204811702" style="zoom:50%;">
<p>ä¹Ÿæœ‰ä¸€ä¸ªåŸå§‹é›†ï¼š</p>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/image-20220324204830403.png" alt="image-20220324204830403" style="zoom:50%;">
<p>é’ˆå¯¹ä¸€ä¸ªå›¾åƒï¼Œåœ¨è®­ç»ƒé˜¶æ®µæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…æ˜¯ï¼š</p>
<ul>
<li>å°†æ ‡è®°å›¾åƒå’ŒåŸå§‹å›¾åƒå¯¹åº”çš„å›¾ç‰‡<strong>è·¯å¾„ä¸€ä¸€å¯¹åº”</strong></li>
<li>å°†å›¾åƒç»Ÿä¸€åˆ†ä¸º<strong>å›ºå®šçš„å°ºå¯¸</strong>æ—¶ï¼Œéœ€è¦ä¿æŒåŸå§‹å›¾åƒå’Œå…¶å¯¹åº”çš„æ ‡è®°å›¾åƒä»ç›¸åŒä½ç½®è¿›è¡Œåˆ†å‰²ã€‚</li>
<li>å¯¹åŸå§‹å›¾åƒè¿›è¡Œ<strong>æ ‡å‡†åŒ–</strong></li>
<li>å¯¹æ ‡è®°å¥½çš„å›¾åƒï¼Œå…¶ä¸­çš„RGBå€¼å¯¹åº”ç€ä¸€ä¸ªç±»ï¼Œéœ€è¦å°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªäºŒç»´æ•°æ®ï¼Œå…¶ä¸­æ¯ä¸ªä½ç½®çš„å–å€¼å¯¹åº”ç€å›¾åƒåœ¨è¯¥åƒç´ ç‚¹çš„ç±»ã€‚</li>
</ul>
<h3 id="å®ç°-v2">å®ç°</h3>
<h4 id="1-1-å¯¼å…¥æ¨¡å—-v2">1.1  å¯¼å…¥æ¨¡å—</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> PIL.Image <span class="keyword">as</span> Image</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch.nn <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br></pre></td></tr></table></figure>
<h4 id="1-2-æ•°æ®å¤„ç†-v2">1.2  æ•°æ®å¤„ç†</h4>
<p>å…¨å±€ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ˜¯å¦ä½¿ç”¨GPUï¼Œä»¥åŠå›¾åƒè‰²å¸¦ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šè®¾å¤‡</span></span><br><span class="line">device=torch.device(<span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>)</span><br><span class="line"><span class="comment"># æ ‡è¯†ç±»</span></span><br><span class="line">colormap=[(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">128</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">128</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">0</span>,<span class="number">128</span>),(<span class="number">128</span>,<span class="number">0</span>,<span class="number">128</span>),</span><br><span class="line">                       (<span class="number">0</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">128</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">64</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">192</span>,<span class="number">0</span>,<span class="number">0</span>),(<span class="number">64</span>,<span class="number">128</span>,<span class="number">0</span>),(<span class="number">192</span>,<span class="number">128</span>,<span class="number">0</span>),</span><br><span class="line">                       (<span class="number">64</span>,<span class="number">0</span>,<span class="number">128</span>),(<span class="number">192</span>,<span class="number">0</span>,<span class="number">128</span>),(<span class="number">64</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">192</span>,<span class="number">128</span>,<span class="number">128</span>),(<span class="number">0</span>,<span class="number">64</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">64</span>,<span class="number">0</span>),</span><br><span class="line">                       (<span class="number">0</span>,<span class="number">192</span>,<span class="number">0</span>),(<span class="number">128</span>,<span class="number">192</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">64</span>,<span class="number">128</span>)]</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå›¾åƒæ•°æ®ï¼Œæˆ‘ä»¬ä¸»è¦è¿›è¡Œä»¥ä¸‹å‡ ä¸ªå·¥ä½œï¼š</p>
<ul>
<li>å°†RGBç±»å‹çš„æ ‡ç­¾å›¾ç‰‡è½¬åŒ–æˆå•ç±»å›¾åƒ</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†RGBå›¾åƒå¤„ç†ä¸ºä¸€ä¸ªç±»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">img2lab</span>(<span class="params">img,colormap</span>):</span><br><span class="line">    cm2lbl=np.zeros(<span class="number">256</span>**<span class="number">3</span>)</span><br><span class="line">    <span class="comment"># å°†æ¯ä¸ªåƒç´ è½¬åŒ–ä¸ºä¸€ç±»æ•°æ®</span></span><br><span class="line">    <span class="keyword">for</span> i,cm <span class="keyword">in</span> <span class="built_in">enumerate</span>(colormap):</span><br><span class="line">        <span class="comment"># è¿™æ­¥èƒ½å¤Ÿå°†æ¯ä¸ªrgbç±»å‹çš„é¢œè‰²è½¬ä¸ºå•ç‹¬ä¸€ç±»</span></span><br><span class="line">        cm2lbl[((cm[<span class="number">0</span>]*<span class="number">256</span>+cm[<span class="number">1</span>])*<span class="number">256</span>+cm[<span class="number">2</span>])]=i</span><br><span class="line">        <span class="comment"># å¯¹ä¸€å¼ å›¾åƒè¿›è¡Œè½¬åŒ–</span></span><br><span class="line">    image=np.array(img,dtype=<span class="string">&quot;int64&quot;</span>)</span><br><span class="line">    ix=((image[:,:,<span class="number">0</span>]*<span class="number">256</span>+image[:,:,<span class="number">1</span>])*<span class="number">256</span>+image[:,:,<span class="number">2</span>]) <span class="comment"># è¿™é‡Œä¼šå°†æ¯ä¸ªåƒç´ ç‚¹éƒ½åšæ˜ å°„</span></span><br><span class="line">    <span class="comment"># åšå®Œæ˜ å°„åï¼Œç•™ä¸‹çš„ixåªå‰©ä¸‹äº†ä¸¤ä¸ªç»´åº¦</span></span><br><span class="line">    image2=cm2lbl[ix] <span class="comment"># å°†å¯¹åº”åƒç´ çš„ç±»æ˜ å°„è¿‡å»ï¼Œixçš„shapeè·Ÿimgå±•å¹³åç›¸åŒ</span></span><br><span class="line">    <span class="comment"># ix; high,width</span></span><br><span class="line">    <span class="comment"># æ‰€ä»¥image2æ˜¯å•ç»´åº¦çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> image2</span><br></pre></td></tr></table></figure>
<ul>
<li>å›¾åƒå¢å¼ºï¼Œé€šè¿‡éšæœºè£å‰ªå®ç°</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éšæœºè£å‰ªå›¾åƒæ•°æ®</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rand_crop</span>(<span class="params">data,label,high,width</span>):</span><br><span class="line">    im_width,im_high=data.size</span><br><span class="line">    <span class="comment"># ç”Ÿæˆå›¾åƒéšæœºç‚¹</span></span><br><span class="line">    left=np.random.randint(<span class="number">0</span>,im_width-width)</span><br><span class="line">    top=np.random.randint(<span class="number">0</span>,im_high-high)</span><br><span class="line">    right=left+width</span><br><span class="line">    bottom=top+high</span><br><span class="line">    data=data.crop((left,top,right,bottom))</span><br><span class="line">    label=label.crop((left,top,right,bottom))</span><br><span class="line">    <span class="keyword">return</span> data,label</span><br></pre></td></tr></table></figure>
<ul>
<li>å›¾åƒè½¬æ¢ï¼Œå°†å›¾åƒè½¬ä¸ºTensoræ ¼å¼å¹¶è¿›è¡Œæ ‡å‡†åŒ–</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å›¾åƒè½¬æ¢æ“ä½œ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">img_transforms</span>(<span class="params">data,label,high,width,colormap</span>):</span><br><span class="line">    data,label=rand_crop(data,label,high,width)</span><br><span class="line">    data_tfs=transforms.Compose([</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize([<span class="number">0.485</span>,<span class="number">0.456</span>,<span class="number">0.406</span>],[<span class="number">0.229</span>,<span class="number">0.224</span>,<span class="number">0.225</span>])</span><br><span class="line"></span><br><span class="line">    ])</span><br><span class="line">    data=data_tfs(data)</span><br><span class="line">    label=torch.from_numpy(img2lab(label,colormap))</span><br><span class="line">    <span class="keyword">return</span> data,label</span><br></pre></td></tr></table></figure>
<h4 id="1-3-è¯»å–æ–‡ä»¶">1.3  è¯»å–æ–‡ä»¶</h4>
<p>VOC2012çš„æ•°æ®é›†è·¯å¾„ä¿å­˜åœ¨<code>train.txt</code>ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è·å–è¯¥æ–‡ä»¶ï¼Œé€šè¿‡<code>np.loadtxt</code>ä¿å­˜è·¯å¾„ä¿¡æ¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–è·¯å¾„å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_image_path</span>(<span class="params">root=<span class="string">r&quot;F:\VOCdevkit\VOC2012\ImageSets\Segmentation\train.txt&quot;</span></span>):</span><br><span class="line">    image=np.loadtxt(root,dtype=<span class="built_in">str</span>)</span><br><span class="line">    n=<span class="built_in">len</span>(image)</span><br><span class="line">    data,label=[<span class="literal">None</span>]*n,[<span class="literal">None</span>]*n</span><br><span class="line">    <span class="keyword">for</span> i,fname <span class="keyword">in</span> <span class="built_in">enumerate</span>(image):</span><br><span class="line">        data[i]=<span class="string">r&quot;F:\VOCdevkit\VOC2012\JPEGImages\%s.jpg&quot;</span>%(fname)</span><br><span class="line">        label[i]=<span class="string">r&quot;F:\VOCdevkit\VOC2012\SegmentationClass\%s.png&quot;</span>%(fname)</span><br><span class="line">    <span class="keyword">return</span> data,label</span><br></pre></td></tr></table></figure>
<p>æ¥ç€æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ª<code>Dataset</code>ç±»ï¼Œç»§æ‰¿è‡ª<code>torch.utils.data.Dataset</code>ï¼Œä½œä¸º<code>DataLoade</code>ä¸­çš„æ•°æ®æºã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªMyDatasetç»§æ‰¿äºtorch.utils.data.Dataset</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDataset</span>(Data.Dataset):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,data_root,high,width,imtransform,colormap</span>):</span><br><span class="line">        self.data_root=data_root</span><br><span class="line">        self.high=high</span><br><span class="line">        self.width=width</span><br><span class="line">        self.imtransform=imtransform</span><br><span class="line">        self.cm=colormap</span><br><span class="line">        data_list,label_list=read_image_path(data_root)</span><br><span class="line">        self.data_list=self._<span class="built_in">filter</span>(data_list)</span><br><span class="line">        self.label_list=self._<span class="built_in">filter</span>(label_list)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_filter</span>(<span class="params">self,images</span>):</span><br><span class="line">    	<span class="comment"># å¤„ç†æ‰ä¸ç¬¦åˆå°ºå¯¸çš„æ•°æ®</span></span><br><span class="line">    	<span class="comment"># è¿™æ­¥éœ€è¦æ‰“å¼€å›¾ç‰‡ï¼Œè€—æ—¶ä¼šæœ‰ç‚¹ä¹…</span></span><br><span class="line">        imlist=[]</span><br><span class="line">        <span class="keyword">for</span> im <span class="keyword">in</span> images:</span><br><span class="line">            img=Image.<span class="built_in">open</span>(im)</span><br><span class="line">            <span class="keyword">if</span> img.size[<span class="number">1</span>]&gt;self.high <span class="keyword">and</span> img.size[<span class="number">0</span>]&gt;self.width:</span><br><span class="line">                <span class="comment"># æ³¨æ„æ­¤æ—¶è¿˜æ˜¯è·¯å¾„</span></span><br><span class="line">                imlist.append(im)</span><br><span class="line">        <span class="keyword">return</span> imlist</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self,idx</span>):</span><br><span class="line">        <span class="comment"># è¿™æ­¥æ˜¯æ ¸å¿ƒ</span></span><br><span class="line">        img=self.data_list[idx]</span><br><span class="line">        lab=self.label_list[idx]</span><br><span class="line">        img=Image.<span class="built_in">open</span>(img)</span><br><span class="line">        lab=Image.<span class="built_in">open</span>(lab).convert(<span class="string">&quot;RGB&quot;</span>)</span><br><span class="line">        img,lab=self.imtransform(img,lab,self.high,self.width,self.cm)</span><br><span class="line">        <span class="keyword">return</span> img,lab</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.data_list)</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–æ•°æ®</span></span><br><span class="line">high,width=<span class="number">320</span>,<span class="number">480</span></span><br><span class="line">voc_train=MyDataset(<span class="string">r&quot;F:\VOCdevkit\VOC2012\ImageSets\Segmentation\train.txt&quot;</span>,high,width,img_transforms,colormap)</span><br><span class="line">voc_val=MyDataset(<span class="string">r&quot;F:\VOCdevkit\VOC2012\ImageSets\Segmentation\val.txt&quot;</span>,high,width,img_transforms,colormap)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®åŠ è½½å™¨æ¯ä¸ªbatchä½¿ç”¨4ä¸ªå›¾åƒ</span></span><br><span class="line">train_loader=Data.DataLoader(voc_train,batch_size=<span class="number">4</span>,shuffle=<span class="literal">True</span>,pin_memory=<span class="literal">True</span>)</span><br><span class="line">val_loader=Data.DataLoader(voc_val,batch_size=<span class="number">4</span>,shuffle=<span class="literal">True</span>,pin_memory=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥è®­ç»ƒæ•°æ®é›†çš„ä¸€ä¸ªbatchçš„æ ·æœ¬ç»´åº¦æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="keyword">for</span> step,(bx,by) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">    <span class="keyword">if</span> step&gt;<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;bx.shape&quot;</span>,bx.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;by.shape&quot;</span>,by.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;bx&quot;</span>,bx)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;by&quot;</span>,by)</span><br></pre></td></tr></table></figure>
<h4 id="1-4-å¯è§†åŒ–å‡½æ•°">1.4  å¯è§†åŒ–å‡½æ•°</h4>
<p>æœ¬éƒ¨åˆ†éœ€è¦åšçš„äº‹æƒ…æ˜¯å°†Tensoræ•°æ®è½¬åŒ–ä¸ºå›¾åƒæ•°æ®ï¼ŒåŒ…æ‹¬<code>label</code>å’Œ<code>image</code>çš„è½¬åŒ–ã€‚</p>
<p>éœ€è¦åæ ‡å‡†åŒ–å›å»ï¼Œå¹¶ä¸”å°†æº¢å‡ºçš„æµ®ç‚¹æŠ¹å»</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">inv_normalize_img</span>(<span class="params">data</span>):</span><br><span class="line">    rgb_mean=np.array([<span class="number">0.485</span>,<span class="number">0.456</span>,<span class="number">0.406</span>])</span><br><span class="line">    rgb_std=np.array([<span class="number">0.229</span>,<span class="number">0.224</span>,<span class="number">0.225</span>])</span><br><span class="line">    data=data.astype(<span class="string">&quot;float32&quot;</span>)*rgb_std+rgb_mean</span><br><span class="line">    <span class="keyword">return</span> data.clip(<span class="number">0</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å°†æ ‡ç­¾è½¬åŒ–ä¸ºRGBå›¾åƒ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">label2img</span>(<span class="params">prelab,colormap</span>):</span><br><span class="line">    <span class="comment">#ä»é¢„æµ‹åˆ°çš„æ ‡ç­¾è½¬åŒ–ä¸ºå›¾åƒï¼Œé’ˆå¯¹ä¸€ä¸ªæ ‡ç­¾å›¾</span></span><br><span class="line">    h,w=prelab.shape</span><br><span class="line">    prelab=prelab.reshape(h*w,-<span class="number">1</span>)</span><br><span class="line">    img=np.zeros((h*w,<span class="number">3</span>),dtype=<span class="string">&quot;int32&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> ii <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(colormap)):</span><br><span class="line">        index=np.where(prelab==ii)</span><br><span class="line">        img[index,:]=colormap[ii]</span><br><span class="line">    <span class="keyword">return</span> img.reshape(h,w,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>å¯è§†åŒ–å›¾åƒ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯è§†åŒ–ä¸€ä¸ªbatchå›¾åƒ</span></span><br><span class="line">bx_numpy=bx.data.numpy()</span><br><span class="line">bx_numpy=bx_numpy.transpose(<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line">by_numpy=by.data.numpy()</span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>,<span class="number">6</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    plt.subplot(<span class="number">2</span>,<span class="number">4</span>,i+<span class="number">1</span>)</span><br><span class="line">    plt.imshow(inv_normalize_img(bx_numpy[i]))</span><br><span class="line">    plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">    plt.subplot(<span class="number">2</span>,<span class="number">4</span>,i+<span class="number">5</span>)</span><br><span class="line">    plt.imshow(label2img(by_numpy[i],colormap))</span><br><span class="line">    plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">0.1</span>,hspace=<span class="number">0.1</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/image-20220327144450083.png" alt="image-20220327144450083" style="zoom:50%;">
<h4 id="1-5-ç½‘ç»œæ„å»º">1.5  ç½‘ç»œæ„å»º</h4>
<p>ä½¿ç”¨è®­ç»ƒå¥½çš„VGG19ç½‘ç»œä½œä¸ºbackboneï¼Œå®šä¹‰è¯­ä¹‰åˆ†å‰²ç½‘ç»œFCN8Sã€‚å…¶æ ¸å¿ƒåœ¨äºï¼š</p>
<ul>
<li>å°†å·ç§¯åçš„ç»“æœåå·ç§¯</li>
<li>åœ¨ä¸åŒå±‚è¿›è¡Œç‰¹å¾èåˆï¼Œæé«˜è¾¨è¯†åº¦</li>
<li>æœ€ç»ˆå¾—åˆ°ä¸åŸå›¾å¤§å°ç›¸åŒçš„å›¾ç‰‡ï¼Œåˆ©ç”¨softmaxåˆ¤åˆ«ç±»åˆ«</li>
</ul>
<p>FCN8Sä¼šåœ¨ç¬¬äº”ä¸ªæœ€å¤§æ± åŒ–å±‚è¿›è¡Œåå·ç§¯ï¼Œå¾—åˆ°å¤§å°ä¸º<code>w/16</code>çš„ç‰¹å¾ï¼Œèåˆå°†å…¶åŠ ä¸Šç¬¬å››ä¸ªæœ€å¤§æ± åŒ–åçš„æ•°æ®åè¿›è¡Œå¤„ç†ï¼Œå†æ¬¡åå·ç§¯å¾—åˆ°<code>w/8</code>çš„ç‰¹å¾ã€‚æœ€åé€šè¿‡åˆ†ç±»å™¨ï¼Œå°†ç‰¹å¾ç»´åº¦è½¬æ¢ä¸ºç±»åˆ«æ•°é‡ï¼Œåˆ¤æ–­æ¯ä¸ªåƒç´ ç‚¹åœ¨æ¯ä¸ªç‰¹å¾ç»´åº¦ä¸Šçš„æ¦‚ç‡ï¼Œå³å¯å®ç°å›¾åƒåˆ†å‰²ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰è¯­ä¹‰åˆ†å‰²ç½‘ç»œFCN-8S</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FCN8S</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,num_class</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param num_class: è®­ç»ƒæ•°æ®çš„ç±»åˆ«</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">super</span>(FCN8S, self).__init__()</span><br><span class="line">        self.num_class=num_class</span><br><span class="line">        model_vgg19=torchvision.models.vgg19(pretrained=<span class="literal">True</span>)</span><br><span class="line">        self.backbone=model_vgg19.features</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éœ€è¦åšçš„äº‹æƒ…æ˜¯åå·ç§¯ã€ç‰¹å¾èåˆ</span></span><br><span class="line">        <span class="comment"># ä¼ åˆ°è¿™é‡Œçš„æ•°æ®å·²ç»æˆäº†[batch,512,10,15]</span></span><br><span class="line">        self.relu=nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        self.deconv1=nn.ConvTranspose2d(<span class="number">512</span>,<span class="number">512</span>,kernel_size=<span class="number">3</span>,stride=<span class="number">2</span>,padding=<span class="number">1</span>,dilation=<span class="number">1</span>,output_padding=<span class="number">1</span>)</span><br><span class="line">        self.bn1=nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 512-&gt;256</span></span><br><span class="line">        self.deconv2=nn.ConvTranspose2d(<span class="number">512</span>,<span class="number">256</span>,kernel_size=<span class="number">3</span>,stride=<span class="number">2</span>,padding=<span class="number">1</span>,dilation=<span class="number">1</span>,output_padding=<span class="number">1</span>)</span><br><span class="line">        self.bn2=nn.BatchNorm2d(<span class="number">256</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#256-&gt;128</span></span><br><span class="line">        self.deconv3=nn.ConvTranspose2d(<span class="number">256</span>,<span class="number">128</span>,kernel_size=<span class="number">3</span>,stride=<span class="number">2</span>,padding=<span class="number">1</span>,dilation=<span class="number">1</span>,output_padding=<span class="number">1</span>)</span><br><span class="line">        self.bn3=nn.BatchNorm2d(<span class="number">128</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 128-&gt;64</span></span><br><span class="line">        self.deconv4 = nn.ConvTranspose2d(<span class="number">128</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>, dilation=<span class="number">1</span>, output_padding=<span class="number">1</span>)</span><br><span class="line">        self.bn4 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 64-&gt;32</span></span><br><span class="line">        self.deconv5 = nn.ConvTranspose2d(<span class="number">64</span>, <span class="number">32</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>, dilation=<span class="number">1</span>, output_padding=<span class="number">1</span>)</span><br><span class="line">        self.bn5 = nn.BatchNorm2d(<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æå–32ç»´ç‰¹å¾FCN32S</span></span><br><span class="line">        self.classifier=nn.Conv2d(<span class="number">32</span>,num_class,kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># VGG19ä¸­maxpool2æ‰€åœ¨çš„å±‚</span></span><br><span class="line">        self.layers=&#123;<span class="string">&quot;4&quot;</span>:<span class="string">&quot;maxpool_1&quot;</span>,</span><br><span class="line">                     <span class="string">&quot;9&quot;</span>:<span class="string">&quot;maxpool_2&quot;</span>,</span><br><span class="line">                     <span class="string">&quot;18&quot;</span>:<span class="string">&quot;maxpool_3&quot;</span>,</span><br><span class="line">                     <span class="string">&quot;27&quot;</span>:<span class="string">&quot;maxpool_4&quot;</span>,</span><br><span class="line">                     <span class="string">&quot;36&quot;</span>:<span class="string">&quot;maxpool_5&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        output=&#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> name,layer <span class="keyword">in</span> self.backbone._modules.items():</span><br><span class="line">            x=layer(x)</span><br><span class="line">            <span class="keyword">if</span> name <span class="keyword">in</span> self.layers:</span><br><span class="line">                <span class="comment"># ç•™ä¸‹è¿™å±‚ä¿¡æ¯</span></span><br><span class="line">                output[self.layers[name]]=x</span><br><span class="line">        <span class="comment"># è·å–å„å±‚çš„ä¿¡æ¯</span></span><br><span class="line">        x5=output[<span class="string">&quot;maxpool_5&quot;</span>] <span class="comment"># (b,512,x.H/32,x.W/32)</span></span><br><span class="line">        x4=output[<span class="string">&quot;maxpool_4&quot;</span>] <span class="comment"># (b,512,x.H/16,x.W/16)</span></span><br><span class="line">        x3=output[<span class="string">&quot;maxpool_3&quot;</span>] <span class="comment"># (b,256,x.H/8,x.W/8)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è½¬ç½®å·ç§¯</span></span><br><span class="line">        score=self.relu(self.deconv1(x5)) <span class="comment"># 512 16 16</span></span><br><span class="line">        <span class="comment"># åŠ ä¸Š16sçš„ä¿¡æ¯</span></span><br><span class="line">        score=self.bn1(score+x4)</span><br><span class="line">        <span class="comment"># å†åå·ç§¯</span></span><br><span class="line">        score=self.relu(self.deconv2(score)) <span class="comment"># 256 8 8</span></span><br><span class="line">        <span class="comment"># åŠ ä¸Š8sçš„ä¿¡æ¯</span></span><br><span class="line">        score=self.bn2(score+x3)</span><br><span class="line">        <span class="comment"># ä¸€æ­¥ä¸€æ­¥æ…¢æ…¢å›å»</span></span><br><span class="line">        score=self.bn3(self.relu(self.deconv3(score))) <span class="comment"># 128 4 4</span></span><br><span class="line">        score=self.bn4(self.relu(self.deconv4(score))) <span class="comment"># 64 2 2</span></span><br><span class="line">        score=self.bn5(self.relu(self.deconv5(score))) <span class="comment"># 32 1 1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æœ€åå°†è¿™32ç»´è½¬æˆè¾“å…¥ç»´åº¦(rgb:3,gray:1)</span></span><br><span class="line">        score=self.classifier(score)</span><br><span class="line">        <span class="keyword">return</span> score <span class="comment"># b,n_class,1,1</span></span><br></pre></td></tr></table></figure>
<h4 id="1-6-ç½‘ç»œè®­ç»ƒ">1.6  ç½‘ç»œè®­ç»ƒ</h4>
<p>æ­£å¸¸å»è®­ç»ƒå°±å¥½ï¼Œæ³¨æ„è¿™é‡Œæ²¡æœ‰ä½¿ç”¨æ®‹å·®ç½‘ç»œï¼Œæ‰€ä»¥å¯ä»¥ä¿ç•™æœ€å¥½çš„å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç½‘ç»œè®­ç»ƒ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_model</span>(<span class="params">model,criterion,optimizer,traindataloader,valdataloader,num_epoch=<span class="number">25</span></span>):</span><br><span class="line">    since=time()</span><br><span class="line">    best_model_wts=copy.deepcopy(model.state_dict())</span><br><span class="line">    best_loss=<span class="number">1e10</span></span><br><span class="line">    train_loss_all=[]</span><br><span class="line">    train_acc_all=[]</span><br><span class="line">    val_loss_all=[]</span><br><span class="line">    val_acc_all=[]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®­ç»ƒnum_epochæ¬¡</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epoch):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Epoch &#123;&#125;/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch,num_epoch-<span class="number">1</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">10</span>)</span><br><span class="line">        train_loss=<span class="number">0.0</span></span><br><span class="line">        train_num=<span class="number">0</span></span><br><span class="line">        val_loss=<span class="number">0.0</span></span><br><span class="line">        val_num=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®­ç»ƒé˜¶æ®µ</span></span><br><span class="line">        model.train()</span><br><span class="line">        <span class="keyword">for</span> step,(bx,by) <span class="keyword">in</span> <span class="built_in">enumerate</span>(traindataloader):</span><br><span class="line">            optimizer.zero_grad()</span><br><span class="line">            bx=bx.<span class="built_in">float</span>().to(device)</span><br><span class="line">            by=by.long().to(device)</span><br><span class="line"></span><br><span class="line">            out=model(bx)</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">            <span class="comment"># æŸ”å’Œ21ä¸ªç±»åšä¸€ä¸ªsoftmaxåå†åšlog</span></span><br><span class="line">            out=F.log_softmax(out,dim=<span class="number">1</span>)</span><br><span class="line">            pre_lab=torch.argmax(out,<span class="number">1</span>)</span><br><span class="line">            loss=criterion(out,by)</span><br><span class="line">            loss.backward()</span><br><span class="line">            optimizer.step()</span><br><span class="line">            train_loss+=loss.item()*<span class="built_in">len</span>(by)</span><br><span class="line">            train_num+=<span class="built_in">len</span>(by)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—è®­ç»ƒé›†ä¸Šçš„ç²¾åº¦</span></span><br><span class="line">        train_loss_all.append(train_loss/train_num)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; Train Loss: &#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(epoch,train_loss_all[-<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿›å…¥è¯„ä¼°é˜¶æ®µ</span></span><br><span class="line">        model.<span class="built_in">eval</span>()</span><br><span class="line">        <span class="keyword">for</span> step,(bx,by) <span class="keyword">in</span> <span class="built_in">enumerate</span>(valdataloader):</span><br><span class="line">            bx,by=bx.<span class="built_in">float</span>().to(device),by.long().to(device)</span><br><span class="line">            out=model(bx)</span><br><span class="line">            out=F.log_softmax(out,dim=<span class="number">1</span>)</span><br><span class="line">            pre_lab=torch.argmax(out,<span class="number">1</span>)</span><br><span class="line">            loss=criterion(out,by)</span><br><span class="line">            val_loss+=loss.item()*<span class="built_in">len</span>(by)</span><br><span class="line">            val_num+=<span class="built_in">len</span>(by)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—æŸå¤±å’Œç²¾åº¦</span></span><br><span class="line">        val_loss_all.append(val_loss/val_num)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; Val Loss: &#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(epoch,val_loss_all[-<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¿ç•™æœ€å¥½çš„å‚æ•°</span></span><br><span class="line">        <span class="keyword">if</span> val_loss_all[-<span class="number">1</span>]&lt;best_loss:</span><br><span class="line">            best_loss=val_loss_all[-<span class="number">1</span>]</span><br><span class="line">            best_model_wts=copy.deepcopy(model.state_dict())</span><br><span class="line">        time_use=time()-since</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Train and val complete in &#123;:.0f&#125;m &#123;:.0f&#125;s&quot;</span>.<span class="built_in">format</span>(time_use//<span class="number">60</span>,time_use%<span class="number">60</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¾“å‡ºè®­ç»ƒä¿¡æ¯</span></span><br><span class="line">    train_process=pd.DataFrame(</span><br><span class="line">        data=&#123;<span class="string">&quot;epoch&quot;</span>:<span class="built_in">range</span>(num_epoch),</span><br><span class="line">              <span class="string">&quot;train_loss_all&quot;</span>:train_loss_all,</span><br><span class="line">              <span class="string">&quot;val_loss_all&quot;</span>:val_loss_all&#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åŠ è½½æœ€å¥½çš„æ¨¡å‹</span></span><br><span class="line">    model.load_state_dict(best_model_wts)</span><br><span class="line">    <span class="keyword">return</span> model,train_process</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨</span></span><br><span class="line">lr=<span class="number">0.0003</span></span><br><span class="line">criterion=nn.NLLLoss()</span><br><span class="line">optimizer=optim.Adam(fcn8s.parameters(),lr=lr,weight_decay=<span class="number">1e-4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿­ä»£è®­ç»ƒ</span></span><br><span class="line">fcn8s,train_process=train_model(fcn8s,criterion,optimizer,train_loader,val_loader,num_epoch=<span class="number">5</span>)</span><br><span class="line">torch.save(fcn8s,<span class="string">&quot;fcn8s.pkl&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="1-7-ç»“æœå¯è§†åŒ–">1.7  ç»“æœå¯è§†åŒ–</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(train_process.epoch,train_process.train_loss_all,<span class="string">&quot;ro-&quot;</span>,label=<span class="string">&quot;Train Loss&quot;</span>)</span><br><span class="line">plt.plot(train_process.epoch,train_process.val_loss_all,<span class="string">&quot;bs-&quot;</span>,label=<span class="string">&quot;Val Loss&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.xlabel(<span class="string">&quot;epoch&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Loss&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/image-20220326235720662.png" alt="image-20220326235720662" style="zoom:50%;">
<p>â€‹                                                                                                                                                                                                                                                                                                                                                                                                                                                          æŸ¥çœ‹åœ¨éªŒè¯é›†ä¸Šçš„æ•ˆæœ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»éªŒè¯é›†ä¸­è·å–ä¸€ä¸ªbatchçš„æ•°æ®</span></span><br><span class="line"><span class="keyword">for</span> step,(bx,by) <span class="keyword">in</span> <span class="built_in">enumerate</span>(val_loader):</span><br><span class="line">    <span class="keyword">if</span> step&gt;<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">fcn8s.<span class="built_in">eval</span>()</span><br><span class="line">bx=bx.<span class="built_in">float</span>().to(device)</span><br><span class="line">by=by.long().to(device)</span><br><span class="line">out=fcn8s(bx)</span><br><span class="line"><span class="comment"># æ‹¿å‡ºæ¥ç»“æœåéœ€è¦åœ¨ç»´åº¦ä¸Šåšä¸€ä¸ªlog_softmax</span></span><br><span class="line">out=F.log_softmax(out,dim=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># åˆ¤åˆ«æœ€å¯èƒ½çš„æ¦‚ç‡</span></span><br><span class="line">pre_lab=torch.argmax(out,<span class="number">1</span>)</span><br><span class="line">bx_numpy=bx.cpu().data.numpy()</span><br><span class="line">bx_numpy=bx_numpy.transpose(<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line">by_numpy=by.cpu().data.numpy()</span><br><span class="line">pre_lab_numpy=pre_lab.cpu().numpy()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    plt.subplot(<span class="number">3</span>,<span class="number">4</span>,i+<span class="number">1</span>)</span><br><span class="line">    plt.imshow(inv_normalize_img(bx_numpy[i]))</span><br><span class="line">    plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">    plt.subplot(<span class="number">3</span>,<span class="number">4</span>,i+<span class="number">5</span>)</span><br><span class="line">    plt.imshow(label2img(by_numpy[i],colormap))</span><br><span class="line">    plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">    plt.imshow(label2img(pre_lab_numpy[i],colormap))</span><br><span class="line">    plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">0.05</span>,hspace=<span class="number">0.05</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/29/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C/image-20220326235824843.png" alt="image-20220326235824843" style="zoom: 80%;"><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
            <tag> å·ç§¯ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç¬¬ä¸€ç«   æ·±åº¦å­¦ä¹ ä¸PyTorch]]></title>
      <url>/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%B8%80%E7%AB%A0%20%20%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%8EPyTorch/</url>
      <content type="html"><![CDATA[<h1>ç¬¬ä¸€ç«     æ·±åº¦å­¦ä¹ ä¸PyTorch</h1>
<hr>
<h2 id="1-1-æœºå™¨å­¦ä¹ ">1.1 æœºå™¨å­¦ä¹ </h2>
<p>åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œæœºå™¨å­¦ä¹ æ˜¯å®ç°äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä¹Ÿæ˜¯å…¶ä¸­å‘å±•æœ€å¿«çš„ä¸€ä¸ªåˆ†æ”¯ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œæœºå™¨å­¦ä¹ æ˜¯è®¡ç®—æœºç¨‹åºå¦‚ä½•éšç€ç»éªŒçš„ç§¯ç´¯è€Œæé«˜æ€§èƒ½ï¼Œä½¿ç³»ç»Ÿè‡ªæˆ‘å®Œå–„çš„è¿‡ç¨‹ã€‚</p>
<p>æ ¹æ®åº”ç”¨åœºæ™¯å’Œå­¦ä¹ æ–¹å¼çš„ä¸åŒï¼Œå¯ä»¥ç®€å•åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>
<p><strong>æ— ç›‘ç£å­¦ä¹  unsupervised learning</strong></p>
<p>æ— ç›‘ç£å­¦ä¹ ä¸éœ€è¦æå‰çŸ¥é“æ•°æ®é›†çš„ç±»åˆ«æ ‡ç­¾ï¼Œé€šå¸¸è¿ç”¨åœºæ™¯ä¸ºèšç±»å’Œé™ç»´ã€‚</p>
</li>
<li>
<p><strong>åŠç›‘ç£å­¦ä¹  semi-supervised learning</strong></p>
<p>åŠç›‘ç£å­¦ä¹ ä»‹äºäºŒè€…ä¹‹é—´ï¼Œåˆ©ç”¨æå°‘çš„æœ‰æ ‡ç­¾æ•°æ®å’Œå¤§é‡æ— æ ‡ç­¾æ•°æ®è¿›è¡Œå­¦ä¹ ï¼ŒåŒè¿‡å­¦ä¹ å¾—åˆ°çš„ç»éªŒå¯¹æ— æ ‡ç­¾çš„æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚</p>
</li>
<li>
<p><strong>æœ‰ç›‘ç£å­¦ä¹  supervised learning</strong></p>
<p>ä¸»è¦ç‰¹å¾æ˜¯æ•°æ®é›†å…·å¤‡æ ‡ç­¾æ•°æ®ã€‚</p>
</li>
</ul>
<hr>
<h2 id="1-2-æ·±åº¦å­¦ä¹ ">1.2 æ·±åº¦å­¦ä¹ </h2>
<p>æ·±åº¦å­¦ä¹ æ˜¯ä¸€ç§æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œä¸ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ–¹æ³•ç›¸åŒï¼Œå¯ä»¥æ ¹æ®è¾“å…¥çš„æ•°æ®è¿›è¡Œåˆ†ç±»æˆ–å›å½’ã€‚ä½†éšç€æ•°æ®é‡çš„å¢åŠ ï¼Œä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•è¡¨ç°ä¸å°½å¦‚äººæ„ï¼Œè€Œæ­¤æ—¶åˆ©ç”¨æ›´æ·±çš„ç½‘ç»œæŒ–æ˜æ•°æ®ä¿¡æ¯çš„æ–¹æ³•----æ·±åº¦å­¦ä¹ è¡¨ç°å‡ºäº†ä¼˜å¼‚çš„æ€§èƒ½ï¼Œ2010å¹´åï¼Œæ›´æ˜¯è¿æ¥äº†çˆ†å‘å¼å¢é•¿ã€‚</p>
<p>åœ¨20ä¸–çºª60~70å¹´ä»£ï¼Œç¥ç»ç”Ÿç†å­¦å®¶å‘ç°çŒ«çš„è§†è§‰çš®å±‚ä¸­æœ‰ä¸¤ç§ç»†èƒï¼Œä¸€ç§æ˜¯ç®€å•ç»†èƒï¼Œä»–ä»¬å¯¹å›¾åƒä¸­çš„ç»†èŠ‚ä¿¡æ¯æ›´åŠ æ•æ„Ÿï¼Œå¦‚è¾¹ç¼˜ã€è§’ç‚¹ã€‚å¦ä¸€ç§æ˜¯å¤æ‚ç»†èƒï¼Œèƒ½å¤Ÿåˆ†æå¤„ç†å›¾åƒçš„ç©ºé—´ä¸å˜æ€§ï¼Œå¦‚æ—‹è½¬ã€æ”¾ç¼©ã€è¿œè¿‘ç­‰å›¾åƒã€‚å­¦è€…ä»¬æ ¹æ®è¿™ç‚¹æå‡ºäº†å·ç§¯ç¥ç»ç½‘ç»œï¼Œåœ¨å›¾åƒå¤„ç†æ–¹é¢å–å¾—äº†è¾ƒå¤§çš„æˆæœã€‚</p>
<p>äº‹å®ä¸Šï¼Œåœ¨å½“æ—¶æœªèƒ½è§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜å‰ï¼ŒåŸºäºæ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œçš„ç®—æ³•å¹¶æ²¡æœ‰å¼•èµ·äººä»¬çš„é‡è§†ï¼Œåœ¨åˆ†å±‚è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæœ¬åº”ç”¨äºä¿®æ­£æ¨¡å‹å‚æ•°çš„è¯¯å·®éšç€å±‚æ•°çš„å¢åŠ æŒ‡æ•°é€’å‡ï¼Œè¿™å°±å¯¼è‡´äº†æ¨¡å‹è®­ç»ƒæ•ˆæœä½ä¸‹ã€‚</p>
<p>å°½ç®¡æ·±åº¦ç®—æ³•åœ¨2000å¹´å‰å°±è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”å—åˆ°äº†SVMçš„å‹åˆ¶ï¼Œä½†å…¶å‘å±•å¹¶æœªåœæ­¢ï¼Œ1992å¹´å¤šå±‚ç½‘ç»œæå‡ºï¼Œé€šè¿‡æ— ç›‘ç£å­¦ä¹ è®­ç»ƒæ·±åº¦ç½‘ç»œä¸­çš„æ¯ä¸€å±‚ï¼Œå†é€šè¿‡åå‘ä¼ æ’­ç®—æ³•è°ƒä¼˜ã€‚åœ¨è¿™ä¸€æ¨¡å‹ä¸­ï¼Œç¥ç»ç½‘ç»œçš„æ¯ä¸€å±‚éƒ½ä»£è¡¨è§‚æµ‹å˜é‡çš„ä¸€ç§å‹ç¼©è¡¨ç¤ºï¼Œè€Œè¿™ä¸€è¡¨ç¤ºåˆè¢«ä¼ å…¥åˆ°ä¸‹ä¸€å±‚ç½‘ç»œã€‚</p>
<p>è¿›å…¥21ä¸–çºªåï¼Œéšç€æ•°æ®é‡çš„ç§¯ç´¯å’Œè®¡ç®—æœºæ€§èƒ½çš„æå‡ï¼Œç¥ç»ç½‘ç»œç»ˆäºè¿æ¥äº†æ–°ä¸€è½®çš„æ˜¥å¤©ã€‚æ·±åº¦å­¦ä¹ ç®—æ³•å’Œä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ç®—æ³•ç›¸æ¯”ï¼Œå…¶æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ç«¯åˆ°ç«¯çš„å­¦ä¹ ï¼Œåœ¨è¿›è¡Œå­¦ä¹ ä¹‹å‰æ— éœ€è¿›è¡Œç‰¹å¾æå–ç­‰æ“ä½œï¼Œå¯ä»¥é€šè¿‡æ·±å±‚çš„ç½‘ç»œç»“æ„è‡ªåŠ¨ä»åŸå§‹å›¾åƒä¸­æå–æœ‰ç”¨çš„ç‰¹å¾ã€‚è€Œä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ è¿‡ç¨‹åˆ™éœ€è¦æ›´å¤šçš„äººå·¥å¹²é¢„ï¼Œå…¶ç¨³å®šæ€§è¾ƒå¼±ã€‚</p>
<hr>
<h2 id="Pytorch">Pytorch</h2>
<hr>
<h3 id="ä¸€-Pytorchæ˜¯ä»€ä¹ˆï¼Ÿ">ä¸€.Pytorchæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Pytorchæ˜¯torchçš„pythonç‰ˆæœ¬ï¼Œæ˜¯ç”±<strong>Facebook</strong>å¼€æºçš„ç¥ç»ç½‘ç»œæ¡†æ¶ï¼Œä¸“é—¨é’ˆå¯¹ <strong>GPU</strong> åŠ é€Ÿçš„æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰ç¼–ç¨‹ã€‚Torch æ˜¯ä¸€ä¸ªç»å…¸çš„å¯¹å¤šç»´çŸ©é˜µæ•°æ®è¿›è¡Œæ“ä½œçš„å¼ é‡ï¼ˆtensor ï¼‰åº“ï¼Œåœ¨æœºå™¨å­¦ä¹ å’Œå…¶ä»–æ•°å­¦å¯†é›†å‹åº”ç”¨æœ‰å¹¿æ³›åº”ç”¨ã€‚ä¸Tensorflowçš„é™æ€è®¡ç®—å›¾ä¸åŒï¼Œpytorchçš„è®¡ç®—å›¾æ˜¯<strong>åŠ¨æ€</strong>çš„ï¼Œå¯ä»¥æ ¹æ®è®¡ç®—éœ€è¦<strong>å®æ—¶æ”¹å˜è®¡ç®—å›¾</strong>ã€‚ä½†ç”±äºTorchè¯­è¨€é‡‡ç”¨ Luaï¼Œå¯¼è‡´åœ¨å›½å†…ä¸€ç›´å¾ˆå°ä¼—ï¼Œå¹¶é€æ¸è¢«æ”¯æŒ Python çš„ Tensorflow æŠ¢èµ°ç”¨æˆ·ã€‚ä½œä¸ºç»å…¸æœºå™¨å­¦ä¹ åº“ Torch çš„ç«¯å£ï¼ŒPyTorch ä¸º Python è¯­è¨€ä½¿ç”¨è€…æä¾›äº†èˆ’é€‚çš„å†™ä»£ç é€‰æ‹©ã€‚</p>
<hr>
<h3 id="äºŒã€Pytorchä¼˜åŠ¿">äºŒã€Pytorchä¼˜åŠ¿</h3>
<ul>
<li>
<p>è‡ªåŠ¨æ±‚å¯¼</p>
<ul>
<li>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x=torch.tensor(<span class="number">1.</span>,)</span><br><span class="line">a=torch.tensor(<span class="number">1.</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line">b=torch.tensor(<span class="number">2.</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line">c=torch.tensor(<span class="number">3.</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line">y=a**<span class="number">2</span>*x+b*x+c</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;before&#x27;</span>,a.grad,b.grad,c.grad)</span><br><span class="line"><span class="comment"># è‡ªåŠ¨æ±‚å¯¼ï¼Œå¯¹è¡¨è¾¾å¼aä¸­çš„å‚æ•°[b,c,d]è¿›è¡Œæ±‚åå¯¼</span></span><br><span class="line">grads=torch.autograd.grad(y,[a,b,c])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;after&#x27;</span>,grads[<span class="number">0</span>],grads[<span class="number">1</span>],grads[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>GPUåŠ é€Ÿè®¡ç®—(å¯ç”¨äºnumpyçš„åŠ é€Ÿ)</p>
</li>
<li>
<p>å¸¸ç”¨API</p>
</li>
<li>
<p>ç®€æ´</p>
<ul>
<li>ä¸åŒäºTFï¼ŒPyTorchçš„è®¾è®¡éµç…§<code>tensor</code>-&gt;<code>variable(autograd)</code>-&gt;<code>nn.Module</code>ä¸‰ä¸ªç”±ä½åˆ°é«˜çš„æŠ½è±¡å±‚æ¬¡ï¼Œåˆ†åˆ«ä»£è¡¨é«˜ç»´æ•°ç»„(å¼ é‡)ã€è‡ªåŠ¨æ±‚å¯¼(å˜é‡)å’Œç¥ç»ç½‘ç»œ(å±‚/æ¨¡å—)ã€‚PTçš„æºç åªæœ‰TFçš„ååˆ†é’Ÿä¹‹ä¸€å·¦å³ï¼Œæ›´å°‘çš„æŠ½è±¡ã€æ›´ç›´è§‚çš„è®¾è®¡ä½¿å¾—PTååˆ†å®¹æ˜“é˜…è¯»ã€‚</li>
</ul>
</li>
<li>
<p>é€Ÿåº¦</p>
<ul>
<li>PTçš„é€Ÿåº¦èƒœè¿‡TFå’ŒKerasç­‰æ¡†æ¶</li>
</ul>
</li>
<li>
<p>æ˜“ç”¨</p>
</li>
</ul>
<hr>
<h3 id="çº¿æ€§å›å½’">çº¿æ€§å›å½’</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">error_rate</span>(<span class="params">a,b,points</span>):</span><br><span class="line">    <span class="comment"># è®¡ç®—å‡æ–¹å·®</span></span><br><span class="line">    total=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(points)):</span><br><span class="line">        x=points[i][<span class="number">0</span>]</span><br><span class="line">        y=points[i][<span class="number">1</span>]</span><br><span class="line">        total+=(x*a+b-y)**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> total/<span class="built_in">float</span>(<span class="built_in">len</span>(points))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">step_gradient</span>(<span class="params">a_cur,b_cur,points,lr</span>):</span><br><span class="line">    <span class="comment"># å½“å‰æ¢¯åº¦æ–¹å‘</span></span><br><span class="line">    b_gradient=<span class="number">0</span></span><br><span class="line">    a_gradient=<span class="number">0</span></span><br><span class="line">    size=<span class="built_in">float</span>(<span class="built_in">len</span>(points))</span><br><span class="line">    total=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(points)):</span><br><span class="line">        x=points[i][<span class="number">0</span>]</span><br><span class="line">        y=points[i][<span class="number">1</span>]</span><br><span class="line">        <span class="comment"># ä¿®æ­£æ¢¯åº¦</span></span><br><span class="line">        <span class="comment"># (ax+b-y)**2å¯¹aæ±‚åå¯¼: 2*(ax+b-y)*x</span></span><br><span class="line">        <span class="comment"># å¯¹bæ±‚åå¯¼: 2*(ax+b-y)</span></span><br><span class="line">        a_gradient+=-<span class="number">2</span>*(y-(a_cur*x+b_cur))*x/size</span><br><span class="line">        b_gradient+=-<span class="number">2</span>*(y-(a_cur*x+b_cur))/size</span><br><span class="line">        total += (y-(a_cur*x+b_cur)) ** <span class="number">2</span></span><br><span class="line">    <span class="comment"># å¹³å‡æ¢¯åº¦æ–¹å‘</span></span><br><span class="line">    <span class="comment"># ä¿®æ­£</span></span><br><span class="line">    <span class="comment"># x=x-/delta x * LearningRate</span></span><br><span class="line">    <span class="keyword">return</span> [a_cur-a_gradient*lr,b_cur-b_gradient*lr,total/size]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">linear_regressing</span>(<span class="params">points,start_a,start_b,learningrate,iterations</span>):</span><br><span class="line"></span><br><span class="line">    a=start_a</span><br><span class="line">    b=start_b</span><br><span class="line">    time=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(iterations):</span><br><span class="line">        a,b,tem=step_gradient(a,b,points,learningrate)</span><br><span class="line">        time+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> time%<span class="number">10</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(tem)</span><br><span class="line">    <span class="keyword">return</span> [a,b]</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">point=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">    t = random.randint(<span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">    point.append([t,t*<span class="number">2</span>+<span class="number">6</span>+random.randrange(<span class="number">0</span>,<span class="number">10</span>)])</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=[<span class="number">20</span>,<span class="number">8</span>],dpi=<span class="number">300</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> point:</span><br><span class="line">    plt.plot(i[<span class="number">0</span>],i[<span class="number">1</span>],<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">a,b=linear_regressing(point,<span class="number">2</span>,<span class="number">6</span>,<span class="number">0.0002</span>,<span class="number">10000</span>)</span><br><span class="line"><span class="comment"># å­¦ä¹ ç‡å¿…é¡»è®¾ç½®å¾—å¾ˆå°ï¼Œä¸ç„¶ä¼šå†²å‡ºå»</span></span><br><span class="line">new_x=[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">101</span>) <span class="keyword">if</span> i%<span class="number">10</span>==<span class="number">0</span>]</span><br><span class="line">new_y=[i*a+b <span class="keyword">for</span> i <span class="keyword">in</span> new_x]</span><br><span class="line">plt.plot(new_x,new_y)</span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="TorchåŸºæœ¬æ“ä½œ">TorchåŸºæœ¬æ“ä½œ</h2>
<h3 id="1-Torchæ•°æ®ç±»å‹">1.Torchæ•°æ®ç±»å‹</h3>
<blockquote>
<p>dim: ç»´åº¦ï¼Œå¦‚2</p>
<p>shape: é•¿åº¦/å½¢çŠ¶ï¼Œå¦‚[2,2]</p>
</blockquote>
<h4 id="1-1æ ‡é‡Scalar">1.1<strong>æ ‡é‡Scalar</strong></h4>
<p>å¸¸è§äº<code>loss</code>è¯„ä¼°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›´æ¥åˆ›å»º</span></span><br><span class="line">torch.tensor(<span class="number">1.</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å¾—å½¢çŠ¶</span></span><br><span class="line">a=torch.tensor(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">a.shape <span class="comment"># or a.size()</span></span><br><span class="line"><span class="built_in">len</span>(a.shape) <span class="comment"># --&gt;0</span></span><br><span class="line"><span class="comment"># å½¢çŠ¶äº¤äº’</span></span><br><span class="line"><span class="built_in">list</span>(a.shape)</span><br><span class="line"><span class="comment"># è·å–è¯¥æ ‡é‡</span></span><br><span class="line">a.item()</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-2å‘é‡Vector">1.2<strong>å‘é‡Vector</strong></h4>
<p>å¸¸è§äº<code>bias</code>å’Œ<code>linear_input</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">torch.tensor([<span class="number">1.1</span>,<span class="number">2.2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šç±»å‹</span></span><br><span class="line">torch.FloatTensro(n) <span class="comment"># éšæœºåˆå§‹åŒ–å‘é‡é•¿åº¦</span></span><br><span class="line"><span class="comment"># ä¼šç”Ÿæˆnä¸ªç¬¦åˆç±»å‹çš„å‘é‡å…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»npä¸­è·å–</span></span><br><span class="line">data=np.ones(<span class="number">2</span>)</span><br><span class="line">torch.from_numpy(data)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3å¼ é‡Tensor">1.3<strong>å¼ é‡Tensor</strong></h4>
<p>å®é™…ä¸Šåœ¨torch0.4ä¹‹åéƒ½å«å¼ é‡äº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a=torch.randn(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸¸è§çš„æ•°æ®äº¤äº’</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># number of element è·å¾—å…ƒç´ æ•°é‡</span></span><br><span class="line">a.numel() </span><br><span class="line"><span class="comment"># å®é™…ä¸Šå°±æ˜¯1*2*3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å¾—ç»´åº¦</span></span><br><span class="line">a.dim()</span><br></pre></td></tr></table></figure>
<p>Tensorçš„æ•°æ®ç±»å‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CPU</span></span><br><span class="line">a=torch.randn(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">a.<span class="built_in">type</span>()</span><br><span class="line"><span class="comment"># &quot;torch.FloatTensor&quot;</span></span><br><span class="line"><span class="built_in">type</span>(a)</span><br><span class="line"><span class="comment"># torch.Tensor</span></span><br><span class="line"><span class="built_in">isinstance</span>(a,torch.FloatTensor)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># GPU</span></span><br><span class="line"><span class="built_in">isinstance</span>(data,torch.cuda.DoubleTensor)</span><br><span class="line"><span class="comment"># è½¬æ¢</span></span><br><span class="line">data=data.cuda</span><br><span class="line">data=data.<span class="built_in">float</span>()</span><br><span class="line">data=data.<span class="built_in">int</span>()</span><br></pre></td></tr></table></figure>
<p>ç±»å‹è¡¨</p>
<p><code>æ³¨æ„ï¼ŒTorchæ²¡æœ‰stringç±»å‹ï¼Œå¯ä»¥é€šè¿‡one-hotå¤„ç†ï¼Œæˆ–æ˜¯è¯­ä¹‰å…³ç³»é‡‡ç”¨embeddedä¸­çš„word2vecã€‚</code></p>
<hr>
<h4 id="1-4åˆ›å»ºTensor">1.4<strong>åˆ›å»ºTensor</strong></h4>
<p>æˆ‘ä»¬å¯ä»¥ä»<code>numpy</code>ä¸­è·å–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=np.ndarray([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">a=torch.from_numpy(a)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä»<code>list</code>ä¸­è·å–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.tensor([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">torch.FloatTensor([<span class="number">2.</span>,<span class="number">3.</span>])</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„<code>torch.tensor</code>æ˜¯æ¥æ”¶ç°æœ‰æ•°æ®ï¼Œè€Œ<code>torch.Tensor</code>æ˜¯æ¥æ”¶æ•°æ®ç»´åº¦(å½“ç„¶ä¹Ÿå¯ä»¥æ¥æ”¶ç°å®æ•°æ®)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.FloatTensor(<span class="number">2</span>,<span class="number">3</span>) <span class="comment"># æ¥æ”¶ç»´åº¦éšæœºåˆ›å»º</span></span><br><span class="line">torch.FloatTensro([<span class="number">2</span>,<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆ<strong>æœªåˆå§‹åŒ–</strong>çš„æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Torch.empty([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è®¾ç½®<strong>é»˜è®¤æ•°æ®ç±»å‹</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Torch.Tensoré»˜è®¤çš„æ˜¯FloatTensor</span></span><br><span class="line">torch.set_default_tensor_type(torch.DoubleTensor)</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆ<strong>åˆ†å¸ƒ</strong>æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 0-1åŒºé—´</span></span><br><span class="line">a=torch.rand(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment"># likeæ–¹æ³•æ˜¯å…ˆè¯»å–shapeï¼Œç„¶åé€è¿‡å»ç”Ÿæˆæ•°æ®</span></span><br><span class="line">torch.rand_like(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰åŒºé—´</span></span><br><span class="line">torch.randint(<span class="number">1</span>,<span class="number">10</span>,[<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment"># æœ€å°å€¼ï¼Œæœ€å¤§å€¼-1ï¼Œå½¢çŠ¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£æ€åˆ†å¸ƒN(0,1)</span></span><br><span class="line">torch.randn(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰æ­£æ€</span></span><br><span class="line">torch.normal(mean=torch.full([<span class="number">10</span>],<span class="number">0</span>),std=torch.arange(<span class="number">1</span>,<span class="number">0</span>,-<span class="number">0.1</span>))</span><br><span class="line"><span class="comment"># å¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º10ï¼Œç»´åº¦ä¸º1çš„æ•°æ®</span></span><br><span class="line"><span class="comment"># ä¸€èˆ¬å†åšä¸ªview</span></span><br></pre></td></tr></table></figure>
<p><strong>å…¨éƒ¨èµ‹å€¼</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">torch.full([<span class="number">2</span>,<span class="number">3</span>],<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ ‡é‡</span></span><br><span class="line">torch.full([],<span class="number">7</span>)</span><br></pre></td></tr></table></figure>
<p><strong>ç­‰å·®æ•°åˆ—</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(<span class="number">0</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">torch.arange(<span class="number">0</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><strong>ç­‰åˆ†ç”Ÿæˆ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çº¿æ€§ç­‰åˆ†</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼ŒåŒ…å«äº†æœ€å¤§å€¼</span></span><br><span class="line">torch.linspace(<span class="number">0</span>,<span class="number">10</span>,steps=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ•°ç­‰åˆ†</span></span><br><span class="line">torch.logspace(<span class="number">0</span>,-<span class="number">1</span>,steps=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p><strong>è§„åˆ™çŸ©é˜µ</strong>ç”Ÿæˆ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹è§’</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯åªèƒ½åˆ°äºŒç»´</span></span><br><span class="line">torch.eye(<span class="number">3</span>) <span class="comment"># 3x3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨é›¶</span></span><br><span class="line">torch.zeros(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ©ç”¨likeç”Ÿæˆ</span></span><br><span class="line">torch.ones_like(a)</span><br></pre></td></tr></table></figure>
<p>éšæœº<strong>æ‰“æ•£</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">torch.randperm(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªéšæœºæ‰“ä¹±çš„tensor</span></span><br><span class="line"><span class="comment"># å¦‚tensor([1,5,7,9,8,6,3,4,0])</span></span><br><span class="line"><span class="comment"># ä¸€èˆ¬ç”¨äºéšæœºåŒ–ç´¢å¼•</span></span><br><span class="line"><span class="comment"># å¦‚</span></span><br><span class="line">a=torch.rand(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">b=torch.rand(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">idx=torch.randperm(<span class="number">2</span>)</span><br><span class="line">a[idx] <span class="comment"># å¯ä»¥äº¤æ¢è¡Œ</span></span><br><span class="line">b[idx]</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="2-Tensorç´¢å¼•ä¸åˆ‡ç‰‡">2.Tensorç´¢å¼•ä¸åˆ‡ç‰‡</h3>
<p>tensorçš„åˆ‡ç‰‡ç´¢å¼•éå¸¸å¤§èƒ†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹ä¸€ä¸ªå››ä½æ•°æ®è¿›è¡Œæ“ä½œ</span></span><br><span class="line">a=torch.rand(<span class="number">4</span>,<span class="number">3</span>,<span class="number">28</span>,<span class="number">28</span>)</span><br><span class="line">a[<span class="number">0</span>].shape <span class="comment"># torch.Size([3,28,28])</span></span><br><span class="line">a[<span class="number">0</span>,<span class="number">0</span>].shape <span class="comment"># torch.Size([28,28])</span></span><br><span class="line">a[<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>] <span class="comment"># tensor(0.8082)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥ä¸åˆ‡ç‰‡ä¸€èµ·ä½¿ç”¨</span></span><br><span class="line">a[:<span class="number">2</span>].shape <span class="comment"># torch.Size([2,3,28,28])</span></span><br><span class="line">a[:<span class="number">2</span>,<span class="number">1</span>:,:,:].shape</span><br><span class="line">a[:<span class="number">2</span>,-<span class="number">1</span>,:,:].shape</span><br><span class="line"></span><br><span class="line"><span class="comment"># éš”ç‚¹é‡‡æ ·</span></span><br><span class="line">a[:,:,<span class="number">0</span>:<span class="number">28</span>:<span class="number">2</span>,<span class="number">0</span>:<span class="number">15</span>:<span class="number">3</span>].shape</span><br><span class="line">a[:,:,::<span class="number">2</span>,::<span class="number">2</span>].shape</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…·ä½“ç´¢å¼•æ–¹å¼</span></span><br><span class="line">torch.index_select(dim,[])</span><br><span class="line">torch.index_select(<span class="number">0</span>,[<span class="number">1</span>,<span class="number">2</span>]) <span class="comment"># ä»ç¬¬ä¸€ä¸ªç»´åº¦ä¸Šé€‰æ‹©1,2ä¸ªæ•°æ®</span></span><br><span class="line">a.index_select(<span class="number">2</span>,torch.arange(<span class="number">8</span>)).shape</span><br><span class="line"><span class="comment"># torch.Size([4,3,8,28])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»»æ„å¤šçš„ç»´åº¦</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line">a[...].shape</span><br><span class="line">a[<span class="number">0</span>,...].shape <span class="comment"># ==a[0]</span></span><br><span class="line">a[<span class="number">0</span>:,...,::<span class="number">2</span>] <span class="comment"># å¯¹ç¬¬ä¸€ä¸ªç»´åº¦å’Œæœ€åä¸€ä¸ªç»´åº¦åšé™å®š</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡æ©ç é€‰å–</span></span><br><span class="line">x=torch.randn(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">mask=x.ge(<span class="number">0.5</span>) <span class="comment"># ä¸€ä¸ªé›¶ä¸€çŸ©é˜µï¼Œå¤§äº0.5æ—¶ä¸º1</span></span><br><span class="line">torch.masked_select(x,mask) <span class="comment"># ç›´æ¥è·å–ä¸€ä¸ªvectoryï¼Œæ˜¯maskä¸º1çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¹³é€‰å–</span></span><br><span class="line"><span class="comment"># å…ˆå°†æ•°æ®æ’æˆä¸€æ’</span></span><br><span class="line"><span class="comment"># ç„¶åå†é€‰å–</span></span><br><span class="line">scr=torch.tensor([[<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>],</span><br><span class="line">                  [<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]])</span><br><span class="line">torch.take(scr,torch.tensor[[<span class="number">0</span>,<span class="number">2</span>,-<span class="number">1</span>]])</span><br><span class="line"><span class="comment"># tensor([4,5,8])</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="3-ç»´åº¦å˜åŒ–">3.ç»´åº¦å˜åŒ–</h3>
<h4 id="3-1-viewä¸reshape">3.1 <strong>viewä¸reshape</strong></h4>
<p><code>view</code>ä¸<code>reshape</code>æ•ˆæœå®Œå…¨ä¸€è‡´</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=torch.randn(<span class="number">4</span>,<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>)</span><br><span class="line"></span><br><span class="line">a.view(<span class="number">4</span>,<span class="number">28</span>*<span class="number">28</span>)</span><br></pre></td></tr></table></figure>
<h4 id="3-2-squeezeä¸unsqueeze">3.2 <strong>squeezeä¸unsqueeze</strong></h4>
<p>å‹ç¼©ä¸ç»´åº¦å¢åŠ </p>
<p><code>unsqueeze</code>å¯ä»¥åœ¨æŒ‡å®šä½ç½®ä¸Šæ’å…¥æ–°çš„ç»´åº¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a.shape</span><br><span class="line"><span class="comment"># torch.Size([4,1,28,28])</span></span><br><span class="line"></span><br><span class="line">a.unsqueeze(<span class="number">0</span>).shape</span><br><span class="line"><span class="comment"># torch.Size([1,4,1,28,28])</span></span><br><span class="line"></span><br><span class="line">a.unsqueeze(<span class="number">4</span>).shape</span><br><span class="line"><span class="comment"># torch.Size([4,1,28,28,1])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Demo</span></span><br><span class="line"><span class="comment"># ä¾‹å¦‚æœ‰ä¸€å¼  4,32,14,14çš„å›¾åƒ</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬ç°åœ¨è¿˜æœ‰ä¸€ä¸ªæ ‡é‡æ ¸</span></span><br><span class="line">b=torch.rand(<span class="number">32</span>)</span><br><span class="line">f=torch.rand(<span class="number">4</span>,<span class="number">32</span>,<span class="number">14</span>,<span class="number">14</span>)</span><br><span class="line"><span class="comment"># å¦‚ä½•è¾¾æˆf+b</span></span><br><span class="line">b=b.unsqueeze(<span class="number">1</span>).unsqueeze(<span class="number">2</span>).unsqueeze(<span class="number">0</span>)</span><br><span class="line">b.shape</span><br><span class="line"><span class="comment"># torch.Size([1,32,1,1])</span></span><br></pre></td></tr></table></figure>
<p><code>squeeze</code>åˆ™æ˜¯åˆ å‡ç»´åº¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ç»™å®šå‚æ•°ä¼šæŠŠèƒ½åˆ å‡çš„å…¨åˆ å‡äº†</span></span><br><span class="line">a.shape</span><br><span class="line"><span class="comment"># torch.Size([4,1,28,28])</span></span><br><span class="line"></span><br><span class="line">a.squeeze().shape</span><br><span class="line"><span class="comment"># torch.Size([32])</span></span><br><span class="line"></span><br><span class="line">a.squeeze(<span class="number">0</span>).shape</span><br><span class="line"><span class="comment"># torch.Size([32,1,1])</span></span><br></pre></td></tr></table></figure>
<h4 id="3-3-expand-ä¸-repeat">3.3 <strong>expand ä¸ repeat</strong></h4>
<p><code>expand</code> å¹¶æ²¡æœ‰ä¸»åŠ¨å¤åˆ¶æ•°æ®ï¼Œè€Œ<code>repeat</code>åˆ™ä¼šcopyæ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a=torch.rand(<span class="number">4</span>,<span class="number">32</span>,<span class="number">14</span>,<span class="number">14</span>)</span><br><span class="line">b.shape</span><br><span class="line"><span class="comment"># torch.Size([1,32,1,1])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ä¸ºäº†è®©bä¸aåšå¤„ç†</span></span><br><span class="line"><span class="comment"># éœ€è¦å¯¹bè¿›è¡Œæ‰©å±•</span></span><br><span class="line">b.expand(<span class="number">4</span>,<span class="number">32</span>,<span class="number">14</span>,<span class="number">14</span>).shape</span><br><span class="line"><span class="comment"># torch.Size([4,32,14,14])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è€Œè¦ä¿æŒæŸä¸€ç»´åº¦ä¸å˜ï¼Œä½¿ç”¨è´Ÿä¸€å³å¯</span></span><br><span class="line">b.expande(-<span class="number">1</span>,<span class="number">32</span>,-<span class="number">1</span>,-<span class="number">1</span>).shape</span><br><span class="line"><span class="comment"># torch.Size([1,32,1,1])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># repeat å‚æ•°è¡¨ç¤ºæŸä¸€ç»´åº¦ä¸Šéœ€è¦æ‹·è´å¤šå°‘æ¬¡</span></span><br><span class="line">b.repeat(<span class="number">4</span>,<span class="number">32</span>,<span class="number">1</span>,<span class="number">1</span>).shape</span><br><span class="line"><span class="comment"># torch.Size([4,1024,1,1])</span></span><br></pre></td></tr></table></figure>
<h4 id="3-4-è½¬ç½®">3.4 <strong>è½¬ç½®</strong></h4>
<p><code>.t</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=torch.randn(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment"># .tåªèƒ½ç”¨äºäºŒç»´çŸ©é˜µ</span></span><br><span class="line">a.t()</span><br></pre></td></tr></table></figure>
<p><code>transpose</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># transposeèƒ½äº¤æ¢ä»»æ„ä¸¤ä¸ªç»´åº¦</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯ç»´åº¦æ‰“ä¹±åçš„æ•°æ®ä¸å†è”ç³»</span></span><br><span class="line"><span class="comment"># éœ€è¦ä½¿ç”¨contiguousè¿›è¡Œå¤„ç†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„viewä¼šä¸¢å¤±ç»´åº¦ä¿¡æ¯ï¼</span></span><br><span class="line"><span class="comment"># éœ€è¦è·Ÿè¸ªç»´åº¦ä¿¡æ¯</span></span><br><span class="line">al=a.transpose(<span class="number">1</span>,<span class="number">3</span>).contiguous().view(<span class="number">4</span>,<span class="number">3</span>*<span class="number">32</span>*<span class="number">32</span>).view(<span class="number">4</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">3</span>).transpose(<span class="number">1</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><code>permute</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># permuteå¯ä»¥å¤šæ¬¡äº¤æ¢</span></span><br><span class="line"><span class="comment"># è‡ªåŠ¨è°ƒç”¨transpose</span></span><br><span class="line"></span><br><span class="line">b.permute(<span class="number">0</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="4-è‡ªåŠ¨æ‰©å±•">4. è‡ªåŠ¨æ‰©å±•</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š</p>
<ul>
<li>è‹¥å‰æ–¹æ— ç»´åº¦ï¼Œåˆ™æ–°å¢ç»´åº¦</li>
<li>å°†ä¸è¶³çš„ç»´åº¦æ‰©å±•åˆ°éœ€æ±‚ç»´åº¦</li>
</ul>
<blockquote>
<p>æœ‰åˆ™ç›¸åŠ ï¼Œæ— åˆ™è¡¥å…¨</p>
</blockquote>
<p>æ³¨æ„ï¼Œ<code>expand</code>ä¸èƒ½è‡ªåŠ¨å¢åŠ ç»´åº¦ï¼Œæ‰€ä»¥éœ€è¦å…ˆç”¨<code>unqueeze</code>å¢åŠ ç»´åº¦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.unsqueeze[0].unsqueeze[-1].expand_as(A)</span><br></pre></td></tr></table></figure>
<p>èƒ½å¤Ÿè‡ªåŠ¨æ‰©å±•çš„æƒ…å†µï¼š</p>
<ul>
<li>éœ€è¦æ·»åŠ çš„æ•°æ®ç¬¦åˆæœ€åä¸€ç»´æ•°é‡</li>
<li>æ·»åŠ çš„æ•°æ®ç»´åº¦ä¸éœ€è¦å¤„ç†çš„æ•°æ®ç»´åº¦ç›¸åŒ</li>
</ul>
<hr>
<h3 id="5-æ‹¼æ¥ä¸åˆ†å‰²">5.  æ‹¼æ¥ä¸åˆ†å‰²</h3>
<h4 id="5-1-cat">5.1 <strong>cat</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a=torch.rand(<span class="number">4</span>,<span class="number">32</span>,<span class="number">8</span>)</span><br><span class="line">b=torch.rand(<span class="number">5</span>,<span class="number">32</span>,<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">torch.cat([a,b],dim=<span class="number">0</span>).shape</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶ç»´åº¦ä¹‹å¤–çš„ç»´åº¦å¿…é¡»ç›¸åŒ</span></span><br></pre></td></tr></table></figure>
<h4 id="5-2-stack">5.2 <strong>stack</strong></h4>
<p><code>stack</code>ä¼šåœ¨éœ€è¦åˆå¹¶çš„ç»´åº¦å‰æ–°æ·»åŠ ä¸€ä¸ªç»´åº¦(ç­‰äºä¸ŠåŠéƒ¨åˆ†æ˜¯Aï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯B),ä¸”è¦æ±‚ç»´åº¦å®Œå…¨ä¸€è‡´ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a=torch.randn([<span class="number">32</span>,<span class="number">32</span>,<span class="number">16</span>])</span><br><span class="line">b=torch.randn([<span class="number">32</span>,<span class="number">32</span>,<span class="number">16</span>])</span><br><span class="line"></span><br><span class="line">torch.stack([a,b],dim=<span class="number">0</span>).shape</span><br><span class="line"><span class="comment"># torch.Size([2,32,32,16])</span></span><br></pre></td></tr></table></figure>
<h4 id="5-3-split">5.3 <strong>split</strong></h4>
<p>splitæ˜¯æŒ‰é•¿åº¦åˆ†å‰²</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a=torch.rand(<span class="number">4</span>,<span class="number">32</span>,<span class="number">8</span>)</span><br><span class="line"><span class="comment"># å°†æŒ‡å®šç»´åº¦è¿›è¡Œåˆ‡å‰²ï¼Œæ¯ä¸€ä»½é•¿åº¦æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment"># ä¸å¤Ÿçš„åœ°æ–¹å–ä½™æ•°</span></span><br><span class="line">t=a.split(<span class="number">7</span>,dim=<span class="number">1</span>)</span><br><span class="line">t[<span class="number">4</span>].shape</span><br><span class="line"><span class="comment"># torch.Size([4, 4, 8])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿèƒ½æŒ‡å®šé•¿åº¦</span></span><br><span class="line">a.split([<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>],dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="5-4-Chunk">5.4 <strong>Chunk</strong></h4>
<p><code>chunk</code>æ˜¯ç­‰è·åˆ†å‰²</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†æˆä¸¤ä»½</span></span><br><span class="line">a.chunk(<span class="number">2</span>,dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="6-Tensorè¿ç®—">6.Tensorè¿ç®—</h3>
<h4 id="åŠ æ³•">åŠ æ³•</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a=torch.rand(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">b=torch.rand(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">a+b <span class="comment"># è‡ªåŠ¨å¹¿æ’­æœºåˆ¶</span></span><br><span class="line">torch.add(a,b)</span><br></pre></td></tr></table></figure>
<h4 id="å‡æ³•">å‡æ³•</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a-b</span><br><span class="line">torch.sub(a,b)</span><br></pre></td></tr></table></figure>
<h4 id="ä¹˜æ³•">ä¹˜æ³•</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a*b</span><br><span class="line">torch.mul(a,b)</span><br></pre></td></tr></table></figure>
<h4 id="é™¤æ³•">é™¤æ³•</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a/b</span><br><span class="line">torch.div(a,b)</span><br></pre></td></tr></table></figure>
<h4 id="çŸ©é˜µç›¸ä¹˜">çŸ©é˜µç›¸ä¹˜</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">torch.mm(a,b) <span class="comment"># martix mul</span></span><br><span class="line">torch.matmul(a,b)</span><br><span class="line">a@b</span><br><span class="line"></span><br><span class="line"><span class="comment"># deom</span></span><br><span class="line">a=torch.rand(<span class="number">4</span>,<span class="number">784</span>)</span><br><span class="line">x=torch.rand(<span class="number">4</span>,<span class="number">784</span>)</span><br><span class="line">w=torch.rand(<span class="number">512</span>,<span class="number">784</span>)</span><br><span class="line">(x@w.t()).shape</span><br><span class="line"><span class="comment"># torch.Size([4,512])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹äºé«˜ç»´çŸ©é˜µ</span></span><br><span class="line"><span class="comment"># mmæ— æ³•è¿ç®—</span></span><br><span class="line"><span class="comment"># matmuåˆ™ä¼šè¿ç®—åä¸¤ç»´</span></span><br></pre></td></tr></table></figure>
<h4 id="å¹‚è¿ç®—">å¹‚è¿ç®—</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a=torch.full([<span class="number">2</span>,<span class="number">2</span>],<span class="number">3</span>)</span><br><span class="line">a.<span class="built_in">pow</span>(<span class="number">2</span>)</span><br><span class="line">a**<span class="number">2</span></span><br><span class="line"><span class="comment"># å¼€æ–¹</span></span><br><span class="line">a.sqrt()</span><br><span class="line">a**<span class="number">0.5</span></span><br><span class="line"><span class="comment"># æŒ‡æ•°</span></span><br><span class="line">a=torch.exp(torch.ones(<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line">torch.log(a)</span><br><span class="line"><span class="comment"># è¿‘ä¼¼å€¼</span></span><br><span class="line">torch.ceil() <span class="comment"># ä¸Š</span></span><br><span class="line">torch.floor() <span class="comment"># ä¸‹</span></span><br><span class="line"><span class="comment"># å››èˆäº”å…¥</span></span><br><span class="line">torch.<span class="built_in">round</span>()</span><br><span class="line"><span class="comment"># è£å‰ª</span></span><br><span class="line">torch.trunc() <span class="comment"># æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">torch.frac() <span class="comment"># å°æ•°éƒ¨åˆ†</span></span><br></pre></td></tr></table></figure>
<h4 id="æ¢¯åº¦è£å‰ª">æ¢¯åº¦è£å‰ª</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.clamp(<span class="number">10</span>) <span class="comment"># å°†æ‰€æœ‰å°äº10çš„è®¾ç½®ä¸º10</span></span><br><span class="line">torch.clamp(<span class="built_in">min</span>,<span class="built_in">max</span>) <span class="comment"># é™åˆ¶æ•°æ®èŒƒå›´</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="7-ç»Ÿè®¡API">7.ç»Ÿè®¡API</h3>
<h4 id="èŒƒæ•°norm">èŒƒæ•°norm</h4>
<p><strong>L0èŒƒæ•°</strong>ï¼šå‘é‡ä¸­éé›¶å…ƒç´ çš„æ•°ç›®</p>
<p><strong>L1èŒƒæ•°</strong>ï¼šå‘é‡ä¸­å„ä¸ªå…ƒç´ çš„ç»å¯¹å€¼ä¹‹å’Œï¼Œä¹Ÿç§°ç¨€ç–è§„åˆ™ç®—å­</p>
<p><strong>L2èŒƒæ•°</strong>ï¼šå‘é‡ä¸­å„ä¸ªå…ƒç´ çš„å¹³æ–¹æ±‚å’Œåå¼€æ ¹å·ã€‚å…¶å›å½’ç§°ä¸ºâ€œ<strong>å²­å›å½’</strong>â€ï¼Œä¹Ÿç§°<strong>æƒå€¼è¡°å‡</strong></p>
<p>L2èŒƒæ•°å¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tensor.norm(<span class="number">1</span>)</span><br><span class="line">tensor.norm(<span class="number">2</span>)</span><br><span class="line">tensor.norm(<span class="number">1</span>,dim=<span class="number">1</span>) <span class="comment"># æŒ‡å®šç»´åº¦ä¸Šæ‰€æœ‰å…ƒç´ åšèŒƒæ•°</span></span><br></pre></td></tr></table></figure>
<h4 id="ç»Ÿè®¡">ç»Ÿè®¡</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">tensor.<span class="built_in">min</span>()</span><br><span class="line">tensor.<span class="built_in">max</span>()</span><br><span class="line">tensor.mean() <span class="comment"># å…ƒç´ ç´¯åŠ é™¤ä»¥å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">tensor.prod() <span class="comment"># ç´¯ä¹˜ æ‰€æœ‰å…ƒç´ ç›¸ä¹˜</span></span><br><span class="line">tensor.<span class="built_in">sum</span>()</span><br><span class="line">tensor.argmax()</span><br><span class="line">tensor.argmin()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å›dim=1ä¸Šçš„æœ€å¤§ä¸‰ä¸ªå…ƒç´ åŠå…¶ä¸‹æ ‡</span></span><br><span class="line"><span class="comment"># largest=Falseåˆ™ä¼šè¿”å›æœ€å°</span></span><br><span class="line">tensor.topk(<span class="number">3</span>,dim=<span class="number">1</span>ï¼Œlargest=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å›ç¬¬ 4 å°çš„å…ƒç´ åŠå…¶ä¸‹æ ‡</span></span><br><span class="line">tensor.kthvalue(<span class="number">4</span>,dim=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># deom</span></span><br><span class="line">a.shape</span><br><span class="line"><span class="comment"># [4,10]</span></span><br><span class="line">a.<span class="built_in">max</span>(dim=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># ä¼šä»å››ä¸ªç»´åº¦é‡Œå„å–dim=1ä¸Šçš„æœ€å¤§å€¼ï¼Œå¹¶è¿”å›ä¸‹æ ‡</span></span><br><span class="line">a.<span class="built_in">max</span>(dim=<span class="number">1</span>,keepdim=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># è¿™æ ·ä¼šä¿æŒåŸæœ‰çš„å½¢çŠ¶</span></span><br><span class="line"><span class="comment"># ä¸ä¼šç ´åè¿”å›å€¼çš„ç»“æ„</span></span><br></pre></td></tr></table></figure>
<h4 id="æ¯”è¾ƒ">æ¯”è¾ƒ</h4>
<p>è¿”å›çš„éƒ½æ˜¯é€»è¾‘çŸ©é˜µ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; &gt;=</span><br><span class="line">&lt; &lt;=</span><br><span class="line">!=</span><br><span class="line">==</span><br><span class="line">torch.eq(a,b)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="8-é«˜çº§æ“ä½œ">8.é«˜çº§æ“ä½œ</h3>
<h4 id="ä¸‰å…ƒè¿ç®—ç¬¦"><strong>ä¸‰å…ƒè¿ç®—ç¬¦</strong></h4>
<p><code>torch.where(condition,x,y)-&gt;Tensor</code></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mo>:</mo><msub><mi>x</mi><mi>i</mi></msub><mspace width="1em"><mi>i</mi><mi>f</mi><mspace width="1em"><mi>c</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><msub><mi>n</mi><mi>i</mi></msub><mspace width="1em"><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi><mspace width="1em"><msub><mi>y</mi><mi>i</mi></msub></mspace></mspace></mspace></mspace></mrow><annotation encoding="application/x-tex">out: x_i\quad if \quad condition_i \quad else  \quad y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span><span class="mspace" style="margin-right:1em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cond=torch.rand([<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line">a=torch.full([<span class="number">2</span>,<span class="number">2</span>],<span class="number">0</span>)</span><br><span class="line">b=torch.full([<span class="number">2</span>,<span class="number">2</span>],<span class="number">1</span>)</span><br><span class="line">torch.where(cond&gt;<span class="number">0.5</span>,a,b)</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥è¡¨"><strong>æŸ¥è¡¨</strong></h4>
<p><code>torch.gather(input,dim,index,out=None)</code><br>
åœ¨inputä¸­çš„dimç»´å¯»æ‰¾ç¬¦åˆindexçš„å€¼</p>
<hr>
<h2 id="éšæœºæ¢¯åº¦ä¸‹é™">éšæœºæ¢¯åº¦ä¸‹é™</h2>
<h3 id="1-æ¢¯åº¦">1.æ¢¯åº¦</h3>
<p>å¯¼æ•°ï¼šæŸä¸€æ–¹å‘ä¸Šçš„å˜åŒ–ç‡</p>
<p>åå¾®åˆ†ï¼šæŒ‡å®šæ–¹å‘çš„å˜åŒ–ç‡</p>
<p>æ¢¯åº¦ï¼šåå¾®åˆ†å‘é‡[æ‰€æœ‰æ–¹å‘çš„å˜åŒ–ç‡å‘é‡]</p>
<p>æ¢¯åº¦å…·æœ‰<strong>æ–¹å‘</strong>å’Œ<strong>å¤§å°</strong></p>
<p>é‚£ä¹ˆï¼Œæ‰€è°“<strong>æ¢¯åº¦ä¸‹é™</strong>ï¼Œå°±æ˜¯æ²¿ç€<strong>æ¢¯åº¦å˜åŒ–æœ€å¤§</strong>ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°æœ¬èº«å˜åŒ–æœ€å¿«ï¼‰çš„æ–¹å‘å‰è¿›ã€‚è¿™æ ·åœ¨æ»¡è¶³ä¸€å®šå­¦ä¹ ç‡çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿåˆ°è¾¾<strong>å±€éƒ¨æå°å€¼ç‚¹</strong>ã€‚</p>
<p><strong>éç‚¹</strong>ï¼šæŸä¸€æ–¹å‘è¾¾åˆ°äº†å±€éƒ¨æœ€å°ï¼Œä½†å¦ä¸€æ–¹å‘å¤„äºå±€éƒ¨æœ€å¤§</p>
<p>å½±å“æœç´¢ç»“æœçš„å› ç´ ï¼š</p>
<ul>
<li>åˆå§‹çŠ¶æ€</li>
<li>å­¦ä¹ ç‡</li>
<li>åŠ¨é‡</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">torch.autograd.grad(equation,[parameter])</span><br><span class="line"><span class="comment"># è¿”å›å‚æ•°çš„æ¢¯åº¦å‘é‡</span></span><br><span class="line"></span><br><span class="line">equation.backward()</span><br><span class="line"><span class="comment"># ä¸ä¼šè¿”å›å€¼</span></span><br><span class="line">parameter.grad()</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="2-æ¿€æ´»å‡½æ•°">2.æ¿€æ´»å‡½æ•°</h3>
<h4 id="2-1Sigmoid">2.1Sigmoid</h4>
<p>ç§‘å­¦å®¶å‘ç°åŠ¨ç‰©çš„ç¥ç»å…ƒå­˜åœ¨æŸä¸€<strong>é˜ˆå€¼</strong>ï¼Œå½“è¾“å…¥åˆºæ¿€å°äºè¯¥é˜ˆå€¼æ—¶ï¼Œä¸ä¼šå¼•èµ·ç¥ç»å…ƒå˜åŒ–ã€‚äºæ˜¯ï¼Œå­¦è€…ä»¬å€Ÿé‰´è¯¥æ€æƒ³ï¼Œè®¾ç½®äº†æ¿€æ´»å‡½æ•°ã€‚</p>
<p>æ¿€æ´»å‡½æ•°æ˜¯ä¸è¿ç»­çš„ï¼Œä¸å¯ä»¥æ±‚å¯¼ã€‚ä¸ºäº†è§£å†³å•å±‚ç¥ç»å…ƒæ¿€æ´»å‡½æ•°ä¸å¯å¯¼çš„æƒ…å†µï¼Œç§‘å­¦å®¶æå‡ºäº†<strong>å¹³æ»‘è¿ç»­</strong>çš„æ¿€æ´»å‡½æ•°æ›²çº¿ï¼Œå³<strong>Sigmoid</strong>ï¼Œä¹Ÿå«<strong>Logistic</strong>ã€‚</p>
<p>å…¶å¯¼æ•°æ€§è´¨èƒ½å¤Ÿç›´æ¥é€šè¿‡æœ¬èº«æ±‚å¾—ï¼Œååˆ†æ–¹ä¾¿ï¼Œèƒ½å°†æ•°æ®èŒƒå›´å‹ç¼©åˆ°[0,1]</p>
<p>sigmoidä¼šå‡ºç°æ¢¯åº¦ç¦»æ•£ç°è±¡ï¼Œå³é•¿æ—¶é—´çš„æ¢¯åº¦ä¸æ›´æ–°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=torch.linspace(-<span class="number">100</span>,<span class="number">100</span>,<span class="number">10</span>)</span><br><span class="line">torch.sigmoid(a)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="2-2Tanh">2.2Tanh</h4>
<p>å¸¸è§äºRNNç½‘ç»œ</p>
<p>å–å€¼ä¸º[-1,1]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.sigmoid(a)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="2-3Rectified-Linear-Unit">2.3Rectified Linear Unit</h4>
<p>å‡å°‘æ¢¯åº¦ç¦»æ•£å’Œæ¢¯åº¦çˆ†ç‚¸ï¼Œä¿è¯æ¢¯åº¦è¿ç»­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">torch.relu(a)</span><br><span class="line"><span class="keyword">import</span> torch.nn.function <span class="keyword">as</span> F</span><br><span class="line">F.relu(a)</span><br></pre></td></tr></table></figure>
<h4 id="2-4LeakyReLU">2.4LeakyReLU</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nn.LeakyReLU(inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="3-LOSS">3.LOSS</h3>
<h4 id="MSE"><strong>MSE</strong></h4>
<ul>
<li>
<p>å‡æ–¹æ ¹è¯¯å·®</p>
</li>
<li>
<pre><code class="language-python">torch.norm(y-pred,2).pow(2)

F.mse_loss(x,y)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **Softmax**</span><br><span class="line"></span><br><span class="line">+ å¸¸ç”¨äºåˆ†ç±»ä»»åŠ¡</span><br><span class="line"></span><br><span class="line">+ è¾“å…¥æ˜¯å¯¹äºç±»åˆ«å¼ºåº¦å€¼ï¼Œè¾“å‡ºæ˜¯æ¦‚ç‡</span><br><span class="line"></span><br><span class="line">+ æŸ”æ€§æœ€å¤§ä¼ è¾“ç½‘ç»œèƒ½å¤Ÿä¿è¯æ¦‚ç‡ä¹‹å’Œä¸º1</span><br><span class="line"></span><br><span class="line">+ å±äºé‡‘å­—å¡”æ•ˆåº”å‡½æ•°</span><br><span class="line"></span><br><span class="line">+ æ¯ä¸ªèŠ‚ç‚¹å¯¹æ¯ä¸ªè¾“å…¥éƒ½æœ‰åå¯¼</span><br><span class="line"></span><br><span class="line">+ ```python</span><br><span class="line">  a=torch.rand(3,requires_grad=True)</span><br><span class="line">  from torch.nn import functional as F</span><br><span class="line">  p=F.softmax(a,dim=0)</span><br><span class="line">  torch.autograd.grad(p[1],[a],retain_graph=True)</span><br><span class="line">  torch.autograd.grad(p[2],[a],retain_graph=True)</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
<p>æ³¨æ„torchæ˜¯åŠ¨æ€å›¾ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ›´æ–°ï¼Œbackwardæ—¶å¾—æ ¼å¤–æ³¨æ„ï¼Œè‹¥æ˜¯æƒ³è¦ä¸æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨<code>retain_graph</code>å‚æ•°ã€‚æ±‚å¯¼åªèƒ½å¯¹scalarç±»å‹è¿›è¡Œæ±‚å¯¼ã€‚</p>
<h4 id="Cross-Entropy">Cross Entropy</h4>
<p>ç½®ä¿¡åº¦çš„åº¦é‡ï¼Œæ›´é«˜çš„ä¸ç¡®å®šæ€§</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>y</mi><mo>=</mo><mo>âˆ’</mo><munder><mo>âˆ‘</mo><mi>i</mi></munder><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Entropy=-\sum_iP(i)logP(i)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span></span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=torch.full([<span class="number">4</span>],<span class="number">1</span>/<span class="number">4.</span>)</span><br><span class="line">-(a*torch.log2(a)).<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>
<p>è¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒçš„ä¸ç¨³å®š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>q</mi><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ’</mo><mo>âˆ‘</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>q</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>q</mi><mo stretchy="false">)</mo><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mi mathvariant="normal">âˆ£</mi><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">H(p,q)=-\sum p(x)logq(x)
\\
H(p,q)=H(p)+D_{KL}(p|q)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.6em;vertical-align:-0.55em;"></span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-symbol large-op" style="position:relative;top:0em;">âˆ‘</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span></span></p>
<p>KLå³åˆ†å¸ƒç¦»æ•£åº¦</p>
<p>ä¼˜åŒ–ç›®æ ‡å³è®©ä¸¤ä¸ªåˆ†å¸ƒè¶Šæ¥è¶Šæ¥è¿‘ï¼Œä¹Ÿå°±æ˜¯KLæœ€å°</p>
<p>ä¸€ä¸ªå¥½çš„æ¨¡å‹åº”è¯¥è®©<strong>ä¸ç¡®å®šæ€§é™åˆ°æœ€ä½</strong></p>
<p>äºæ˜¯ï¼Œä¼˜åŒ–å°±æ˜¯åˆ¤æ–­</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mi mathvariant="normal">.</mi><mspace width="1em"><mi>C</mi><mi>E</mi></mspace></mrow><annotation encoding="application/x-tex">min.\quad CE
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">min</span><span class="mord">.</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">CE</span></span></span></span></span></p>
<p>ä¾‹å¦‚ä¸€ä¸ªäºŒåˆ†ç±»æ¡ˆä¾‹</p>
<ul>
<li>ç¬¬ä¸€æ­¥æ˜¯å°†æ‰€æœ‰é¢„æµ‹æ¦‚ç‡(å³P(cat)ã€P(dog))ä¸å®é™…æ¦‚ç‡Q(cat)ã€Q(dog)æ±‚äº¤å‰ç†µ</li>
<li>yè¡¨ç¤ºé¢„æµ‹æ¦‚ç‡ï¼Œpè¡¨ç¤ºå®é™…æ¦‚ç‡</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">x=torch.randn(<span class="number">1</span>,<span class="number">784</span>)</span><br><span class="line">w=torch.randn(<span class="number">10</span>,<span class="number">784</span>)</span><br><span class="line">logits=x@w.t()</span><br><span class="line">F.cross_entrop(logits,torch.tensor([<span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># äº¤å‰ç†µçš„å€¼æ˜¯å…ˆç»è¿‡softmaxå±‚ï¼Œç„¶åèµ°ä¸€ä¸ªlogå–å¯¹æ•°ï¼Œå†é€šè¿‡nlllossè¿›è¡Œè®¡ç®—</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CE=softmax+log+nll_loss</span></span><br><span class="line">pre=F.softmax(logits,dim=<span class="number">1</span>)</span><br><span class="line">pred_log=torch.log(pre)</span><br><span class="line">F.nll_loss(pred_log,torch.tensor([<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>
<h3 id="1-æ„ŸçŸ¥æœº">1.æ„ŸçŸ¥æœº</h3>
<p>æ„ŸçŸ¥æœº(perceptron)æ˜¯äºŒç±»åˆ†ç±»çš„<strong>çº¿æ€§åˆ†ç±»æ¨¡å‹</strong>ï¼Œå…¶è¾“å…¥ä¸ºå®ä¾‹çš„ç‰¹å¾å‘é‡ï¼Œè¾“å‡ºä¸ºå®ä¾‹çš„ç±»åˆ«ã€‚</p>
<h4 id="å•å±‚æ„ŸçŸ¥æœº">å•å±‚æ„ŸçŸ¥æœº</h4>
<p><strong>è¾“å…¥å±‚</strong>ï¼šç¬¬0å±‚ï¼Œå…¶å…ƒç´ è¡¨ç¤º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>x</mi><mi>n</mi><mn>0</mn></msubsup></mrow><annotation encoding="application/x-tex">x_n^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0611em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ0è¡¨ç¤ºç¬¬1å±‚ï¼Œnè¡¨ç¤ºæ‰€åœ¨èŠ‚ç‚¹æ¬¡åº</p>
<p><strong>éšå«å±‚</strong>ï¼šç¬¬1å±‚ï¼Œå…¶å…ƒç´ è¡¨ç¤ºä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mrow><mi>i</mi><mi>j</mi></mrow><mn>1</mn></msubsup></mrow><annotation encoding="application/x-tex">W_{ij}^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2089em;vertical-align:-0.3948em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4413em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3948em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ1è¡¨ç¤ºç¬¬1å±‚ï¼Œiè¡¨ç¤ºä¸Šä¸€å±‚èŠ‚ç‚¹ï¼Œjè¡¨ç¤ºå½“å‰å±‚è¿æ¥èŠ‚ç‚¹</p>
<p><strong>æ¿€æ´»å±‚</strong>ï¼šå…¶å…ƒç´ è¡¨ç¤ºä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>O</mi><mn>1</mn><mn>1</mn></msubsup></mrow><annotation encoding="application/x-tex">O_1^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0622em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4519em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä¸ºç»è¿‡æ¿€æ´»åçš„å…ƒç´ ã€‚</p>
<p><strong>æŸå¤±å±‚</strong>ï¼šEå±‚ï¼Œè¡¨ç¤ºloss</p>
<p>å‘ç°å…¶å¯¼æ•°ä»…è·Ÿç¥ç»å…ƒèŠ‚ç‚¹è¾“å‡ºå’Œè¾“å…¥å±‚æœ‰å…³ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€ä¸ªç®€å•çš„å•å±‚æ„ŸçŸ¥æœºæ±‚å¯¼demo</span></span><br><span class="line"><span class="comment"># è¾“å…¥æ•°æ®</span></span><br><span class="line">x=torch.randn(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"><span class="comment"># éšå±‚æƒé‡</span></span><br><span class="line">w=torch.randn(<span class="number">1</span>,<span class="number">10</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># æ¿€æ´»å‡½æ•°</span></span><br><span class="line">o=torch.sigmoid(x@w.t())</span><br><span class="line"><span class="comment"># æŸå¤±è¡¨è¾¾</span></span><br><span class="line">loss=F.mse_loss(torch.ones(<span class="number">1</span>,<span class="number">1</span>),o)</span><br><span class="line"><span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">loss.backward()</span><br><span class="line">w.grad</span><br></pre></td></tr></table></figure>
<h4 id="å¤šå±‚æ„ŸçŸ¥æœº">å¤šå±‚æ„ŸçŸ¥æœº</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€ä¸ªç®€å•çš„å¤šå±‚æ„ŸçŸ¥æœºæ±‚å¯¼demo</span></span><br><span class="line"><span class="comment"># è¾“å…¥æ•°æ®</span></span><br><span class="line">x=torch.randn(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"><span class="comment"># éšå±‚æƒé‡</span></span><br><span class="line">w=torch.randn(<span class="number">2</span>,<span class="number">10</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># æ¿€æ´»å‡½æ•°</span></span><br><span class="line">o=torch.sigmoid(x@w.t())</span><br><span class="line"><span class="comment"># æŸå¤±è¡¨è¾¾</span></span><br><span class="line">loss=F.mse_loss(torch.ones(<span class="number">1</span>,<span class="number">2</span>),o)</span><br><span class="line"><span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">loss.backward()</span><br><span class="line">w.grad</span><br></pre></td></tr></table></figure>
<h3 id="2-é“¾å¼æ³•åˆ™">2.é“¾å¼æ³•åˆ™</h3>
<hr>
<h3 id="3-MLPåå‘ä¼ æ’­æ¨å¯¼">3.MLPåå‘ä¼ æ’­æ¨å¯¼</h3>
<p>Multi-Layer Perceptron å¤šå±‚æ„ŸçŸ¥æœº</p>
<hr>
<h3 id="4-å‡½æ•°ä¼˜åŒ–å®ä¾‹">4.å‡½æ•°ä¼˜åŒ–å®ä¾‹</h3>
<p><strong>target</strong></p>
<p>å®ç°ç»˜åˆ¶è¯¥å‡½æ•°è¦†ç›–å›¾</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">himmelblau</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> (x[<span class="number">0</span>]**<span class="number">2</span>+x[<span class="number">1</span>]-<span class="number">11</span>)**<span class="number">2</span>+(x[<span class="number">0</span>]+x[<span class="number">1</span>]**<span class="number">2</span>-<span class="number">7</span>)**<span class="number">2</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x=np.arange(-<span class="number">6</span>,<span class="number">6</span>,<span class="number">0.1</span>)</span><br><span class="line">y=np.arange(-<span class="number">6</span>,<span class="number">6</span>,<span class="number">0.1</span>)</span><br><span class="line">X,Y=np.meshgrid(x,y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;X,Y maps: &quot;</span>,X.shape,<span class="string">&quot;before :&quot;</span>,x.shape)</span><br><span class="line"></span><br><span class="line">Z=himmelblau([X,Y])</span><br><span class="line">fig=plt.figure(<span class="string">&quot;HIMMELBLAU&quot;</span>)</span><br><span class="line">ax=fig.gca(projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">ax.plot_surface(X,Y,Z)</span><br><span class="line">ax.view_init(<span class="number">60</span>,-<span class="number">30</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–</p>
<p>æ³¨æ„ä¼˜åŒ–ç›®æ ‡ä¸å†æ˜¯LOSSï¼Œè€Œæ˜¯å‡½æ•°æœ¬èº«ï¼Œæ±‚å¯¼å¯¹è±¡æ˜¯xï¼Œå³<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>Î´</mi><msub><mi>P</mi><mrow><mi>r</mi><mi>e</mi></mrow></msub></mrow><mrow><mi>Î´</mi><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\delta P_{re}}{\delta x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2412em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03785em;">Î´</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03785em;">Î´</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x=torch.tensor([<span class="number">0.</span>,<span class="number">0.</span>],requires_grad=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªä¼˜åŒ–å™¨</span></span><br><span class="line">optimizer=torch.optim.Adam([x],lr=<span class="number">1e-3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20000</span>):</span><br><span class="line">    <span class="comment"># å¯»æ‰¾æœ¬å‡½æ•°çš„æœ€ä¼˜åŒºé—´</span></span><br><span class="line">    pred=himmelblau(x)</span><br><span class="line">    <span class="comment"># éœ€è¦å°†ç´¯è®¡æ¢¯åº¦æ¸…ç©º</span></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    <span class="comment"># å¯»æ‰¾æ¢¯åº¦æ–¹å‘</span></span><br><span class="line">    pred.backward()</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯x-lr*x&#x27;</span></span><br><span class="line">    optimizer.step()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2000</span> ==<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;step &#123;&#125;ï¼š x=&#123;&#125;,f(x)=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(i,x.tolist(),pred.item()))</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ç¥ç»ç½‘ç»œ">ç¥ç»ç½‘ç»œ</h2>
<h3 id="1-é€»è¾‘å›å½’">1.é€»è¾‘å›å½’</h3>
<h3 id="åˆ†ç±»é—®é¢˜"><strong>åˆ†ç±»é—®é¢˜</strong></h3>
<ul>
<li>é—®é¢˜ä¸€ï¼šå½“æƒé‡æ”¹å˜æ—¶ï¼Œæ¢¯åº¦å¾ˆå¯èƒ½ä¸å˜ï¼å› ä¸ºå‡†ç¡®ç‡ä¸å˜ï¼</li>
<li>é—®é¢˜äºŒï¼šæ¢¯åº¦ä¸è¿ç»­ï¼ã€ä»0.6ç›´æ¥å˜æˆ0.8ã€‘</li>
</ul>
<p><strong>é€»è¾‘å›å½’</strong></p>
<ul>
<li>æœ¬è´¨ä¸Šæ›´åƒåˆ†ç±»</li>
<li>ä½¿ç”¨äº†sigmoidå‡½æ•°ï¼Œä½¿ç”¨MSEè¯„ä¼°å›å½’ï¼ŒCross Entropyè¯„ä¼°åˆ†ç±»</li>
<li>åœ¨åˆ¤æ–­è¾“å‡ºå€¼ä¸é˜ˆå€¼çš„è·ç¦»ï¼Œç”¨ä»¥è¯„ä¼°äºŒåˆ†ç±»ï¼Œå¹¶é€šè¿‡MSEè¯„ä¼°è¾“å‡ºæ•ˆæœ</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets,transforms</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="keyword">from</span> torch.nn <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line">batch_size=<span class="number">200</span></span><br><span class="line">lr=<span class="number">0.01</span></span><br><span class="line">epochs=<span class="number">10</span></span><br><span class="line"></span><br><span class="line">train_loader=DataLoader(</span><br><span class="line">    datasets.MNIST(<span class="string">&#x27;../data&#x27;</span>,train=<span class="literal">True</span>,download=<span class="literal">True</span>,transform=</span><br><span class="line">                   transforms.Compose([</span><br><span class="line">                       transforms.ToTensor(),</span><br><span class="line">                       transforms.Normalize((<span class="number">0.1307</span>),(<span class="number">0.3081</span>,))</span><br><span class="line">                   ])),</span><br><span class="line">    batch_size=batch_size,shuffle=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">test_loader=DataLoader(</span><br><span class="line">    datasets.MNIST(<span class="string">&#x27;../data&#x27;</span>,train=<span class="literal">False</span>,transform=</span><br><span class="line">                   transforms.Compose([</span><br><span class="line">                       transforms.ToTensor(),</span><br><span class="line">                       transforms.Normalize((<span class="number">0.1307</span>),(<span class="number">0.3081</span>,))</span><br><span class="line">                   ])),</span><br><span class="line">    batch_size=batch_size,shuffle=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">w1=torch.randn(<span class="number">200</span>,<span class="number">784</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line">b1=torch.zeros(<span class="number">200</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">w2=torch.randn(<span class="number">200</span>,<span class="number">200</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line">b2=torch.zeros(<span class="number">200</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">w3=torch.randn(<span class="number">10</span>,<span class="number">200</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line">b3=torch.zeros(<span class="number">10</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">x</span>):</span><br><span class="line">    x=x@w1.t()+b1</span><br><span class="line">    x=F.relu(x)</span><br><span class="line">    x=x@w2.t()+b2</span><br><span class="line">    x=F.relu(x)</span><br><span class="line">    x=x@w3.t()+b3</span><br><span class="line">    x=F.relu(x)</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">optimizer=torch.optim.SGD([w1,b1,w2,b2,w3,b3],lr=<span class="number">1e-3</span>)</span><br><span class="line">criteon=torch.nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000</span>):</span><br><span class="line">    <span class="keyword">for</span> batch_idx,(data,target) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        data=data.view(-<span class="number">1</span>,<span class="number">28</span>*<span class="number">28</span>)</span><br><span class="line">        logits=forward(data)</span><br><span class="line">        loss=criteon(logits,target)</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line">        <span class="keyword">if</span> batch_idx % <span class="number">100</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)]\tLoss:&#123;:.6f&#125;&quot;</span>.</span><br><span class="line">                  <span class="built_in">format</span>(epoch,batch_idx*<span class="built_in">len</span>(data),<span class="built_in">len</span>(train_loader.dataset),</span><br><span class="line">                         <span class="number">100.</span>*batch_idx/<span class="built_in">len</span>(train_loader),loss.item()))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># test_loss=0</span></span><br><span class="line">        <span class="comment"># correct=0</span></span><br><span class="line">        <span class="comment"># for data,target in test_loader:</span></span><br><span class="line">        <span class="comment">#     data=data.view(-1,28*28)</span></span><br><span class="line">        <span class="comment">#     logits=forward(data)</span></span><br><span class="line">        <span class="comment">#     test_loss+=criteon(logits,target).item()</span></span><br><span class="line">        <span class="comment">#     pred=logits.data.max(1)[1]</span></span><br><span class="line">        <span class="comment">#     correct+=pred.eq(target.data).sum()</span></span><br><span class="line">        <span class="comment"># test_loss/=len(test_loader.dataset)</span></span><br><span class="line">        <span class="comment"># print(&quot;\nTest set: Average loss: &#123;:.4f&#125;, Accuracy:&#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)\n&quot;.format(</span></span><br><span class="line">        <span class="comment">#     test_loss,correct,len(test_loader.dataset),100.*correct/len(test_loader.dataset)</span></span><br><span class="line">        <span class="comment"># ))</span></span><br></pre></td></tr></table></figure>
<p>å‘ç°é™·å…¥äº†å±€éƒ¨æœ€å°å€¼ï¼Œæœ¬æ¬¡å¹¶æ²¡æœ‰åšåˆå§‹åŒ–ï¼Œå¦‚æœåšäº†åˆå§‹åŒ–å°±èƒ½å¤§å¤§é™ä½æŸå¤±ã€‚</p>
<h3 id="2-å…¨è¿æ¥å±‚">2.å…¨è¿æ¥å±‚</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x=torch.tensor([<span class="number">1</span>,<span class="number">784</span>])</span><br><span class="line">layer1=nn.Linear(<span class="number">784</span>:<span class="keyword">in</span>,<span class="number">200</span>:out)</span><br><span class="line">layer2=nn.Linear(<span class="number">200</span>,<span class="number">200</span>)</span><br><span class="line">layer3=nn.Linear(<span class="number">200</span>,<span class="number">10</span>)</span><br><span class="line">x=layer3(layer2(layer1(x)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ¿€æ´»å‡½æ•°</span></span><br><span class="line">x=layer1(x)</span><br><span class="line">x=F.relu(x,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•åˆ›å»ºä¸€ä¸ªå±‚ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MLP</span>(nn.Module):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">		<span class="built_in">super</span>(MLP,self).__init__()</span><br><span class="line">		self.model=nn.Sequential(</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># nn.Sequentialå°±æ˜¯ä¸€ä¸ªå®¹å™¨</span></span><br><span class="line">            <span class="comment"># å¯ä»¥æ·»åŠ ä»»ä½•ç»§æ‰¿è‡ªnn.Moduleçš„ç±»</span></span><br><span class="line">            <span class="comment"># å¹¶è®©è¾“å…¥ä¾æ¬¡ç»è¿‡å®¹å™¨å†…æ”¾ç½®çš„ç¥ç»å…ƒ</span></span><br><span class="line">            </span><br><span class="line">            nn.Linear(<span class="number">784</span>,<span class="number">200</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">200</span>,<span class="number">200</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">200</span>,<span class="number">10</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">            <span class="comment"># ç»§æ‰¿äº†nn.module.forwardçš„æ–¹æ³•</span></span><br><span class="line">            <span class="keyword">return</span> self.model(x)</span><br></pre></td></tr></table></figure>
<p>pyTorchæœ‰ä¸¤ç§é£æ ¼çš„APIï¼Œä¸€ç§æ˜¯classé£æ ¼çš„APIï¼Œå¦‚<code>nn.ReLU</code>ï¼Œä¸€ç§æ˜¯å‡½æ•°é£æ ¼çš„APIï¼Œå¦‚<code>F.relu()</code></p>
<p>ç±»é£æ ¼çš„APIéœ€è¦æ„é€ </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">net=MLP()</span><br><span class="line"></span><br><span class="line">optimizer=torch.optim.SGD(net.parameters(),lr=<span class="number">1e-3</span>)</span><br><span class="line">criteon=torch.nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> batch_idx,(data,target) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        data=data.view(-<span class="number">1</span>,<span class="number">28</span>*<span class="number">28</span>)</span><br><span class="line">        </span><br><span class="line">        logits=net(data)</span><br><span class="line">        loss=criteon(logits,target)</span><br><span class="line">        </span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        </span><br><span class="line">        optimizer.step()</span><br><span class="line">        <span class="keyword">if</span> batch_idx % <span class="number">100</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)]\tLoss:&#123;:.6f&#125;&quot;</span>.</span><br><span class="line">                  <span class="built_in">format</span>(epoch,batch_idx*<span class="built_in">len</span>(data),<span class="built_in">len</span>(train_loader.dataset),</span><br><span class="line">                         <span class="number">100.</span>*batch_idx/<span class="built_in">len</span>(train_loader),loss.item()))</span><br></pre></td></tr></table></figure>
<h3 id="3-GPUåŠ é€Ÿ">3.GPUåŠ é€Ÿ</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä½•ä½¿ç”¨GPUåŠ é€Ÿ</span></span><br><span class="line"><span class="comment"># cuda n ç¬¬næ˜¾å¡</span></span><br><span class="line"><span class="comment"># éœ€è¦ç”¨GPUæ—¶ï¼Œç›´æ¥ç”¨ .to æ–¹æ³•</span></span><br><span class="line"><span class="comment"># æ³¨æ„å¯¹æ¨¡å—è°ƒç”¨GPUæ–¹æ³•æ—¶ï¼Œè¿”å›çš„æ¨¡å—ä¸ä¼šæ”¹å˜</span></span><br><span class="line"><span class="comment"># è€Œå¯¹æ•°æ®è°ƒç”¨GPUæ–¹æ³•æ—¶ï¼Œè¿”å›çš„æ•°æ®è·ŸåŸå§‹æ•°æ®ä¸ä¸€æ ·ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªCPUæ•°æ®å’Œä¸€ä¸ªGPUæ•°æ®</span></span><br><span class="line"></span><br><span class="line">device=torch.device(<span class="string">&quot;cuda:0&quot;</span>)</span><br><span class="line">net=MLP().to(device)</span><br><span class="line">optimizer=optim.SGD(net.paameters(),lr=lr)</span><br><span class="line">criteon=nn.CrossEntropyLoss().to(device)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> <span class="built_in">range</span>(epochs):</span><br><span class="line">	<span class="keyword">for</span> batch_idx,(data,target) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">	data=data.view(-<span class="number">1</span>,<span class="number">28</span>*<span class="number">28</span>)</span><br><span class="line">	data,target=data.to(device),target.cuda()</span><br></pre></td></tr></table></figure>
<p>ç²¾åº¦éªŒè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">logits=torch.rand(<span class="number">4</span>,<span class="number">10</span>)</span><br><span class="line">pred=F.softmax(logits,dim=<span class="number">1</span>)</span><br><span class="line">pred_label=pred.argmax(dim=<span class="number">1</span>)</span><br><span class="line">label=torch.tensor([<span class="number">9</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># eqè¿”å›çš„æ˜¯ä¸€ä¸ªé€»è¾‘çŸ©é˜µï¼Œæ˜¯å°±æ˜¯1ï¼Œä¸æ˜¯å°±æ˜¯0</span></span><br><span class="line">correct=torch.eq(pred_label,label)</span><br><span class="line"><span class="comment"># è¯¥æ–¹æ³•èƒ½æ±‚å‡ºå¤šå°‘è¢«æˆåŠŸé¢„æµ‹</span></span><br><span class="line">correct.<span class="built_in">sum</span>().<span class="built_in">float</span>().item()/<span class="number">4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">test_loss=<span class="number">0</span></span><br><span class="line">correct=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> data,target <span class="keyword">in</span> test_loader:</span><br><span class="line">	data=data.view(-<span class="number">1</span>,<span class="number">28</span>*<span class="number">28</span>)</span><br><span class="line">	data,target=data.to(device),target.cuda()</span><br><span class="line">	</span><br><span class="line">	logits=net(data)</span><br><span class="line">	test_loss+=criteon(logits,target).item()</span><br><span class="line">	</span><br><span class="line">	pred=logits.argmax(dim=<span class="number">1</span>)</span><br><span class="line">	correct+=pred.eq(target).<span class="built_in">float</span>().<span class="built_in">sum</span>().item()</span><br><span class="line">    </span><br><span class="line">test_loss/=<span class="built_in">len</span>(test_loader.dataset)</span><br></pre></td></tr></table></figure>
<p>å¯è§†åŒ–äº¤äº’</p>
<p><code>TensorboardX</code></p>
<p><code>visdom</code></p>
<p>ç›¸è¾ƒäºTBXè¯»å–çš„numpyï¼ŒVDèƒ½ç›´æ¥è·ŸTensorè¿›è¡Œäº¤äº’(å½“ç„¶åªèƒ½æ˜¯img)ï¼Œä¸”ä¸ä¼šå¤§é‡å­˜æ”¾ç›‘å¬æ–‡ä»¶ã€‚</p>
<p>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¤–éƒ¨çš„æœåŠ¡å™¨ï¼Œéœ€è¦é…åˆå‘½ä»¤ã€‚</p>
<p><code>python -m visdom.server</code></p>
<p>äºæ˜¯å°±èƒ½åœ¨8097ç«¯å£æ‰¾åˆ°visdomã€‚</p>
<p>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</p>
<p><strong>å•çº¿è¿½è¸ª</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> visdom <span class="keyword">import</span> Visdom</span><br><span class="line">viz=Visdom()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç›´çº¿</span></span><br><span class="line"><span class="comment"># Y,X win æ˜¯æ ‡å¿—ç¬¦ï¼Œç±»ä¼¼ID </span></span><br><span class="line"><span class="comment"># æ¯ä¸ªçª—æ ¼å«åšenvï¼Œå³ä¸€ä¸ªæ–°çš„è¿›ç¨‹</span></span><br><span class="line"><span class="comment"># é»˜è®¤env=â€˜mainâ€™</span></span><br><span class="line">viz.line([<span class="number">0.</span>],[<span class="number">0.</span>],win=<span class="string">&#x27;train_loss&#x27;</span>,opts=<span class="built_in">dict</span>(title=<span class="string">&quot;train loss&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># èƒ½å¤Ÿé€æ¸æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="comment"># y:loss x:å…¨å±€è¿­ä»£</span></span><br><span class="line"><span class="comment"># update: &quot;append&quot; ä¸ä¼šè¦†ç›–</span></span><br><span class="line">viz.line([loss.item()],[global_step],win=<span class="string">&quot;train_loss&quot;</span>,update=<span class="string">&quot;append&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>å¤šçº¿è¿½è¸ª</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> visdom <span class="keyword">import</span> Visdom</span><br><span class="line">viz=Visdom()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç›´çº¿</span></span><br><span class="line">viz.line([<span class="number">0.0</span>,<span class="number">0.0</span>],[<span class="number">0.</span>],win=<span class="string">&#x27;test&#x27;</span>,opts=<span class="built_in">dict</span>(title=<span class="string">&quot;train loss&amp;acc.&quot;</span>,legend=[<span class="string">&#x27;loss&#x27;</span>,<span class="string">&#x27;acc.&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># èƒ½å¤Ÿé€æ¸æ·»åŠ æ•°æ®</span></span><br><span class="line">viz.line([[test_loss,correct/<span class="built_in">len</span>(test_loader.dataset)]],[global_step],win=<span class="string">&quot;test&quot;</span>,update=<span class="string">&quot;append&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>å¯è§†åŒ–</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> visdom <span class="keyword">import</span> Visdom</span><br><span class="line">viz=Visdom()</span><br><span class="line">viz.images(data.view(-<span class="number">1</span>,<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>),win=<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">viz.text(<span class="built_in">str</span>(pred.detach().cpu().numpy()),win=<span class="string">&#x27;pred&#x27;</span>,opts=<span class="built_in">dict</span>(title=<span class="string">&#x27;pred&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h3 id="4-è¿‡æ‹Ÿåˆ-v2">4.è¿‡æ‹Ÿåˆ</h3>
<h3 id="5-äº¤å‰éªŒè¯">5.äº¤å‰éªŒè¯</h3>
<p>å¦‚ä½•åˆ’åˆ†<strong>train-val-test</strong></p>
<p>å¯¹<strong>train</strong>äººä¸ºåˆ‡å‰²ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">train_db,val_db=torch.utils.data.random_split(train_db,[<span class="number">50000</span>,<span class="number">10000</span>])</span><br><span class="line"></span><br><span class="line">train_loader=torch.utils.data.DataLoader(</span><br><span class="line"><span class="comment"># è·å–æ•°æ®ä½ç½®</span></span><br><span class="line">	train_db,</span><br><span class="line"><span class="comment"># æ¯ä¸€æ‰¹æ¬¡çš„æ•°æ®é‡</span></span><br><span class="line">	batch_size=batch_size,</span><br><span class="line"><span class="comment"># æ˜¯å¦æ‰“ä¹±</span></span><br><span class="line">	shuffle=<span class="literal">True</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>å…³äºæ‰¹è®­ç»ƒ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data <span class="comment">#å°†æ•°æ®åˆ†æ‰¹æ¬¡éœ€è¦ç”¨åˆ°å®ƒ</span></span><br><span class="line"> </span><br><span class="line">torch.manual_seed(<span class="number">1</span>)    <span class="comment"># ç§å­ï¼Œå¯å¤ç”¨</span></span><br><span class="line">BATCH_SIZE = <span class="number">8</span> <span class="comment">#è®¾ç½®æ‰¹æ¬¡å¤§å°</span></span><br><span class="line"> </span><br><span class="line">x = torch.linspace(<span class="number">1</span>, <span class="number">15</span>, <span class="number">15</span>)       <span class="comment"># 1åˆ°15å…±15ä¸ªç‚¹</span></span><br><span class="line">y = torch.linspace(<span class="number">15</span>, <span class="number">1</span>, <span class="number">15</span>)       <span class="comment"># 15åˆ°1å…±15ä¸ªç‚¹</span></span><br><span class="line"> </span><br><span class="line">torch_dataset = Data.TensorDataset(x, y) <span class="comment">#å°†x,yè¯»å–ï¼Œè½¬æ¢æˆTensoræ ¼å¼</span></span><br><span class="line">loader = Data.DataLoader(</span><br><span class="line">    dataset=torch_dataset,      <span class="comment"># torch TensorDataset format</span></span><br><span class="line">    batch_size=BATCH_SIZE,      <span class="comment"># æœ€æ–°æ‰¹æ•°æ®</span></span><br><span class="line">    shuffle=<span class="literal">True</span>,               <span class="comment"># æ˜¯å¦éšæœºæ‰“ä¹±æ•°æ®</span></span><br><span class="line">    num_workers=<span class="number">2</span>,              <span class="comment"># ç”¨äºåŠ è½½æ•°æ®çš„å­è¿›ç¨‹</span></span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_batch</span>():</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):   <span class="comment"># å¯¹æ•´ä¸ªæ•°æ®é›†è¿›è¡Œ3æ¬¡åŸ¹è®­</span></span><br><span class="line">        <span class="keyword">for</span> step, (batch_x, batch_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(loader):  <span class="comment"># æ¯ä¸ªè®­ç»ƒæ­¥éª¤</span></span><br><span class="line">            <span class="comment"># æ­¤å¤„çœç•¥ä¸€äº›è®­ç»ƒæ•°æ®æ­¥éª¤...</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Epoch: &#x27;</span>, epoch, <span class="string">&#x27;| Step: &#x27;</span>, step, <span class="string">&#x27;| batch x: &#x27;</span>,</span><br><span class="line">                  batch_x.numpy(), <span class="string">&#x27;| batch y: &#x27;</span>, batch_y.numpy())</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    show_batch()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(1)æ¯æ¬¡è®­ç»ƒ5ä¸ªæ•°æ®ï¼Œæ‰“ä¹±æ•°æ®ï¼›æ¯è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„è®­ç»ƒéœ€è¦è¿›è¡Œ3ä¸ªè®­ç»ƒæ­¥éª¤ï¼š</span></span><br><span class="line"><span class="string">Epoch:  0 | Step:  0 | batch x:  [10. 12.  9.  5.  1.] | batch y:  [ 6.  4.  7. 11. 15.]</span></span><br><span class="line"><span class="string">Epoch:  0 | Step:  1 | batch x:  [ 7. 15.  8. 13.  3.] | batch y:  [ 9.  1.  8.  3. 13.]</span></span><br><span class="line"><span class="string">Epoch:  0 | Step:  2 | batch x:  [ 2.  6. 14.  4. 11.] | batch y:  [14. 10.  2. 12.  5.]</span></span><br><span class="line"><span class="string">Epoch:  1 | Step:  0 | batch x:  [ 3. 10.  8. 13.  2.] | batch y:  [13.  6.  8.  3. 14.]</span></span><br><span class="line"><span class="string">Epoch:  1 | Step:  1 | batch x:  [ 5.  4. 12. 14.  1.] | batch y:  [11. 12.  4.  2. 15.]</span></span><br><span class="line"><span class="string">Epoch:  1 | Step:  2 | batch x:  [15.  9. 11.  6.  7.] | batch y:  [ 1.  7.  5. 10.  9.]</span></span><br><span class="line"><span class="string">Epoch:  2 | Step:  0 | batch x:  [ 8.  7.  3. 10. 12.] | batch y:  [ 8.  9. 13.  6.  4.]</span></span><br><span class="line"><span class="string">Epoch:  2 | Step:  1 | batch x:  [ 6. 13.  9.  4. 15.] | batch y:  [10.  3.  7. 12.  1.]</span></span><br><span class="line"><span class="string">Epoch:  2 | Step:  2 | batch x:  [14.  2.  5.  1. 11.] | batch y:  [ 2. 14. 11. 15.  5.]</span></span><br><span class="line"><span class="string">(2)æ¯æ¬¡è®­ç»ƒ8ä¸ªæ•°æ®ï¼Œæ‰“ä¹±æ•°æ®ï¼›æ¯è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„è®­ç»ƒéœ€è¦è¿›è¡Œ2ä¸ªè®­ç»ƒæ­¥éª¤,ä¸€æ¬¡8ä¸ªæ•°æ®ï¼Œä¸€æ¬¡7ä¸ªæ•°æ®ï¼š</span></span><br><span class="line"><span class="string">Epoch:  0 | Step:  0 | batch x:  [10. 12.  9.  5.  1.  7. 15.  8.] | batch y:  [ 6.  4.  7. 11. 15.  9.  1.  8.]</span></span><br><span class="line"><span class="string">Epoch:  0 | Step:  1 | batch x:  [13.  3.  2.  6. 14.  4. 11.] | batch y:  [ 3. 13. 14. 10.  2. 12.  5.]</span></span><br><span class="line"><span class="string">Epoch:  1 | Step:  0 | batch x:  [ 3. 10.  8. 13.  2.  5.  4. 12.] | batch y:  [13.  6.  8.  3. 14. 11. 12.  4.]</span></span><br><span class="line"><span class="string">Epoch:  1 | Step:  1 | batch x:  [14.  1. 15.  9. 11.  6.  7.] | batch y:  [ 2. 15.  1.  7.  5. 10.  9.]</span></span><br><span class="line"><span class="string">Epoch:  2 | Step:  0 | batch x:  [ 8.  7.  3. 10. 12.  6. 13.  9.] | batch y:  [ 8.  9. 13.  6.  4. 10.  3.  7.]</span></span><br><span class="line"><span class="string">Epoch:  2 | Step:  1 | batch x:  [ 4. 15. 14.  2.  5.  1. 11.] | batch y:  [12.  1.  2. 14. 11. 15.  5.]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-æ­£åˆ™åŒ–">6.æ­£åˆ™åŒ–</h3>
<p>å½“èŒƒæ•°æ¥è¿‘äº0æ—¶ï¼Œæ¨¡å‹çš„å¤æ‚åº¦ä¼šé™ä½ã€‚å¯ä»¥æœ‰æ•ˆå¤„ç†è¿‡æ‹Ÿåˆã€‚</p>
<p>æ˜¯ä¸€ä¸ª<code>weight_decay</code></p>
<p>åœ¨å­¦ä¹ æ—¶ï¼Œå¦‚æœæ•°æ®æä¾›çš„ç‰¹å¾æœ‰äº›å½±å“æ¨¡å‹çš„å¤æ‚åº¦æˆ–è¿™ä¸ªç‰¹å¾æ•°æ®å¼‚å¸¸ç‰¹åˆ«å¤šï¼Œé‚£ä¹ˆåº”è¯¥å°½é‡å‡å°‘(ç”šè‡³åˆ é™¤æŸä¸ªç‰¹å¾çš„å½±å“)ï¼Œè¿™å°±æ˜¯æ­£åˆ™åŒ–</p>
<p>L2æ­£åˆ™åŒ–:</p>
<ul>
<li>
<p>ä½œç”¨:å¯ä»¥ä½¿å¾—å…¶ä¸­çš„ä¸€äº›æƒé‡wéƒ½å¾ˆå°ï¼Œå‰Šå¼±æŸä¸ªç‰¹å¾çš„å½±å“</p>
</li>
<li>
<p>ä¼˜ç‚¹:è¶Šå°çš„å‚æ•°è¯´æ˜æ¨¡å‹è¶Šç®€å•ï¼Œè¶Šç®€å•çš„æ¨¡å‹è¶Šä¸å®¹æ˜“å‘ç”Ÿè¿‡æ‹Ÿåˆ</p>
</li>
<li>
<p>Ridgeå›å½’</p>
</li>
<li>
<p>ä½œç”¨:å¯ä»¥å°†ä¸€äº›wç›´æ¥è®¾ç½®ä¸º0ï¼Œç›´æ¥åˆ é™¤è¯¥ç‰¹å¾çš„å½±å“</p>
</li>
<li>
<p>LASSOå›å½’</p>
<p>â€‹</p>
</li>
</ul>
<p>å¦‚ä½•æ·»åŠ ä¸€ä¸ªL2æ­£åˆ™åŒ–å‘¢ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">device=torch.device(<span class="string">&quot;cuda:0&quot;</span>)</span><br><span class="line">net=MLP().to(device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ‘ä»¬åªéœ€è¦è®¾ç½®wå‚æ•°å³å¯ï¼Œèƒ½å¤Ÿé™ä½ç½‘ç»œå¤æ‚åº¦</span></span><br><span class="line">optimizer=optim.SGD(net.parameters(),lr=learning_rate,weight_decay=<span class="number">0.01</span>) <span class="comment"># æƒå€¼é€’å‡ </span></span><br><span class="line"></span><br><span class="line">criteon=nn.CrossEntropyLoss().to(device)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºL1æ­£åˆ™åŒ–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">regularization_loss=<span class="number">0</span></span><br><span class="line"><span class="comment"># å¯¹æ¯ä¸€ä¸ªå‚æ•°éƒ½åŠ ä¸Šå»</span></span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> model.parameters():</span><br><span class="line">	regularization_loss+=torch.<span class="built_in">sum</span>(torch.<span class="built_in">abs</span>(param))</span><br><span class="line">classify_loss=criteon(logits,target)</span><br><span class="line"><span class="comment"># æœ¬è´¨ä¸Šæ˜¯å¯¹ç½‘ç»œå‚æ•°åšçº¦æŸ</span></span><br><span class="line">loss=classify_loss+<span class="number">0.01</span>*regularization_loss</span><br></pre></td></tr></table></figure>
<h3 id="7-åŠ¨é‡">7.åŠ¨é‡</h3>
<p><strong>momentum</strong></p>
<p>å¦‚ä½•å®ç°åŠ¨é‡æ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">optimizer=torch.optim.SGD(model.parameter(),args.lr,momentum=args.momentum,weight_decay=args.weight_decay)</span><br><span class="line"></span><br><span class="line">scheduler=ReduceLROnPlateau(optimizer,<span class="string">&#x27;min&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>éƒ¨åˆ†ä¼˜åŒ–å™¨å¦‚<code>Adam</code>å†…ç½®åŠ¨é‡å±æ€§äº†ï¼Œä¸èƒ½é¢å¤–è®¾ç½®</p>
<p><strong>learning-rate decay</strong></p>
<p>å­¦ä¹ ç‡å¦‚ä½•é€‰æ‹©æ˜¯ä¸€ä¸ªæ¯”è¾ƒå›°éš¾çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸è€ƒè™‘è®©ä»–è‡ªåŠ¨è¡°å‡å‘¢ï¼Ÿ</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‘ç”Ÿæ–œç‡çˆ†ç‚¸çš„æƒ…å†µæ˜¯å› ä¸ºæ”¹å˜äº†å­¦ä¹ ç‡ï¼Œå¯èƒ½ä¹‹å‰çš„è¿‡ç¨‹éƒ½æ˜¯åœ¨åŒå³°ä¹‹é—´æ‰“è½¬ï¼Œè€Œæ”¹å˜äº†å­¦ä¹ ç‡é©¬ä¸Šå°±èƒ½æ‰¾åˆ°æ–°çš„è°·åº•ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Scheme 1.</span></span><br><span class="line"></span><br><span class="line">optimizer=torch.optim.SGD(model.parameter(),args.lr,momentum=args.momentum,weight_decay=args.weight_decay)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›‘å¬lossï¼Œå½“patientçš„å€¼(å¦‚è¿ç»­åæ¬¡è°ƒç”¨)è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œé™ä½å­¦ä¹ ç‡</span></span><br><span class="line">scheduler=ReduceLROnPlateau(optimizer,<span class="string">&#x27;min&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> xrange(args.start_epoch,args.epochs):</span><br><span class="line">	train(train_loader,model,criterion,optimizer,epoch)</span><br><span class="line">	result_avg,loss_val=validate(val_loader,model,criterion,epoch)</span><br><span class="line">	<span class="comment"># æ¯æ¬¡ç›‘å¬loss_valæ˜¯å¦è¾¾åˆ°å¹³è¡¡</span></span><br><span class="line">    scheduler.step(loss_val)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Scheme 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯30æ¬¡è¿›è¡Œè¡°å‡</span></span><br><span class="line">scheduler=StepLR(optimizer,step_size=<span class="number">30</span>,gamma=<span class="number">0.1</span>)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">	shceduler.step()</span><br><span class="line">	train(...)</span><br><span class="line">	validate(...)</span><br></pre></td></tr></table></figure>
<p><strong>Early Stopping</strong></p>
<p>æœ‰æ¦‚ç‡æ–­æ‰æŸäº›å±‚</p>
<p>å¦‚ä½•æ·»åŠ dropoutï¼Ÿ</p>
<p>æˆ‘ä»¬åœ¨ä»»æ„ä¸€å±‚æ·»åŠ å³å¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">net_dropped=torch.nn.Sequential(</span><br><span class="line">	torch.nn.Linear(<span class="number">784</span>,<span class="number">200</span>),</span><br><span class="line">	torch.nn.Dropout(<span class="number">0.5</span>), <span class="comment"># drop 50% of the neutron</span></span><br><span class="line">	torch.nn.ReLU()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ–­æ‰çš„å±‚æ·»åŠ å›å»</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(epochs):</span><br><span class="line">	net_dropped.train()</span><br><span class="line">	<span class="keyword">for</span> batch_idx,(data,target) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">	...</span><br><span class="line">	<span class="comment"># æ·»åŠ æ–­å±‚</span></span><br><span class="line">	net_dropped.<span class="built_in">eval</span>()</span><br><span class="line">	test_loss=<span class="number">0</span></span><br><span class="line">	correct=<span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> data,target <span class="keyword">in</span> test_loader:</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>
<p><strong>stochastic</strong></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆ’</mo><mo>âˆ’</mo><mo>âˆ’</mo><mo>&gt;</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>Â Â </mtext><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x---&gt;f(x) ~~ N(0,x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">âˆ’</span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace nobreak">Â </span><span class="mspace nobreak">Â </span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></p>
<p>ä¹Ÿå°±æ˜¯è¯´å¹¶ä¸æ˜¯å®Œå…¨ç¬¦åˆæ˜ å°„å…³ç³»ï¼Œè€Œæ˜¯ç¬¦åˆæŸä¸€åˆ†å¸ƒ</p>
<p>ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå¹¶ä¸å¯¹å…¨éƒ¨æ•°æ®åšæ¢¯åº¦ï¼Œè€Œæ˜¯å¯¹å°‘é‡banchæ•°æ®åšæ¢¯åº¦</p>
<hr>
<h2 id="å·ç§¯ç¥ç»ç½‘ç»œ">å·ç§¯ç¥ç»ç½‘ç»œ</h2>
<ul>
<li></li>
</ul>
<p><strong>å¤šå·ç§¯æ ¸</strong></p>
<p>æ³¨æ„Kernelçš„å¤šé€šé“è¿ç®—æœ€åè¿˜éœ€è¦æ±‚å’Œ</p>
<p>æ¯ä¸€æ¬¡å·ç§¯è§‚å¯Ÿçš„ç‰¹å¾éƒ½ä¸åŒï¼Œä½†æ ¹æ®ç»éªŒå…¬å¼å¯ä»¥å‘ç°ï¼ŒåŸºæœ¬ä¸Šæ˜¯ç”±å±€éƒ¨åˆ°å…¨å±€çš„å˜åŒ–ã€‚</p>
<p><strong>ä½¿ç”¨Pytorchå®ç°Convolution</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‚æ•°åˆ†åˆ«ä¸º: channelæ•°é‡ Kernelæ•°é‡ Kernelå¤§å° æ­¥é•¿ paddingå¤§å°</span></span><br><span class="line">layer=nn.Conv2d(<span class="number">1</span>,<span class="number">3</span>,kernel_size=<span class="number">3</span>,stride=<span class="number">1</span>,padding=<span class="number">0</span>)</span><br><span class="line">x=torch.rand(<span class="number">1</span>,<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹åˆ°è¾“å‡ºçš„æ•°æ®å¤§å°å‘ç”Ÿäº†æ”¹å˜</span></span><br><span class="line"><span class="comment"># 3æ˜¯ä¸‰ä¸ªå·ç§¯æ ¸æ‰€é€ æˆçš„</span></span><br><span class="line">out=layer.forward(x)</span><br><span class="line"><span class="comment"># torch.Size([1,3,26,26])</span></span><br><span class="line"></span><br><span class="line">layer=nn.Conv2d(<span class="number">1</span>,<span class="number">3</span>,kernel_size=<span class="number">3</span>,stride=<span class="number">1</span>,padding=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># æ­¤æ—¶æ•°æ®ç»´åº¦åŒ¹é…ï¼Œä¸å†å‘ç”Ÿæ”¹å˜</span></span><br><span class="line">out=layer.forward(x)</span><br><span class="line"><span class="comment"># torch.Size([1,3,28,28])</span></span><br><span class="line"></span><br><span class="line">layer=nn.Conv2d(<span class="number">1</span>,<span class="number">3</span>,kernel_size=<span class="number">3</span>,stride=<span class="number">2</span>,padding=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># æ­¥é•¿æ”¹å˜åè¾“å‡ºå¤§å°ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜</span></span><br><span class="line">out=layer.forward(x)</span><br><span class="line"><span class="comment"># torch.Size([1,3,14,14])</span></span><br><span class="line"></span><br><span class="line">out=layer(x)</span><br><span class="line"><span class="comment"># å¯ä»¥ç›´æ¥è°ƒç”¨</span></span><br><span class="line"><span class="comment"># torch.Size([1,3,14,14])</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æƒé‡å’Œåç½®å€¼</span></span><br><span class="line">layer.weight</span><br><span class="line">layer.bias</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>æ± åŒ–å±‚</strong></p>
<p><strong>é™é‡‡æ ·Downsample</strong></p>
<p><strong>æœ€å¤§æ± åŒ–Max pooling</strong></p>
<p>é€šè¿‡ä¸€ä¸ªç§»åŠ¨çª—å£å¯¹å›¾åƒè¿›è¡Œå¤„ç†ï¼Œä»è€Œè¾¾åˆ°é™é‡‡æ ·çš„æ•ˆæœ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x=out</span><br><span class="line"><span class="comment"># torch.Size([1,16,14,14])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡‡æ ·æ ¸å¤§å°æ˜¯2</span></span><br><span class="line">layer=nn.MaxPool2d(<span class="number">2</span>,stride=<span class="number">2</span>)</span><br><span class="line">out=layer(x)</span><br><span class="line"><span class="comment"># torch.Size([1,16,7,7])</span></span><br><span class="line"></span><br><span class="line">out=F.avg_pool3d(x,<span class="number">2</span>,stride=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># torch.Size([1,16,7,7])</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé‡‡æ ·</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=out</span><br><span class="line">out=F.interpolate(x,scale_factor=<span class="number">2</span>,mode=<span class="string">&#x27;nearest&#x27;</span>)</span><br><span class="line"><span class="comment"># linear bilinear bicubic</span></span><br></pre></td></tr></table></figure>
<p><strong>Batch Normal</strong></p>
<p>ä¸ºä»€ä¹ˆè¦batch normal</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">normalize=transforms.Normalize(mean=[<span class="number">0.485</span>,<span class="number">0.456</span>,<span class="number">0.406</span>],</span><br><span class="line">								std=[<span class="number">0.229</span>,<span class="number">0.224</span>,<span class="number">0.225</span>])</span><br></pre></td></tr></table></figure>
<p>å¯¹äºä¸€ä¸ªç»´åº¦ä¸º[6,3,28,28]çš„å‡å€¼ï¼Œä¸€èˆ¬æ˜¯[3]å¤§å°ï¼Œç»Ÿè®¡çš„æ˜¯å…­å¼ å›¾ç‰‡æ¯ä¸ªé€šé“çš„å‡å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x=torch.rand(<span class="number">100</span>,<span class="number">16</span>,<span class="number">784</span>)</span><br><span class="line">layer=nn.BatchNorm1d(<span class="number">16</span>)</span><br><span class="line">out=layer(x)</span><br><span class="line"><span class="comment"># è·å–</span></span><br><span class="line">layer.running_mean</span><br><span class="line">layer.running_var</span><br></pre></td></tr></table></figure>
<p>è€Œå¯¹äº2dæ•°æ®ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x.shape</span><br><span class="line"><span class="comment"># [1,16,7,7]</span></span><br><span class="line">layer=nn.BatchNorm2d(<span class="number">16</span>)</span><br><span class="line">out=layer(x)</span><br><span class="line">layer.weight</span><br><span class="line"><span class="comment"># [16]</span></span><br><span class="line">layer.bias</span><br><span class="line"><span class="comment"># [16]</span></span><br></pre></td></tr></table></figure>
<p>BatchNormçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ›´å¿«çš„æ”¶æ•›é€Ÿåº¦</li>
<li>æ›´å¥½çš„Robust</li>
<li>æ›´å¥½çš„æ‰§è¡Œ</li>
</ul>
<p><strong>ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œ</strong></p>
<hr>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç¬¬äº”ç«   å…¨è¿æ¥ç¥ç»ç½‘ç»œ]]></title>
      <url>/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      <content type="html"><![CDATA[<h1>ç¬¬äº”ç«     å…¨è¿æ¥ç¥ç»ç½‘ç»œ</h1>
<hr>
<h2 id="1-1-å…¨è¿æ¥ç¥ç»ç½‘ç»œ">1.1      å…¨è¿æ¥ç¥ç»ç½‘ç»œ</h2>
<p>äººå·¥ç¥ç»ç½‘ç»œ(Artificial Neural Network)å¯ä»¥å¯¹ä¸€ç»„è¾“å…¥ä¿¡å·å’Œä¸€ç»„è¾“å‡ºä¿¡å·ä¹‹é—´çš„å…³ç³»è¿›è¡Œå»ºæ¨¡ï¼Œæ˜¯æœºå™¨å­¦ä¹ å’Œè®¤çŸ¥ç§‘å­¦ä¸­çš„ä¸€ç§æ¨¡ä»¿ç”Ÿç‰©ç¥ç»ç½‘ç»œçš„ç»“æ„å’ŒåŠŸèƒ½çš„æ•°å­¦æ¨¡å‹ã€‚å…¶çµæ„ŸæºäºåŠ¨ç‰©çš„ç¥ç»ä¸­æ¢ï¼Œç”±å¤§é‡çš„äººå·¥ç¥ç»å…ƒè¿æ¥è€Œæˆï¼Œèƒ½å¤Ÿæ ¹æ®å¤–ç•Œç¯å¢ƒæ”¹å˜å†…éƒ¨ç»“æ„ï¼Œæ˜¯ä¸€ç§è‡ªé€‚åº”çš„ç³»ç»Ÿã€‚</p>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200247211.png" alt="image-20220728200247211" style="zoom:50%;">
<p>å…¨è¿æ¥ç¥ç»ç½‘ç»œ(Multi-Layer Perception)ä¹Ÿç§°å¤šå±‚æ„ŸçŸ¥æœºï¼Œæ˜¯ä¸€ç§è¿æ¥æ–¹å¼è¾ƒä¸ºç®€å•çš„äººå…±ç¥ç»ç½‘ç»œç»“æ„ï¼Œå±äºå‰é¦ˆç¥ç»ç½‘ç»œçš„ä¸€ç§ã€‚ä¸»è¦ç”±è¾“å…¥å±‚ã€éšè—å±‚ã€è¾“å‡ºå±‚æ„æˆï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªéšè—å±‚ä¸­å¯ä»¥æœ‰å¤šä¸ªç¥ç»å…ƒã€‚</p>
<p>ç¥ç»ç½‘ç»œçš„å­¦ä¹ èƒ½åŠ›ä¸»è¦æ¥æºäºç½‘ç»œç»“æ„ï¼Œæ ¹æ®å±‚çº§æ•°é‡çš„ä¸åŒï¼Œæ¯å±‚ç¥ç»å…ƒæ•°é‡çš„å¤šå°‘ï¼Œä»¥åŠä¿¡æ¯åœ¨å±‚ä¹‹é—´çš„ä¼ æ’­æ–¹å¼ï¼Œå¯ä»¥ç»„åˆå±‚å¤šç§ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚ä¸€èˆ¬åœ¨éšå±‚å’Œè¾“å‡ºå±‚å¯¹ä¿¡å·è¿›è¡ŒåŠ å·¥å¤„ç†ï¼Œæ ¹æ®éšå±‚çš„æ•°é‡ï¼ŒMLPå¯åˆ†ä¸ºå•å±‚æˆ–æ˜¯å¤š(éš)å±‚ã€‚</p>
<p>é’ˆå¯¹å•å±‚MLPå’Œå¤šå±‚MLPï¼Œæ¯ä¸ªéšå±‚çš„ç¥ç»å…ƒæ•°é‡æ˜¯å¯ä»¥å˜åŒ–çš„ã€‚é€šå¸¸æ²¡æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ ‡å‡†ç”¨äºç¡®å®šæ¯å±‚ç¥ç»å…ƒçš„æ•°é‡å’Œéšå±‚çš„ä¸ªæ•°ã€‚æ ¹æ®ç»éªŒï¼Œæ›´å¤šçš„ç¥ç»å…ƒä¼šæœ‰æ›´å¼ºçš„è¡¨ç¤ºèƒ½åŠ›ï¼ŒåŒæ—¶ä¹Ÿæ›´å®¹æ˜“é€ æˆç½‘ç»œçš„è¿‡æ‹Ÿåˆã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°è¯•ç”¨PyTorchæ­å»ºMLPå›å½’ä¸åˆ†ç±»æ¨¡å‹ã€‚</p>
<p>å…ˆå¯¼å…¥éœ€è¦çš„æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler,MinMaxScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score,confusion_matrix,classification_report</span><br><span class="line"><span class="keyword">from</span> sklearn.manifold <span class="keyword">import</span> TSNE</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> SGD,Adam</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">import</span> hiddenlayer <span class="keyword">as</span> hl</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="1-2-MLPåˆ†ç±»æ¨¡å‹">1.2    MLPåˆ†ç±»æ¨¡å‹</h2>
<h3 id="æ•°æ®å‡†å¤‡ä¸æ¢æŸ¥">æ•°æ®å‡†å¤‡ä¸æ¢æŸ¥</h3>
<p>æ•°æ®é‡‡ç”¨UCIæœºå™¨å­¦ä¹ åº“çš„åƒåœ¾é‚®ä»¶æ•°æ®ï¼Œä¸‹è½½ç½‘å€ä¸ºï¼š<a href="https://archive.ics.uci.edu/ml/datasets.Spambase">https://archive.ics.uci.edu/ml/datasets.Spambase</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–æ•°æ®é›†</span></span><br><span class="line">spam=pd.read_csv(<span class="string">r&quot;C:\Users\lenovo\Desktop\spambase.csv&quot;</span>)</span><br><span class="line"><span class="comment"># å‰äº”åä¸ƒåˆ—æ˜¯å±æ€§</span></span><br><span class="line"><span class="comment"># æœ€åä¸€åˆ—æ˜¯åˆ†ç±»</span></span><br><span class="line">x=spam.iloc[:,<span class="number">0</span>:<span class="number">57</span>].values</span><br><span class="line">y=spam.tar.values</span><br><span class="line"><span class="comment"># ç„¶åéœ€è¦å°†æ•°æ®åˆ†å‰²ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">X_train,X_test,Y_train,Y_test=train_test_split(x,y,test_size=<span class="number">0.25</span>,random_state=<span class="number">123</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®é¢„å¤„ç†">æ•°æ®é¢„å¤„ç†</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ºäº†æ¶ˆé™¤é‡çº²å’Œå‡å°‘ç¦»ç¾¤ç‚¹å½±å“ï¼Œéœ€è¦å¯¹å±æ€§åšæ ‡å‡†åŒ–</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨ä¸­å¿ƒåŒ–æˆ–æ˜¯å½’ä¸€åŒ–</span></span><br><span class="line"><span class="comment"># å¯¹æ•°æ®çš„å‰57åˆ—ç‰¹å¾è¿›è¡Œæ•°æ®æ ‡å‡†åŒ–å¤„ç†</span></span><br><span class="line">scales=MinMaxScaler(feature_range=(<span class="number">0</span>,<span class="number">1</span>))</span><br><span class="line">X_train_s=scales.fit_transform(X_train)</span><br><span class="line">X_test_s=scales.transform(X_test)</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®å¯è§†åŒ–">æ•°æ®å¯è§†åŒ–</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡ç®±çº¿å›¾å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line">colname=spam.columns.values[:-<span class="number">1</span>]</span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>,<span class="number">14</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(colname)):</span><br><span class="line">    plt.subplot(<span class="number">7</span>,<span class="number">9</span>,i+<span class="number">1</span>)</span><br><span class="line">    sns.boxplot(x=Y_train,y=X_train_s[:,i])</span><br><span class="line">    plt.title(colname[i])</span><br><span class="line">plt.subplots_adjust(hspace=<span class="number">0.4</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200255063.png" alt="image-20220728200255063" style="zoom:50%;">
<h3 id="åˆ›å»ºä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœº">åˆ›å»ºä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœº</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MLP</span>(nn.Module):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>(MLP, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.hidden1=nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">57</span>,<span class="number">30</span>,bias=<span class="literal">True</span>),</span><br><span class="line">            nn.ReLU()</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        self.hidden2 = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">30</span>, <span class="number">10</span>, bias=<span class="literal">True</span>),</span><br><span class="line">            nn.ReLU()</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        self.classifica = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">10</span>,<span class="number">2</span>, bias=<span class="literal">True</span>),</span><br><span class="line">            nn.Sigmoid()</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        fc1=self.hidden1(x)</span><br><span class="line">        fc2=self.hidden2(fc1)</span><br><span class="line">        output=self.classifica(fc2)</span><br><span class="line">        <span class="keyword">return</span> fc1,fc2,output</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®è½½å…¥ä¸è½¬æ¢">æ•°æ®è½½å…¥ä¸è½¬æ¢</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éœ€è¦å°†å¤„ç†å¥½çš„æ•°æ®è½¬åŒ–ä¸ºå¼ é‡è¿›è¡Œä½¿ç”¨</span></span><br><span class="line"><span class="comment"># åˆ†ç±»æ•°æ®ä½¿ç”¨int64å³å¯</span></span><br><span class="line">x_train_nots=torch.from_numpy(X_train_s.astype(np.float32))</span><br><span class="line">y_train_tar=torch.from_numpy(Y_train.astype(np.int64))</span><br><span class="line">x_test_nots=torch.from_numpy(X_test_s.astype(np.float32))</span><br><span class="line">y_test_tar=torch.from_numpy(Y_test.astype(np.int64))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å…¶åˆå¹¶ä¸ºä¸€ä¸ªæ•°æ®é›†</span></span><br><span class="line">train_data=Data.TensorDataset(x_train_nots,y_train_tar)</span><br><span class="line"><span class="comment"># æ”¾å…¥æ•°æ®å®¹å™¨</span></span><br><span class="line">train_data_loader=Data.DataLoader(</span><br><span class="line">    dataset=train_data,</span><br><span class="line">    shuffle=<span class="literal">True</span>,</span><br><span class="line">    batch_size=<span class="number">64</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°">ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mlp=MLP()</span><br><span class="line"><span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨</span></span><br><span class="line">opt=Adam(mlp.parameters(),lr=<span class="number">0.0003</span>)</span><br><span class="line"><span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°</span></span><br><span class="line">loss_fn=nn.CrossEntropyLoss()</span><br><span class="line"><span class="comment"># è®°å½•å†å²ä¿¡æ¯</span></span><br><span class="line">history1=hl.History()</span><br><span class="line"><span class="comment"># ä½¿ç”¨ç”»å¸ƒå¯è§†åŒ–</span></span><br><span class="line">canvas=hl.Canvas()</span><br><span class="line"><span class="comment"># ä¸­é—´è¿‡ç¨‹</span></span><br><span class="line">print_step=<span class="number">30</span></span><br></pre></td></tr></table></figure>
<h3 id="è®­ç»ƒè¿‡ç¨‹">è®­ç»ƒè¿‡ç¨‹</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">	<span class="comment"># è·å–æ¯ä¸€æ¬¡çš„labelå’Œtarget</span></span><br><span class="line">    <span class="keyword">for</span> step,(bx,by) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_data_loader):</span><br><span class="line">        _,_,out=mlp(bx)</span><br><span class="line">        <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">        loss=loss_fn(out,by)</span><br><span class="line">        <span class="comment"># æ¢¯åº¦æ¸…é›¶</span></span><br><span class="line">        opt.zero_grad()</span><br><span class="line">        <span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">        loss.backward()</span><br><span class="line">        <span class="comment"># æ›´æ–°å‚æ•°</span></span><br><span class="line">        opt.step()</span><br><span class="line">        niter=epoch*<span class="built_in">len</span>(train_data_loader)+step+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> niter%print_step==<span class="number">0</span>:</span><br><span class="line">            _,_,output=mlp(x_test_nots)</span><br><span class="line">            <span class="comment"># æŸ¥çœ‹</span></span><br><span class="line">            _,pre_lab=torch.<span class="built_in">max</span>(output,<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># è®¡ç®—ç²¾åº¦</span></span><br><span class="line">            test_accuracy=accuracy_score(y_test_tar,pre_lab)</span><br><span class="line">            <span class="comment"># æ·»åŠ epochç²¾åº¦å’ŒæŸå¤±</span></span><br><span class="line">            history1.log(niter,train_loss=loss,test_accuracy=test_accuracy)</span><br><span class="line">            <span class="keyword">with</span> canvas:</span><br><span class="line">                canvas.draw_plot(history1[<span class="string">&#x27;train_loss&#x27;</span>])</span><br><span class="line">                canvas.draw_plot(history1[<span class="string">&#x27;test_accuracy&#x27;</span>])</span><br><span class="line">_,_,output=mlp(x_test_nots)</span><br><span class="line">_,pre_lab=torch.<span class="built_in">max</span>(output,<span class="number">1</span>)</span><br><span class="line">test_accuracy=accuracy_score(y_test_tar,pre_lab)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test_Accuracy&quot;</span>,test_accuracy)</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200304101.png" alt="image-20220728200304101" style="zoom:50%;">
<h3 id="è·å–ä¸­é—´å±‚è¾“å‡º">è·å–ä¸­é—´å±‚è¾“å‡º</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–ç¬¬äºŒä¸ªéšå±‚çš„è¾“å‡º</span></span><br><span class="line">_,test_fc2,_=mlp(x_test_nots)</span><br><span class="line"><span class="comment"># TSNEé™ç»´</span></span><br><span class="line">test_fc2_tsne=TSNE(n_components=<span class="number">2</span>).fit_transform(test_fc2.data.numpy())</span><br><span class="line"><span class="comment"># å¯è§†åŒ–ç‰¹å¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">6</span>))</span><br><span class="line"><span class="comment"># å¯è§†åŒ–å‰è®¾ç½®</span></span><br><span class="line">plt.xlim([<span class="built_in">min</span>(test_fc2_tsne[:,<span class="number">0</span>]-<span class="number">1</span>),<span class="built_in">max</span>(test_fc2_tsne[:,<span class="number">0</span>])+<span class="number">1</span>])</span><br><span class="line">plt.ylim([<span class="built_in">min</span>(test_fc2_tsne[:,<span class="number">1</span>]-<span class="number">1</span>),<span class="built_in">max</span>(test_fc2_tsne[:,<span class="number">1</span>])+<span class="number">1</span>])</span><br><span class="line">plt.plot(test_fc2_tsne[Y_test==<span class="number">0</span>,<span class="number">0</span>],test_fc2_tsne[Y_test==<span class="number">0</span>,<span class="number">1</span>],<span class="string">&quot;bo&quot;</span>,label=<span class="string">&quot;0&quot;</span>)</span><br><span class="line">plt.plot(test_fc2_tsne[Y_test==<span class="number">1</span>,<span class="number">0</span>],test_fc2_tsne[Y_test==<span class="number">1</span>,<span class="number">1</span>],<span class="string">&quot;rd&quot;</span>,label=<span class="string">&quot;1&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.title(<span class="string">&quot;test_fcc2_tsne&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200311379.png" alt="image-20220728200311379" style="zoom:50%;">
<h3 id="é€šè¿‡Hookè°ƒç”¨ä¸­é—´å±‚ä¿¡æ¯">é€šè¿‡Hookè°ƒç”¨ä¸­é—´å±‚ä¿¡æ¯</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡è¾…åŠ©å‡½æ•°æ¥è·å–æŒ‡å®šå±‚åç§°çš„ç‰¹å¾</span></span><br><span class="line">activation=&#123;&#125;</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_activation</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hook</span>(<span class="params">model,<span class="built_in">input</span>,output</span>):</span><br><span class="line">        activation[name]=output.detach()</span><br><span class="line">    <span class="keyword">return</span> hook</span><br><span class="line"></span><br><span class="line">mlp.classifica.register_forward_hook(get_activation(<span class="string">&#x27;classifica&#x27;</span>))</span><br><span class="line">_,_,_=mlp(x_test_nots)</span><br><span class="line">classfica=activation[<span class="string">&#x27;classifica&#x27;</span>].data.numpy()</span><br><span class="line"><span class="comment"># å¯è§†åŒ–ç‰¹å¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(classfica[Y_test==<span class="number">0</span>,<span class="number">0</span>],classfica[Y_test==<span class="number">0</span>,<span class="number">1</span>],<span class="string">&quot;bo&quot;</span>,label=<span class="string">&quot;0&quot;</span>)</span><br><span class="line">plt.plot(classfica[Y_test==<span class="number">1</span>,<span class="number">0</span>],classfica[Y_test==<span class="number">1</span>,<span class="number">1</span>],<span class="string">&quot;rd&quot;</span>,label=<span class="string">&quot;1&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200317576.png" alt="image-20220728200317576" style="zoom:50%;">
<hr>
<h2 id="1-3-MLPå›å½’æ¨¡å‹">1.3    MLPå›å½’æ¨¡å‹</h2>
<p>å›å½’æ¨¡å‹çš„æ•°æ®é€‰æ‹©sklearn.datasetsä¸­çš„åŠ åˆ©ç¦å°¼äºšæˆ¿ä»·æ•°æ®ã€‚</p>
<h3 id="æ¨¡å—å‡†å¤‡">æ¨¡å—å‡†å¤‡</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error,mean_absolute_error</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> fetch_california_housing</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> SGD</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®å¤„ç†">æ•°æ®å¤„ç†</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">housedata=fetch_california_housing()</span><br><span class="line">X_train,X_test,y_train,y_test=train_test_split(</span><br><span class="line">    housedata.data,</span><br><span class="line">    housedata.target,</span><br><span class="line">    test_size=<span class="number">0.3</span>,</span><br><span class="line">    random_state=<span class="number">42</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ‡å‡†åŒ–</span></span><br><span class="line">scale=StandardScaler()</span><br><span class="line">X_train_s=scale.fit_transform(X_train)</span><br><span class="line">X_test_s=scale.transform(X_test)</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®æ¢æŸ¥">æ•°æ®æ¢æŸ¥</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è½¬åŒ–ä¸ºæ•°æ®è¡¨ï¼Œæ¢æŸ¥æ•°æ®æƒ…å†µ</span></span><br><span class="line">housedatadf=pd.DataFrame(data=X_train_s,columns=housedata.feature_names)</span><br><span class="line">housedatadf[<span class="string">&#x27;target&#x27;</span>]=y_train</span><br><span class="line"><span class="comment"># å¯è§†åŒ–çƒ­åŠ›å›¾</span></span><br><span class="line">datacor=np.corrcoef(housedatadf.values,rowvar=<span class="number">0</span>)</span><br><span class="line">datacor=pd.DataFrame(data=datacor,columns=housedatadf.columns,index=housedatadf.columns)</span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">6</span>))</span><br><span class="line">ax=sns.heatmap(datacor,square=<span class="literal">True</span>,annot=<span class="literal">True</span>,fmt=<span class="string">&quot;.3f&quot;</span>,linewidths=<span class="number">.5</span>,cmap=<span class="string">&quot;YlGnBu&quot;</span>,cbar_kws=&#123;<span class="string">&quot;fraction&quot;</span>:<span class="number">0.046</span>,<span class="string">&quot;pad&quot;</span>:<span class="number">0.03</span>&#125;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®è½¬åŒ–">æ•°æ®è½¬åŒ–</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è½¬åŒ–ä¸ºå¼ é‡</span></span><br><span class="line">train_xt=torch.from_numpy(X_train_s.astype(np.float32))</span><br><span class="line">train_yt=torch.from_numpy(y_train.astype(np.float32))</span><br><span class="line">test_xt=torch.from_numpy(X_test_s.astype(np.float32))</span><br><span class="line">test_yt=torch.from_numpy(y_test.astype(np.float32))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¾åˆ°æ•°æ®å®¹å™¨</span></span><br><span class="line">train_data=Data.TensorDataset(train_xt,train_yt)</span><br><span class="line">test_data=Data.TensorDataset(test_xt,test_yt)</span><br><span class="line">train_loader=Data.DataLoader(</span><br><span class="line">    dataset=train_data,</span><br><span class="line">    shuffle=<span class="literal">True</span>,</span><br><span class="line">    batch_size=<span class="number">64</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200324585.png" alt="image-20220728200324585" style="zoom:50%;">
<h3 id="å®šä¹‰ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœº">å®šä¹‰ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœº</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MLP</span>(nn.Module):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MLP, self).__init__()</span><br><span class="line">        self.hidden1=nn.Linear(<span class="number">8</span>,<span class="number">100</span>,bias=<span class="literal">True</span>)</span><br><span class="line">        self.hidden2=nn.Linear(<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">        self.hidden3=nn.Linear(<span class="number">100</span>,<span class="number">50</span>)</span><br><span class="line">        self.predict=nn.Linear(<span class="number">50</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        x=F.relu(self.hidden1(x))</span><br><span class="line">        x=F.relu(self.hidden2(x))</span><br><span class="line">        x=F.relu(self.hidden3(x))</span><br><span class="line">        output=self.predict(x)</span><br><span class="line">        <span class="comment"># output: [batch,1]</span></span><br><span class="line">        <span class="comment"># output[:,0]: [batch]</span></span><br><span class="line">        <span class="keyword">return</span> output[:,<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h3 id="è®­ç»ƒå‚æ•°å®šä¹‰">è®­ç»ƒå‚æ•°å®šä¹‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mlp=MLP()</span><br><span class="line">optimizer=torch.optim.SGD(mlp.parameters(),lr=<span class="number">0.003</span>)</span><br><span class="line">loss_func=nn.MSELoss()</span><br><span class="line">train_loss_all=[]</span><br></pre></td></tr></table></figure>
<h3 id="è®­ç»ƒè¿‡ç¨‹-v2">è®­ç»ƒè¿‡ç¨‹</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">60</span>):</span><br><span class="line">    train_loss=<span class="number">0</span></span><br><span class="line">    train_num=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (bx,by) <span class="keyword">in</span> train_loader:</span><br><span class="line">        output=mlp(bx)</span><br><span class="line">        loss=loss_func(output,by)</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line">        train_loss+=loss.item()*bx.size(<span class="number">0</span>)</span><br><span class="line">        train_num+=bx.size(<span class="number">0</span>)</span><br><span class="line">    train_loss_all.append(train_loss/train_num)</span><br></pre></td></tr></table></figure>
<h3 id="ç»“æœå¯è§†åŒ–">ç»“æœå¯è§†åŒ–</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(train_loss_all,<span class="string">&#x27;ro-&#x27;</span>,label=<span class="string">&quot;Train Loss&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.grid()</span><br><span class="line">plt.xlabel(<span class="string">&quot;epoch&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;loss&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200331572.png" alt="image-20220728200331572" style="zoom:50%;">
<h3 id="é¢„æµ‹æµ‹è¯•é›†">é¢„æµ‹æµ‹è¯•é›†</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹</span></span><br><span class="line">pre_y=mlp(test_xt)</span><br><span class="line">pre_y=pre_y.data.numpy()</span><br><span class="line">mae=mean_absolute_error(y_test,pre_y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;åœ¨æµ‹è¯•é›†ä¸Šçš„ç»å¯¹å€¼è¯¯å·®ä¸ºï¼š &quot;</span>,mae)</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220322193302295.png" alt="image-20220322193302295" style="zoom:50%;">
<h3 id="å¯è§†åŒ–å·®å¼‚">å¯è§†åŒ–å·®å¼‚</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯è§†åŒ–å·®å¼‚</span></span><br><span class="line">index=np.argsort(y_test)</span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">5</span>))</span><br><span class="line">plt.plot(np.arange(<span class="built_in">len</span>(y_test)),y_test[index],<span class="string">&#x27;r&#x27;</span>,label=<span class="string">&quot;original Y&quot;</span>)</span><br><span class="line">plt.scatter(np.arange(<span class="built_in">len</span>(pre_y)),pre_y[index],s=<span class="number">3</span>,c=<span class="string">&quot;b&quot;</span>,label=<span class="string">&quot;Prediction&quot;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&quot;upper left&quot;</span>)</span><br><span class="line">plt.grid()</span><br><span class="line">plt.xlabel(<span class="string">&quot;Index&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Y&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%20%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200338389.png" alt="image-20220728200338389" style="zoom:50%;"><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç¬¬å››ç«   åŸºäºPyTorchçš„å¯è§†åŒ–å·¥å…·]]></title>
      <url>/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/</url>
      <content type="html"><![CDATA[<h1>ç¬¬å››ç«     åŸºäºPyTorchçš„å¯è§†åŒ–å·¥å…·</h1>
<hr>
<h2 id="1-ç½‘ç»œç»“æ„çš„å¯è§†åŒ–">1.    ç½‘ç»œç»“æ„çš„å¯è§†åŒ–</h2>
<p>æœ¬èŠ‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç®€å•CNNå¯¹æ‰‹å†™æ•°æ®é›†è¿›è¡Œåˆ†ç±»ï¼Œå¹¶é€šè¿‡ç›¸å…³çš„å¯è§†åŒ–åº“è¿›è¡Œå¯è§†åŒ–ã€‚</p>
<p><strong>æ¨¡å—å¯¼å…¥</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> torchvision.utils <span class="keyword">as</span> vutils</span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> SGD</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span>  accuracy_score</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<p><strong>æ•°æ®å‡†å¤‡</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆæ˜¯è·å–æ‰‹å†™æ•°æ®é›†</span></span><br><span class="line">train_data=torchvision.datasets.MNIST(</span><br><span class="line">    root=<span class="string">&quot;./data/MNIST&quot;</span>,</span><br><span class="line">    train=<span class="literal">True</span>, <span class="comment"># åªä½¿ç”¨è®­ç»ƒé›†</span></span><br><span class="line">    transform=torchvision.transforms.ToTensor(), <span class="comment"># è¿™é‡Œæ˜¯ä½¿ç”¨äº†tvçš„transformsæ¥å£ï¼Œè½¬æ¢ä¸ºTensor</span></span><br><span class="line">    download=<span class="literal">False</span> <span class="comment"># å¦‚æœä¸‹è½½è¿‡äº†å°±ä¸éœ€è¦é‡æ–°ä¸‹è½½ï¼Œå¯æ”¹ä¸ºFalse</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰äº†æ•°æ®é›†ä¹‹åæï¼Œå°±éœ€è¦æŠŠæ•°æ®åˆ†æ‰¹å¤„ç†</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬ä¸€èˆ¬æ˜¯åˆ›å»ºä¸€ä¸ªDataLoader</span></span><br><span class="line">train_loader=Data.DataLoader(</span><br><span class="line">    dataset=train_data,</span><br><span class="line">    batch_size=<span class="number">256</span>,</span><br><span class="line">    shuffle=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹ä¸‹æ•°æ®çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">for</span> step,(b_x,b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">    <span class="keyword">if</span> step&gt;<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span> <span class="comment"># åªæ‹¿å‡ºä¸€ä¸ªbatchæŸ¥çœ‹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(b_x.shape)</span><br><span class="line"><span class="built_in">print</span>(b_y.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åæ˜¯æµ‹è¯•æ•°æ®é›†</span></span><br><span class="line">test_data=torchvision.datasets.MNIST(</span><br><span class="line">    root=<span class="string">&quot;./data/MNIST&quot;</span>,</span><br><span class="line">    train=<span class="literal">False</span>,  <span class="comment"># ä¸ä½¿ç”¨è®­ç»ƒé›†</span></span><br><span class="line">    download=<span class="literal">False</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸ªæ•°æ®æ·»åŠ ä¸€ä¸ªé€šé“(channel)</span></span><br><span class="line"><span class="comment"># å¹¶ä¸”å°†æ•°å€¼èŒƒå›´ç¼©æ”¾åˆ°[0,1]</span></span><br><span class="line"></span><br><span class="line">test_data_x=test_data.data.<span class="built_in">type</span>(torch.FloatTensor)/<span class="number">255</span></span><br><span class="line">test_data_x=torch.unsqueeze(test_data_x,dim=<span class="number">1</span>)</span><br><span class="line">test_data_y=test_data.targets <span class="comment"># æ•°æ®é›†ä¸­æä¾›çš„æ ‡ç­¾æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test_x&quot;</span>,test_data_x.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test_y&quot;</span>,test_data_y.shape)</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">torch.Size([256, 1, 28, 28])</span></span><br><span class="line"><span class="string">torch.Size([256])</span></span><br><span class="line"><span class="string">Test_x torch.Size([10000, 1, 28, 28])</span></span><br><span class="line"><span class="string">Test_y torch.Size([10000])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>ç½‘ç»œæ­å»º</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­å»ºä¸€ä¸ªCNN</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConvNet</span>(nn.Module):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(ConvNet,self).__init__()</span><br><span class="line">        <span class="comment"># æœ¬ç½‘ç»œç”±ä¸¤ä¸ªå·ç§¯å±‚å’Œä¸€ä¸ªå…¨è¿æ¥å±‚æ„æˆ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬ä¸€ä¸ªå·ç§¯å±‚</span></span><br><span class="line">        self.conv1=nn.Sequential(</span><br><span class="line">            <span class="comment"># 1-&gt;16</span></span><br><span class="line">            nn.Conv2d(<span class="number">1</span>,<span class="number">16</span>,<span class="number">3</span>,padding=<span class="number">1</span>,stride=<span class="number">1</span>),</span><br><span class="line">            <span class="comment"># æ¿€æ´»å‡½æ•°</span></span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            <span class="comment"># å·ç§¯åšå®Œåè¿›è¡Œæ± åŒ–</span></span><br><span class="line">            <span class="comment"># æœ¬ç½‘ç»œä½¿ç”¨å¹³å‡æ± åŒ–ï¼Œç›®çš„æ˜¯å‹ç¼©ä¿¡æ¯é‡</span></span><br><span class="line">            nn.AvgPool2d(kernel_size=<span class="number">2</span>,stride=<span class="number">2</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬äºŒä¸ªå·ç§¯å±‚</span></span><br><span class="line">        self.conv2=nn.Sequential(</span><br><span class="line">            <span class="comment"># 16-&gt;32</span></span><br><span class="line">            nn.Conv2d(<span class="number">16</span>,<span class="number">32</span>,kernel_size=<span class="number">3</span>,stride=<span class="number">1</span>,padding=<span class="number">1</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬ä¸‰å±‚å…¨è¿æ¥å±‚</span></span><br><span class="line">        self.mlp=nn.Sequential(</span><br><span class="line">            nn.Linear(</span><br><span class="line">                <span class="comment"># è¾“å…¥ç‰¹å¾æ•°</span></span><br><span class="line">                <span class="comment"># å›¾ç‰‡æœ‰32ä¸ªchannel</span></span><br><span class="line">                <span class="comment"># ä¸”å¤§å°ä¸ºï¼š 28&gt;&gt;2</span></span><br><span class="line">                in_features=<span class="number">32</span>*<span class="number">7</span>*<span class="number">7</span>,</span><br><span class="line">                out_features=<span class="number">128</span></span><br><span class="line">            ),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">128</span>,<span class="number">64</span>),</span><br><span class="line">            nn.ReLU()</span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># æœ€åçš„è¾“å‡ºæ˜ å°„åä¸ªæ•°å­—</span></span><br><span class="line">        self.out=nn.Linear(<span class="number">64</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        <span class="comment"># return self.out(self.mlp(self.conv2(self.conv1(x))))</span></span><br><span class="line">        <span class="comment"># æ³¨æ„æ­¤æ—¶æ˜¯å›¾åƒæ•°æ®</span></span><br><span class="line">        <span class="comment"># ä¸ºäº†è®©MLPçº¿æ€§å±‚èƒ½å¤Ÿå¤„ç†</span></span><br><span class="line">        <span class="comment"># éœ€è¦å¹³é“ºä¸ºä¸€ç»´å‘é‡</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># x:-&gt;[batch,1,28,28]</span></span><br><span class="line">        x=self.conv2(self.conv1(x))</span><br><span class="line">        <span class="comment"># x:-&gt;[batch,32,7,7]</span></span><br><span class="line">        x=x.view(x.size(<span class="number">0</span>),-<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># x:-&gt;[32*7*7]^T</span></span><br><span class="line">        <span class="keyword">return</span> self.out(self.mlp(x))         <span class="comment"># x:-&gt;10</span></span><br><span class="line"></span><br><span class="line">Conv1=ConvNet()</span><br><span class="line"><span class="built_in">print</span>(Conv1)</span><br></pre></td></tr></table></figure>
<p><strong>HiddenLayerå¯è§†åŒ–</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å€ŸåŠ©hiddenlayeråº“è¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line"><span class="keyword">import</span> hiddenlayer <span class="keyword">as</span> hl</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯è§†åŒ–CNN</span></span><br><span class="line">hl_graph=hl.build_graph(Conv1,torch.zeros([<span class="number">1</span>,<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>]))</span><br><span class="line">hl_graph.theme=hl.graph.THEMES[<span class="string">&quot;blue&quot;</span>].copy()</span><br><span class="line"><span class="comment"># å¯ä»¥å°†å…¶ä¿å­˜ä¸ºå›¾ç‰‡</span></span><br><span class="line">hl_graph.save(<span class="string">r&quot;C:\Users\è½èŠ±é›¨\Desktop\0001.png&quot;</span>,<span class="built_in">format</span>=<span class="string">&quot;png&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>PyTorchVizå¯è§†åŒ–</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torchviz <span class="keyword">import</span> make_dot</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨make_dotå¯è§†åŒ–ç½‘ç»œ</span></span><br><span class="line">x=torch.randn(<span class="number">1</span>,<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>).requires_grad_(<span class="literal">True</span>)</span><br><span class="line">y=Conv1(x)</span><br><span class="line">ConvVis=make_dot(y,params=<span class="built_in">dict</span>(<span class="built_in">list</span>(Conv1.named_parameters())+[(<span class="string">&quot;x&quot;</span>,x)]))</span><br><span class="line"><span class="comment"># å°†å…¶ä¿å­˜ä¸ºå›¾ç‰‡</span></span><br><span class="line">ConvVis.<span class="built_in">format</span>=<span class="string">&quot;png&quot;</span></span><br><span class="line">ConvVis.directory=<span class="string">r&quot;C:\Users\è½èŠ±é›¨\Desktop&quot;</span></span><br><span class="line">ConvVis.view() <span class="comment"># ä¼šè‡ªåŠ¨åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="2-è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–">2.  è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–</h2>
<h3 id="2-1-tensorboardX">2.1 tensorboardX</h3>
<p>tensorboardXçš„éƒ¨åˆ†APIå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">åŠŸèƒ½</th>
<th style="text-align:center">ç”¨æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SummaryWriter()</td>
<td style="text-align:center">åˆ›å»ºç¼–å†™å™¨ï¼Œä¿å­˜æ—¥å¿—</td>
<td style="text-align:center">writer=SummaryWriter()</td>
</tr>
<tr>
<td style="text-align:center">writer.add_scalar()</td>
<td style="text-align:center">æ·»åŠ æ ‡é‡</td>
<td style="text-align:center">writer.add_scalar(â€˜myscalarâ€™,value,iteration)</td>
</tr>
<tr>
<td style="text-align:center">writer.add_image()</td>
<td style="text-align:center">æ·»åŠ å›¾åƒ</td>
<td style="text-align:center">writer.add_image(â€˜imresultâ€™,x,itertation)</td>
</tr>
<tr>
<td style="text-align:center">writer.add_histogram()</td>
<td style="text-align:center">æ·»åŠ ç›´æ–¹å›¾</td>
<td style="text-align:center">writer.add_histogram(â€˜histâ€™,array,iteration)</td>
</tr>
<tr>
<td style="text-align:center">writer.add_graph()</td>
<td style="text-align:center">æ·»åŠ ç½‘ç»œç»“æ„</td>
<td style="text-align:center">writer.add_graph(model,input_to_model=None)</td>
</tr>
<tr>
<td style="text-align:center">writer.add_audio()</td>
<td style="text-align:center">æ·»åŠ éŸ³é¢‘</td>
<td style="text-align:center">add_audio(tag,audio,iteration,sample_rate)</td>
</tr>
<tr>
<td style="text-align:center">writer.add_text()</td>
<td style="text-align:center">æ·»åŠ æ–‡æœ¬</td>
<td style="text-align:center">writer.add_text(tag,text_string,global_step=None)</td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸‹æ¡ˆä¾‹å±•ç°äº†tensorboardçš„ä½¿ç”¨æ–¹å¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬åˆ©ç”¨tensorboardXè¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line">Sumwriter=SummaryWriter(log_dir=<span class="string">&quot;data/log/chap4&quot;</span>)</span><br><span class="line"><span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨</span></span><br><span class="line">optimizer=torch.optim.Adam(CNN1.parameters(),lr=<span class="number">0.0003</span>)</span><br><span class="line"><span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°</span></span><br><span class="line">loss_func=nn.CrossEntropyLoss()</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æŸå¤±</span></span><br><span class="line">train_loss=<span class="number">0</span></span><br><span class="line"><span class="comment"># è®¡ç®—è¿­ä»£è¾“å‡ºæ¬¡æ•°</span></span><br><span class="line"><span class="comment"># æ¯è¿­ä»£ä¸€ç™¾æ¬¡è¿›è¡Œä¸€æ¬¡è¾“å‡º</span></span><br><span class="line">print_step=<span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›è¡Œè®­ç»ƒ</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> step,(b_x,b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        <span class="comment"># è®¡ç®—æ¯ä¸ªbatchæŸå¤±</span></span><br><span class="line">        output=CNN1(b_x)</span><br><span class="line">        <span class="comment"># äº¤å‰ç†µ</span></span><br><span class="line">        loss=loss_func(output,b_y)</span><br><span class="line">        <span class="comment"># æ¢¯åº¦åˆå§‹åŒ–</span></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        <span class="comment"># è®¡ç®—æ¢¯åº¦å¹¶ä¼˜åŒ–</span></span><br><span class="line">        optimizer.step()</span><br><span class="line">        <span class="comment"># è®¡ç®—ç´¯è®¡æŸå¤±å’Œ</span></span><br><span class="line">        train_loss+=loss</span><br><span class="line">        <span class="comment"># è®¡ç®—è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">        niter=epoch*<span class="built_in">len</span>(train_loader)+step+<span class="number">1</span></span><br><span class="line">        <span class="comment"># æ¯ä¸€ç™¾æ¬¡è¿›è¡Œè¾“å‡º</span></span><br><span class="line">        <span class="keyword">if</span> niter%print_step==<span class="number">0</span>:</span><br><span class="line">            <span class="comment"># ä¸ºæ—¥å¿—æ·»åŠ è®­ç»ƒé›†æŸå¤±å‡½æ•°</span></span><br><span class="line">            Sumwriter.add_scalar(tag=<span class="string">&quot;train_loss&quot;</span>,scalar_value=train_loss.item()/niter,</span><br><span class="line">                                     global_step=niter)</span><br><span class="line">            <span class="comment"># è®¡ç®—åœ¨æµ‹è¯•é›†ä¸Šçš„ç²¾åº¦</span></span><br><span class="line">            output=CNN1(test_data_x)</span><br><span class="line">            <span class="comment"># åœ¨ç»´åº¦1ä¸Šçš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="comment"># å‰é¢æ˜¯å€¼ï¼Œåé¢æ˜¯æœ€å¤§å€¼ç´¢å¼•</span></span><br><span class="line">            _,pre_lab=torch.<span class="built_in">max</span>(output,<span class="number">1</span>)</span><br><span class="line">            acc=accuracy_score(test_data_y,pre_lab)</span><br><span class="line">            <span class="comment"># ä¸ºè®­ç»ƒæ—¥å¿—æ·»åŠ é¢„æµ‹ç²¾åº¦</span></span><br><span class="line">            Sumwriter.add_scalar(tag=<span class="string">&quot;test acc&quot;</span>,scalar_value=acc.item(),global_step=niter)</span><br><span class="line">            <span class="comment"># ä¸ºè®­ç»ƒæ—¥å¿—æ·»åŠ å¯è§†åŒ–å›¾åƒ</span></span><br><span class="line">            <span class="comment"># ä½¿ç”¨å½“å‰batchçš„å›¾åƒ</span></span><br><span class="line">            b_x_im=vutils.make_grid(b_x,nrow=<span class="number">12</span>)</span><br><span class="line">            Sumwriter.add_image(tag=<span class="string">&quot;train image sample&quot;</span>,img_tensor=b_x_im,global_step=niter)</span><br><span class="line">            <span class="comment"># ä½¿ç”¨ç›´æ–¹å›¾å¯è§†åŒ–ç½‘ç»œå‚æ•°çš„åˆ†å¸ƒæƒ…å†µ</span></span><br><span class="line">            <span class="keyword">for</span> name,param <span class="keyword">in</span> CNN1.named_parameters():</span><br><span class="line">                Sumwriter.add_histogram(name,param.data.numpy(),niter)</span><br></pre></td></tr></table></figure>
<h2 id="3-Visdomå¯è§†åŒ–">3.  Visdomå¯è§†åŒ–</h2>
<p>Visdomæ˜¯Facebookä¸“é—¨ä¸ºPyTorchå¼€å‘çš„ä¸€æ¬¾å¯è§†åŒ–å·¥å…·ï¼Œå¯è§†åŒ–çš„åŒæ—¶æ”¯æŒTensorå’ŒNumpyä¸¤ç§æ•°æ®æ ¼å¼ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">vis.image</td>
<td style="text-align:center">å¯è§†åŒ–ä¸€å¼ å›¾åƒ</td>
</tr>
<tr>
<td style="text-align:center">vis.images</td>
<td style="text-align:center">å¯è§†åŒ–ä¸€ä¸ªbatchçš„å›¾åƒï¼Œæˆ–è€…ä¸€ä¸ªå›¾åƒåˆ—è¡¨</td>
</tr>
<tr>
<td style="text-align:center">vis.text</td>
<td style="text-align:center">å¯è§†åŒ–æ–‡æœ¬</td>
</tr>
<tr>
<td style="text-align:center">vis.audio</td>
<td style="text-align:center">æ’­æ”¾éŸ³é¢‘</td>
</tr>
<tr>
<td style="text-align:center">vis.video</td>
<td style="text-align:center">æ’­æ”¾è§†é¢‘</td>
</tr>
<tr>
<td style="text-align:center">vis.matplot</td>
<td style="text-align:center">å¯è§†åŒ–matplotlibçš„å›¾åƒ</td>
</tr>
<tr>
<td style="text-align:center">vis.scatter</td>
<td style="text-align:center">2Dæˆ–3Dçš„æ•£ç‚¹å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.line</td>
<td style="text-align:center">çº¿å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.stem</td>
<td style="text-align:center">èŒå¶å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.hearmap</td>
<td style="text-align:center">çƒ­åŠ›å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.bar</td>
<td style="text-align:center">æ¡å½¢å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.histogram</td>
<td style="text-align:center">ç›´æ–¹å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.boxplot</td>
<td style="text-align:center">ç›’å½¢å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.surf</td>
<td style="text-align:center">æ›²é¢å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.contour</td>
<td style="text-align:center">ç­‰é«˜çº¿å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.quiver</td>
<td style="text-align:center">ç®­å¤´å›¾</td>
</tr>
<tr>
<td style="text-align:center">vis.mesh</td>
<td style="text-align:center">ç½‘æ ¼å›¾</td>
</tr>
</tbody>
</table>
<p>VisdomæœåŠ¡å™¨éœ€è¦å…ˆæŒ‚èµ·</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m visdom.server</span><br></pre></td></tr></table></figure>
<p><strong>ä»¥ä¸‹ä½¿ç”¨ä¸€ä¸ªæ¡ˆä¾‹æ¥è¿ç”¨Visdom</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> visdom <span class="keyword">import</span> Visdom</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥é¸¢å°¾èŠ±æ•°æ®é›†</span></span><br><span class="line"><span class="comment"># ä¸º: x:(150,4) y:(150)</span></span><br><span class="line">ix,iy=load_iris(return_X_y=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><strong>æ•£ç‚¹å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¥ä¸‹æ¥ç»˜åˆ¶æ•£ç‚¹å›¾</span></span><br><span class="line">vis=Visdom()</span><br><span class="line">vis.scatter(ix[:,<span class="number">0</span>:<span class="number">2</span>],Y=iy+<span class="number">1</span>,win=<span class="string">&quot;windows1&quot;</span>,env=<span class="string">&quot;main&quot;</span>)</span><br><span class="line">vis.scatter(ix[:,<span class="number">0</span>:<span class="number">3</span>],Y=iy+<span class="number">1</span>,win=<span class="string">&quot;3D æ•£ç‚¹å›¾&quot;</span>,env=<span class="string">&quot;main&quot;</span>,</span><br><span class="line">            opts=<span class="built_in">dict</span>(markersize=<span class="number">4</span>,</span><br><span class="line">                      xlabel=<span class="string">&quot;ç‰¹å¾1&quot;</span>,</span><br><span class="line">                      ylabel=<span class="string">&quot;ç‰¹å¾2&quot;</span>))</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/image-20220728200129712.png" alt="image-20220728200129712" style="zoom:50%;">
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/image-20220728200135598.png" alt="image-20220728200135598" style="zoom:50%;">
<p><strong>æŠ˜çº¿å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»˜åˆ¶æŠ˜çº¿å›¾</span></span><br><span class="line">x=torch.linspace(-<span class="number">6</span>,<span class="number">6</span>,<span class="number">100</span>).view((-<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">sigmoid=torch.nn.Sigmoid()</span><br><span class="line">sigmoidy=sigmoid(x)</span><br><span class="line">tanh=torch.nn.Tanh()</span><br><span class="line">tanhy=tanh(x)</span><br><span class="line">relu=torch.nn.ReLU()</span><br><span class="line">reluy=relu(x)</span><br><span class="line"></span><br><span class="line">ploty=torch.cat((sigmoidy,tanhy,reluy),dim=<span class="number">1</span>)</span><br><span class="line">plotx=torch.cat((x,x,x),dim=<span class="number">1</span>)</span><br><span class="line">vis.line(Y=ploty,X=plotx,win=<span class="string">&quot;line plot&quot;</span>,env=<span class="string">&quot;main&quot;</span>,</span><br><span class="line">         opts=<span class="built_in">dict</span>(dash=np.array([<span class="string">&quot;solid&quot;</span>,<span class="string">&quot;dash&quot;</span>,<span class="string">&quot;dashdot&quot;</span>]),</span><br><span class="line">                   legend=[<span class="string">&#x27;sigmoid&#x27;</span>,<span class="string">&#x27;tanh&#x27;</span>,<span class="string">&#x27;relu&#x27;</span>]))</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/image-20220728200141579.png" alt="image-20220728200141579" style="zoom:50%;">
<p><strong>èŒå¶å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èŒå¶å›¾</span></span><br><span class="line">x=torch.linspace(-<span class="number">6</span>,<span class="number">6</span>,<span class="number">100</span>).view((-<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">y1=torch.sin(x)</span><br><span class="line">y2=torch.cos(x)</span><br><span class="line"></span><br><span class="line">plotx=torch.cat((y1,y2),<span class="number">1</span>)</span><br><span class="line">ploty=torch.cat((x,x),<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">vis.stem(X=plotx,Y=ploty,win=<span class="string">&quot;stem plot&quot;</span>,env=<span class="string">&quot;main&quot;</span>,</span><br><span class="line">         opts=<span class="built_in">dict</span>(legend=[<span class="string">&#x27;sin&#x27;</span>,<span class="string">&#x27;cos&#x27;</span>],title=<span class="string">&quot;èŒå¶å›¾&quot;</span>))</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/image-20220728200149240.png" alt="image-20220728200149240" style="zoom:50%;">
<p><strong>çƒ­åŠ›å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çƒ­åŠ›å›¾</span></span><br><span class="line"><span class="comment"># è®¡ç®—ç›¸å…³ç³»æ•°</span></span><br><span class="line">irs_cor=torch.from_numpy(np.corrcoef(ix,rowvar=<span class="literal">False</span>))</span><br><span class="line">vis.heatmap(irs_cor,win=<span class="string">&#x27;heatmap&#x27;</span>,env=<span class="string">&quot;main&quot;</span>,opts=<span class="built_in">dict</span>(</span><br><span class="line">    rownames=[<span class="string">&quot;x1&quot;</span>,<span class="string">&quot;x2&quot;</span>,<span class="string">&quot;x3&quot;</span>,<span class="string">&quot;x4&quot;</span>],</span><br><span class="line">    columnnames=[<span class="string">&quot;x1&quot;</span>,<span class="string">&quot;x2&quot;</span>,<span class="string">&quot;x3&quot;</span>,<span class="string">&quot;x4&quot;</span>],</span><br><span class="line">    title=<span class="string">&quot;çƒ­åŠ›å›¾&quot;</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/image-20220728200156034.png" alt="image-20220728200156034" style="zoom:50%;">
<p><strong>å›¾ç‰‡</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–°ç¯å¢ƒå¹¶æ˜¾ç¤ºæ‰‹å†™æ•°å­—é›†åˆ</span></span><br><span class="line">bx=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> step,(x,by) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">    bx=x</span><br><span class="line">    <span class="keyword">if</span> step&gt;<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">vis.image(bx[<span class="number">0</span>,...],win=<span class="string">&quot;one image&quot;</span>,env=<span class="string">&quot;Myimage&quot;</span>,opts=<span class="built_in">dict</span>(</span><br><span class="line">    title=<span class="string">&quot;å›¾ç‰‡&quot;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªå›¾åƒç½‘ç»œ</span></span><br><span class="line">vis.images(bx,win=<span class="string">&quot;batch image&quot;</span>,env=<span class="string">&quot;Myimage&quot;</span>,nrow=<span class="number">16</span>,opts=<span class="built_in">dict</span>(</span><br><span class="line">    title=<span class="string">&quot;ä¸€æ‰¹å›¾ç‰‡&quot;</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/image-20220728200203965.png" alt="image-20220728200203965" style="zoom:50%;">
<p><strong>æ–‡æœ¬</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯è§†åŒ–ä¸€æ®µæ–‡æœ¬</span></span><br><span class="line">text=<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">asdsadasfhoisauew </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">vis.text(text,win=<span class="string">&quot;text plot&quot;</span>,env=<span class="string">&quot;Myimage&quot;</span>,opts=<span class="built_in">dict</span>(</span><br><span class="line">    title=<span class="string">&quot;æ–‡æœ¬&quot;</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%20%E5%9F%BA%E4%BA%8EPyTorch%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/image-20220728200210071.png" alt="image-20220728200210071" style="zoom:50%;">
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç¬¬ä¸‰ç«   æ·±åº¦ç¥ç»ç½‘ç»œ]]></title>
      <url>/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%20DNN%20%E6%B7%B1%E5%BA%A6%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      <content type="html"><![CDATA[<h1>ç¬¬ä¸‰ç«   æ·±åº¦ç¥ç»ç½‘ç»œ</h1>
<hr>
<h2 id="1-éšæœºæ¢¯åº¦ä¸‹é™">1.  éšæœºæ¢¯åº¦ä¸‹é™</h2>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ªæ¨¡å‹çš„æŸå¤±å‡½æ•°æ¥çº¦æŸæˆ‘ä»¬çš„è®­ç»ƒè¿‡ç¨‹ï¼Œè®©å…¶å‘ç€ä½¿ç”¨è€…æƒ³è¦çš„æ–¹å‘å‘å±•ã€‚é’ˆå¯¹åˆ†ç±»é—®é¢˜å¯ä»¥ç”¨äº¤å‰ç†µï¼Œé’ˆå¯¹å›å½’é—®é¢˜å¯ä»¥ç”¨å‡æ–¹æ ¹è¯¯å·®ã€‚</p>
<p>æ¨¡å‹çš„è®­ç»ƒå¹¶ä¸æ˜¯æ¼«æ— ç›®çš„çš„ï¼Œè€Œæ˜¯éœ€è¦å‘ç€æŸå¤±å‡½æ•°æœ€å°‘çš„æ–¹å‘å‘å±•ã€‚æ­¤æ—¶å°±éœ€è¦åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚</p>
<p>æ¢¯åº¦ä¸‹é™ç®—æ³•(gradient descent)æ˜¯ä¸€ä¸ªä¸€é˜¶æœ€ä¼˜åŒ–ç®—æ³•ï¼Œé€šå¸¸ä¹Ÿç§°ä¸ºæœ€é€Ÿä¸‹é™æ³•ã€‚ä½¿ç”¨è§„å®šæ­¥é•¿è·ç¦»å‘ç€å‡½æ•°å½“å‰ç‚¹æ¢¯åº¦çš„åæ–¹å‘å‰è¿›ï¼Œä¸æ–­è¿­ä»£æœç´¢ç›´åˆ°é™·å…¥å±€éƒ¨æœ€ä¼˜è§£ã€‚</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>W</mi><mo>:</mo><mo>=</mo><mi>W</mi><mo>âˆ’</mo><mi>Î±</mi><mi mathvariant="normal">â–½</mi><mi>W</mi><mspace linebreak="newline"></mspace><mi>b</mi><mo>:</mo><mo>=</mo><mi>b</mi><mo>âˆ’</mo><mi>Î±</mi><mi mathvariant="normal">â–½</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">W:=W-\alpha\triangledown W
\\
b:=b-\alpha\triangledown b
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mord amsrm">â–½</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mord amsrm">â–½</span><span class="mord mathnormal">b</span></span></span></span></span></p>
<p>ç”±äºæ™®é€šçš„æ¢¯åº¦ä¸‹é™ç®—æ³•æ¯æ¬¡æ›´æ–°éƒ½éœ€è¦ä½¿ç”¨æ‰€æœ‰æ ·æœ¬ï¼Œå½“æ ·æœ¬æ€»é‡ç‰¹åˆ«å¤§æ—¶ï¼Œå¯¹ç®—æ³•çš„é€Ÿåº¦å½±å“ç‰¹åˆ«å¤§ï¼Œäºæ˜¯å°±æœ‰äº†éšæœºæ¢¯åº¦ä¸‹é™(stochastic gradient descent,SGD)ç®—æ³•ï¼Œæ¯æ¬¡åªéšæœºå–éƒ¨åˆ†æ ·æœ¬è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ—¶ï¼Œé€šå¸¸ä¼šæŒ‡å®šä¸€ä¸ªå­¦ä¹ ç‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span> ï¼Œä½†è¯¥å­¦ä¹ ç‡æ¯”è¾ƒéš¾ç¡®å®šï¼Œä¸”å„ä¸ªå‚æ•°ä½¿ç”¨çš„å­¦ä¹ ç‡è¿˜æœ‰å¯èƒ½ä¸åŒã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥é‡‡ç”¨å˜åŒ–å­¦ä¹ ç‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span></span></span></span> è¿›è¡Œè®­ç»ƒï¼Œå¦‚åœ¨ç½‘ç»œå‰æœŸä½¿ç”¨å¤§å­¦ä¹ ç‡è¿›è¡Œæ›´æ–°ï¼Œè€ŒåæœŸåˆ™é‡‡ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ã€‚SGDçš„å¦ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜è§£ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå­¦è€…æå‡ºäº†åŸºäºåŠ¨é‡çš„éšæœºæ¢¯åº¦ç®—æ³•ã€‚åœ¨ä¼˜åŒ–æ—¶å¼•å…¥åŠ¨é‡ï¼Œèƒ½å¤ŸåŠ é€Ÿå­¦ä¹ ï¼Œç‰¹åˆ«æ˜¯é¢å¯¹å°è€Œè¿ç»­ä¸”æœ‰å¾ˆå¤šå™ªå£°çš„æ¢¯åº¦ã€‚å¼•å…¥åŠ¨é‡åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¸ä»…å¢åŠ äº†å­¦ä¹ å‚æ•°çš„ç¨³å®šæ€§ï¼Œè€Œä¸”ä¼šæ›´å¿«å­¦ä¹ åˆ°æ”¶æ•›çš„å‚æ•°ã€‚</p>
<p>åŸæœ¬çš„æ¢¯åº¦ä¸‹é™ç®—æ³•æ›´æ–°ä»…ä¸å½“å‰æ¢¯åº¦å€¼ç›¸å…³ï¼Œè€Œä¸æ¶‰åŠä¹‹å‰çš„æ¢¯åº¦ã€‚è€ŒåŠ¨é‡æ¢¯åº¦ä¸‹é™æ³•åˆ™å¯¹å„ä¸ªmini-batchæ±‚å¾—æ¢¯åº¦<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â–½</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">\bigtriangledown W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">â–½</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â–½</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">\bigtriangledown b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">â–½</span><span class="mord mathnormal">b</span></span></span></span>ä½¿ç”¨æŒ‡æ•°åŠ æƒå¹³å‡å¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mo>â–½</mo><mi>W</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{\bigtriangledown W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â–½</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mo>â–½</mo><mi>b</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{\bigtriangledown b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â–½</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>ã€‚å¹¶ä½¿ç”¨æ–°çš„å‚æ•°è¿›è¡Œæ›´æ–°ã€‚(æ»šé›ªçƒ)</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>V</mi><mrow><mo>â–½</mo><msub><mi>W</mi><mn>0</mn></msub></mrow></msub><mo>=</mo><mn>0</mn><mspace linebreak="newline"></mspace><msub><mi>V</mi><mrow><mo>â–½</mo><msub><mi>W</mi><mn>1</mn></msub></mrow></msub><mo>=</mo><mi>Î²</mi><msub><mi>V</mi><mrow><mo>â–½</mo><msub><mi>W</mi><mn>0</mn></msub></mrow></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mi>Î²</mi><mo stretchy="false">)</mo><mrow><mo>â–½</mo><msub><mi>W</mi><mn>1</mn></msub></mrow><mspace linebreak="newline"></mspace><msub><mi>V</mi><mrow><mo>â–½</mo><msub><mi>W</mi><mn>2</mn></msub></mrow></msub><mo>=</mo><mi>Î²</mi><msub><mi>V</mi><mrow><mo>â–½</mo><msub><mi>W</mi><mn>1</mn></msub></mrow></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mi>Î²</mi><mo stretchy="false">)</mo><mrow><mo>â–½</mo><msub><mi>W</mi><mn>2</mn></msub></mrow><mspace linebreak="newline"></mspace><mo>â‹¯</mo></mrow><annotation encoding="application/x-tex">V_{\bigtriangledown W_0}=0
\\
V_{\bigtriangledown W_1}=\beta V_{\bigtriangledown W_0}+(1-\beta){\bigtriangledown W_1}
\\
V_{\bigtriangledown W_2}=\beta V_{\bigtriangledown W_1}+(1-\beta){\bigtriangledown W_2}
\\
\cdots
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â–½</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â–½</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â–½</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span><span class="mord"><span class="mord">â–½</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â–½</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â–½</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span><span class="mord"><span class="mord">â–½</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.313em;"></span><span class="minner">â‹¯</span></span></span></span></span></p>
<p>ä½¿ç”¨æŒ‡æ•°åŠ æƒå¹³å‡ä¹‹åçš„æ¢¯åº¦ä»£æ›¿åŸæ¢¯åº¦è¿›è¡Œå‚æ•°æ›´æ–°ï¼Œæ¯ä¸ªæŒ‡æ•°åŠ æƒå¹³å‡åçš„æ¢¯åº¦éƒ½å«æœ‰ä¹‹å‰æ‰€æœ‰æ¢¯åº¦çš„ä¿¡æ¯ã€‚</p>
<p>åœ¨è®­ç»ƒå¼€å§‹çš„æ—¶å€™ï¼Œå‚æ•°ä¼šä¸æœ€ç»ˆçš„æœ€ä¼˜å€¼ç‚¹è·ç¦»è¾ƒè¿œï¼Œå› æ­¤éœ€è¦ä½¿ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡ã€‚è€Œç»è¿‡å‡ è½®çš„è®­ç»ƒåï¼Œåˆ™éœ€è¦å‡å°å­¦ä¹ ç‡ã€‚æœ‰äº›ç®—æ³•æ˜¯ä¼˜åŒ–äº†å­¦ä¹ ç‡ç­‰å‚æ•°çš„å˜åŒ–ï¼Œå¦‚ä¸€ç³»åˆ—è‡ªé€‚åº”ç®—æ³•Adadeltaã€RMSPropå’ŒAdamã€‚</p>
<hr>
<h2 id="2-ä¼˜åŒ–å™¨">2.  ä¼˜åŒ–å™¨</h2>
<p>Pytorchä¸­çš„optimæ¨¡å—ï¼Œæä¾›äº†å¤šç§å¯ç›´æ¥ä½¿ç”¨çš„ä¼˜åŒ–ç®—æ³•ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">FUC</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">torch.optim.Adadelta()</td>
<td style="text-align:center">Adadeltaç®—æ³•</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.Adagrad()</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.Adam()</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.Adamax()</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.ASGD()</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.LBFGS()</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.RMSprop()</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.SGD()</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">torch.optim.Rprop()</td>
<td style="text-align:center">-</td>
</tr>
</tbody>
</table>
<p>ä»¥Adamç±»ä¸ºä¾‹ï¼Œå…¶å‚æ•°çš„ä½¿ç”¨æƒ…å†µå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">torch.optim.Adam(</span><br><span class="line">    params, <span class="comment"># éœ€è¦ä¼˜åŒ–çš„å‚æ•°è¿­ä»£å™¨ï¼Œé€šå¸¸ä¸ºmodule.parameters()</span></span><br><span class="line">    lr=<span class="number">0.001</span>, <span class="comment"># ç®—æ³•å­¦ä¹ ç‡</span></span><br><span class="line">    betas=(<span class="number">0.9</span>,<span class="number">0.999</span>), <span class="comment"># è®¡ç®—æ¢¯åº¦åŠæ¢¯åº¦å¹³æ–¹çš„è¿è¡Œå¹³å‡å€¼ç³»æ•°</span></span><br><span class="line">    eps=<span class="number">1e-08</span>, <span class="comment"># ä¸ºäº†å¢åŠ æ•°å€¼è®¡ç®—çš„ç¨³å®šæ€§è€ŒåŠ åˆ°åˆ†æ¯é‡Œçš„é¡¹</span></span><br><span class="line">    weight_decay=<span class="number">0</span> <span class="comment"># æƒé‡è¡°å‡(L2æƒ©ç½š)</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>ä¸‹é¢æ„å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•ç½‘ç»œï¼Œç”¨äºæ¼”ç¤ºä¼˜åŒ–å™¨ã€‚</p>
<ul>
<li>
<p>å’±å…ˆæä¸€ä¸ªæµ‹è¯•ç½‘ç»œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestNet</span>(nn.Module):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># ç»§æ‰¿ä¸‹moduleç±»</span></span><br><span class="line">        <span class="built_in">super</span>(TestNet,self).__init__()</span><br><span class="line">        <span class="comment"># å®šä¹‰ä¸€ä¸‹éšè—å±‚</span></span><br><span class="line">        self.hidden=nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">13</span>,<span class="number">10</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># å®šä¹‰é¢„æµ‹å›å½’å±‚</span></span><br><span class="line">        self.regression=nn.Linear(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># å®šä¹‰å‘å‰ä¼ æ’­è·¯å¾„</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">            x=self.hidden(x)</span><br><span class="line">            output=self.regression(x)</span><br><span class="line">            <span class="keyword">return</span> output</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸ªå¯¹è±¡</span></span><br><span class="line">testnet=TestNet()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç„¶åå»å®šä¹‰æˆ‘ä»¬çš„ä¼˜åŒ–å™¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">optimizer=Adam(testnet.parameters(),lr=<span class="number">0.001</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å½“ç„¶å¦‚æœæƒ³è¦ç»™æ¯ä¸€å±‚æ·»åŠ ä¸åŒçš„å­¦ä¹ ç‡ï¼Œå¯ä»¥æŒ‡å®šå‚æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">optimizer=Adam(</span><br><span class="line">    [        &#123;<span class="string">&quot;params&quot;</span>:testnet.hidden.parameters(),<span class="string">&quot;lr&quot;</span>:<span class="number">0.001</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;params&quot;</span>:testnet.regression.parameters(),<span class="string">&quot;lr&quot;</span>:<span class="number">0.01</span>&#125;,</span><br><span class="line">    ],</span><br><span class="line">    lr=<span class="number">1e-2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æœ‰äº†ä¼˜åŒ–å™¨åï¼Œéœ€è¦å¯¹å‚æ•°è¿›è¡Œæ›´æ–°ï¼Œä¸€èˆ¬çš„æ­¥éª¤æ˜¯æ¢¯åº¦æ¸…ç©ºã€åå‘ä¼ æ’­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="built_in">input</span>, target <span class="keyword">in</span> dataset:</span><br><span class="line">	<span class="comment"># æ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œæ¢¯åº¦æ¸…é›¶</span></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    <span class="comment"># è®¡ç®—é¢„æµ‹å€¼</span></span><br><span class="line">    output=testnetst(<span class="built_in">input</span>)</span><br><span class="line">    <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">    loss=loss_fn(output,target)</span><br><span class="line">    <span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">    loss.backward()</span><br><span class="line">    <span class="comment"># æ›´æ–°å‚æ•°</span></span><br><span class="line">    optimizer.step()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é’ˆå¯¹å­¦ä¹ ç‡çš„è°ƒæ•´ï¼Œå¯ä»¥ä½¿ç”¨torch.optim.lr_scheduleræ¨¡å—ä¸‹çš„è°ƒæ•´æ–¹å¼ï¼Œä¸åŒçš„epochå¯ä»¥è®¾ç½®å¤§å°ä¸åŒçš„å­¦ä¹ ç‡ã€‚</p>
<ul>
<li>
<p><code>lr_scheduler.LambdaLR(optimize,lr_lambda,last_epoch=-1)</code>last_epochè¡¨ç¤ºåˆé€‚å¼€å§‹è°ƒæ•´å­¦ä¹ ç‡ï¼Œ-1è¡¨ç¤ºè®¾ç½®ä¸ºåˆå§‹å€¼ï¼Œå¯ä»¥ç›´æ¥è°ƒæ•´</p>
</li>
<li>
<p><code>lr_scheduler.StepLR(optimizer,step_size,gamma=0.1,last_epoch=-1)</code>ç­‰é—´éš”è°ƒæ•´å­¦ä¹ ç‡ï¼Œå­¦ä¹ ç‡æ¯ç»è¿‡step_sizeæŒ‡å®šçš„æ—¶é—´é—´éš”è°ƒæ•´ä¸ºåŸæ¥çš„gammaå€(é—´éš”æŒ‡çš„ä¸€èˆ¬æ˜¯epochçš„é—´éš”)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€èˆ¬åœ¨æ­¤æ—¶å®šä¹‰å­¦ä¹ ç‡è°ƒæ•´æ–¹æ³•</span></span><br><span class="line"><span class="comment"># å°†ä¼˜åŒ–å™¨å°è£…è¿›å»</span></span><br><span class="line">scheduler=...</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">	train(...)</span><br><span class="line">	validate(...)</span><br><span class="line">	<span class="comment"># æ›´æ–°å­¦ä¹ ç‡</span></span><br><span class="line">	scheduler.step(...)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="3-æŸå¤±å‡½æ•°">3.  æŸå¤±å‡½æ•°</h2>
<p>æŸå¤±å‡½æ•°æ˜¯ä¼˜åŒ–å¯¹è±¡ï¼ŒPyTorchæä¾›äº†éƒ¨åˆ†API</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç±»</th>
<th style="text-align:center">ç®—æ³•</th>
<th style="text-align:center">é€‚ç”¨é—®é¢˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">nn.L1Loss()</td>
<td style="text-align:center">å¹³å‡ç»å¯¹å€¼è¯¯å·®</td>
<td style="text-align:center">å›å½’</td>
</tr>
<tr>
<td style="text-align:center">nn.MSELoss()</td>
<td style="text-align:center">å‡æ–¹è¯¯å·®</td>
<td style="text-align:center">å›å½’</td>
</tr>
<tr>
<td style="text-align:center">nn.CrossEntropyLoss()</td>
<td style="text-align:center">äº¤å‰ç†µ</td>
<td style="text-align:center">å¤šåˆ†ç±»</td>
</tr>
<tr>
<td style="text-align:center">nn.NLLLoss()</td>
<td style="text-align:center">è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°</td>
<td style="text-align:center">å¤šåˆ†ç±»</td>
</tr>
<tr>
<td style="text-align:center">nn.NLLLoss2d()</td>
<td style="text-align:center">å›¾ç‰‡è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°</td>
<td style="text-align:center">å›¾åƒåˆ†å‰²</td>
</tr>
<tr>
<td style="text-align:center">nn.KLDivLoss()</td>
<td style="text-align:center">KLæ•£åº¦</td>
<td style="text-align:center">å›å½’</td>
</tr>
<tr>
<td style="text-align:center">nn.BCELoss()</td>
<td style="text-align:center">äºŒåˆ†ç±»äº¤å‰ç†µ</td>
<td style="text-align:center">äºŒåˆ†ç±»</td>
</tr>
<tr>
<td style="text-align:center">nn.MarginRankingLoss()</td>
<td style="text-align:center">è¯„ä»·ç›¸ä¼¼åº¦</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">nn.MultiLabelMarginLoss()</td>
<td style="text-align:center">å¤šæ ‡ç­¾åˆ†ç±»</td>
<td style="text-align:center">å¤šæ ‡ç­¾åˆ†ç±»</td>
</tr>
<tr>
<td style="text-align:center">nn.SmoothL1Loss()</td>
<td style="text-align:center">å¹³æ»‘L1</td>
<td style="text-align:center">å›å½’</td>
</tr>
<tr>
<td style="text-align:center">nn.SoftMarginLoss()</td>
<td style="text-align:center">å¤šæ ‡ç­¾äºŒåˆ†ç±»</td>
<td style="text-align:center">å¤šæ ‡ç­¾åˆ†ç±»</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="4-è¿‡æ‹Ÿåˆ">4.  è¿‡æ‹Ÿåˆ</h2>
<p>åœ¨ç»Ÿè®¡å­¦ä¸Šï¼Œè¿‡æ‹Ÿåˆæ˜¯æŒ‡è¿‡äºç²¾ç¡®åŒ¹é…ç‰¹å®šæ•°æ®é›†ï¼Œå¯¼è‡´æ¨¡å‹ä¸èƒ½è‰¯å¥½æ‹Ÿåˆå…¶ä»–æ•°æ®æˆ–é¢„æµ‹æœªæ¥è§‚æµ‹ç»“æœçš„ç°è±¡ã€‚</p>
<h3 id="4-1-è¿‡æ‹Ÿåˆçš„æ¦‚å¿µ">4.1  è¿‡æ‹Ÿåˆçš„æ¦‚å¿µ</h3>
<p>æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è¿‡æ‹Ÿåˆé€šå¸¸æ˜¯æŒ‡é’ˆå¯¹è®¾è®¡å¥½çš„æ·±åº¦å­¦ä¹ ç½‘ç»œï¼Œåœ¨ä½¿ç”¨è®­ç»ƒæ•°æ®é›†è®­ç»ƒæ—¶ï¼Œåœ¨è®­ç»ƒæ•°æ®é›†ä¸Šèƒ½å¤Ÿè·å¾—å¾ˆé«˜çš„è¯†åˆ«ç²¾åº¦ï¼Œæˆ–è€…å¾ˆä½çš„å‡æ–¹æ ¹è¯¯å·®ï¼Œä½†è¯¥æ¨¡å‹å¯¹æµ‹è¯•é›†çš„æµ‹è¯•ç»“æœåè€Œä¸å°½äººæ„ã€‚</p>
<p>ç”±äºæ·±åº¦å­¦ä¹ å­˜åœ¨å¤§é‡å‚æ•°ï¼Œä½¿å¾—å…¶åœ¨å„é¢†åŸŸçš„è¡¨ç°ä¼˜å¼‚ï¼Œä½†ä¹Ÿä¼šå¯¼è‡´å…¶æ›´å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</p>
<hr>
<h3 id="4-2-é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ–¹æ³•">4.2 é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ–¹æ³•</h3>
<ul>
<li>å¢åŠ æ•°æ®é‡</li>
<li>åˆç†çš„æ•°æ®åˆ‡åˆ†</li>
<li>æ­£åˆ™åŒ–æ–¹æ³•
<ul>
<li>åœ¨æŸå¤±å‡½æ•°ä¸Šæ·»åŠ å¯¹è®­ç»ƒå‚æ•°çš„æƒ©ç½šèŒƒæ•°ï¼Œé€šè¿‡æƒ©ç½šèŒƒæ•°å¯¹å’¬è®­ç»ƒçš„å‚æ•°è¿›è¡Œçº¦æŸï¼Œé˜²æ­¢æ¨¡å‹è¿‡æ‹Ÿåˆã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mn>1</mn></mrow><annotation encoding="application/x-tex">L1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mord">1</span></span></span></span>èŒƒæ•°ç›®çš„æ˜¯è®©å‚æ•°çš„ç»å¯¹å€¼æœ€å°ï¼Œè¶‹å‘äºä½¿ç”¨æ›´å°‘çš„å‚æ•°ï¼Œè€Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">L2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mord">2</span></span></span></span>èŒƒæ•°ç›®çš„æ˜¯å°†å‚æ•°çš„å¹³æ–¹å’Œæœ€å°åŒ–ï¼Œä¼šè¶‹å‘äºä½¿ç”¨æ›´å¤šçš„å°å‚æ•°ã€‚</li>
</ul>
</li>
<li>Dropout
<ul>
<li>å¼•å…¥Dropoutå±‚ï¼Œæ¯ä¸ªè®­ç»ƒæ‰¹æ¬¡ä¸­ï¼Œé€šè¿‡å¿½ç•¥ä¸€å®šç™¾åˆ†æ¯”ç¥ç»å…ƒæ•°é‡ï¼Œæ¥å‡å°‘ç½‘ç»œçš„è¿‡æ‹Ÿåˆç°è±¡ã€‚å³ï¼šåœ¨ç½‘ç»œå‘å‰ä¼ æ’­æ—¶ï¼Œè®©æŸä¸€ç¥ç»å…ƒä¾ç…§æ¦‚ç‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>åœæ­¢å·¥ä½œã€‚è¿™æ ·èƒ½å¤Ÿå¾—åˆ°æ³›åŒ–èƒ½åŠ›æ›´å¼ºçš„ç½‘ç»œï¼Œé²æ£’æ€§ä¹Ÿæ›´å¥½ï¼Œä½†æ˜¯æœ‰å¯èƒ½è¿‡åº¦ä¾èµ–æŸäº›å±€éƒ¨ç‰¹å¾ã€‚</li>
</ul>
</li>
<li>æå‰ç»“æŸè®­ç»ƒ</li>
</ul>
<hr>
<h2 id="5-å‚æ•°åˆå§‹åŒ–">5.  å‚æ•°åˆå§‹åŒ–</h2>
<p>ä½¿ç”¨åˆå§‹åŒ–æ–¹æ³•èƒ½å¤Ÿè·å¾—æ›´åŠ ç¨³å®šçš„ç»“æœã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">FUC</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">nn.init.uniform_(tensor,a=0.0,b=1.0)</td>
<td style="text-align:center">ä»å‡åŒ€åˆ†å¸ƒU(a,b)ä¸­ç”Ÿæˆå€¼</td>
</tr>
<tr>
<td style="text-align:center">nn.init.normal_(tensor,mean=0.0,std=1.0)</td>
<td style="text-align:center">ä»ç»™å®šå‡å€¼meanå’Œæ ‡å‡†å·®stdçš„æ­£æ€åˆ†å¸ƒä¸­å¡«å……å€¼</td>
</tr>
<tr>
<td style="text-align:center">nn.init.constant_(tensor,val)</td>
<td style="text-align:center">ä½¿ç”¨é¢„è®¾çš„å¸¸é‡æ¥å¡«å……</td>
</tr>
<tr>
<td style="text-align:center">nn.init.eye_(tensor)</td>
<td style="text-align:center">ç”¨å•ä½çŸ©é˜µæ¥å¡«å……</td>
</tr>
<tr>
<td style="text-align:center">nn.init.dirac_(tensor)</td>
<td style="text-align:center">ä½¿ç”¨Dirac delatå‡½æ•°å¡«å……</td>
</tr>
<tr>
<td style="text-align:center">nn.init.xavier_uniform_(tensor,gain=1.0)</td>
<td style="text-align:center">ä½¿ç”¨Glorot initializationå‡åŒ€åˆ†å¸ƒç”Ÿæˆ</td>
</tr>
<tr>
<td style="text-align:center">nn.init.xavier_normal_(tensor,gain=1.0)</td>
<td style="text-align:center">ä½¿ç”¨Glorot initializationæ­£æ€åˆ†å¸ƒç”Ÿæˆ</td>
</tr>
</tbody>
</table>
<p><strong>æ¡ˆä¾‹</strong></p>
<p><strong>é’ˆå¯¹æŸä¸€å±‚æƒé‡è¿›è¡Œåˆå§‹åŒ–</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªå·ç§¯å±‚</span></span><br><span class="line">conv1=nn.Conv2d(<span class="number">3</span>,<span class="number">16</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨æ ‡å‡†æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–æƒé‡</span></span><br><span class="line"><span class="comment"># éšæœºæ•°ç§å­ï¼Œèƒ½å¤Ÿè®©ç»“æœå¤ç°</span></span><br><span class="line">torch.manual_seed(<span class="number">123</span>)</span><br><span class="line">torch.nn.init.normal(conv1.weight,mean=<span class="number">0</span>,std=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç›´æ–¹å›¾å¯è§†åŒ–å…¶æƒé‡</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">6</span>))</span><br><span class="line">plt.hist(conv1.weight.data.numpy().reshape((-<span class="number">1</span>,<span class="number">1</span>)),bins=<span class="number">30</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%20DNN%20%E6%B7%B1%E5%BA%A6%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200100447.png" alt="image-20220728200100447" style="zoom:50%;">
<p>ä¸Šè¿°æ–¹æ³•å®šä¹‰äº†å…¶æƒé‡ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¯¹å…¶åç½®è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nn.init.constant(conv1.bias,val=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>
<p><strong>é’ˆå¯¹æ•´ä¸ªç½‘ç»œçš„æƒé‡åˆå§‹åŒ–æ–¹æ³•</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹ä¸€ä¸ªæµ‹è¯•ç½‘ç»œ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestNet</span>(nn.Module):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(TestNet,self).__init__()</span><br><span class="line">        <span class="comment"># å·ç§¯å±‚</span></span><br><span class="line">        self.conv1=nn.Conv2d(<span class="number">3</span>,<span class="number">16</span>,<span class="number">3</span>)</span><br><span class="line">        <span class="comment"># éšè—å±‚</span></span><br><span class="line">        self.hidden=nn.Sequential(</span><br><span class="line">            <span class="comment"># è¯´èµ·æ¥ï¼Œçº¿æ€§å±‚çš„ioæ˜¯ç‰¹å¾ä¸ªæ•°</span></span><br><span class="line">            <span class="comment"># è€Œå·ç§¯å±‚çš„ioæ˜¯é€šé“æ•°</span></span><br><span class="line">            nn.Linear(<span class="number">100</span>,<span class="number">100</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">100</span>,<span class="number">50</span>),</span><br><span class="line">            nn.Softplus()</span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># çº¿æ€§é¢„æµ‹å±‚</span></span><br><span class="line">        self.cla=nn.Linear(<span class="number">50</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®šä¹‰å‘å‰ä¼ æ’­</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        <span class="comment"># å…ˆè¿‡ä¸€æ¬¡å·ç§¯</span></span><br><span class="line">        x=self.conv1(x)</span><br><span class="line">        <span class="comment"># ç°åœ¨è¦è¿‡çº¿æ€§å±‚ï¼Œå åŠ å‹ç¼©</span></span><br><span class="line">        x=x.view(x.shape[<span class="number">0</span>],-<span class="number">1</span>)</span><br><span class="line">        x=self.hidden(x)</span><br><span class="line">        <span class="keyword">return</span> self.cla(x)</span><br><span class="line"></span><br><span class="line">testNet=TestNet()</span><br></pre></td></tr></table></figure>
<p>æ¨¡å‹çš„ç»“æ„ä»¥å¦‚ä¸‹æ–¹å¼å­˜å‚¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">TestNet(</span><br><span class="line">  (conv1): Conv2d(<span class="number">3</span>, <span class="number">16</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>), stride=(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">  (hidden): Sequential(</span><br><span class="line">    (<span class="number">0</span>): Linear(in_features=<span class="number">100</span>, out_features=<span class="number">100</span>, bias=<span class="literal">True</span>)</span><br><span class="line">    (<span class="number">1</span>): ReLU()</span><br><span class="line">    (<span class="number">2</span>): Linear(in_features=<span class="number">100</span>, out_features=<span class="number">50</span>, bias=<span class="literal">True</span>)</span><br><span class="line">    (<span class="number">3</span>): Softplus(beta=<span class="number">1</span>, threshold=<span class="number">20</span>)</span><br><span class="line">  )</span><br><span class="line">  (cla): Linear(in_features=<span class="number">50</span>, out_features=<span class="number">10</span>, bias=<span class="literal">True</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‡½æ•°çš„æ–¹å¼ï¼Œå¯¹ç½‘ç»œçš„æƒé‡è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">init_weight</span>(<span class="params">m</span>):</span><br><span class="line">    <span class="comment"># æˆ‘ä»¬å¯¹æ¯ä¸€å±‚çš„å‚æ•°è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­ç±»å‹</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(m,nn.Conv2d):</span><br><span class="line">        <span class="comment"># å·ç§¯å±‚çš„è¯ç”¨æ ‡å‡†æ­£æ€åˆ†å¸ƒ</span></span><br><span class="line">        nn.init.normal(m.weight,mean=<span class="number">0.0</span>,std=<span class="number">0.5</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">isinstance</span>(m,nn.Linear):</span><br><span class="line">        <span class="comment"># å…¨è¿æ¥å±‚</span></span><br><span class="line">        nn.init.uniform(m.weight,a=-<span class="number">0.1</span>,b=<span class="number">0.1</span>)</span><br><span class="line">        <span class="comment"># å°†åç½®è®¾å®šä¸º0.01</span></span><br><span class="line">        m.bias.data.fill_(<span class="number">0.01</span>)</span><br></pre></td></tr></table></figure>
<p>æœ€åé€šè¿‡applyæ–¹æ³•è¿ç”¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç„¶åmoduleè‡ªå¸¦ä¸€ä¸ªapplyæ¥å£ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªæ¥å£å°±èƒ½å°†å®šä¹‰çš„åˆå§‹åŒ–æ–¹æ³•é€å±‚è¿ç”¨</span></span><br><span class="line">torch.manual_seed(<span class="number">12</span>)</span><br><span class="line">testNet.apply(init_weight)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="6-è‡ªå®šä¹‰ç½‘ç»œ">6.  è‡ªå®šä¹‰ç½‘ç»œ</h2>
<p>æœ¬ç« ä»¥æ¡ˆä¾‹çš„å½¢å¼è¿›è¡Œã€‚</p>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œã€‚</p>
<p><strong>æ¨¡å—å¯¼å…¥</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> SGD</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_boston</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<p><strong>æ•°æ®åŠ è½½</strong></p>
<p>æˆ‘ä»¬ä»¥skè‡ªå¸¦çš„æ³¢å£«é¡¿æˆ¿ä»·ä¿¡æ¯æ•°æ®ä½œä¸ºæ•°æ®æº</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¢å£«é¡¿æˆ¿ä»·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥çœ‹çœ‹è¿™æ˜¯ä¸ªå•¥</span></span><br><span class="line">boston_x,boston_y=load_boston(return_X_y=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;X&quot;</span>,boston_x.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Y&quot;</span>,boston_y.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># X (506, 13)</span></span><br><span class="line"><span class="comment"># Y (506,)</span></span><br></pre></td></tr></table></figure>
<p>æˆ¿ä»·ä¿¡æ¯åˆ†å¸ƒæƒ…å†µå¦‚ä¸‹:</p>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%20DNN%20%E6%B7%B1%E5%BA%A6%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200108707.png" alt="image-20220728200108707" style="zoom:50%;">
<p>æˆ‘ä»¬å…ˆç»™æ•°æ®åšä¸€ä¸ªæ ‡å‡†åŒ–ï¼Œç„¶åé€šè¿‡è½¬åŒ–æˆTensorè¯»å…¥æ•°æ®åŠ è½½å™¨ä¸­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¥ç€åšä¸€ä¸ªæ ‡å‡†åŒ–</span></span><br><span class="line">tem=StandardScaler(with_mean=<span class="literal">True</span>,with_std=<span class="literal">True</span>)</span><br><span class="line">boston_xs=StandardScaler(boston_x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®æ ‡å‡†åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†æ¶ˆé™¤é‡çº²çš„å½±å“ï¼Œé€‚åº”æƒé‡</span></span><br><span class="line"><span class="comment"># æ¥ç€éœ€è¦å°†æ•°æ®è½¬åŒ–ä¸ºTensor</span></span><br><span class="line">train_xt=torch.from_numpy(boston_xs.astype(np.float32))</span><br><span class="line">train_yt=torch.from_numpy(boston_y.astype(np.float32))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åå‘¢ï¼Œé€šè¿‡torch.utils.dataè¿›è¡Œå¼ é‡æ•°æ®é¢„å¤„ç†</span></span><br><span class="line"><span class="comment"># é¦–å…ˆæ˜¯æ•°æ®æ•´åˆ</span></span><br><span class="line">train_data=Data.TensorDataset(train_xt,train_yt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥ç€å’±å®šä¹‰ä¸€ä¸ªDataLoaderï¼Œæ–¹ä¾¿æ‰¹å¤„ç†</span></span><br><span class="line">train_loader=Data.DataLoader(</span><br><span class="line">    dataset=train_data,</span><br><span class="line">    batch_size=<span class="number">32</span>,</span><br><span class="line">    shuffle=<span class="literal">True</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>å¤šå±‚æ„ŸçŸ¥æœºä¸æ¨¡å‹è®­ç»ƒ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æ¥ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MLPmodel</span>(nn.Module):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MLPmodel,self).__init__()</span><br><span class="line">        self.hidden=nn.Linear(<span class="number">13</span>,<span class="number">10</span>,<span class="literal">True</span>)</span><br><span class="line">        self.activel=nn.ReLU()</span><br><span class="line">        self.hidden2=nn.Linear(<span class="number">10</span>,<span class="number">10</span>)</span><br><span class="line">        self.active2=nn.Softplus()</span><br><span class="line">        self.regression=nn.Linear(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        x=self.hidden(x)</span><br><span class="line">        x=self.activel(x)</span><br><span class="line">        x=self.hidden2(x)</span><br><span class="line">        x=self.active2(x)</span><br><span class="line">        <span class="keyword">return</span> self.regression(x)</span><br><span class="line"></span><br><span class="line">mlp=MLPmodel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥ç€æˆ‘ä»¬éœ€è¦å®šä¹‰ä¼˜åŒ–å™¨</span></span><br><span class="line">optimizer=SGD(mlp.parameters(),lr=<span class="number">0.01</span>)</span><br><span class="line"><span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°</span></span><br><span class="line">loss_fn=nn.MSELoss()</span><br><span class="line">loss_list=[]</span><br><span class="line"><span class="comment"># è¿›è¡Œè®­ç»ƒ</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">    <span class="keyword">for</span> step,(x,y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        <span class="comment"># æ‰¹å¤„ç†ï¼Œæ¯ä¸€æ‰¹æ‹¿å‡º32ä¸ªæ•°æ®</span></span><br><span class="line">        output=mlp(x).flatten() <span class="comment"># è¿™é‡Œæ˜¯è°ƒç”¨forwardæ–¹æ³•ï¼Œå¾—åˆ°batchçš„é¢„æµ‹ç»“æœ</span></span><br><span class="line">        train_loss=loss_fn(output,y) <span class="comment"># å‡æ–¹æ ¹è¯¯å·®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ›´æ–°æ¢¯åº¦ä¸‹é™</span></span><br><span class="line">        optimizer.zero_grad() <span class="comment"># å¾—å…ˆæ¸…ä¸ªé›¶ï¼Œä¸ç„¶æ¢¯åº¦ä¼šç´¯åŠ </span></span><br><span class="line">        train_loss.backward() <span class="comment"># å¯¹æŸå¤±å‡½æ•°åå‘ä¼ æ’­</span></span><br><span class="line">        optimizer.step() <span class="comment"># æ›´æ–°æ¢¯åº¦</span></span><br><span class="line">        loss_list.append(train_loss.item())</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(loss_list,<span class="string">&#x27;r-&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>æŸå¤±å‡½æ•°æœ€ç»ˆæ”¶æ•›ä¸”æ•ˆæœè¿˜ä¸é”™</p>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%20DNN%20%E6%B7%B1%E5%BA%A6%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20220728200115413.png" alt="image-20220728200115413" style="zoom:50%;">
<p>æˆ–è€…æˆ‘ä»¬åœ¨å®šä¹‰æ¨¡å‹çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨å±‚çº§å®¹å™¨<code>nn.Sequential</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MLPmodel</span>(nn.Module):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MLPmodel,self).__init__()</span><br><span class="line">        self.hidden=nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">13</span>,<span class="number">10</span>,<span class="literal">True</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">10</span>,<span class="number">10</span>),</span><br><span class="line">            nn.Softplus()</span><br><span class="line">        )</span><br><span class="line">        self.regression=nn.Linear(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        <span class="keyword">return</span> self.regression(self.hidden(x))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="7-æ¨¡å‹åŠ è½½ä¸ä¿å­˜">7.  æ¨¡å‹åŠ è½½ä¸ä¿å­˜</h2>
<p>ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ä¿å­˜æ¨¡å‹</p>
<p>æ–¹æ³•ä¸€æ˜¯æ•´ä¸ªæ¨¡å‹ä¸€èµ·ä¿å­˜äº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨¡å‹çš„ä¿å­˜</span></span><br><span class="line">torch.save(mlp,<span class="string">r&quot;D:\mlp.pkl&quot;</span>)</span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥è½½å…¥æ¨¡å‹</span></span><br><span class="line">N_MLP=torch.load(<span class="string">r&quot;D:\mlp.pkl&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># çœ‹çœ‹æœ€åçš„æ•ˆæœ</span></span><br><span class="line"><span class="built_in">print</span>(N_MLP)</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">MLPmodel(</span></span><br><span class="line"><span class="string">  (hidden): Sequential(</span></span><br><span class="line"><span class="string">    (0): Linear(in_features=13, out_features=10, bias=True)</span></span><br><span class="line"><span class="string">    (1): ReLU()</span></span><br><span class="line"><span class="string">    (2): Linear(in_features=10, out_features=10, bias=True)</span></span><br><span class="line"><span class="string">    (3): Softplus(beta=1, threshold=20)</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  (regression): Linear(in_features=10, out_features=1, bias=True)</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•äºŒåˆ™æ˜¯å­˜å‚¨æ¨¡å‹çš„å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ–è€…åªä¿å­˜æ¨¡å‹çš„å‚æ•°</span></span><br><span class="line">torch.save(mlp.state_dict(),<span class="string">r&quot;D:\mlp_parameters.pkl&quot;</span>)</span><br><span class="line">N_PA=torch.load(<span class="string">r&quot;D:\mlp_parameters.pkl&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(N_PA)</span><br><span class="line">mlp.parameters=N_PA</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">OrderedDict([(&#x27;hidden.0.weight&#x27;, tensor([[-0.1682, -0.1582,  0.1312, -0.3572, -0.3382, -0.9072,  0.0774,  0.2961,</span></span><br><span class="line"><span class="string">          0.2461,  0.2169,  0.4627,  0.1251, -0.3596],</span></span><br><span class="line"><span class="string">        [ 0.4775, -0.9221, -0.0299, -1.2689,  0.2501, -0.5053,  0.1822, -0.3906,</span></span><br><span class="line"><span class="string">          0.6780,  0.2467,  1.0531, -0.2952,  0.8564],</span></span><br><span class="line"><span class="string">        [-0.0895, -0.0592, -0.1250,  0.2151,  0.3281, -0.5135, -0.0162,  0.0673,</span></span><br><span class="line"><span class="string">         -0.0072,  0.0629, -0.3387, -0.2451,  0.5141],</span></span><br><span class="line"><span class="string">        [-0.5001, -0.1233,  0.0952, -0.3362, -0.3671, -0.7980, -0.0222,  0.2918,</span></span><br><span class="line"><span class="string">         -0.4627, -0.2075,  0.3375,  0.0857, -0.2409],</span></span><br><span class="line"><span class="string">        [-0.1358, -0.0618, -0.3784, -0.2013, -0.0251, -0.4589,  0.1205,  0.3719,</span></span><br><span class="line"><span class="string">         -0.2736,  0.2368,  0.1762,  0.1612, -0.0624],</span></span><br><span class="line"><span class="string">        [ 0.1940, -0.0896, -0.0613, -0.1808,  0.0264,  0.0394,  0.1249,  0.1263,</span></span><br><span class="line"><span class="string">          0.0100, -0.1044,  0.2247, -0.2154, -0.1233],</span></span><br><span class="line"><span class="string">        [-0.5380, -0.3994, -0.1833, -0.6604,  0.0714, -0.7688,  0.3499, -0.1702,</span></span><br><span class="line"><span class="string">          0.5361, -0.0058,  0.7915,  0.1717, -0.4402],</span></span><br><span class="line"><span class="string">        [-0.2098, -0.4535, -0.0479, -0.5998,  0.1112, -0.5911,  0.0431, -0.0999,</span></span><br><span class="line"><span class="string">          0.3863,  0.1855,  0.5273, -0.2039, -0.4222],</span></span><br><span class="line"><span class="string">        [ 0.1951, -0.0404, -0.1607,  0.0127, -0.3299, -0.2891, -0.1950,  0.0701,</span></span><br><span class="line"><span class="string">         -0.0849,  0.1689,  0.1037, -0.0746,  0.0188],</span></span><br><span class="line"><span class="string">        [-0.4732, -0.4200,  0.1540,  0.1451,  0.2494, -0.8197,  0.3682,  0.1772,</span></span><br><span class="line"><span class="string">         -0.8664,  0.2181, -0.0903,  0.1827,  0.4916]])), (&#x27;hidden.0.bias&#x27;, tensor([-0.3963, -2.1458, -0.2775,  0.6463, -0.0655, -0.3270, -0.2103, -0.5783,</span></span><br><span class="line"><span class="string">        -0.2289,  0.8186])), (&#x27;hidden.2.weight&#x27;, tensor([[-0.3831, -0.4322,  0.0813, -0.2163,  0.0978,  0.1741, -0.5562, -0.3374,</span></span><br><span class="line"><span class="string">          0.2419, -0.2607],</span></span><br><span class="line"><span class="string">        [-0.1779, -1.1630,  0.0807, -0.4886, -0.1338, -0.1174, -0.3692, -0.2244,</span></span><br><span class="line"><span class="string">         -0.1358, -0.4588],</span></span><br><span class="line"><span class="string">        [-0.4465, -0.6129,  0.0062, -0.2336, -0.0784, -0.0142, -0.5327, -0.2607,</span></span><br><span class="line"><span class="string">          0.1711, -0.0604],</span></span><br><span class="line"><span class="string">        [ 0.5467, -0.1358, -0.2299,  0.1825, -0.1145,  0.0242,  0.5876,  0.6566,</span></span><br><span class="line"><span class="string">         -0.2516, -0.2423],</span></span><br><span class="line"><span class="string">        [-0.2812, -1.0388, -0.3839, -0.4795,  0.0591,  0.1484, -0.6015, -0.5771,</span></span><br><span class="line"><span class="string">         -0.2436, -0.7602],</span></span><br><span class="line"><span class="string">        [-0.2085, -1.2226, -0.4565, -0.3518, -0.1664, -0.2956, -0.3706, -0.0673,</span></span><br><span class="line"><span class="string">         -0.1313, -0.4169],</span></span><br><span class="line"><span class="string">        [-0.2528, -1.0902, -0.1404,  0.1635, -0.1880, -0.2121, -0.3874, -0.0765,</span></span><br><span class="line"><span class="string">          0.1254,  0.0216],</span></span><br><span class="line"><span class="string">        [-0.2530, -1.2780, -0.1043, -0.4072, -0.1811, -0.0711, -0.1489, -0.4098,</span></span><br><span class="line"><span class="string">          0.1178, -0.4283],</span></span><br><span class="line"><span class="string">        [-0.3297, -1.0258, -0.2573, -0.5826,  0.0516,  0.1250, -0.0474, -0.4518,</span></span><br><span class="line"><span class="string">          0.0899, -0.2287],</span></span><br><span class="line"><span class="string">        [-0.2147, -0.5633, -0.4821, -0.4490, -0.3171, -0.2347, -0.0139, -0.0884,</span></span><br><span class="line"><span class="string">         -0.2636, -0.4779]])), (&#x27;hidden.2.bias&#x27;, tensor([1.0290, 0.8320, 0.7612, 2.1910, 1.4279, 1.0426, 0.9651, 1.1743, 1.0405,</span></span><br><span class="line"><span class="string">        2.1511])), (&#x27;regression.weight&#x27;, tensor([[1.8570, 1.4353, 1.7404, 2.6612, 2.2527, 1.5736, 1.8867, 1.7221, 1.9856,</span></span><br><span class="line"><span class="string">         2.7336]])), (&#x27;regression.bias&#x27;, tensor([4.4975]))])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç¬¬äºŒç«   PyTorchå…¥é—¨]]></title>
      <url>/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%20PyTorch%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<h1>ç¬¬äºŒç«   PyTorchå…¥é—¨</h1>
<h2 id="1-å¼ é‡">1.  å¼ é‡</h2>
<hr>
<h3 id="1-1-å¼ é‡">1.1  å¼ é‡</h3>
<p>å¼ é‡çš„æ¦‚å¿µå…¶å®å°±æ˜¯é«˜ç»´æ•°ç»„</p>
<ul>
<li>æ ‡é‡</li>
<li>å‘é‡</li>
<li>çŸ©é˜µ</li>
<li>å¼ é‡</li>
</ul>
<p>å¼ é‡çš„<strong>æ•°æ®ç±»å‹</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">æ•°æ®ç±»å‹</th>
<th style="text-align:center">dtype</th>
<th style="text-align:center">CPU tensor</th>
<th style="text-align:center">GPU tensor</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">32ä½æµ®ç‚¹å‹</td>
<td style="text-align:center">torch.float</td>
<td style="text-align:center">torch.FloatTensor</td>
<td style="text-align:center">torch.cuda.FloatTensor</td>
</tr>
<tr>
<td style="text-align:center">64ä½æµ®ç‚¹å‹</td>
<td style="text-align:center">torch.double</td>
<td style="text-align:center">torch.DoubleTensor</td>
<td style="text-align:center">torch.cuda.DoubleTensor</td>
</tr>
<tr>
<td style="text-align:center">16ä½æµ®ç‚¹å‹</td>
<td style="text-align:center">torch.half</td>
<td style="text-align:center">torch.HalfTensor</td>
<td style="text-align:center">torch.cuda.HalfTensor</td>
</tr>
<tr>
<td style="text-align:center">8ä½æ— ç¬¦å·æ•´å‹</td>
<td style="text-align:center">torch.uint8</td>
<td style="text-align:center">torch.ByteTensor</td>
<td style="text-align:center">torch.cuda.ByteTensor</td>
</tr>
<tr>
<td style="text-align:center">8ä½æœ‰ç¬¦å·æ•´å‹</td>
<td style="text-align:center">torch.int8</td>
<td style="text-align:center">torch.CharTensor</td>
<td style="text-align:center">torch.cuda.CharTensor</td>
</tr>
<tr>
<td style="text-align:center">16ä½æœ‰ç¬¦å·æ•´å‹</td>
<td style="text-align:center">torch.short</td>
<td style="text-align:center">torch.ShortTensor</td>
<td style="text-align:center">torch.cuda.ShortTensor</td>
</tr>
<tr>
<td style="text-align:center">32ä½æœ‰ç¬¦å·æ•´å‹</td>
<td style="text-align:center">torch.int</td>
<td style="text-align:center">torch.IntTensor</td>
<td style="text-align:center">torch.cuda.IntTensor</td>
</tr>
<tr>
<td style="text-align:center">64ä½æœ‰ç¬¦å·æ•´å‹</td>
<td style="text-align:center">torch.long</td>
<td style="text-align:center">torch.LongTensor</td>
<td style="text-align:center">torch.cuda.LongTensor</td>
</tr>
</tbody>
</table>
<p>å¸¸è§çš„<strong>æ•°æ®ç±»å‹æ“ä½œ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># torchä¸­é»˜è®¤çš„æ•°æ®ç±»å‹æ˜¯float32</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥é€šè¿‡Tensorçš„dtypeæ–¹æ³•æŸ¥çœ‹</span></span><br><span class="line">a=torch.Tensor(<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line">a.dtype</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥æ”¹å˜åˆå§‹çš„æ•°æ®ç±»å‹</span></span><br><span class="line">torch.set_default_tensor_type(torch.DoubleTensor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‹¥æ˜¯ä¸æƒ³ä¿®æ”¹æºæ•°æ®è€Œè½¬æ¢ç±»å‹</span></span><br><span class="line"><span class="comment"># å¯ä»¥è°ƒç”¨long\float\double\int\shortç­‰æ–¹æ³•è¿›è¡Œè½¬å˜</span></span><br><span class="line">new=a.long()</span><br><span class="line">new.dtype</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­ä¸€ä¸ªå¼ é‡çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="built_in">isinstance</span>(a,torch.FloatTensor)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># GPU</span></span><br><span class="line"><span class="built_in">isinstance</span>(data,torch.cuda.DoubleTensor)</span><br></pre></td></tr></table></figure>
<p>å¸¸è§çš„å¼ é‡<strong>ç”Ÿæˆæ–¹å¼</strong></p>
<ul>
<li>
<p>ä½¿ç”¨**torch.tensor()**ç”Ÿæˆ</p>
<p>Pythonä¸­çš„åˆ—è¡¨å’Œåºåˆ—å¯ä»¥é€šè¿‡<code>torch.tensor()</code>è½¬åŒ–æˆå¼ é‡ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡<code>shape</code>å±æ€§æŸ¥çœ‹ç»´åº¦ï¼Œ<code>size()</code>æ–¹æ³•è®¡ç®—å½¢çŠ¶ï¼Œ<code>numel()</code>æ–¹æ³•è®¡ç®—å…ƒç´ ä¸ªæ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„åªæœ‰æµ®ç‚¹å‹çš„èƒ½è®¡ç®—æ¢¯åº¦</span></span><br><span class="line">b=torch.tensor([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],dtype=torch.DoubleTensor,requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">b.dim()</span><br><span class="line">b.shape</span><br><span class="line">b.size()</span><br><span class="line">b.numel()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä½¿ç”¨**torch.Tensor()**ç”Ÿæˆ</p>
<p>ä¸torch.tensor()æ–¹æ³•ä¸åŒåœ¨äºï¼Œå‰è€…åªèƒ½æ¥æ”¶ç°æœ‰æ•°æ®ï¼Œè€Œåè€…èƒ½å¤Ÿæ¥æ”¶ç»´åº¦å½¢æ€ã€‚å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b=torch.Tensor(<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä½¿ç”¨**Like()**æ–¹æ³•ç”Ÿæˆ</p>
<p>è¯¥æ–¹æ³•èƒ½å¤Ÿç”Ÿæˆç»´åº¦ä¸ä¼ å…¥å¼ é‡ç›¸åŒçš„æ–°å¼ é‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚</span></span><br><span class="line">c=torch.Tensor(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨ä¸€</span></span><br><span class="line">torch.ones_like(c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨é›¶</span></span><br><span class="line">torch.zeros_like(c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœº</span></span><br><span class="line">torch.rand_like(c)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä½¿ç”¨**new()**æ–¹æ³•ç”Ÿæˆ</p>
<p>è¯¥æ–¹æ³•ç”Ÿæˆçš„å¼ é‡å°†å¤åˆ¶åŸå§‹å¼ é‡çš„æ•°æ®ç±»å‹ï¼Œä½†ç»´åº¦å¯ä»¥ä¸åŒ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># D.dtype --&gt; torch.DoubleTensor</span></span><br><span class="line"></span><br><span class="line">e=[[<span class="number">2</span>,<span class="number">1</span>],[<span class="number">7</span>,<span class="number">8</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„newæ–¹æ³•æ˜¯ä»éœ€è¦copyç±»å‹çš„å¼ é‡ä¸Šå‡ºå‘</span></span><br><span class="line"><span class="comment"># è€Œlikeåˆ™æ˜¯ä»torchæœ¬èº«ä¸Šå‡ºå‘</span></span><br><span class="line">e=D.new_tensor(e)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åšä¸€ä¸ªå…¨1å¡«å……</span></span><br><span class="line">D.new_full(e,fill_value=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">D.new_zeros(e)</span><br><span class="line"></span><br><span class="line">D.new_empty(e)</span><br><span class="line"></span><br><span class="line">D.new_ones(e)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¼ é‡å’Œ<strong>Numpy</strong>çš„äº’ç›¸è½¬æ¢</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">F=np.ones((<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•ä¸€</span></span><br><span class="line">torch.as_tensor(F)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•äºŒ</span></span><br><span class="line">torch.from_numpy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># tensorè½¬numpy</span></span><br><span class="line">new=F.numpy()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é€šè¿‡<strong>éšæœºæ•°</strong>ç”Ÿæˆ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®éšæœºæ•°ç§å­</span></span><br><span class="line"><span class="comment"># è¯¥ç§å­èƒ½å¤Ÿä¿è¯ç”Ÿæˆçš„éšæœºæ•°æ˜¯å¯ä»¥é‡å¤å‡ºç°çš„</span></span><br><span class="line">torch.manual_seed(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªæ­£æ€åˆ†å¸ƒçš„éšæœºæ•°</span></span><br><span class="line">torch.normal(mean=<span class="number">0.0</span>,std=torch.tensor(<span class="number">1.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šmeanå’Œstdçš„æ•°é‡çš„è¯ï¼Œå°±ä¼šç”Ÿæˆè®¸å¤šä¸ªéšæœºæ•°</span></span><br><span class="line">torch.normal(mean=torch.arange(<span class="number">1</span>,<span class="number">5.0</span>),std=torch.arange(<span class="number">1</span>,<span class="number">5.0</span>))</span><br><span class="line"><span class="comment"># è¿™æ ·å°±èƒ½å¾—åˆ°å››ä¸ªéšæœºæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆé›¶ä¸€åŒºé—´éšæœºæ•°</span></span><br><span class="line">torch.rand(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ ‡å‡†æ­£æ€åˆ†å¸ƒ</span></span><br><span class="line">torch.randn(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">torch.rand_like(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ‰“æ•£</span></span><br><span class="line">torch.randperm(n)</span><br><span class="line"><span class="comment"># ä¼šå°†0~n-1ä¸ªæ•°éšæœºæ‰“æ•£æ’åˆ—</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å…¶ä»–ç”Ÿæˆå¼ é‡çš„å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èŒƒå›´ç”Ÿæˆå¼ é‡</span></span><br><span class="line">torch.arange(start=<span class="number">0</span>,end=<span class="number">10</span>,step=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰é—´éš”å¼ é‡</span></span><br><span class="line">torch.linspace(start=<span class="number">1</span>,end=<span class="number">10</span>,step=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ•°é—´éš”å¼ é‡</span></span><br><span class="line">torch.logspace(start=<span class="number">0.1</span>,end=<span class="number">1.0</span>,steps=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»–é¢„å®šä¹‰çš„</span></span><br><span class="line">torch.zeros()</span><br><span class="line">torch.ones()</span><br><span class="line">torch.eyes()</span><br><span class="line">torch.full(,value)</span><br><span class="line">torch.empty()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-2-å¼ é‡æ“ä½œ">1.2  å¼ é‡æ“ä½œ</h3>
<h4 id="1-2-1-æ”¹å˜å¼ é‡å½¢çŠ¶">1.2.1 æ”¹å˜å¼ é‡å½¢çŠ¶</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># reshapeæ–¹æ³•èƒ½å¤Ÿè®¾ç½®å¼ é‡å½¢çŠ¶å¤§å°</span></span><br><span class="line">torch.arange(<span class="number">12.0</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment"># è€Œåœ¨è¿™é‡Œé‡‡ç”¨è´Ÿæ•°çš„å½¢å¼ï¼Œåˆ™ä¼šé»˜è®¤å‰é¢è¿›è¡Œå¡«å……</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># torchçš„reshapeæ–¹æ³•</span></span><br><span class="line">torch.reshape(<span class="built_in">input</span>=A,shape=(<span class="number">2</span>,-<span class="number">1</span>))</span><br><span class="line"><span class="comment"># æˆ–æ˜¯ç›´æ¥åœ¨åŸå§‹æ•°æ®ä¸Šä¿®æ”¹</span></span><br><span class="line">A.resize_(<span class="number">2</span>,<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># viewæ–¹æ³•</span></span><br><span class="line"><span class="comment"># viewä¸reshapeå®Œå…¨ä¸€è‡´</span></span><br><span class="line">A.view(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŒæ ·ï¼Œæä¾›äº†ä¾¿æ·çš„_asæ–¹æ³•</span></span><br><span class="line">A.resize_as_(B)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥ç»´åº¦</span></span><br><span class="line"><span class="comment"># é€šè¿‡unsqueeze()å‡½æ•°å¯ä»¥åœ¨æŒ‡å®šæ–¹å‘æ’å…¥æ–°çš„ç»´åº¦</span></span><br><span class="line">torch.unsqueeze(A,dim=<span class="number">0</span>) <span class="comment"># åœ¨0ç»´åº¦æ’å…¥ï¼Œå‰é¢çš„ç»´åº¦ä¸å˜ï¼Œåé¢çš„å¾€åæ¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‹ç¼©ç»´åº¦</span></span><br><span class="line"><span class="comment"># å‹ç¼©ç»´åº¦åªèƒ½å‹ç¼©æ•°æ®é‡ä¸º1çš„ç»´åº¦</span></span><br><span class="line">torch.squeeze(dim=n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰©å±•ç»´åº¦</span></span><br><span class="line">torch.expand(<span class="number">3</span>,-<span class="number">1</span>)</span><br><span class="line">torch.expand_as(C)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶ç»´</span></span><br><span class="line">D.repeat(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="comment"># ä¼šå°†å¼ é‡çœ‹åšä¸€ä¸ªæ•´ä½“</span></span><br></pre></td></tr></table></figure>
<h4 id="1-2-2-å¼ é‡ç´¢å¼•æ“ä½œ">1.2.2 å¼ é‡ç´¢å¼•æ“ä½œ</h4>
<p>tensorçš„åˆ‡ç‰‡ç´¢å¼•éå¸¸å¤§èƒ†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹ä¸€ä¸ªå››ä½æ•°æ®è¿›è¡Œæ“ä½œ</span></span><br><span class="line">a=torch.rand(<span class="number">4</span>,<span class="number">3</span>,<span class="number">28</span>,<span class="number">28</span>)</span><br><span class="line">a[<span class="number">0</span>].shape <span class="comment"># torch.Size([3,28,28])</span></span><br><span class="line">a[<span class="number">0</span>,<span class="number">0</span>].shape <span class="comment"># torch.Size([28,28])</span></span><br><span class="line">a[<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>] <span class="comment"># tensor(0.8082)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥ä¸åˆ‡ç‰‡ä¸€èµ·ä½¿ç”¨</span></span><br><span class="line">a[:<span class="number">2</span>].shape <span class="comment"># torch.Size([2,3,28,28])</span></span><br><span class="line">a[:<span class="number">2</span>,<span class="number">1</span>:,:,:].shape</span><br><span class="line">a[:<span class="number">2</span>,-<span class="number">1</span>,:,:].shape</span><br><span class="line"></span><br><span class="line"><span class="comment"># éš”ç‚¹é‡‡æ ·</span></span><br><span class="line">a[:,:,<span class="number">0</span>:<span class="number">28</span>:<span class="number">2</span>,<span class="number">0</span>:<span class="number">15</span>:<span class="number">3</span>].shape</span><br><span class="line">a[:,:,::<span class="number">2</span>,::<span class="number">2</span>].shape</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…·ä½“ç´¢å¼•æ–¹å¼</span></span><br><span class="line">torch.index_select(dim,[])</span><br><span class="line">torch.index_select(<span class="number">0</span>,[<span class="number">1</span>,<span class="number">2</span>]) <span class="comment"># ä»ç¬¬ä¸€ä¸ªç»´åº¦ä¸Šé€‰æ‹©1,2ä¸ªæ•°æ®</span></span><br><span class="line">a.index_select(<span class="number">2</span>,torch.arange(<span class="number">8</span>)).shape</span><br><span class="line"><span class="comment"># torch.Size([4,3,8,28])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»»æ„å¤šçš„ç»´åº¦</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line">a[...].shape</span><br><span class="line">a[<span class="number">0</span>,...].shape <span class="comment"># ==a[0]</span></span><br><span class="line">a[<span class="number">0</span>:,...,::<span class="number">2</span>] <span class="comment"># å¯¹ç¬¬ä¸€ä¸ªç»´åº¦å’Œæœ€åä¸€ä¸ªç»´åº¦åšé™å®š</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡æ©ç é€‰å–</span></span><br><span class="line">x=torch.randn(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">mask=x.ge(<span class="number">0.5</span>) <span class="comment"># ä¸€ä¸ªé›¶ä¸€çŸ©é˜µï¼Œå¤§äº0.5æ—¶ä¸º1</span></span><br><span class="line">torch.masked_select(x,mask) <span class="comment"># ç›´æ¥è·å–ä¸€ä¸ªvectoryï¼Œæ˜¯maskä¸º1çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¹³é€‰å–</span></span><br><span class="line"><span class="comment"># å…ˆå°†æ•°æ®æ’æˆä¸€æ’</span></span><br><span class="line"><span class="comment"># ç„¶åå†é€‰å–</span></span><br><span class="line">scr=torch.tensor([[<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>],</span><br><span class="line">                  [<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]])</span><br><span class="line">torch.take(scr,torch.tensor[[<span class="number">0</span>,<span class="number">2</span>,-<span class="number">1</span>]])</span><br><span class="line"><span class="comment"># tensor([4,5,8])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¸Šä¸‰è§’éƒ¨åˆ†</span></span><br><span class="line">torch.tril(A,diagonal=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># è·å–ä¸‹ä¸‰è§’éƒ¨åˆ†</span></span><br><span class="line">torch.triu(A,diagonal=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># diagonalç”¨äºæ§åˆ¶å¯¹è§’çº¿çš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡å¯¹è§’çº¿å…ƒç´ ç”ŸæˆçŸ©é˜µ</span></span><br><span class="line">torch.diag(torch.tensor([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>
<h4 id="1-2-3-å¼ é‡çš„æ‹¼æ¥å’Œæ‹†åˆ†">1.2.3 å¼ é‡çš„æ‹¼æ¥å’Œæ‹†åˆ†</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">A=torch.arange(<span class="number">6.0</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">B=torch.linspace(<span class="number">0</span>,<span class="number">10</span>,<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡torch.catæ–¹å¼æ‹¼æ¥ï¼ŒæŒ‡å®šæ‹¼æ¥ç»´åº¦</span></span><br><span class="line">C=torch.cat((A,B),dim=<span class="number">0</span>) <span class="comment"># åœ¨ç»´åº¦0ä¸Šè¿›è¡Œæ‹¼æ¥</span></span><br><span class="line">C.shape</span><br><span class="line"><span class="comment"># torch.Size([4,3])</span></span><br><span class="line"></span><br><span class="line">C=torch.cat((A,B),dim=<span class="number">1</span>)</span><br><span class="line">C.shape</span><br><span class="line"><span class="comment"># torch.Size([2,6])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹¼æ¥å¤šä¸ª</span></span><br><span class="line">torch.cat((A[:,<span class="number">1</span>:<span class="number">2</span>],A,B),dim=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåšç»´åº¦æ‹¼æ¥å¿…é¡»åœ¨éæ‹¼æ¥ç»´ä¸Šèƒ½å¤ŸåŒ¹é…</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># stackä¸catä¸åŒçš„æ˜¯ï¼Œstackä¼šæ·»åŠ æ–°çš„ç»´åº¦ï¼Œè€Œä¸æ˜¯åˆå¹¶åŒç»´åº¦æ•°æ®</span></span><br><span class="line">F=torch.stack((A,B),dim=<span class="number">0</span>)</span><br><span class="line">F.shape</span><br><span class="line"><span class="comment"># torch.Size([2,2,3])</span></span><br></pre></td></tr></table></figure>
<p><code>split</code>æ˜¯æŒ‰é•¿åº¦åˆ†å‰²</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a=torch.rand(<span class="number">4</span>,<span class="number">32</span>,<span class="number">8</span>)</span><br><span class="line"><span class="comment"># å°†æŒ‡å®šç»´åº¦è¿›è¡Œåˆ‡å‰²ï¼Œæ¯ä¸€ä»½é•¿åº¦æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment"># ä¸å¤Ÿçš„åœ°æ–¹å–ä½™æ•°</span></span><br><span class="line">t=a.split(<span class="number">7</span>,dim=<span class="number">1</span>)</span><br><span class="line">t[<span class="number">4</span>].shape</span><br><span class="line"><span class="comment"># torch.Size([4, 4, 8])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿèƒ½æŒ‡å®šé•¿åº¦</span></span><br><span class="line">a.split([<span class="number">15</span>,<span class="number">1</span>,<span class="number">16</span>],dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><code>chunk</code>æ˜¯ç­‰è·åˆ†å‰²ï¼Œä½†ä¸èƒ½æŒ‡å®šå¤§å°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†æˆä¸¤ä»½</span></span><br><span class="line">a.chunk(<span class="number">2</span>,dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="1-2-4-è½¬ç½®">1.2.4 è½¬ç½®</h4>
<p><code>.t</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=torch.randn(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment"># .tåªèƒ½ç”¨äºäºŒç»´çŸ©é˜µ</span></span><br><span class="line">a.t()</span><br></pre></td></tr></table></figure>
<p><code>transpose</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># transposeèƒ½äº¤æ¢ä»»æ„ä¸¤ä¸ªç»´åº¦</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯ç»´åº¦æ‰“ä¹±åçš„æ•°æ®ä¸å†è”ç³»</span></span><br><span class="line"><span class="comment"># éœ€è¦ä½¿ç”¨contiguousè¿›è¡Œå¤„ç†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„viewä¼šä¸¢å¤±ç»´åº¦ä¿¡æ¯ï¼</span></span><br><span class="line"><span class="comment"># éœ€è¦è·Ÿè¸ªç»´åº¦ä¿¡æ¯</span></span><br><span class="line">al=a.transpose(<span class="number">1</span>,<span class="number">3</span>).contiguous().view(<span class="number">4</span>,<span class="number">3</span>*<span class="number">32</span>*<span class="number">32</span>).view(<span class="number">4</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">3</span>).transpose(<span class="number">1</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><code>permute</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># permuteå¯ä»¥å¤šæ¬¡äº¤æ¢</span></span><br><span class="line"><span class="comment"># è‡ªåŠ¨è°ƒç”¨transpose</span></span><br><span class="line"></span><br><span class="line">b.permute(<span class="number">0</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-3-å¼ é‡è®¡ç®—">1.3  å¼ é‡è®¡ç®—</h3>
<h4 id="1-3-1-å¤§å°æ¯”è¾ƒ">1.3.1 å¤§å°æ¯”è¾ƒ</h4>
<p>éƒ¨åˆ†<strong>æ¯”è¾ƒå‡½æ•°</strong>å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">torch.allclose()</td>
<td style="text-align:center">æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ æ˜¯å¦æ¥è¿‘</td>
</tr>
<tr>
<td style="text-align:center">torch.eq()</td>
<td style="text-align:center">æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰</td>
</tr>
<tr>
<td style="text-align:center">torch.equal()</td>
<td style="text-align:center">æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰ä¸”æ•°æ®ç±»å‹ä¸€è‡´</td>
</tr>
<tr>
<td style="text-align:center"><a href="http://torch.ge">torch.ge</a>()</td>
<td style="text-align:center">å¤§äºç­‰äº</td>
</tr>
<tr>
<td style="text-align:center"><a href="http://torch.gt">torch.gt</a>()</td>
<td style="text-align:center">å¤§äº</td>
</tr>
<tr>
<td style="text-align:center">torch.le()</td>
<td style="text-align:center">å°äºç­‰äº</td>
</tr>
<tr>
<td style="text-align:center"><a href="http://torch.lt">torch.lt</a>()</td>
<td style="text-align:center">å°äº</td>
</tr>
<tr>
<td style="text-align:center"><a href="http://torch.ne">torch.ne</a>()</td>
<td style="text-align:center">ä¸ç­‰äº</td>
</tr>
<tr>
<td style="text-align:center">torch.isnan()</td>
<td style="text-align:center">æ˜¯å¦ä¸ºç©º</td>
</tr>
</tbody>
</table>
<p>allclose()å‡½æ•°éå¸¸æœ‰æ„æ€ï¼Œå…¶å…¬å¼è¡¨ç¤ºä¸ºï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><mi>A</mi><mo>âˆ’</mo><mi>B</mi><mi mathvariant="normal">âˆ£</mi><mo>â‰¤</mo><mi>a</mi><mi>t</mi><mi>o</mi><mi>l</mi><mo>+</mo><mi>r</mi><mi>t</mi><mi>o</mi><mi>l</mi><mo>Ã—</mo><mi mathvariant="normal">âˆ£</mi><mi>B</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">|A-B|\le atol+rtol\times|B|
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">âˆ£</span></span></span></span></span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.allclose(A,B,rtol=<span class="number">1e-05</span>,atol=<span class="number">1e-08</span>,equal_nan=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># equal_nan ä¸ºTrueæ—¶ï¼Œå½“å…ƒç´ ä¸ºNANæ—¶ï¼Œè¡¨ç¤ºæ¥è¿‘</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„ç”¨æ³•åŸºæœ¬ä¸Šç›¸åŒï¼Œéƒ½æ˜¯é€å…ƒç´ æ¯”è¾ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.eq(A,B)</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„æ‰€æœ‰çš„æ¯”è¾ƒè¦æ±‚æ•°æ®çš„ç»´åº¦ç›¸åŒ</p>
<h4 id="1-3-2-åŸºæœ¬è¿ç®—">1.3.2 åŸºæœ¬è¿ç®—</h4>
<p>å¼ é‡çš„åŸºæœ¬è¿ç®—å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯é€å…ƒç´ ä¹‹é—´çš„è®¡ç®—ï¼Œå¦ä¸€ç§åˆ™æ˜¯çŸ©é˜µä¹‹é—´çš„è®¡ç®—</p>
<ul>
<li>
<p>åŠ å‡ä¹˜é™¤è¿ç®—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ƒç´ ä¹˜æ³•</span></span><br><span class="line">A*B</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ƒç´ é™¤æ³•</span></span><br><span class="line">A/B</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ƒç´ åŠ æ³•</span></span><br><span class="line">A+B</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ƒç´ å‡æ³•</span></span><br><span class="line">A-B</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•´é™¤</span></span><br><span class="line">A//B</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹‚è¿ç®—</span></span><br><span class="line">A**<span class="number">3</span></span><br><span class="line">torch.<span class="built_in">pow</span>(A,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡æ•°è¿ç®—</span></span><br><span class="line">torch.exp(A)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ•°è¿ç®—</span></span><br><span class="line">torch.log(A)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹³æ–¹æ ¹</span></span><br><span class="line">A**<span class="number">0.5</span></span><br><span class="line">torch.sqrt(A)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹³æ–¹æ ¹å¯¼æ•°</span></span><br><span class="line"><span class="number">1</span>/(A**<span class="number">0.5</span>)</span><br><span class="line">torch.rsqrt(A)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ƒç´ é™å®šè£å‰ª</span></span><br><span class="line"><span class="comment"># ç»™å®šä¸€ä¸ªä¸Šä¸‹é™ç”¨äºé™åˆ¶å…ƒç´ å¤§å°</span></span><br><span class="line"><span class="comment"># å°äºä¸‹é™æ—¶ä¼šè¢«é‡ç½®ä¸ºä¸‹é™</span></span><br><span class="line"><span class="comment"># å¤§äºä¸Šé™åˆ™ä¼šè¢«é‡ç½®ä¸ºä¸Šé™</span></span><br><span class="line">torch.clamp_max(A,<span class="number">4</span>)</span><br><span class="line">torch.clamp_min(A,<span class="number">3</span>)</span><br><span class="line">torch.clamp(A,<span class="number">2</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>çŸ©é˜µé—´çš„è¿ç®—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ±‚è½¬ç½®</span></span><br><span class="line">torch.t(A)</span><br><span class="line"></span><br><span class="line"><span class="comment"># çŸ©é˜µä¹˜æ³•</span></span><br><span class="line">A.matmul(C)</span><br><span class="line"><span class="comment"># æ³¨æ„çŸ©é˜µä¹˜æ³•åªè®¡ç®—æœ€åä¸¤ä¸ªç»´åº¦çš„å€¼</span></span><br><span class="line"><span class="comment"># å¦‚å…ƒç´ A[2,3,2] B[2,2,3]</span></span><br><span class="line"><span class="comment"># æ­¤æ—¶çš„çŸ©é˜µä¹˜æ³•ç›¸å½“äºstack((A[0].matmul(B[0])),(A[1].matmul(B[1]))</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç®€å†™æˆtorch.mm</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—çŸ©é˜µçš„é€†</span></span><br><span class="line">torch.inverse() <span class="comment"># å½“ç„¶éœ€è¦çŸ©é˜µæœ‰é€†çŸ©é˜µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—çŸ©é˜µçš„è¿¹</span></span><br><span class="line">torch.trace()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-3-3-ç»Ÿè®¡è¿ç®—">1.3.3 ç»Ÿè®¡è¿ç®—</h3>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">torch.max(dim=n)</td>
<td style="text-align:center">è®¡ç®—å¼ é‡å¯¹åº”ç»´åº¦ä¸‹çš„æœ€å¤§å€¼</td>
</tr>
<tr>
<td style="text-align:center">torch.argmax(dim=n)</td>
<td style="text-align:center">è·å¾—æœ€å¤§å€¼ä½ç½®</td>
</tr>
<tr>
<td style="text-align:center">torch.min(dim=n)</td>
<td style="text-align:center">æœ€å°å€¼</td>
</tr>
<tr>
<td style="text-align:center">torch.argmin(dim=n)</td>
<td style="text-align:center">æœ€å°å€¼ä½ç½®</td>
</tr>
<tr>
<td style="text-align:center">torch.sort()</td>
<td style="text-align:center">æ’åºå¹¶è·å¾—ä¸‹æ ‡</td>
</tr>
<tr>
<td style="text-align:center">torch.argsort()</td>
<td style="text-align:center">åºåˆ—ä¸‹æ ‡</td>
</tr>
<tr>
<td style="text-align:center">torch.topk()</td>
<td style="text-align:center">å–å‡ºç¬¬kå¤§çš„å€¼å’Œä¸‹æ ‡</td>
</tr>
<tr>
<td style="text-align:center">torch.kthvalue()</td>
<td style="text-align:center">è·å¾—æŒ‡å®šç¬¬kå°çš„å€¼å’Œä¸‹æ ‡</td>
</tr>
<tr>
<td style="text-align:center">torch.mean()</td>
<td style="text-align:center">æ ¹æ®æŒ‡å®šç»´åº¦è®¡ç®—æ ‡å‡†å·®</td>
</tr>
<tr>
<td style="text-align:center">torch.sum()</td>
<td style="text-align:center">æ ¹æ®æŒ‡å®šç»´åº¦æ±‚å’Œ</td>
</tr>
<tr>
<td style="text-align:center">torch.cumsum()</td>
<td style="text-align:center">æ ¹æ®æŒ‡å®šç»´åº¦è®¡ç®—ç´¯åŠ å’Œ</td>
</tr>
<tr>
<td style="text-align:center">torch.median()</td>
<td style="text-align:center">æ ¹æ®æŒ‡å®šç»´åº¦è®¡ç®—ä¸­ä½æ•°</td>
</tr>
<tr>
<td style="text-align:center">torch.cumprod()</td>
<td style="text-align:center">æ ¹æ®æŒ‡å®šç»´åº¦è®¡ç®—ç´¯ä¹˜</td>
</tr>
<tr>
<td style="text-align:center">torch.std()</td>
<td style="text-align:center">æ ¹æ®æŒ‡å®šç»´åº¦è®¡ç®—æ ‡å‡†å·®</td>
</tr>
</tbody>
</table>
<p>torch.maxåœ¨ä¸åŒç»´åº¦ä¸‹çš„è¿ä½œï¼šè¿”å›å½“å‰ç»´åº¦ä¸‹çš„æœ€å¤§å€¼ï¼Œä¾‹å¦‚[2,3,4]åœ¨dim=0å‡ºå–æœ€å¤§ï¼Œè¿”å›ä¸€ä¸ª[3,4]ï¼Œè¿™ä¸ªçŸ©é˜µæ¯ä¸ªå€¼éƒ½ç”±dim=0çš„ç»´åº¦ä¸‹å–ç›¸åº”ä½ç½®çš„æœ€å¤§å€¼ã€‚å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"> tensor([[[-1.0190,  0.8085, -0.0339, -0.7646],</span></span><br><span class="line"><span class="string">         [ 0.7205,  0.6350, -0.2577, -0.2069],</span></span><br><span class="line"><span class="string">         [-0.8420,  0.7809, -1.2055, -2.6755]],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        [[ 0.3683,  0.1512, -1.5940, -0.1101],</span></span><br><span class="line"><span class="string">         [-1.9924,  0.7249, -0.6083, -1.0755],</span></span><br><span class="line"><span class="string">         [-3.5662, -1.5086, -0.0512,  1.3599]]])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">         </span><br><span class="line">a.<span class="built_in">max</span>(dim=<span class="number">0</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">torch.return_types.max(</span></span><br><span class="line"><span class="string">values=tensor([[ 0.3683,  0.8085, -0.0339, -0.1101],</span></span><br><span class="line"><span class="string">        [ 0.7205,  0.7249, -0.2577, -0.2069],</span></span><br><span class="line"><span class="string">        [-0.8420,  0.7809, -0.0512,  1.3599]]),</span></span><br><span class="line"><span class="string">indices=tensor([[1, 0, 0, 1],</span></span><br><span class="line"><span class="string">        [0, 1, 0, 0],</span></span><br><span class="line"><span class="string">        [0, 0, 1, 1]]))</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">a.<span class="built_in">max</span>(dim=<span class="number">1</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">torch.return_types.max(</span></span><br><span class="line"><span class="string">values=tensor([[ 0.7205,  0.8085, -0.0339, -0.2069],</span></span><br><span class="line"><span class="string">        [ 0.3683,  0.7249, -0.0512,  1.3599]]),</span></span><br><span class="line"><span class="string">indices=tensor([[1, 0, 0, 1],</span></span><br><span class="line"><span class="string">        [0, 1, 2, 2]]))</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿”å›å€¼éƒ½æ˜¯æŒ‡å®šç»´åº¦æ¶ˆå¤±ï¼Œä¿ç•™å…¶ä»–ç»´åº¦</p>
<p><code>sort()</code>æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val,idx=torch.sort(A,descending=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><code>topk()</code>æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å‰4ä¸ªå¤§å€¼</span></span><br><span class="line">val,idx=torch.topk(A,<span class="number">4</span>,dim=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><code>kthvalue()</code>æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å¾—ç¬¬kä¸ªå°å€¼</span></span><br><span class="line">torch.kthvalue(A,<span class="number">3</span>,dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="2-è‡ªåŠ¨å¾®åˆ†">2.  è‡ªåŠ¨å¾®åˆ†</h2>
<p>é€šè¿‡è®¾ç½®<code>requires_grad</code>å³å¯å®ç°è‡ªåŠ¨å¾®åˆ†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x=torch.Tensor([[<span class="number">1.</span>,<span class="number">2.</span>],[<span class="number">3.</span>,<span class="number">4.</span>]],requires_grad=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># xè®¾ç½®ä¸ºéœ€è¦å¾®åˆ†çš„å˜é‡</span></span><br><span class="line"></span><br><span class="line">y=torch.<span class="built_in">sum</span>(A**<span class="number">2</span>+A*<span class="number">2</span>+<span class="number">1</span>)</span><br><span class="line">y.backward()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†å»æ±‚æ¢¯åº¦</span></span><br><span class="line">y.grad()</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="3-torch-nnæ¨¡å—">3.  torch.nnæ¨¡å—</h2>
<h3 id="3-1-å·ç§¯å±‚">3.1  å·ç§¯å±‚</h3>
<p>å·ç§¯å¯ä»¥çœ‹åšæ˜¯è¾“å…¥å’Œå·ç§¯æ ¸ä¹‹é—´çš„å†…ç§¯è¿ç®—ï¼Œæ˜¯ä¸¤ä¸ªå®å€¼å‡½æ•°ä¹‹é—´çš„ä¸€ç§æ•°å­¦è¿ç®—ã€‚</p>
<p>å·ç§¯è¿ç®—å…·æœ‰ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„ç‰¹ç‚¹ï¼Œå³<strong>å·ç§¯ç¨€ç–è¿æ¥</strong>ã€<strong>å‚æ•°å…±äº«</strong>ã€<strong>ç­‰å˜è¡¨ç¤º</strong>ã€‚</p>
<p>åœ¨CNNä¸­ï¼Œé€šè¿‡å·ç§¯æ ¸ä½¿å¾—è¾“å…¥å•å…ƒä¸è¾“å‡ºå•å…ƒå‘ˆç°<strong>ç¨€ç–è¿æ¥</strong>ï¼Œè¿™èƒ½<strong>å‡å°‘éœ€è¦è®­ç»ƒçš„å‚æ•°é‡</strong>ï¼Œ<strong>åŠ å¿«ç½‘ç»œè®¡ç®—é€Ÿåº¦</strong>ã€‚</p>
<p>ä¸”æ¨¡å‹ä¸­åŒä¸€ç»„å‚æ•°å°†è¢«ç›¸åŒçš„å·ç§¯æ ¸å¤„ç†ï¼Œåªéœ€è¦<strong>è®­ç»ƒä¸€ä¸ªå‚æ•°é›†</strong>å³å¯ï¼Œä¸”å·ç§¯æ ¸å¤§å°è¿œå°äºè¾“å…¥è¾“å‡ºï¼Œå‡å°‘äº†éœ€è¦å­¦ä¹ çš„å‚æ•°æ•°é‡ã€‚é’ˆå¯¹æ¯ä¸ªå·ç§¯å±‚ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªå·ç§¯æ ¸è·å–è¾“å…¥çš„ç‰¹å¾æ˜ å°„ï¼Œå¯¹æ•°æ®(å°¤å…¶æ˜¯å›¾åƒ)å…·æœ‰å¾ˆå¼ºçš„ç‰¹å¾æå–å’Œè¡¨ç¤ºèƒ½åŠ›ï¼Œå¹¶ä¸”åœ¨å·ç§¯è¿ç®—åï¼Œä½¿å¾—å·ç§¯ç¥ç»ç½‘ç»œç»“æ„å¯¹è¾“å…¥çš„å›¾åƒå…·æœ‰<strong>å¹³ç§»ä¸å˜æ€§</strong>ã€‚</p>
<p>PyTorchåœ¨å·ç§¯å±‚æä¾›äº†å¤šç§ç»´åº¦çš„å·ç§¯å’Œé€†å·ç§¯è¿‡ç¨‹ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">torch.nn.Conv1d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·åº”ç”¨ä¸€ç»´å·ç§¯</td>
</tr>
<tr>
<td style="text-align:center">torch.nn.Conv2d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·åº”ç”¨äºŒç»´å·ç§¯</td>
</tr>
<tr>
<td style="text-align:center">torch.nn.Conv3d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·åº”ç”¨ä¸‰ç»´å·ç§¯</td>
</tr>
<tr>
<td style="text-align:center">torch.nn.ConvTranspose1d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·åº”ç”¨ä¸€ç»´è½¬ç½®å·ç§¯</td>
</tr>
<tr>
<td style="text-align:center">torch.nn.ConvTranspose2d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·åº”ç”¨äºŒç»´è½¬ç½®å·ç§¯</td>
</tr>
<tr>
<td style="text-align:center">torch.nn.ConvTranspose3d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·åº”ç”¨ä¸‰ç»´è½¬ç½®å·ç§¯</td>
</tr>
</tbody>
</table>
<p>ä»¥<code>torch.nn.Conv2d()</code>ä¸ºä¾‹ï¼Œå…¶å‚æ•°æ„é€ ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">torch.nn.Conv2d(</span><br><span class="line">    in_channels, <span class="comment"># è¾“å…¥å›¾åƒé€šé“æ•°ï¼Œå¦‚RGBä¸ºä¸‰é€šé“</span></span><br><span class="line">    out_channels, <span class="comment"># è¾“å‡ºå›¾åƒç‰¹å¾æ•°é‡ï¼Œä¹Ÿå°±æ˜¯å·ç§¯æ ¸æ•°é‡</span></span><br><span class="line">    kernel_size, <span class="comment"># å·ç§¯æ ¸å¤§å°</span></span><br><span class="line">    stride, <span class="comment"># å·ç§¯æ­¥é•¿ï¼Œé»˜è®¤ä¸º1</span></span><br><span class="line">    padding, <span class="comment"># åœ¨è¾“å…¥ä¸¤è¾¹å¡«å……é›¶çš„æ•°é‡ï¼Œé»˜è®¤ä¸º0</span></span><br><span class="line">    dilation, <span class="comment"># å·ç§¯æ ¸å…ƒç´ ä¹‹é—´çš„æ­¥å¹…ï¼Œå¯è°ƒæ•´å·ç§¯å­”æ´å¤§å°</span></span><br><span class="line">    groups, <span class="comment"># ä»è¾“å…¥é€šé“åˆ°è¾“å‡ºé€šé“çš„é˜»å¡è¿æ¥æ•°</span></span><br><span class="line">    bias, <span class="comment"># å¸ƒå°”å€¼ï¼Œæ˜¯å¦æ·»åŠ åç½®</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹</strong></p>
<ul>
<li>
<p>é¦–å…ˆè¯»å…¥å›¾ç‰‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">path=<span class="string">r&quot;C:\Users\è½èŠ±é›¨\Desktop\01.jpg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å›¾åƒå¹¶è½¬åŒ–ä¸ºç°åº¦</span></span><br><span class="line">mymin=Image.<span class="built_in">open</span>(path)</span><br><span class="line">myimgray=np.array(mymin.convert(<span class="string">&quot;L&quot;</span>),dtype=np.float32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯è§†åŒ–å›¾ç‰‡</span></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>,<span class="number">8</span>),dpi=<span class="number">300</span>)</span><br><span class="line">plt.imshow(myimgray,cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%20PyTorch%E5%85%A5%E9%97%A8/image-20220728195841284.png" alt="image-20220728195841284" style="zoom:50%;">
</li>
<li>
<p>éœ€è¦å°†å›¾ç‰‡è½¬ä¸ºå¼ é‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†æ•°ç»„è½¬åŒ–ä¸ºå¼ é‡</span></span><br><span class="line">imh,imw=myimgray.shape</span><br><span class="line"><span class="comment"># å›¾ç‰‡åœ¨torchä¸­å­˜å‚¨ï¼š batch channel height weight</span></span><br><span class="line">myimgray_t=torch.from_numpy(myimgray.reshape((<span class="number">1</span>,<span class="number">1</span>,imh,imw)))</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ¥ç€å‘¢ï¼Œæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªå·ç§¯æ ¸ï¼Œå…¶ä¸­æ ¸ä¸€æ˜¯è¾¹ç¼˜æ£€æµ‹æ ¸ï¼Œè€Œæ ¸äºŒæ˜¯éšæœºæ ¸ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬ç”¨ä¸¤ä¸ªå·ç§¯æ ¸è¿›è¡Œæ“ä½œï¼Œç¬¬ä¸€ä¸ªä½¿ç”¨è½®å»“å·ç§¯æ ¸</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªåˆ™é‡‡ç”¨éšæœºæ•°</span></span><br><span class="line">kersize=<span class="number">5</span></span><br><span class="line">ker=torch.ones(kersize,kersize,dtype=torch.float32)*-<span class="number">1</span></span><br><span class="line">ker[<span class="number">2</span>,<span class="number">2</span>]=<span class="number">24</span></span><br><span class="line">ker=ker.reshape((<span class="number">1</span>,<span class="number">1</span>,kersize,kersize))</span><br><span class="line"><span class="comment"># å®šä¹‰å·ç§¯å±‚</span></span><br><span class="line">conv2d=nn.Conv2d(<span class="number">1</span>,<span class="number">2</span>,(<span class="number">5</span>,<span class="number">5</span>),bias=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># é€šè¿‡conv2dçš„weightå‚æ•°å¯ä»¥ä¿®æ”¹å·ç§¯æ ¸</span></span><br><span class="line">conv2d.weight.data[<span class="number">0</span>]=ker</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æœ€åçš„å·ç§¯æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å·ç§¯æ“ä½œ</span></span><br><span class="line">imconv2dout=conv2d(myimgray_t)</span><br><span class="line"><span class="comment"># ç»´åº¦å‹ç¼©</span></span><br><span class="line">imconv2dout_im=imconv2dout.data.squeeze()</span><br><span class="line"><span class="comment"># å¯è§†åŒ–</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">6</span>))</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">plt.imshow(imconv2dout_im[<span class="number">0</span>],cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">plt.imshow(imconv2dout_im[<span class="number">1</span>],cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%20PyTorch%E5%85%A5%E9%97%A8/image-20220728195902448.png" alt="image-20220728195902448" style="zoom:50%;">
</li>
</ul>
<hr>
<h3 id="3-2-æ± åŒ–å±‚">3.2  æ± åŒ–å±‚</h3>
<p>æ± åŒ–æ“ä½œçš„ä¸€ä¸ªé‡è¦ç›®çš„æ˜¯å¯¹å·ç§¯åå¾—åˆ°çš„ç‰¹å¾è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†(ä¸»è¦æ˜¯é™ç»´)ï¼Œæ± åŒ–å±‚å¯ä»¥èµ·åˆ°å¯¹æ•°æ®è¿›ä¸€æ­¥æµ“ç¼©çš„æ•ˆæœï¼Œä»è€Œ<strong>ç¼“è§£è®¡ç®—æ—¶å†…å­˜çš„å‹åŠ›</strong>ã€‚</p>
<p>æ± åŒ–ä¼šå°†ä¸€å®šæ”¹å¤§å°çš„åŒºåŸŸç”¨ä¸€ä¸ª<strong>ä»£è¡¨å…ƒç´ </strong>è¡¨ç¤ºï¼Œè­¬å¦‚å°†ä¸€ä¸ª5*5èŒƒå›´çš„å…ƒç´ åšå¹³å‡ï¼Œå¾—åˆ°ä¸€ä¸ªä»£è¡¨å…ƒç´ ï¼Œè¯¥è¿‡ç¨‹å°±ç§°ä¸ºå¹³å‡æ± åŒ–ã€‚</p>
<p><strong>APIï¼š</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">FUC</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">nn.MaxPool1d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·ä¸Šåº”ç”¨1Dæœ€å¤§å€¼æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.MaxPool2d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·ä¸Šåº”ç”¨2Dæœ€å¤§å€¼æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.MaxPool3d()</td>
<td style="text-align:center">é’ˆå¯¹è¾“å…¥ä¿¡å·ä¸Šåº”ç”¨3Dæœ€å¤§å€¼æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.MaxUnPool1d()</td>
<td style="text-align:center">1Dæœ€å¤§æ± åŒ–çš„éƒ¨åˆ†é€†è¿ç®—</td>
</tr>
<tr>
<td style="text-align:center">nn.MaxUnPool2d()</td>
<td style="text-align:center">2Dæœ€å¤§æ± åŒ–çš„éƒ¨åˆ†é€†è¿ç®—</td>
</tr>
<tr>
<td style="text-align:center">nn.MaxUnPool3d()</td>
<td style="text-align:center">3Dæœ€å¤§æ± åŒ–çš„éƒ¨åˆ†é€†è¿ç®—</td>
</tr>
<tr>
<td style="text-align:center">nn.AvgPool1d()</td>
<td style="text-align:center">1Då¹³å‡æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AvgPool2d()</td>
<td style="text-align:center">2Då¹³å‡æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AvgPool3d()</td>
<td style="text-align:center">3Då¹³å‡æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AdaptiveMaxPool1d()</td>
<td style="text-align:center">1Dè‡ªé€‚åº”æœ€å¤§æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AdaptiveMaxPool2d()</td>
<td style="text-align:center">2Dè‡ªé€‚åº”æœ€å¤§æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AdaptiveMaxPool3d()</td>
<td style="text-align:center">3Dè‡ªé€‚åº”æœ€å¤§æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AdaptiveAvgPool1d()</td>
<td style="text-align:center">1Dè‡ªé€‚åº”å¹³å‡æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AdaptiveAvgPool2d()</td>
<td style="text-align:center">2Dè‡ªé€‚åº”å¹³å‡æ± åŒ–</td>
</tr>
<tr>
<td style="text-align:center">nn.AdaptiveAvgPool3d()</td>
<td style="text-align:center">3Dè‡ªé€‚åº”å¹³å‡æ± åŒ–</td>
</tr>
</tbody>
</table>
<p>ä»¥<code>nn.MaxPool2d()</code>ä¸ºä¾‹ï¼Œå…¶å‚æ•°ä½¿ç”¨ä¸º</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nn.MaxPool2d(</span><br><span class="line">    		kernel_size, <span class="comment"># æ± åŒ–çª—å£å¤§å°</span></span><br><span class="line">             stride=<span class="literal">None</span>, <span class="comment"># æœ€å¤§æ± åŒ–çª—å£ç§»åŠ¨æ­¥é•¿</span></span><br><span class="line">             padding=<span class="number">0</span>, <span class="comment"># è¡¥å……é›¶çš„å±‚æ•°</span></span><br><span class="line">             dilation=<span class="number">1</span>, <span class="comment"># æ§åˆ¶çª—å£å…ƒç´ æ­¥å¹…å‚æ•°</span></span><br><span class="line">             return_indices=<span class="literal">False</span>, <span class="comment"># ä¸ºTrueä¼šè¿”å›æœ€å¤§å€¼ç´¢å¼•</span></span><br><span class="line">             ceil_mode=<span class="literal">False</span> <span class="comment"># Trueæ—¶å‘ä¸Šå–æ•´ï¼Œé»˜è®¤å‘ä¸‹å–æ•´</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹</strong></p>
<ul>
<li>
<p>æˆ‘ä»¬å¯¹åˆšåˆšç»è¿‡å·ç§¯çš„å›¾åƒåšæœ€å¤§æ± åŒ–å¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹å·ç§¯åçš„ç»“æœè¿›è¡Œæœ€å¤§å€¼æ± åŒ–</span></span><br><span class="line">maxpool2=nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">pool2_out=maxpool2(imconv2dout)</span><br><span class="line">pool2_out_im=pool2_out.data.squeeze()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%20PyTorch%E5%85%A5%E9%97%A8/image-20220728195913488.png" alt="image-20220728195913488" style="zoom:50%;">
</li>
<li>
<p>å¹³å‡æ± åŒ–å¤„ç†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¹³å‡å€¼æ± åŒ–</span></span><br><span class="line">avgpool2d=nn.AvgPool2d(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">pool2_out=avgpool2d(imconv2dout)</span><br><span class="line">pool2_out_im=pool2_out.data.squeeze()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%20PyTorch%E5%85%A5%E9%97%A8/image-20220728195923125.png" alt="image-20220728195923125" style="zoom:50%;">
</li>
<li>
<p>è‡ªé€‚åº”æ± åŒ–å¤„ç†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªé€‚åº”å¹³å‡å€¼æ± åŒ–</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨output_sizeå»æŒ‡å®šç‰¹å¾æ˜ å°„å°ºå¯¸</span></span><br><span class="line">adaavgpool2=nn.AdaptiveAvgPool2d(output_size=(<span class="number">100</span>,<span class="number">100</span>))</span><br><span class="line">pool2_out=adaavgpool2(imconv2dout)</span><br><span class="line">pool2_out_im=pool2_out.data.squeeze()</span><br></pre></td></tr></table></figure>
<img src="/2022/07/28/%E3%80%90%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%20PyTorch%E5%85%A5%E9%97%A8/image-20220728195931904.png" alt="image-20220728195931904" style="zoom:50%;">
</li>
</ul>
<p><strong>è¡¥å……</strong></p>
<ul>
<li>
<p>å…³äºtensor.dataå’Œtensor.detach</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€èˆ¬æƒ…å†µä¸‹Tensorä¼šå¸¦æœ‰æ¢¯åº¦ä¿¡æ¯ã€æ˜¯å¦æ±‚å¯¼ç­‰åŠ¨æ€å›¾è®¡ç®—ä¸­éœ€è¦ä½¿ç”¨çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># é‚£è¿™äº›ä¿¡æ¯æ‹¿æ¥åšä¸€äº›äº‹æƒ…æ¯”å¦‚ç»˜å›¾å°±ä¸æ–¹ä¾¿</span></span><br><span class="line"><span class="comment"># å°±éœ€è¦ä»å…¶ä¸­æ‹¿åˆ°æ•°æ®</span></span><br><span class="line"></span><br><span class="line">A.data <span class="comment"># å–å‡ºæ•°æ®æœ¬ä½“ï¼Œä½†å…±äº«å†…å­˜ï¼Œä¿®æ”¹äº’ç›¸å½±å“</span></span><br><span class="line">A.detach <span class="comment"># åŒæ ·ï¼Œåªä¸è¿‡åœ¨åå‘ä¼ æ’­æ—¶ï¼Œä¼šåˆ¤æ–­æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹ï¼Œä¿®æ”¹ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="3-3-æ¿€æ´»å‡½æ•°">3.3  æ¿€æ´»å‡½æ•°</h3>
<p>é€šå¸¸çš„æ¿€æ´»å‡½æ•°ä¸ºSå‹(sigmoid)æ¿€æ´»å‡½æ•°ã€åŒæ›²æ­£åˆ‡(Tanh)æ¿€æ´»å‡½æ•°ã€çº¿æ€§ä¿®æ­£å•å…ƒ(ReLU)æ¿€æ´»å‡½æ•°</p>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">FUC</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">nn.Sigmoid</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">nn.Tanh</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">nn.ReLU</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">nn.Softplus</td>
<td style="text-align:center">-</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><strong>Sigmoid</strong></p>
<p>ä¹Ÿç§°ä¸ºlogisticæ¿€æ´»å‡½æ•°ï¼Œå…¶è¾“å‡ºåœ¨(0,1)ä¹‹é—´ï¼Œä½œä¸ºæ—©æœŸçš„æ¿€æ´»å‡½æ•°ï¼Œå…¶ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ã€‚å½“è¾“å…¥è¿œç¦»åæ ‡åŸç‚¹æ—¶ï¼Œå‡½æ•°çš„æ¢¯åº¦ä¼šå˜çš„å¾ˆå°ï¼Œå½±å“å‚æ•°çš„æ›´æ–°é€Ÿåº¦ã€‚</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>âˆ’</mo><mi>x</mi></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">f(x)=\frac{1}{1+e^{-x}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0908em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6973em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
</li>
<li>
<p><strong>Tanh</strong></p>
<p>è¾“å‡ºæœŸé—´åœ¨(-1,1)ä¹‹é—´ï¼Œæ•´ä¸ªå‡½æ•°ä»¥0ä¸ºä¸­å¿ƒï¼Œè™½ç„¶æ¢¯åº¦æ¶ˆå¤±ä»ç„¶å­˜åœ¨ï¼Œä½†å…¶ä»¥0å¯¹ç§°çš„ç‰¹ç‚¹ä½¿å¾—å…¶æ•ˆæœä¼˜äºSigmoidã€‚</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>âˆ’</mo><msup><mi>e</mi><mrow><mo>âˆ’</mo><mi>x</mi></mrow></msup></mrow><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>+</mo><msup><mi>e</mi><mrow><mo>âˆ’</mo><mi>x</mi></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">f(x)=\frac{e^x-e^{-x}}{e^x+e^{-x}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2177em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4483em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6973em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
</li>
<li>
<p><strong>ReLU</strong></p>
<p>ReLUåªä¿ç•™å¤§äº0çš„è¾“å‡ºï¼Œå½“è¾“å…¥ä¸ºæ­£æ•°æ—¶ï¼Œä¸å­˜åœ¨æ¢¯åº¦é¥±å’Œé—®é¢˜ï¼Œè®¡ç®—é€Ÿåº¦å¾ˆå¿«ã€‚</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)=max(0,x)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></p>
</li>
<li>
<p><strong>Softplus</strong></p>
<p>Softplusæ˜¯å¹³æ»‘è¿‘ä¼¼ReLUï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span>é»˜è®¤å–å€¼ä¸º1ï¼Œè¯¥å‡½æ•°å¯¹äºä»»æ„ä½ç½®éƒ½å¯å¯¼ï¼Œä¸”ä¿ç•™äº†ReLUçš„ä¼˜ç‚¹ã€‚</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>Î²</mi></mfrac><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mi>Î²</mi><mi>x</mi></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)=\frac{1}{\beta}log(1+e^{\beta x})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2019em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05278em;">Î²</span><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
</li>
</ul>
<hr>
<h3 id="3-4-å¾ªç¯å±‚">3.4  å¾ªç¯å±‚</h3>
<p>PyTorchæä¾›äº†ä¸‰ç§å¾ªç¯å±‚çš„å®ç°ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">FUC</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">nn.RNN</td>
<td style="text-align:center">å¤šå±‚RNNå•å…ƒ</td>
</tr>
<tr>
<td style="text-align:center">nn.LSTM</td>
<td style="text-align:center">å¤šå±‚é•¿çŸ­æœŸè®°å¿†LSTMå•å…ƒ</td>
</tr>
<tr>
<td style="text-align:center">nn.GRU</td>
<td style="text-align:center">å¤šå±‚é—¨é™å¾ªç¯GRUå•å…ƒ</td>
</tr>
<tr>
<td style="text-align:center">nn.RNNCell</td>
<td style="text-align:center">ä¸€ä¸ªRNNå•å…ƒ</td>
</tr>
<tr>
<td style="text-align:center">nn.LSTMCell</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">nn.GRUCell</td>
<td style="text-align:center">-</td>
</tr>
</tbody>
</table>
<p>ä»¥nn.RNN ä¸ºä¾‹ï¼Œå…¶å‚æ•°ä¿¡æ¯ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">nn.RNN(</span><br><span class="line">    input_size, <span class="comment"># è¾“å…¥xçš„ç‰¹å¾æ•°é‡</span></span><br><span class="line">    hidden_size, <span class="comment"># éšå±‚çš„ç‰¹å¾æ•°é‡</span></span><br><span class="line">    num_layers, <span class="comment"># RNNç½‘ç»œå±‚æ•°</span></span><br><span class="line">    nonlinearity, <span class="comment"># æŒ‡å®šéçº¿æ€§å‡½æ•°ä½¿ç”¨tanhè¿˜æ˜¯reluï¼Œé»˜è®¤tanh</span></span><br><span class="line">    bias, <span class="comment"># åç½®æƒé‡</span></span><br><span class="line">    bathc_first, <span class="comment"># Trueæ—¶ï¼Œé™åˆ¶è¾“å…¥å’Œè¾“å‡ºshapeä¸º[batch_size,time_step,feature]</span></span><br><span class="line">    dropout, <span class="comment"># å€¼éé›¶æ—¶ï¼Œé™¤äº†æœ€åä¸€å±‚ï¼Œå…¶ä»–RNNå±‚çš„è¾“å‡ºéƒ½ä¼šå¥—ä¸Šä¸€ä¸ªdropoutå±‚</span></span><br><span class="line">    bidirectional <span class="comment"># è¯¥å€¼ä¸ºTrueæ—¶ï¼Œä¼šå˜æˆä¸€ä¸ªåŒå‘RNN</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å…·ä½“ä½¿ç”¨å†…å®¹è§åç»­å¾ªç¯ç¥ç»ç½‘ç»œã€‚</p>
<h3 id="3-5-å…¨è¿æ¥å±‚">3.5 å…¨è¿æ¥å±‚</h3>
<p>é€šå¸¸æ‰€è¯´çš„å…¨è¿æ¥å±‚æ˜¯æŒ‡ä¸€ä¸ªç”±å¤šä¸ªç¥ç»å…ƒæ‰€ç»„æˆçš„å±‚ï¼Œå…¶æ‰€æœ‰çš„è¾“å‡ºå’Œè¯¥å±‚æ‰€æœ‰çš„è¾“å…¥éƒ½æœ‰è¿æ¥ï¼Œå³æ¯ä¸ªè¾“å…¥éƒ½ä¼šå½±å“æ‰€æœ‰ç¥ç»å…ƒçš„è¾“å‡ºã€‚</p>
<p>åœ¨PyTorchä¸­ï¼Œnn.linear()è¡¨ç¤ºçº¿æ€§å˜æ¢ï¼Œå…¨è¿æ¥å±‚å¯ä»¥çœ‹åšçº¿æ€§å˜æ¢å±‚åŠ ä¸Šä¸€ä¸ªæ¿€æ´»å‡½æ•°ã€‚</p>
<p>å…¶ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nn.Linear(</span><br><span class="line">    in_features, <span class="comment"># è¾“å…¥æ ·æœ¬ç‰¹å¾æ•°é‡</span></span><br><span class="line">    out_features, <span class="comment"># è¾“å‡ºæ ·æœ¬ç‰¹å¾æ•°é‡</span></span><br><span class="line">    bias <span class="comment"># æ˜¯å¦æ·»åŠ åç½®</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>ç°åœ¨åˆ©ç”¨PyTorchæ„å»ºä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœºã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MLP</span>(nn.Module):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">		<span class="built_in">super</span>(MLP,self).__init__()</span><br><span class="line">		self.model=nn.Sequential(</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># nn.Sequentialå°±æ˜¯ä¸€ä¸ªå®¹å™¨</span></span><br><span class="line">            <span class="comment"># å¯ä»¥æ·»åŠ ä»»ä½•ç»§æ‰¿è‡ªnn.Moduleçš„ç±»</span></span><br><span class="line">            <span class="comment"># å¹¶è®©è¾“å…¥ä¾æ¬¡ç»è¿‡å®¹å™¨å†…æ”¾ç½®çš„ç¥ç»å…ƒ</span></span><br><span class="line">            </span><br><span class="line">            nn.Linear(<span class="number">784</span>,<span class="number">200</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">200</span>,<span class="number">200</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Linear(<span class="number">200</span>,<span class="number">10</span>),</span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">            <span class="comment"># ç»§æ‰¿äº†nn.module.forwardçš„æ–¹æ³•</span></span><br><span class="line">            <span class="keyword">return</span> self.model(x)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="4-æ•°æ®æ“ä½œå’Œé¢„å¤„ç†">4.  æ•°æ®æ“ä½œå’Œé¢„å¤„ç†</h2>
<p>åœ¨PyTorchä¸­ï¼Œtorch.utils.dataæ¨¡å—åŒ…å«ç€ä¸€äº›å¸¸ç”¨çš„æ•°æ®é¢„å¤„ç†å‡½æ•°ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">FUC</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">torch.utils.data.TensorDataset()</td>
<td style="text-align:center">å°†æ•°æ®å¤„ç†ä¸ºå¼ é‡</td>
</tr>
<tr>
<td style="text-align:center">torch.utils.data.ConcatDataset()</td>
<td style="text-align:center">è¿æ¥å¤šä¸ªæ•°æ®é›†</td>
</tr>
<tr>
<td style="text-align:center">torch.utils.data.Subset()</td>
<td style="text-align:center">æ ¹æ®ç´¢å¼•è·å–æ•°æ®é›†çš„å­é›†</td>
</tr>
<tr>
<td style="text-align:center">torch.utils.data.DataLoader()</td>
<td style="text-align:center">æ•°æ®åŠ è½½å™¨</td>
</tr>
<tr>
<td style="text-align:center">torch.utils.data.random_split()</td>
<td style="text-align:center">éšæœºå°†æ•°æ®é›†æ‹†åˆ†æˆç»™å®šé•¿åº¦çš„éé‡å æ–°æ•°æ®é›†</td>
</tr>
</tbody>
</table>
<h3 id="4-1-é«˜ç»´æ•°ç»„">4.1  é«˜ç»´æ•°ç»„</h3>
<p><strong>å›å½’æ•°æ®æ¡ˆä¾‹</strong></p>
<ul>
<li>
<p>é¢„å…ˆåŠ è½½æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_boston,load_iris</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–æ³¢å£«é¡¿å›å½’æ•°æ®</span></span><br><span class="line">boston_x,boston_y=load_boston(return_X_y=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># è¿™ä¸¤ä¸ªæ˜¯numpyæ•°æ®ï¼Œç±»å‹ä¸ºfloat64</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>éœ€è¦å°†numpyè½¬åŒ–ä¸ºtensor</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">train_xt=torch.from_numpy(boston_x.astype(np.float32))</span><br><span class="line">train_yt=torch.from_numpy(boston_y.astype(np.float32))</span><br><span class="line"><span class="comment"># è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†Tensor.float32æ•°æ®å•¦</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åœ¨è®­ç»ƒå…¨è¿æ¥ç¥ç»ç½‘ç»œæ—¶ï¼Œé€šå¸¸ä¸€æ¬¡ä½¿ç”¨ä¸€ä¸ªbatchçš„æ•°æ®è¿›è¡Œæƒé‡æ›´æ–°ã€‚torch.utils.data.DataLoader()å¯ä»¥å°†è¾“å…¥çš„æ•°æ®é›†æ‰“åŒ…æˆä¸€ä¸ªåŠ è½½å™¨ï¼Œæ¯æ¬¡è¿­ä»£å¯ä½¿ç”¨ä¸€ä¸ªbatchæ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ©ç”¨TDå‡½æ•°å°†XYæ•´åˆåˆ°ä¸€èµ·</span></span><br><span class="line">train_data=Data.TensorDataset(train_xt,train_yt)</span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªåŠ è½½å™¨ï¼Œå°†è®­ç»ƒæ•°æ®é›†è¿›è¡Œæ‰¹é‡å¤„ç†</span></span><br><span class="line">train_loader=Data.DataLoader(</span><br><span class="line">    dataset=train_data, <span class="comment"># ä½¿ç”¨çš„æ•°æ®é›†</span></span><br><span class="line">    batch_size=<span class="number">64</span>, <span class="comment"># æ‰¹å¤„ç†æ ·æœ¬å¤§å°</span></span><br><span class="line">    shuffle=<span class="literal">True</span>, <span class="comment"># æ¯æ¬¡è¿­ä»£å‰æ‰“ä¹±</span></span><br><span class="line">    num_workers=<span class="number">1</span>, <span class="comment"># ä½¿ç”¨ä¸¤ä¸ªè¿›ç¨‹</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç°åœ¨æˆ‘ä»¬å°±èƒ½è·å–åˆ°ä¸€ä¸ªbatchçš„æ•°æ®äº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> step,(b_x,b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">    b_x.shape</span><br><span class="line">    <span class="comment"># torch.Size([64,13])</span></span><br><span class="line">    b_y.shape</span><br><span class="line">    <span class="comment"># torch.Size([64])</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="4-2-å›¾åƒæ•°æ®">4.2  å›¾åƒæ•°æ®</h3>
<p><strong>ä»¥æ–‡ä»¶å¤¹è·¯å¾„æ•°æ®ä¸ºä¾‹</strong></p>
<ul>
<li>
<p>torchvisionçš„datasetsæ¨¡å—åŒ…å«ImageFolder()å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥è¯»å–å¦‚ä¸‹æ ¼å¼çš„æ•°æ®é›†ï¼š</p>
<ul>
<li>root/dog/001.png</li>
<li>root/cat/026.pngâ€¦</li>
</ul>
</li>
<li>
<p>ä¸ºäº†ä¿è¯å›¾åƒæ•°æ®çš„ä¸€è‡´æ€§ï¼Œéœ€è¦å…ˆåšä¸€äº›å˜æ¢</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"></span><br><span class="line">train_data_transforms=transforms.Compose([</span><br><span class="line">	transforms.RandomResizedCrop(<span class="number">224</span>), <span class="comment"># éšæœºé•¿å®½æ¯”è£å‰ªä¸º224*224</span></span><br><span class="line">    transforms.RandomHorizontalFlip(), <span class="comment"># ä¾æ¦‚ç‡p=0.5æ°´å¹³ç¿»è½¬</span></span><br><span class="line">    transforms.ToTensor() <span class="comment"># è½¬åŒ–ä¸ºå¼ é‡å¹¶å½’ä¸€åŒ–è‡³[0-1]</span></span><br><span class="line">    <span class="comment"># æ­¤è¿‡ç¨‹è¿˜ä¼šå°†å›¾åƒçš„å½¢çŠ¶ä»[H,W,C]è½¬åŒ–ä¸º[C,H,W]</span></span><br><span class="line">    <span class="comment"># æ ‡å‡†åŒ–å¤„ç†</span></span><br><span class="line">    transforms.Normalize([<span class="number">0.485</span>,<span class="number">0.456</span>,<span class="number">0.406</span>],</span><br><span class="line">                        [<span class="number">0.229</span>,<span class="number">0.224</span>,<span class="number">0.225</span>])</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ¥ç€æˆ‘ä»¬å°±èƒ½å»è¯»å–å›¾åƒäº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">train_data_dir=<span class="string">&quot;data/chap2/imagedata/&quot;</span></span><br><span class="line"><span class="comment"># æ–‡ä»¶å¤¹è·¯å¾„ä¸å˜æ¢ä¿¡æ¯</span></span><br><span class="line">train_data=ImageFolder(train_data_dir,transform=train_data_transforms)</span><br><span class="line">train_data_loader=Data.DataLoder(</span><br><span class="line">    train_data,batch_size=<span class="number">4</span>,shuffle=<span class="literal">True</span>,num_works=<span class="number">1</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="4-3-æ–‡æœ¬æ•°æ®">4.3  æ–‡æœ¬æ•°æ®</h3>
<p>è¿™ä¸€ç« å†…å®¹å› æ•°æ®è€Œå¼‚ï¼Œæš‚ä¸”æŒ‰ä¸‹ä¸è¡¨ã€‚</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€æ•°è®ºã€‘æœ€å¤§å…¬çº¦æ•°]]></title>
      <url>/2022/07/28/%E3%80%90%E6%95%B0%E8%AE%BA%E3%80%91%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0/</url>
      <content type="html"><![CDATA[<h2 id="å‰ç½®çŸ¥è¯†ç‚¹">å‰ç½®çŸ¥è¯†ç‚¹</h2>
<h3 id="æ•´é™¤">æ•´é™¤</h3>
<p>å¯¹äºæ•´æ•° a å’Œæ•´æ•° bï¼ˆ b â‰  0 ï¼‰ï¼Œè‹¥å­˜åœ¨æ•´æ•° qï¼Œä½¿å¾— a = q * bï¼Œé‚£ä¹ˆç§° a èƒ½è¢« b æ•´é™¤</p>
<p>ä¾‹å¦‚ 14 = 2 * 7ï¼Œé‚£ä¹ˆ 14 èƒ½è¢« 7 æ•´é™¤</p>
<h3 id="çº¦æ•°ä¸å€æ•°">çº¦æ•°ä¸å€æ•°</h3>
<p>è‹¥æ•´æ•° a èƒ½å¤Ÿè¢«æ•´æ•°bæ•´é™¤ï¼Œåˆ™ç§° b æ˜¯ a çš„çº¦æ•°ï¼ˆå› æ•°ï¼‰ï¼Œa æ˜¯ b çš„å€æ•°</p>
<p>ä¾‹å¦‚ 14 èƒ½å¤Ÿè¢« 7 æ•´é™¤ï¼Œé‚£ä¹ˆ 7 å°±æ˜¯ 14 çš„çº¦æ•°ï¼Œ14 å°±æ˜¯ 7 çš„å€æ•°</p>
<h3 id="å…¬çº¦æ•°">å…¬çº¦æ•°</h3>
<p>è‹¥æ•´æ•° d æ—¢æ˜¯æ•´æ•° a çš„çº¦æ•°ï¼Œä¹Ÿæ˜¯æ•´æ•° b çš„çº¦æ•°ï¼Œé‚£ä¹ˆ d æ˜¯ a, b çš„å…¬çº¦æ•°</p>
<p>ä¾‹å¦‚ 7 å³æ˜¯ 14 çš„çº¦æ•°ï¼Œä¹Ÿæ˜¯ 21 çš„çº¦æ•°ï¼Œé‚£ä¹ˆ 7 æ˜¯ 14 ä¸ 21 çš„å…¬çº¦æ•°</p>
<h3 id="æœ€å¤§å…¬çº¦æ•°">æœ€å¤§å…¬çº¦æ•°</h3>
<p>å…¬çº¦æ•°ä¸­æœ€å¤§çš„æ•´æ•°ä¾¿ç§°ä¸ºæœ€å¤§å…¬çº¦æ•°ï¼Œæ•´æ•° a ä¸æ•´æ•° b çš„æœ€å¤§å…¬çº¦æ•°è®°ä¸º gcd( a, b )ï¼Œä¹Ÿè®°ä¸º ( a, b )</p>
<p>ä¾‹å¦‚ 14 ä¸ 21 çš„å…¬çº¦æ•°æœ‰ { Â±1ï¼ŒÂ±7 }ï¼Œå…¶ä¸­æ•´æ•° 7 æ˜¯æœ€å¤§çš„å…¬çº¦æ•°ï¼Œé‚£ä¹ˆ gcd( 14, 21 ) = 7</p>
<h2 id="è¾—è½¬ç›¸é™¤æ³•">è¾—è½¬ç›¸é™¤æ³•</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>è¿™é‡Œå…ˆç»™å‡ºå‡ ä¸ªå®šç†ï¼Œè¯æ˜è¿‡ç¨‹æœ€åå†å™è¿°</p>
<p><strong>â‘  gcd( a, b ) = gcd( b, a )</strong></p>
<p><strong>â‘¡ gcd( a, b ) = gcd( |a|, |b| )</strong></p>
<p><strong>â‘¢ gcd( a, 0 ) = |a|, å…¶ä¸­ a â‰  0ï¼Œ å³ 0 å’Œä»»æ„æ•´æ•° a çš„æœ€å¤§å…¬çº¦æ•°å‡ä¸º |a|</strong></p>
<p><strong>â‘£ è®¾ a, b, c, q æ˜¯å››ä¸ªæ•´æ•°ï¼Œè‹¥æœ‰ a = q * b + cï¼Œåˆ™ gcd( a, b ) = gcd( b, c )</strong></p>
<p>é€šä¿—åœ°è¯´ï¼Œè‹¥ c æ˜¯ a é™¤ä»¥ b çš„ä½™æ•°ï¼Œé‚£ä¹ˆ a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°ç­‰äº b å’Œ c çš„æœ€å¤§å…¬çº¦æ•°</p>
<p>æœ‰äº†ä¸Šè¿°é‚£äº›å®šç†ï¼Œæˆ‘ä»¬ä¾¿æœ‰äº†æ±‚ä¸¤ä¸ªæ•°æœ€å¤§å…¬çº¦æ•°çš„æ–¹æ³•ï¼š</p>
<p>ä¾‹å¦‚æ±‚ 15 å’Œ 21 çš„æœ€å¤§å…¬çº¦æ•°</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œ15 çš„çº¦æ•°æœ‰ { Â±1ï¼ŒÂ±3ï¼ŒÂ±5ï¼ŒÂ±15 }ï¼Œ21 çš„çº¦æ•°æœ‰ { Â±1ï¼ŒÂ±3ï¼ŒÂ±7ï¼ŒÂ±21 }</p>
<p>é‚£ä¹ˆ 15 å’Œ 21 çš„å…¬çº¦æ•°ä¸º { Â±1ï¼ŒÂ±3 }ï¼Œæœ€å¤§å…¬çº¦æ•°æ˜¯ 3ï¼Œå³ gcd( 15, 21 ) = 3</p>
<p>è¿ç”¨ä¹‹å‰æåˆ°è¿‡çš„é‚£äº›å®šç†</p>
<p>æˆ‘ä»¬å‘ç° 15 = 0 * 21 + 15, é‚£ä¹ˆ gcd( 15, 21 ) = gcd( 21, 15 )</p>
<p>åˆ 21 = 1 * 15 + 6 , é‚£ä¹ˆ gcd( 21, 15 ) = gcd( 15, 6 )</p>
<p>åˆ 15 = 2 * 6 + 3ï¼Œé‚£ä¹ˆ gcd( 15, 6 ) = gcd( 6, 3 )</p>
<p>åˆ 6 = 2 * 3 + 0ï¼Œé‚£ä¹ˆ gcd( 6, 3 ) = gcd( 3, 0 )</p>
<p>åˆ gcd(3, 0 ) = 3ï¼Œæ•… gcd( 15, 21 ) = 3</p>
<p><strong>å®šç†è¯æ˜</strong></p>
<h4 id="â‘ -gcd-a-b-gcd-b-a">â‘  gcd( a, b ) = gcd( b, a )</h4>
<p>è®¾æ•´æ•° a çš„å› æ•°ä¸º { Â±a1, Â±a2, â€¦, Â±an }ï¼Œæ•´æ•° b çš„å› æ•°ä¸º { Â±b1, Â±b2, â€¦, Â±bm }</p>
<p>æœ€å¤§å…¬çº¦æ•°æ˜¯ä¸¤çº¦æ•°é›†åˆäº¤é›†ä¸­çš„æœ€å¤§é¡¹ï¼Œä¸é›†åˆé¡ºåºæ— å…³</p>
<p>æ•… gcd( a, b ) = gcd( b, a )</p>
<h4 id="â‘¡-gcd-a-b-gcd-a-b">â‘¡ gcd( a, b ) = gcd( |a|, |b| )</h4>
<p>è®¾æ•´æ•° a çš„çº¦æ•°ä¸º { Â±a1, Â±a2, â€¦, Â±an }ï¼Œåˆ™å¯¹ä»»æ„æ•´æ•° iï¼ˆ 1 â‰¤ i â‰¤ n ï¼‰ï¼Œå­˜åœ¨æ•´æ•° qï¼Œä½¿ a = q * ai</p>
<p>è€Œ -a = (-q) * aiï¼Œæ•… a çš„çº¦æ•°å‡ä¸º -a çš„çº¦æ•°ï¼ŒåŒæ ·åœ°ï¼Œ -a çš„çº¦æ•°ä¹Ÿä¸º a çš„çº¦æ•°</p>
<p>æ•… a, -a, |a| çš„çº¦æ•°é›†åˆç›¸åŒï¼ŒåŒç† b, -b, |b| çš„çº¦æ•°é›†åˆä¹Ÿç›¸åŒ</p>
<p>è€Œæœ€å¤§å…¬çº¦æ•°æ˜¯ä¸¤çº¦æ•°é›†åˆçš„äº¤é›†ä¸­çš„æœ€å¤§é¡¹ï¼Œæ•… gcd( a, b ) = gcd( |a|, |b| )</p>
<h4 id="â‘¢-gcd-a-0-a-å…¶ä¸­-a-â‰ -0">â‘¢ gcd( a, 0 ) = |a|, å…¶ä¸­ a â‰  0</h4>
<p>å› ä¸º a çš„æœ€å¤§çº¦æ•°æ˜¯ |a|</p>
<p>è€Œä»»æ„é 0 æ•´æ•°éƒ½æ˜¯ 0 çš„çº¦æ•°ï¼Œå³ 0 = 0 * nï¼ˆ n â‰  0 ï¼‰</p>
<p>æ•… gcd( a, 0 ) = |a|</p>
<h4 id="â‘£-è®¾-a-b-c-q-ä¸ºå››ä¸ªæ•´æ•°ï¼Œè‹¥æœ‰-a-q-b-cï¼Œåˆ™-gcd-a-b-gcd-b-c">â‘£ è®¾ a, b, c, q ä¸ºå››ä¸ªæ•´æ•°ï¼Œè‹¥æœ‰ a = q * b + cï¼Œåˆ™ gcd( a, b ) = gcd( b, c )</h4>
<p>ï¼ˆâ… ï¼‰è®¾ dâ€™ = gcd( a, b )ï¼Œdâ€ = gcd( b, c )</p>
<p>æ•…æœ‰æ•´æ•° q1, q2, ä½¿å¾— a = q1 * dâ€™ï¼Œb = q2 * dâ€™</p>
<p>å°†ä¸Šé¢ä¸¤å¼ä»£å…¥ a = q * b + c æœ‰</p>
<p>c = a - q * b = q1 * dâ€™ - q * q2 * dâ€™ = ( q1 - q * q2 ) * dâ€™</p>
<p>å› ä¸º q, q1, q2 å‡æ˜¯æ•´æ•°ï¼Œæ•… c èƒ½è¢« dâ€™ æ•´é™¤ï¼Œæ•… dâ€™ ä¹Ÿæ˜¯ cçš„çº¦æ•°</p>
<p>æ•… dâ€™ ä¹Ÿæ˜¯ b ä¸ c çš„å…¬çº¦æ•°ï¼Œå³æœ‰ dâ€™ â‰¤ gcd( b, c ) = dâ€</p>
<p>ï¼ˆâ…¡ï¼‰åŒç†æœ‰æ•´æ•° q3, q4ï¼Œä½¿å¾— b = q3 * dâ€, c = q4 * dâ€</p>
<p>å°†ä¸Šé¢ä¸¤å¼ä»£å…¥ a = q * b + c æœ‰</p>
<p>a = q * q3 * dâ€ + q4 * dâ€ = ( q * q3 + q4 ) * dâ€</p>
<p>å› ä¸º q, q3, q4 å‡æ˜¯æ•´æ•°ï¼Œæ•… a èƒ½è¢« dâ€ æ•´é™¤ï¼Œæ•… dâ€ ä¹Ÿæ˜¯ a çš„çº¦æ•°</p>
<p>æ•… dâ€ ä¹Ÿæ˜¯ a å’Œ b çš„å…¬çº¦æ•°ï¼Œå³æœ‰ dâ€ â‰¤ gcd( a, b ) = dâ€™</p>
<p>ï¼ˆâ…¢ï¼‰ç”±ä¸Šè¿°çŸ¥ dâ€™ â‰¤ dâ€ ä¸” dâ€ â‰¤ dâ€™</p>
<p>æ•… dâ€™ = dâ€ï¼Œå³ gcd( a, b ) = gcd( b, c )</p>
<p>è¯æ¯•</p>
<p>é€šè¿‡ä»¥ä¸Šè¯æ˜ï¼Œæˆ‘ä»¬å‘ç°è¾—è½¬ç›¸é™¤æ³•çš„æœ¬è´¨åœ¨äºä¸æ–­ç¼©å°è®¡ç®—èŒƒå›´ï¼Œç›´åˆ°æ— æ³•åŒ–ç®€(b=0)ä¸ºæ­¢ï¼Œæ­¤æ—¶å‰©ä¸‹çš„æ•°a(ä¸å¯å†åˆ†)ï¼Œå°±æ˜¯æœ€å¤§å…¬å› æ•°ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>a</mi><mo>=</mo><mi>q</mi><mi>b</mi><mo>+</mo><msup><mi>q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi>c</mi><mo>+</mo><msup><mi>q</mi><mrow><mo mathvariant="normal">â€²</mo><mo mathvariant="normal">â€²</mo></mrow></msup><mi>d</mi><mo>+</mo><mi>Î²</mi><mspace linebreak="newline"></mspace><mo>=</mo><mo stretchy="false">(</mo><mi>q</mi><mi>n</mi><mi>k</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><msup><mi>q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><msup><mi>n</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi>k</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><msup><mi>q</mi><mrow><mo mathvariant="normal">â€²</mo><mo mathvariant="normal">â€²</mo></mrow></msup><msup><mi>n</mi><mrow><mo mathvariant="normal">â€²</mo><mo mathvariant="normal">â€²</mo></mrow></msup><mi>k</mi><mo stretchy="false">)</mo><mo>+</mo><mi>Î²</mi></mrow><annotation encoding="application/x-tex">a=qb+q&#x27;c+q&#x27;&#x27;d+\beta
\\=(qnk)+(q&#x27;n&#x27;k)+(q&#x27;&#x27;n&#x27;&#x27;k)+\beta
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9963em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9963em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²â€²</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal" style="margin-right:0.03148em;">nk</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0519em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0519em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²â€²</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²â€²</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></span></p>
<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span> ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><mn>0</mn><mo>âˆ—</mo><mi>e</mi><mo>+</mo><mi>Î²</mi></mrow><annotation encoding="application/x-tex">e=0*e+\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi><mo>=</mo><mi>e</mi></mrow><annotation encoding="application/x-tex">\beta=e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></p>
<p>å¯å†™ä½œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">y=ax+b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>çš„çº¿æ€§æ ¼å¼ã€‚</p>
<h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€’å½’ç‰ˆè¾—è½¬ç›¸é™¤æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gcd</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">if</span> b==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    <span class="keyword">return</span> gcd(<span class="built_in">abs</span>(b),<span class="built_in">abs</span>(a)%<span class="built_in">abs</span>(b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># éé€’å½’</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gcd1</span>(<span class="params">a,b</span>):</span><br><span class="line">    a,b=<span class="built_in">abs</span>(a),<span class="built_in">abs</span>(b)</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        c=a%b</span><br><span class="line">        <span class="keyword">if</span> c==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> b</span><br><span class="line">        a=b</span><br><span class="line">        b=c</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´ç›¸å‡æŸæœ¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gcd2</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">if</span> a==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> b</span><br><span class="line">    <span class="keyword">if</span> b==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    a,b=<span class="built_in">abs</span>(a),<span class="built_in">abs</span>(b)</span><br><span class="line">    <span class="keyword">while</span> a!=b:</span><br><span class="line">        <span class="keyword">if</span> a&gt;b:</span><br><span class="line">            a=a-b</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            b=b-a</span><br><span class="line">    <span class="keyword">return</span> a</span><br></pre></td></tr></table></figure>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[592 åˆ†æ•°åŠ å‡æ³•è¿ç®—]]></title>
      <url>/2022/07/27/%E3%80%90LeetCode%E3%80%91_592/</url>
      <content type="html"><![CDATA[<h2 id="é¢˜å¹²">é¢˜å¹²</h2>
<p>ç»™å®šä¸€ä¸ªè¡¨ç¤ºåˆ†æ•°åŠ å‡è¿ç®—çš„å­—ç¬¦ä¸² <code>expression</code> ï¼Œä½ éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„è®¡ç®—ç»“æœã€‚</p>
<p>è¿™ä¸ªç»“æœåº”è¯¥æ˜¯ä¸å¯çº¦åˆ†çš„åˆ†æ•°ï¼Œå³æœ€ç®€åˆ†æ•°ã€‚ å¦‚æœæœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä¾‹å¦‚ <code>2</code>ï¼Œä½ éœ€è¦å°†å®ƒè½¬æ¢æˆåˆ†æ•°å½¢å¼ï¼Œå…¶åˆ†æ¯ä¸º<code>1</code>ã€‚æ‰€ä»¥åœ¨ä¸Šè¿°ä¾‹å­ä¸­, <code>2 </code>åº”è¯¥è¢«è½¬æ¢ä¸º<code> 2/1</code>ã€‚</p>
<p><img src="/2022/07/27/%E3%80%90LeetCode%E3%80%91_592/image-20220727212728977.png" alt="image-20220727212728977"></p>
<h2 id="æ€è·¯">æ€è·¯</h2>
<p>æœ¬é¢˜ä¸»è¦è€ƒé‡çš„æ˜¯å¯¹å­—ç¬¦ä¸²çš„æ“ä½œå’Œæ•°å­¦ç†è§£ã€‚</p>
<p>é¦–å…ˆï¼Œå¯¹å­—ç¬¦ä¸²çš„æ“ä½œæ ¸å¿ƒåœ¨äºï¼š</p>
<ul>
<li>åˆ¤æ–­å•ä¸ªå­—ç¬¦ä¸²æ˜¯ç¬¦å·è¿˜æ˜¯æ•°å­—</li>
<li>å¯¹æ•°å­—è¿›è¡Œè¯»å–</li>
<li>æ ¹æ®ç¬¦å·åˆ¤æ–­è¿ç®—è§„åˆ™</li>
</ul>
<p>è€Œæ•°å­¦ç†è§£åœ¨äºå¦‚ä½•è®¡ç®—åˆ†å¼ï¼Œå®é™…ä¸Šï¼Œç›´æ¥å¯¹å…¶è¿›è¡Œæ“ä½œ(æ¯è¿‡ä¸€ä¸ªæ“ä½œç¬¦è¿›è¡Œä¸€æ¬¡ç®—æ•°æ“ä½œ)ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œå°†å…¶è½¬åŒ–ä¸ºåˆ†å¼éš¾å…ä¼šäº§ç”Ÿæ•°æ®ä¸¢å¤±ï¼Œè€Œä¸”è¾ƒä¸ºå›°éš¾ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®°å½•åˆ†å­<code>numerator</code>å’Œåˆ†æ¯<code>denominator</code>çš„é‡ï¼Œé€šè¿‡çº¦åˆ†å¾—åˆ°æœ€ç»ˆçš„åˆ†å¼ç»“æœï¼Œå°±åƒä¸­å­¦é¢˜ç›´æ¥å¤„ç†åˆ†æ•°ä¸€èˆ¬ã€‚</p>
<p>è®¾ä¸¤ä¸ªæ•°<code>a,b</code>çš„åˆ†å­åˆ†æ¯ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>d</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">a_n,a_d,b_n,b_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œåˆ†å¼ç›¸åŠ å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>n</mi><mi>e</mi><mi>w</mi><mo>=</mo><mfrac><mrow><msub><mi>a</mi><mi>n</mi></msub><mo>âˆ—</mo><msub><mi>b</mi><mi>d</mi></msub><mo>+</mo><msub><mi>b</mi><mi>n</mi></msub><mo>âˆ—</mo><msub><mi>a</mi><mi>d</mi></msub></mrow><mrow><msub><mi>a</mi><mi>d</mi></msub><mo>âˆ—</mo><msub><mi>b</mi><mi>d</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">new=\frac{a_n*b_d+b_n*a_d}{a_d*b_d}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2074em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>æœ€åé€šè¿‡<strong>çº¦åˆ†</strong>å¾—åˆ°æœ€ç»ˆç»“æœã€‚</p>
<h2 id="ä»£ç ">ä»£ç </h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fractionAddition</span>(<span class="params">self, expression: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># d1*d2*d3</span></span><br><span class="line">        <span class="comment"># (n1*d2+n2*d1)*d3+n3*(n1*d2+n2*d1)</span></span><br><span class="line">        <span class="comment"># gcd(n,d)</span></span><br><span class="line"></span><br><span class="line">        numerator,denominator=<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">        i=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> i&lt;<span class="built_in">len</span>(expression):</span><br><span class="line"></span><br><span class="line">            <span class="comment"># determine the sign</span></span><br><span class="line">            sign=<span class="number">1</span> <span class="comment"># maybe begin without &quot;+&quot;</span></span><br><span class="line">            <span class="keyword">if</span> expression[i] <span class="keyword">in</span> [<span class="string">&quot;+&quot;</span>,<span class="string">&quot;-&quot;</span>]:</span><br><span class="line">                <span class="keyword">if</span> expression[i]==<span class="string">&quot;-&quot;</span>:</span><br><span class="line">                    sign=-<span class="number">1</span></span><br><span class="line">                i+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># determine the numerator            </span></span><br><span class="line">            nume_=<span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> i&lt;<span class="built_in">len</span>(expression) <span class="keyword">and</span> expression[i].isdigit():</span><br><span class="line">                nume_=nume_*<span class="number">10</span>+<span class="built_in">int</span>(expression[i])</span><br><span class="line">                i+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># determine the denominator</span></span><br><span class="line">            i+=<span class="number">1</span></span><br><span class="line">            deno_=<span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> i&lt;<span class="built_in">len</span>(expression) <span class="keyword">and</span> expression[i].isdigit():</span><br><span class="line">                deno_=deno_*<span class="number">10</span>+<span class="built_in">int</span>(expression[i])</span><br><span class="line">                i+=<span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># calculate fraction1 and fraction2</span></span><br><span class="line">            numerator=numerator*deno_+sign*nume_*denominator</span><br><span class="line">            denominator*=deno_</span><br><span class="line"></span><br><span class="line">            <span class="comment"># next loop</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> denominator==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;0/1&quot;</span></span><br><span class="line"></span><br><span class="line">        g=gcd(numerator,denominator)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;numerator//g&#125;</span>/<span class="subst">&#123;denominator//g&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹</h2>
<ul>
<li>åœ¨åšå­—ç¬¦ä¸²æ“ä½œæ—¶ï¼Œä¸€å®šè¦æ˜ç¡®æ¯ä¸€æ­¥åˆ°äº†å“ªä¸ªä½ç½®ï¼Œè¯¥ä½ç½®ä¸Šè¦è¿›è¡Œä»€ä¹ˆæ“ä½œã€‚</li>
<li>æ³¨æ„æ„ç¾¤çš„è§„å¾‹</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LeetCode </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Unit2 ä»‹è¯å’Œå¹¶åˆ—è¿è¯]]></title>
      <url>/2022/06/24/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit2%20%E4%BB%8B%E8%AF%8D%E5%92%8C%E5%B9%B6%E5%88%97%E8%BF%9E%E8%AF%8D/</url>
      <content type="html"><![CDATA[<h1>Unit2 ä»‹è¯å’Œå¹¶åˆ—è¿è¯</h1>
<hr>
<h2 id="ä¸€ã€ä»‹è¯">ä¸€ã€ä»‹è¯</h2>
<p>ä»‹è¯æ˜¯ä¸€ç§è™šè¯ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œä»‹è¯ä¹‹åä¸€èˆ¬æœ‰åè¯æˆ–ä»£è¯(å®¾æ ¼)æˆ–ç›¸å½“äºåè¯çš„å…¶ä»–è¯ç±»ã€çŸ­è¯­æˆ–ä»å¥åšä»–çš„å®¾è¯­ï¼Œå³æ„æˆä»‹è¯çŸ­è¯­ï¼Œå¸¸ç”¨äºè¡¨ç¤ºçŠ¶æ€ã€‚</p>
<h3 id="1-1-å¸¸è§ä»‹è¯åŠè¾¨æ">1.1  å¸¸è§ä»‹è¯åŠè¾¨æ</h3>
<ul>
<li>
<p>è¡¨ç¤ºåœ°ç‚¹æ—¶ï¼Œ<code>at, in, on</code>çš„åŒºåˆ«</p>
<p><code>at</code>åé¢è·Ÿçš„æ˜¯æ¯”è¾ƒå°çš„åœ°æ–¹ï¼Œæ¯”å¦‚æ‘åº„ï¼Œå°åŸå¸‚ï¼Œé—¨ç‰Œç­‰ï¼›<code>in</code>åé¢æ¥æ¯”è¾ƒå¤§çš„åœ°æ–¹ï¼Œæ¯”å¦‚å›½å®¶ã€åŸå¸‚ç­‰ï¼›<code>on</code>è¡¨ç¤ºåœ¨æŸç‰©ä¹‹ä¸Šï¼Œä¸”è¡¨é¢æ¥è§¦ã€‚ä¾‹å¦‚ï¼š<code>on the road, in/on the stree, on the farm, in the field</code></p>
</li>
<li>
<p>è¡¨ç¤ºæ—¶é—´æ—¶<code>at, on , in</code>çš„åŒºåˆ«</p>
<ol>
<li>
<p><code>at</code>è¡¨ç¤ºæ—¶é—´ç‚¹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">at six</span><br><span class="line">at noon</span><br><span class="line">at midnight</span><br><span class="line">at night</span><br><span class="line">at sunrise</span><br><span class="line">at the weekend</span><br><span class="line">at Christmas</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>on</code>è¡¨ç¤ºåœ¨ç‰¹å®šæŸä¸€å¤©æˆ–æŸå¤©çš„ä¸Šåˆï¼Œä¸‹åˆï¼Œæ™šä¸Š(æ—¶é—´æ®µ)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">on Monday</span><br><span class="line">on Sunday afternoon</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>in</code>è¡¨ç¤ºä¸€æ®µæ—¶é—´ï¼Œåé¢è·Ÿä¸Šå°æ—¶ã€å‘¨ã€æœˆã€å¹´ã€å­£ç­‰è¡¨ç¤ºä¸€æ®µæ—¶é—´çš„åè¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">in three hours</span><br><span class="line">in a week</span><br><span class="line">in a month</span><br><span class="line">in tree years</span><br></pre></td></tr></table></figure>
<p><code>in</code>æ˜¯ä¸å—é™åˆ¶çš„æ—¶é—´æ®µï¼Œ<code>at</code>æ˜¯å…·ä½“æ—¶é—´ç‚¹ï¼Œ<code>on</code>æ˜¯ç‰¹å®šæŸå¤©ï¼Œå…¶å…³ç³»å¯ä»¥ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">work</span>(<span class="params">time</span>):</span><br><span class="line">	res=<span class="string">&quot;in&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(time)==<span class="string">&quot;æ—¶é—´ç‚¹&quot;</span>:</span><br><span class="line">        res=<span class="string">&quot;at&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">type</span>(time)==<span class="string">&quot;æ—¶é—´æ®µ&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> time==<span class="string">&quot;å…·ä½“æŸå¤©&quot;</span> <span class="keyword">or</span> time==<span class="string">&quot;å…·ä½“æŸå¤©æŸæ®µæ—¶é—´&quot;</span>:</span><br><span class="line">            res=<span class="string">&quot;on&quot;</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>è¡¨ç¤ºæŒç»­æ—¶é—´çš„<code>since, for, in, after</code>çš„åŒºåˆ«</p>
<ol>
<li>
<p><code>since</code>æ¥è¿‡å»æŸä¸ªæ—¶é—´ç‚¹ï¼Œè¡¨ç¤ºâ€œè‡ªâ€¦ä»¥æ¥â€ï¼Œå¸¸ç”¨äºå®Œæˆæ—¶ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">She has been working here since <span class="number">2007.</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>for</code>æ¥ä¸€æ®µå…·ä½“çš„æ—¶é—´ï¼Œå¸¸ç”¨äºå®Œæˆæ—¶ï¼Œè¡¨ç¤ºæ—¶é—´çš„å»¶ç»­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I have studied English <span class="keyword">for</span> <span class="number">7</span> years.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>in+ä¸€æ®µæ—¶é—´</code>ä¸éå»¶ç»­æ€§åŠ¨è¯è¿ç”¨ï¼Œè¡¨ç¤ºä¸€æ®µæ—¶é—´ä»¥åï¼Œå¤šç”¨äºå°†æ¥æ—¶ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Jack will be back <span class="keyword">in</span> a week.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>after+ä¸€æ®µæ—¶é—´</code>è¡¨ç¤ºâ€œâ€¦ä¹‹åâ€ï¼Œå¸¸ç”¨äºè¿‡å»æ—¶ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">After one month, the baby began to learn climbing.</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>è¡¨ç¤ºæ–¹ä½çš„ä»‹è¯<code>in, on, to, off</code>çš„åŒºåˆ«</p>
<ol>
<li>
<p><code>in</code>è¡¨ç¤ºåœ¨å¢ƒå†…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> China</span><br><span class="line"><span class="keyword">in</span> Europe</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>on</code>è¡¨ç¤ºç›¸é‚»æˆ–åœ¨è¾¹ç•Œä¸Šï¼Œä¸åœ¨å¢ƒå†…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on the border between Kenya and Tanzania.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>to</code>è¡¨ç¤ºåœ¨å¢ƒå¤–ï¼Œä¸æ¥å£¤</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Beijing lies to the north of Shanghai.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>off</code>è¡¨ç¤ºåœ¨æµ·é¢ä¸Šé è¿‘æµ·å²¸çš„åœ°æ–¹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">off the southwest coast of the U.S.</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>è¡¨ç¤ºè¿åŠ¨æ–¹å‘æˆ–ç›®çš„çš„ä»‹è¯</p>
<ol>
<li>
<p><code>across</code>è¡¨ç¤ºç©¿è¿‡ç‰©ä½“è¡¨é¢æˆ–æ¨ªè¿‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">across the street</span><br><span class="line">across the English Channel</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>through</code>è¡¨ç¤ºåœ¨æŸä¸€ç©ºé—´é€šè¿‡æˆ–çºµå‘ç©¿è¿‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">through the forest</span><br><span class="line">go through the valley</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>along</code>è¡¨ç¤ºæ²¿ç€ä¸€æ¡çº¿å¹³è¡Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go along the bank of the river</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>up</code>è¡¨ç¤ºå‘ä¸Šï¼Œç”±å—åˆ°åŒ—ï¼Œç”±ä¸œåˆ°è¥¿ï¼Œç”±æ²¿æµ·åˆ°å†…é™†ï¼Œç”±å°åœ°æ–¹åˆ°å¤§åœ°æ–¹ï¼Œç”±å†œæ‘åˆ°åŸå¸‚ï¼Œåä¹‹åˆ™ç”¨<code>down</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go up to London for the day</span><br><span class="line">drive all the way down from Wuhan in Guilin</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>to</code>è¡¨ç¤ºåŠ¨ä½œçš„ç›®çš„åœ°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">travel to Beijing</span><br><span class="line">our weekly trip to the supermarket</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>towards</code>æŒ‡æœå‘ï¼Œè€Œæ— åˆ°è¾¾çš„æ„æ€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">walk towards the river</span><br><span class="line">look out towards the sea</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>for</code>è¡¨ç¤ºå‰å¾€çš„ç›®çš„åœ°ï¼Œä¸å…¶è¿ç”¨çš„åŠ¨è¯æœ‰<code>leave, start off, set out, head, sail</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">leave <span class="keyword">for</span> New York</span><br><span class="line">a ship heading <span class="keyword">for</span> Dalian</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>è¡¨ç¤ºâ€œé™¤â€¦ä¹‹å¤–â€çš„ä»‹è¯</p>
<p><strong>besides</strong>ï¼šè¡¨åŒ…å«ï¼Œæ„ä¸ºâ€œé™¤â€¦ä¹‹å¤–è¿˜æœ‰â€</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Besides the Black, six couples attended the party last Saturday.</span><br></pre></td></tr></table></figure>
<p><strong>except</strong>ï¼šè¡¨ç¤ºæ’é™¤ï¼Œæ„ä¸º&quot;é™¤â€¦ä¹‹å¤–&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The museum <span class="keyword">is</span> <span class="built_in">open</span> every day <span class="keyword">except</span> Tuesday.</span><br></pre></td></tr></table></figure>
<p><strong>but</strong>ï¼šè¡¨ç¤ºæ’é™¤ï¼Œå¤šå’Œ<code>nobody, none, no one, nothing, anything, everyone, all, whoç­‰è¿ç”¨</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Nothing but trouble will come of this plan. <span class="comment"># æ³¨æ„æ’é™¤çš„æ˜¯å‰é¢ä¸»è¯­éƒ¨åˆ†</span></span><br><span class="line"><span class="comment"># A but B</span></span><br><span class="line"><span class="comment"># è¡¨ç¤ºå…¨é›†AæŒ–å»å­é›†Bå‰©ä¸‹çš„é›†åˆ</span></span><br></pre></td></tr></table></figure>
<p><strong>except for</strong>ï¼šè¡¨ç¤ºå‡ºå»æ•´ä½“ä¸­çš„éƒ¨åˆ†ï¼Œæ„ä¸ºâ€œåªä¸è¿‡ï¼Œåªæ˜¯â€ï¼Œæœ‰å¤§ä½“è‚¯å®šï¼Œç»†èŠ‚æŒ‡æ­£çš„æ„æ€</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Your composition <span class="keyword">is</span> very good <span class="keyword">except</span> <span class="keyword">for</span> a few spelling mistakes.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>among</code>å’Œ<code>between</code></p>
<p><strong>among</strong>ï¼šè¡¨ç¤ºä¸‰ä¸ªæˆ–ä»¥ä¸Šçš„äººæˆ–ç‰©ä¹‹é—´ï¼Œåæ¥å¤æ•°åè¯æˆ–é›†ä½“åè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The news sparked a heated debate among people on social media.</span><br><span class="line"><span class="comment"># è¿™ä¸€æ¶ˆæ¯åœ¨ç¤¾äº¤åª’ä½“ä¸Šå¼•å‘äº†äººä»¬çš„æ¿€çƒˆè®¨è®º</span></span><br></pre></td></tr></table></figure>
<p><strong>between</strong>ï¼šç”¨äºä¸¤è€…ä¹‹é—´ï¼Œæˆ–è€…ä¸‰ä¸ªä»¥ä¸Šçš„ä¸¤ä¸¤ä¹‹é—´</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Peter sat between Mary <span class="keyword">and</span> Jane.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¡¨ç¤ºä»·æ ¼ã€æ¯”ç‡ã€æ ‡å‡†ã€é€Ÿåº¦çš„ä»‹è¯</p>
<p><strong>at</strong>ï¼šè¡¨ç¤ºä»·å€¼ã€ä»·æ ¼ã€æ¯”ç‡æˆ–é€Ÿåº¦ï¼Œä¾‹å¦‚<code>buy sth. at a half price</code></p>
<p><strong>for</strong>ï¼šè¡¨ç¤ºäº¤æ¢ï¼ŒæŒ‡æ€»ä»·é’±ï¼Œå¦‚<code>pay $3 for a ticket</code></p>
<p><strong>by</strong>ï¼šè¡¨ç¤ºåº¦é‡å•ä½æˆ–æ ‡å‡†ï¼Œåæ¥è®¡é‡å•ä½å’Œåè¯ï¼Œä¸€èˆ¬æ˜¯å•æ•°ï¼Œå‰é¢éœ€è¦åŠ å† è¯<code>the</code>ï¼Œæ•°è¯æˆ–å¤æ•°åè¯å‰ä¸åŠ ã€‚å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">We<span class="string">&#x27;re paid by the hour. # æˆ‘ä»¬æŒ‰å°æ—¶è®¡è´¹</span></span><br><span class="line"><span class="string">Increase by 20% # å¢é•¿20%</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>against</code></p>
<p>â€‹	å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>against</code>æ˜¯ä»‹è¯ï¼Œè€Œä¸æ˜¯åŠ¨è¯</p>
<ul>
<li>
<p>è¡¨ç¤ºâ€œåå¯¹ï¼Œä¸åˆ©äºï¼Œå¯¹ç€ï¼Œè¿èƒŒâ€</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">We are <span class="built_in">all</span> against his idea.</span><br><span class="line">He was married against his will. <span class="comment"># ä»–ç»“å©šæ˜¯è¿èƒŒæœ¬æ„çš„</span></span><br><span class="line">There were <span class="number">20</span> votes <span class="keyword">for</span> him <span class="keyword">and</span> <span class="number">12</span> against him. <span class="comment"># æœ‰20ç¥¨èµæˆä»–ï¼Œ12ç¥¨åå¯¹ä»–</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¡¨ç¤ºâ€œé ç€ï¼Œç›¯ç€ï¼Œè¿ç€â€</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">He stood <span class="keyword">with</span> his back against the door.</span><br><span class="line">He hit his head against the window.</span><br><span class="line">Bright red flags flow <span class="keyword">in</span> the wind against the blue sky.</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><code>beyond</code></p>
<ul>
<li>
<p>è¡¨ç¤ºä½ç½®ï¼Œæ„æ€æ˜¯â€œåœ¨â€¦çš„é‚£ä¸€è¾¹ï¼Œåœ¨â€¦ä¹‹å¤–ï¼Œåœ¨æ›´è¿œå¤„&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The new housing estate stretches beyond the playing-fields. <span class="comment"># æ–°çš„ä½å®…åŒºä¸€ç›´å»¶ä¼¸åˆ°æ¸¸ä¹åœºçš„å¦ä¸€è¾¹</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¡¨ç¤ºæ—¶é—´ï¼Œæ„æ€æ˜¯â€œè¿Ÿäºï¼Œè¶…è¿‡&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Some shops keep <span class="built_in">open</span> beyond midnight. <span class="comment"># æœ‰äº›å•†åº—è¥ä¸šåˆ°åŠå¤œä¹‹å</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¡¨ç¤ºèŒƒå›´ã€æ°´å¹³ã€é™åº¦ã€èƒ½åŠ›ï¼Œæ„æ€æ˜¯â€œè¶…å‡ºï¼Œå¤šä½™ï¼Œä¸ºâ€¦æ‰€ä¸èƒ½åŠ&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Your work <span class="keyword">is</span> beyond <span class="built_in">all</span> praise. <span class="comment"># ä½ çš„ä½œå“è®©äººç§°èµä¸å·²</span></span><br><span class="line">She was really touched beyond words. <span class="comment"># å¥¹ç¡®å®è¢«æ„ŸåŠ¨çš„æ— æ³•å½¢å®¹</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¡¨ç¤ºå¹´é¾„æˆ–æ•°é‡ï¼Œæ„æ€æ˜¯&quot;è¶…è¿‡&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">He didn<span class="string">&#x27;t believe in people living beyond 150. # ä»–ä¸èƒ½ç›¸ä¿¡äººèƒ½æ´»åˆ°150å²ä»¥ä¸Š</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç”¨åœ¨å¦å®šå’Œç–‘é—®å¥ä¸­ï¼Œæ„æ€æ˜¯â€œé™¤â€¦ä¹‹å¤–&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">I know nothing beyond what he told me. <span class="comment"># é™¤äº†ä»–å‘Šè¯‰æˆ‘çš„ï¼Œæˆ‘ä¸€æ— æ‰€çŸ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸¸ç”¨æ­é…</span></span><br><span class="line">beyond belief <span class="comment"># éš¾ä»¥ç½®ä¿¡</span></span><br><span class="line">beyond doubt <span class="comment"># æ— ç–‘çš„</span></span><br><span class="line">beyond compare <span class="comment"># æ— ä¸ä¼¦æ¯”çš„ï¼Œä¸¾ä¸–æ— åŒ</span></span><br><span class="line">beyond recognition <span class="comment"># è®¤ä¸å‡ºæ¥ï¼Œæ— æ³•è¾¨è®¤</span></span><br><span class="line">beyond control <span class="comment"># æ— æ³•æ§åˆ¶çš„</span></span><br><span class="line">beyond repair <span class="comment"># æ— æ³•ä¿®ç†</span></span><br><span class="line">beyond description <span class="comment"># éš¾ä»¥å½¢å®¹</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="1-2-å›ºå®šä»‹è¯æ­é…">1.2  å›ºå®šä»‹è¯æ­é…</h3>
<ul>
<li>
<p>ä»‹è¯+åè¯</p>
<ol>
<li>
<p><code>at</code>+åè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">at war <span class="comment"># æ­£åœ¨äº¤æˆ˜</span></span><br><span class="line">at work <span class="comment"># æ­£åœ¨å·¥ä½œ</span></span><br><span class="line">at peace <span class="comment"># å¤„äºå’Œå¹³æˆ–å¹³é™çŠ¶æ€</span></span><br><span class="line">at table <span class="comment"># æ­£åœ¨åƒé¥­</span></span><br><span class="line">at meeting <span class="comment"># åœ¨å¼€ä¼š</span></span><br><span class="line">be at school <span class="comment"># æ­£åœ¨ä¸Šå­¦</span></span><br><span class="line">at church <span class="comment"># åœ¨åšç¤¼æ‹œ</span></span><br><span class="line">at breakfast/lunch/supper <span class="comment"># æ­£åœ¨åƒæ—©(åˆ/æ™š)é¥­</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>in</code>+åè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> progress <span class="comment"># æ­£åœ¨è¿›å±•ä¸­</span></span><br><span class="line"><span class="keyword">in</span> fashion <span class="comment"># æµè¡Œ</span></span><br><span class="line"><span class="keyword">in</span> church <span class="comment"># åœ¨åšç¤¼æ‹œ</span></span><br><span class="line"><span class="keyword">in</span> danger <span class="comment"># å¤„åœ¨å±é™©ä¸­</span></span><br><span class="line"><span class="keyword">in</span> <span class="keyword">class</span> <span class="comment"># åœ¨ä¸Šè¯¾</span></span><br><span class="line"><span class="keyword">in</span> turn <span class="comment"># ä¾æ¬¡</span></span><br><span class="line"><span class="keyword">in</span> action <span class="comment"># åœ¨è¿è½¬</span></span><br><span class="line"><span class="keyword">in</span> hospital <span class="comment"># åœ¨ä½é™¢</span></span><br><span class="line"><span class="keyword">in</span> tears <span class="comment"># åœ¨æµæ³ª</span></span><br><span class="line"><span class="keyword">in</span> office <span class="comment"># åœ¨æ‰§æ”¿</span></span><br><span class="line"><span class="keyword">in</span> power <span class="comment"># æŒæ¡æƒåŠ›</span></span><br><span class="line"><span class="keyword">in</span> operation <span class="comment"># ç”Ÿæ•ˆï¼Œèµ·ä½œç”¨</span></span><br><span class="line"><span class="keyword">in</span> need <span class="comment"># åœ¨è´«å›°ä¸­</span></span><br><span class="line"><span class="keyword">in</span> addition <span class="comment"># æ­¤å¤–</span></span><br><span class="line"><span class="keyword">in</span> time <span class="comment"># åŠæ—¶</span></span><br><span class="line"><span class="keyword">in</span> trouble <span class="comment"># å¤„äºå›°å¢ƒä¹‹ä¸­</span></span><br><span class="line"><span class="keyword">in</span> one<span class="string">&#x27;s opinion # æ ¹æ®æŸäººçš„çœ‹æ³•</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>on</code>+åè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">on strike <span class="comment"># åœ¨ç½¢å·¥</span></span><br><span class="line">on leave <span class="comment"># åœ¨ä¼‘å‡</span></span><br><span class="line">on the rise <span class="comment"># åœ¨ä¸Šæ¶¨</span></span><br><span class="line">on a visit <span class="comment"># æ­£åœ¨è®¿é—®</span></span><br><span class="line">on sale <span class="comment"># æ­£åœ¨å‡ºå”®</span></span><br><span class="line">on time <span class="comment"># å‡†æ—¶</span></span><br><span class="line">on earth <span class="comment"># ç©¶ç«Ÿï¼›åœ¨åœ°çƒä¸Š</span></span><br><span class="line">on the contrary <span class="comment"># ç›¸å</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>under</code>+åè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">under consideration <span class="comment"># åœ¨è€ƒè™‘ä¹‹ä¸­</span></span><br><span class="line">under construction <span class="comment"># åœ¨ä¿®å»ºä¸­</span></span><br><span class="line">under discussion <span class="comment"># åœ¨è®¨è®ºä¸­</span></span><br><span class="line">under treatment <span class="comment"># åœ¨æ²»ç–—ä¸­</span></span><br><span class="line">under repair <span class="comment"># åœ¨ä¿®ç†ä¸­</span></span><br><span class="line">under attack <span class="comment"># å—åˆ°æ”»å‡»</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>å½¢å®¹è¯+ä»‹è¯</p>
<ol>
<li>
<p>ä¸<code>at</code>æœ‰å…³çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">be angry at sth. <span class="comment"># å¯¹æŸäº‹æ„Ÿåˆ°ç”Ÿæ°”</span></span><br><span class="line">be good at <span class="comment"># æ“…é•¿äº</span></span><br><span class="line">be bad at <span class="comment"># ä¸æ“…é•¿</span></span><br><span class="line">be surprised at <span class="comment"># å¯¹...æ„Ÿåˆ°åƒæƒŠ</span></span><br><span class="line">be clever at <span class="comment"># æ“…é•¿</span></span><br><span class="line">be terrified at <span class="comment"># å¯¹...æ„Ÿåˆ°å®³æ€•</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸<code>of</code>æœ‰å…³çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">be afraid of <span class="comment"># å®³æ€•</span></span><br><span class="line">be sure of <span class="comment"># å¯¹...æœ‰æŠŠæ¡</span></span><br><span class="line">be full of <span class="comment"># å……æ»¡</span></span><br><span class="line">be tired of <span class="comment"># å¯¹...æ„Ÿåˆ°åŒå€¦</span></span><br><span class="line">be fond of <span class="comment"># å–œæ¬¢</span></span><br><span class="line">be proud of <span class="comment"># å¯¹...æ„Ÿåˆ°è‡ªè±ª</span></span><br><span class="line">be worthy of <span class="comment"># åº”å¾—åˆ°æŸç‰©</span></span><br><span class="line">be centain of <span class="comment"># å¯¹...ç¡®å®šçš„</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸<code>with</code>æœ‰å…³çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">be angry <span class="keyword">with</span> sb. <span class="comment"># å¯¹æŸäººæ„Ÿåˆ°ç”Ÿæ°”</span></span><br><span class="line">be strict <span class="keyword">with</span> sb. <span class="comment"># å¯¹æŸäººè¦æ±‚ä¸¥æ ¼</span></span><br><span class="line">be careful <span class="keyword">with</span> <span class="comment"># å—åˆ°...æ¬¢è¿</span></span><br><span class="line">be busy <span class="keyword">with</span> <span class="comment"># å› ...è€Œç¹å¿™</span></span><br><span class="line">be popular <span class="keyword">with</span> <span class="comment"># å—åˆ°...æ¬¢è¿</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸<code>to</code>æœ‰å…³çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">be <span class="built_in">next</span> to <span class="comment"># ä¸...ç›¸é‚»</span></span><br><span class="line">be good to <span class="comment"># å¯¹...å¥½</span></span><br><span class="line">be polite to <span class="comment"># å¯¹...æœ‰ç¤¼è²Œ</span></span><br><span class="line">be kind to <span class="comment"># å‹å¥½å¯¹å¾…</span></span><br><span class="line">be cruel to <span class="comment"># å¯¹...æ®‹æš´</span></span><br><span class="line">be rude to <span class="comment"># å¯¹...æ— ç†</span></span><br><span class="line">be married to <span class="comment"># å«ç»™,å¨¶</span></span><br><span class="line">be close to <span class="comment"># é è¿‘ï¼ŒæŒ¨ç€</span></span><br><span class="line">be near to <span class="comment"># è·ç¦»...è¿‘</span></span><br><span class="line">be similar to <span class="comment"># ä¸...ç›¸ä¼¼</span></span><br><span class="line">be known to <span class="comment"># ä¸º...æ‰€çŸ¥</span></span><br><span class="line">be due to <span class="comment"># æ˜¯ç”±äº</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸<code>for</code>æœ‰å…³çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">be good <span class="keyword">for</span> <span class="comment"># å¯¹...æœ‰åˆ©</span></span><br><span class="line">be free <span class="keyword">for</span> <span class="comment"># å¯¹...å…è´¹</span></span><br><span class="line">be fit <span class="keyword">for</span> <span class="comment"># å¯¹...åˆé€‚çš„</span></span><br><span class="line">be unfit <span class="keyword">for</span> <span class="comment"># å¯¹...ä¸åˆé€‚</span></span><br><span class="line">be eager <span class="keyword">for</span> <span class="comment"># æ¸´æœ›</span></span><br><span class="line">be hungry <span class="keyword">for</span> <span class="comment"># æ¸´æœ›</span></span><br><span class="line">be anxious <span class="keyword">for</span> <span class="comment"># ä¸º...æ„Ÿåˆ°ç„¦è™‘ï¼Œæ‹…å¿ƒ</span></span><br><span class="line">be sorry <span class="keyword">for</span> <span class="comment"># ä¸º...æ„Ÿåˆ°æŠ±æ­‰</span></span><br><span class="line">be known <span class="keyword">for</span> <span class="comment"># å› ...è€Œé—»å</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸<code>from</code>æœ‰å…³çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">be far <span class="keyword">from</span> <span class="comment"># è¿œç¦»</span></span><br><span class="line">be different <span class="keyword">from</span> <span class="comment"># ä¸åŒäº</span></span><br><span class="line">be free <span class="keyword">from</span> <span class="comment"># ä½¿...å…äº</span></span><br><span class="line">be safe <span class="keyword">from</span> <span class="comment"># æ²¡æœ‰...çš„å±é™©</span></span><br><span class="line">be absent <span class="keyword">from</span> <span class="comment"># ç¼ºå¸­</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>â€œåŠ¨è¯+ä»‹è¯â€å›ºå®šæ­é…</p>
<ol>
<li>
<p>åŠ¨è¯+<code>at</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">glare at <span class="comment"># çªç€</span></span><br><span class="line">laugh at <span class="comment"># å˜²ç¬‘</span></span><br><span class="line">stare at <span class="comment"># çªç€</span></span><br><span class="line">arrive at <span class="comment"># åˆ°è¾¾ï¼ŒæŠµè¾¾</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åŠ¨è¯+<code>for</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mistake... <span class="keyword">for</span>... å°†...è¯¯ä½œ</span><br><span class="line">search <span class="keyword">for</span> æœå¯»</span><br><span class="line">pay <span class="keyword">for</span> <span class="comment"># ä¸º...ä»˜è´¹</span></span><br><span class="line">run <span class="keyword">for</span> <span class="comment"># ç«é€‰</span></span><br><span class="line">blame...<span class="keyword">for</span>... <span class="comment"># å› ...è´£å¤‡</span></span><br><span class="line">charge <span class="keyword">for</span> <span class="comment"># ç´¢ä»·ï¼Œæ”¶è´¹</span></span><br><span class="line">leave... <span class="keyword">for</span>... <span class="comment"># ç¦»å¼€ï¼Œå‰å¾€</span></span><br><span class="line">account <span class="keyword">for</span> <span class="comment"># è§£é‡Šï¼Œæ˜¯...çš„åŸå› ï¼Œå </span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åŠ¨è¯+<code>from</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">die from # æ­»äº</span><br><span class="line">hear from sb. # æ”¶åˆ°æŸäººçš„æ¥ä¿¡</span><br><span class="line">keep...from... # é˜»æ­¢...åš</span><br><span class="line">prevent...from... # é˜»æ­¢...åš</span><br><span class="line">stop...from... # é˜»æ­¢...åš</span><br><span class="line"># stoping him from doing it!</span><br><span class="line">protect...from...  # ä¿æŠ¤...å…å—...</span><br><span class="line">distinguish...from... # ä½¿...åŒºåˆ«äº...</span><br><span class="line">recover from... # ä»...å›å¤</span><br><span class="line">separate... from... # å°†....ä¸...åˆ†ç¦»</span><br><span class="line">suffer from # é­å—ï¼Œå—...ä¹‹è‹¦</span><br><span class="line">tell...from... # å°†...ä¸...åŒºåˆ†</span><br><span class="line">discourage sb. from. # åŠåˆ«äººä¸è¦</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åŠ¨è¯+<code>in</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">involve ... <span class="keyword">in</span> ... <span class="comment"># å°†...ç‰µæ‰¯è¿›æ¥</span></span><br><span class="line">result <span class="keyword">in</span> <span class="comment"># å¯¼è‡´ï¼Œé€ æˆ</span></span><br><span class="line">result <span class="keyword">from</span> <span class="comment"># ç”±...é€ æˆï¼Œå› ...äº§ç”Ÿ</span></span><br><span class="line">succeed <span class="keyword">in</span> <span class="comment"># åœ¨...æ–¹é¢æˆåŠŸ</span></span><br><span class="line">lie <span class="keyword">in</span> <span class="comment"># åœ¨äº</span></span><br><span class="line">believe <span class="keyword">in</span> <span class="comment"># ä¿¡ä»»ï¼Œç›¸ä¿¡</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åŠ¨è¯+<code>into</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">divide...into... <span class="comment"># å°†...åˆ’åˆ†ä¸º</span></span><br><span class="line">change...into... <span class="comment"># å°†...è½¬å˜</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åŠ¨è¯+<code>of</code></p>
</li>
<li>
<p>åŠ¨è¯+<code>on/upon</code></p>
</li>
<li>
<p>åŠ¨è¯+ä»‹è¯<code>to</code></p>
</li>
<li>
<p>åŠ¨è¯+<code>with</code></p>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Unit1  å† è¯ã€åè¯ã€ä»£è¯å’Œæ•°è¯]]></title>
      <url>/2022/06/24/%E3%80%90%E8%8B%B1%E8%AF%AD%E3%80%91Unit1%20%20%E5%86%A0%E8%AF%8D%E3%80%81%E5%90%8D%E8%AF%8D%E3%80%81%E4%BB%A3%E8%AF%8D%E5%92%8C%E6%95%B0%E8%AF%8D/</url>
      <content type="html"><![CDATA[<h1>Unit1  å† è¯ã€åè¯ã€ä»£è¯å’Œæ•°è¯</h1>
<hr>
<h2 id="ä¸€ã€å† è¯">ä¸€ã€å† è¯</h2>
<p>å† è¯ç”¨åœ¨åè¯ä¹‹å‰ï¼Œåˆ†ä¸å®šå† è¯<code>a\an</code>å’Œå®šå† è¯<code>the</code>ä¸¤ç±»</p>
<h3 id="1-1-ä¸å®šå† è¯">1.1  ä¸å®šå† è¯</h3>
<ol>
<li>
<p>è¡¨ç¤º<strong>åˆæ¬¡æåŠ</strong>ï¼Œ<strong>éç‰¹æŒ‡</strong>çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ä¸å®šå† è¯</p>
<p><strong>ä¾‹å¥</strong>ï¼š</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The Wilsons live <span class="keyword">in</span> an A-shaped house near the coast. It <span class="keyword">is</span> a 17th-century cottage.</span><br><span class="line"><span class="comment"># å¨å°”é€Šå…ˆç”Ÿä¸€å®¶ä½åœ¨æµ·è¾¹çš„ä¸€ä¸ªAå­—å½¢æˆ¿å­é‡Œï¼Œé‚£æ˜¯ä¸€ä¸ª17ä¸–çºªçš„å°å±‹</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>
<p>è¡¨ç¤º<strong>æ•°é‡</strong>â€œä¸€ä¸ªâ€</p>
<p>ä¸å®šå† è¯è¡¨ç¤ºæ•°é‡æ—¶ï¼Œç­‰åŒäº<code>one</code>ï¼Œç”¨äºäººåå‰ï¼Œåˆ™æ˜¯è¡¨ç¤º<strong>ä¸è®¤è¯†æ­¤äºº</strong>æˆ–ä¸æŸåäººæœ‰<strong>ç±»ä¼¼æ€§è´¨</strong>çš„äººæˆ–äº‹æƒ…ï¼Œä»¥ä¸º<code>a certain</code></p>
<p><strong>ä¾‹å¥</strong>ï¼š</p>
</li>
</ol>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello, could I speak to Mr.Smith?</span><br><span class="line">Sorry, wrong number. There isn<span class="string">&#x27;t a Mr.Smith here.</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>
<p>ç”¨äº<code>quite,rather,many,half,what,such</code>ä¹‹åæˆ–<code>so(as,too,how)+å½¢å®¹è¯</code>ä¹‹å</p>
<p><strong>ä¾‹å¥</strong>ï¼š</p>
</li>
</ol>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This room <span class="keyword">is</span> rather a big one.</span><br><span class="line">She <span class="keyword">is</span> so lovely a girl that <span class="built_in">all</span> of us like her very much.</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>
<p>ç”¨äºæŸäº›æŠ½è±¡åè¯ä¹‹å‰ï¼Œè¡¨ç¤ºå…·ä½“åŒ–</p>
<p><strong>ä¾‹å¥</strong>ï¼š</p>
</li>
</ol>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">It would be a pity to cut down these trees.</span><br><span class="line">He <span class="keyword">is</span> a great success <span class="keyword">as</span> a scientist.</span><br></pre></td></tr></table></figure>
<p>â€‹	ç±»ä¼¼çš„å•è¯è¿˜æœ‰<code>pleasure,pride,honor,failure,comfort,promise,danger,reality</code>ç­‰ã€‚</p>
<ol start="5">
<li>
<p>å›ºå®šçŸ­è¯­æ­é…</p>
<p><strong>ä¾‹å¥</strong>ï¼š</p>
</li>
</ol>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a bit </span><br><span class="line">at a loss</span><br><span class="line">at a time </span><br><span class="line">come to a stop</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<ol start="6">
<li><code>a/an</code>çš„ä½¿ç”¨åŒºåˆ†</li>
</ol>
<ul>
<li>
<p>ä»¥å…ƒéŸ³éŸ³ç´ å¼€å¤´çš„å•è¯å‰é¢ç”¨<code>an</code>ï¼Œä¾‹å¦‚<code>an eraser</code>ã€<code>an hornor</code>ç­‰</p>
</li>
<li>
<p>ä»¥è¾…éŸ³è¯»éŸ³å¼€å¤´çš„å•è¯å‰é¢éœ€è¦ç”¨<code>a</code>ï¼Œä¾‹å¦‚<code>a book</code></p>
</li>
<li>
<p>åœ¨26ä¸ªè‹±æ–‡å­—æ¯ä¸­ï¼Œ<code>a,e,i,o,f,h,l,m,n,r,s,x</code>ç­‰å­—æ¯çš„è¯»éŸ³æ˜¯ä»¥å…ƒéŸ³éŸ³ç´ å¼€å¤´ï¼Œéœ€è¦ç”¨<code>an</code>ï¼Œå…¶ä»–ç”¨<code>a</code></p>
<ul>
<li>
<pre><code class="language-python">There is an &quot;m&quot; and a &quot;u&quot; in the word &quot;mysterious&quot;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">### 1.2  å®šå† è¯</span><br><span class="line"></span><br><span class="line">1. è¡¨ç¤ºä¸Šæ–‡æåŠè¿‡çš„ï¼Œæˆ–æ˜¯åŒæ–¹éƒ½å·²çŸ¥æ™“çš„</span><br><span class="line"></span><br><span class="line">   æ­¤æ—¶ç›¸å½“äºæŒ‡ç¤ºä»£è¯`thisã€thatã€thoseã€these`ç­‰</span><br><span class="line"></span><br><span class="line">   ä¾‹å¥ï¼š</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   A waiter came and waited. John caught my look and we both got up and, ignoring the waiter, made our way to the buffet.</span><br><span class="line">   # ä¸€ä¸ªä¾è€…èµ°äº†è¿‡æ¥ï¼Œå€™åœ¨é™„è¿‘ã€‚çº¦ç¿°é¢†ä¼šäº†æˆ‘çš„çœ¼ç¥ï¼Œæˆ‘ä»¬ä¸¤ä¸ªéƒ½ç«™äº†èµ·æ¥ï¼Œæ²¡æœ‰ç†ç¬é‚£ä¸ªä¾è€…ï¼Œæœè‡ªåŠ©é¤å°èµ°å»ã€‚</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li>
<p>ç”¨äºç‹¬ä¸€æ— äºŒçš„äº‹ç‰©å‰</p>
<p>ä¾‹å¦‚<code>the sun</code>ï¼Œ<code>the sky</code>ï¼Œ<code>the earth</code>ç­‰ç­‰</p>
<p><strong>ä¾‹å¥</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Copernicus concluded that the earth goes <span class="built_in">round</span> the sun.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç”¨äºåºæ•°è¯ï¼Œæœ€é«˜çº§å‰</p>
<p><strong>ä¾‹å¥</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Tom <span class="keyword">is</span> the last person that I want to see. <span class="comment"># æ±¤å§†æ˜¯æˆ‘æœ€ä¸æƒ³è§çš„äºº</span></span><br><span class="line">Is Shanghai the second largest city <span class="keyword">in</span> China? <span class="comment"># ä¸Šæµ·æ˜¯ä¸­å›½ç¬¬äºŒå¤§åŸå¸‚å—</span></span><br><span class="line">He <span class="keyword">is</span> the smartest boy <span class="keyword">in</span> our <span class="keyword">class</span>. <span class="comment"># ä»–æ˜¯æˆ‘ä»¬ç­ä¸Šæœ€èªæ˜çš„ç”·ç”Ÿ</span></span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>
<p>åºæ•°è¯å‰ä½¿ç”¨ä¸å®šå† è¯æ˜¯ï¼Œè¡¨ç¤ºâ€œå†ã€åˆâ€çš„æ„æ€</p>
</li>
<li>
<pre><code class="language-python">It's the second time I've read the book. I want to read it a third time.
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ ç”¨äº&quot;the+æ¯”è¾ƒçº§&quot;è¡¨ç¤ºâ€œä¸¤è€…ä¸­è¾ƒ...çš„â€éƒ¨åˆ†</span><br><span class="line"></span><br><span class="line">+ ```python</span><br><span class="line">  Of the two sisters, Betty is the younger one, but she is the tallest girl in her class.</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
<li>
<p>æœ‰æ—¶<code>most</code>è¡¨ç¤ºâ€œéå¸¸&quot;,ä½†å¹¶ä¸æ˜¯æœ€é«˜çº§ï¼Œæ­¤æ—¶ä¸éœ€è¦åŠ <code>the</code></p>
</li>
<li>
<pre><code class="language-python">He is the most famous doctor in this hospital and he is a most amazing person.
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. ç”¨äº`the more..., the more`ç»“æ„</span><br><span class="line"></span><br><span class="line">   æ­¤æ—¶è¡¨ç¤º&quot;è¶Š..., è¶Š...&quot;</span><br><span class="line"></span><br><span class="line">   **ä¾‹å¥**ï¼š</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   The more money you make, the more you can spend.</span><br><span class="line">   The harder you work, the more progress you will get.</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
</li>
<li>
<p>å®šå† è¯è¿˜èƒ½ç”¨äºä»¥ä¸‹å‡ ç§æƒ…å†µ</p>
<ul>
<li>ç”¨äºå¤æ•°å§“æ°å‰è¡¨ç¤ºæŸæŸå¤«å¦‡æˆ–è€…ä¸€å®¶äººï¼Œä¾‹å¦‚<code>the Smiths</code></li>
<li>åœ¨é€¢åçš„å¤æ•°åè¯å‰ï¼Œè¡¨ç¤ºå¹´ä»£ï¼Œä¾‹å¦‚<code>in the 1990s</code></li>
<li>åœ¨è¡¨ç¤ºè¥¿æ´‹ä¹å™¨çš„åè¯å‰åŠ ï¼Œä½†çƒç±»è¿åŠ¨ä¸åŠ </li>
<li>ç”¨äº&quot;åŠ¨è¯+äºº+ä»‹è¯+the+äººä½“éƒ¨ä½&quot;ï¼Œæ­¤æ—¶ä¸ç”¨ç‰©ä¸»ä»£è¯ï¼Œå¦‚ï¼š<code>beat him on the shoulder</code></li>
<li>ç”¨äºå•ä½åè¯å‰è¡¨ç¤ºæ ‡å‡†ï¼Œå³è¡¨ç¤ºè®¡é‡æ ‡å‡†ï¼Œç›¸å½“äºæ±‰è¯­çš„â€œæŒ‰â€ï¼Œâ€œè®ºâ€ï¼Œâ€œæ¯â€ï¼Œä½†<code>by</code>è¡¨ç¤º<code>ä¾æ®</code>è®²çš„æ—¶å€™åé¢è·Ÿ<strong>æŠ½è±¡åè¯</strong>æ˜¯ä¸ç”¨ä»»ä½•å† è¯çš„ï¼Œä¾‹å¦‚<code>by weight, by length, by width</code></li>
<li>ç”¨äº<code>the+æŸäº›å½¢å®¹è¯æˆ–è¿‡å»åˆ†è¯</code>ä¸­è¡¨ç¤ºä¸€ç±»äººï¼Œå¦‚<code>the rich</code>ï¼Œ<code>the poor</code></li>
<li>ç”¨äº<code>the+police/publicç­‰é›†åˆåè¯</code>è¡¨ç¤ºè¿™ç±»äººçš„æ€»ç§°</li>
<li>ç”¨äºä¿®é¥°<code>same, only, very</code>ç­‰å½¢å®¹è¯ï¼Œå¯ç”¨äº<code>the same, the only, the very</code>ç»“æ„ä¸­</li>
<li>ä¸‹æ–‡å°†å…·ä½“å±•ç¤º<code>the</code>çš„ç”¨æ³•</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In the 1980s, the Smiths were already <span class="keyword">in</span> their thirties <span class="keyword">and</span> lived <span class="keyword">in</span> a village. Their doughter liked playing the piano <span class="keyword">while</span> their son liked playing football.</span><br><span class="line">Near their house there was <span class="keyword">as</span> fair where bananas are usually sold by weight <span class="keyword">and</span> eggs by the dozen.It was the only fair <span class="keyword">in</span> the area. </span><br><span class="line">The fair was <span class="built_in">open</span> to the public only during two <span class="built_in">open</span>-house weekends. Both the poor <span class="keyword">and</span> the rich went there. The old took the children <span class="keyword">in</span> the hand tightly <span class="keyword">in</span> case they got lose.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¿˜æœ‰å›ºå®šçš„çŸ­è¯­æ­é…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">all</span> the time</span><br><span class="line">the other day</span><br><span class="line"><span class="built_in">all</span> the year around</span><br><span class="line">at the age of </span><br><span class="line">......</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="1-3-ä¸ç”¨å† è¯çš„æƒ…å†µ">1.3  ä¸ç”¨å† è¯çš„æƒ…å†µ</h3>
<ol>
<li>
<p>èº«ä»½ã€èŒä½ã€å¤´è¡”åè¯å‰</p>
<p>ä¾‹å¦‚<code>be elected chairman</code></p>
</li>
<li>
<p>çƒç±»ã€æ£‹ç±»åè¯å‰</p>
<p>ä¾‹å¦‚<code>play football, play chess</code></p>
</li>
<li>
<p>ä¸€æ—¥ä¸‰é¤çš„åè¯å‰</p>
<p>ä¾‹å¦‚<code>have breakfast/lunch/supper</code></p>
</li>
<li>
<p>äº¤é€šæ–¹å¼åè¯å‰</p>
<p>ä¾‹å¦‚<code>by bike, by ship, by plane</code></p>
</li>
<li>
<p>ä¸€äº›åœ°ç‚¹åè¯å‰</p>
<p>ä¾‹å¦‚<code>bed, church, school, hospital, prison</code>ç­‰</p>
<p>è‹¥åœ¨è¿™äº›åœ°æ–¹åŠ ä¸Šäº†<code>the</code>ï¼Œè¡¨ç¤ºå»è¿™äº›åœºæ‰€åšå…¶ä»–çš„äº‹æƒ…</p>
</li>
<li>
<p>ä½¿ç”¨å®šå† è¯ä¸ä¸ä½¿ç”¨å®šå† è¯çš„çŸ­è¯­è¾¨æ</p>
<p>æŸäº›å›ºå®šæ­é…ä½¿ç”¨å®šå† è¯å’Œä¸ä½¿ç”¨æ—¶ä¼šå‡ºç°å«ä¹‰å·®åˆ«ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">å®šå† è¯</th>
<th style="text-align:center">ä¸åŠ </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">in the front of åœ¨(èŒƒå›´å†…çš„)é¢å‰</td>
<td style="text-align:center">in front of åœ¨(èŒƒå›´å¤–çš„)å‰é¢</td>
</tr>
<tr>
<td style="text-align:center">at the table åœ¨æ¡Œæ—</td>
<td style="text-align:center">at table åƒé¥­</td>
</tr>
<tr>
<td style="text-align:center">go to the school å»å­¦æ ¡</td>
<td style="text-align:center">go to school ä¸Šå­¦</td>
</tr>
<tr>
<td style="text-align:center">in the charge of åœ¨â€¦ç®¡ç†ä¹‹ä¸‹</td>
<td style="text-align:center">in charge of ä¸»ç®¡ï¼Œè´Ÿè´£</td>
</tr>
<tr>
<td style="text-align:center">in the case of å°±â€¦æ¥è¯´</td>
<td style="text-align:center">in case of å‡å¦‚ï¼Œä¸‡ä¸€</td>
</tr>
<tr>
<td style="text-align:center">the last week ç›¸å¯¹è¿‡å»æŸä¸ªæ—¶é—´è€Œè¨€çš„ä¸Šä¸ªæ˜ŸæœŸ</td>
<td style="text-align:center">last week è¯´è¯æ—¶ä»¥å‰çš„ä¸Šä¸ªæ˜ŸæœŸ</td>
</tr>
<tr>
<td style="text-align:center">go to the sea å»æµ·è¾¹</td>
<td style="text-align:center">go to sea å‡ºèˆª</td>
</tr>
</tbody>
</table>
</li>
</ol>
<hr>
<h2 id="äºŒã€åè¯">äºŒã€åè¯</h2>
<p>åè¯æ˜¯è¡¨ç¤ºäººã€äº‹ç‰©ã€åœ°ç‚¹æˆ–æŠ½è±¡æ¦‚å¿µçš„åç§°çš„è¯ï¼Œæœ‰ä¸“æœ‰åè¯å’Œæ™®é€šåè¯ä¹‹åˆ†ï¼Œè¿˜æœ‰ä¸å¯æ•°å’Œå¯æ•°åè¯ä¹‹åˆ†ã€‚</p>
<p><strong>å¯æ•°åè¯</strong>ï¼Œåˆ†ä¸ºå•æ•°å’Œå¤æ•°ä¸¤ç§å½¢å¼ã€‚å¯æ•°åè¯å‰å¯ä»¥ç”¨ä¸å®šå† è¯ã€æ•°è¯æˆ–someã€manyç­‰ä¿®é¥°ã€‚å¦‚ï¼š<code>a manã€a deskã€an appleã€an orangeã€some booksã€some childrenã€two pens</code></p>
<p><strong>ä¸å¯æ•°åè¯</strong>ï¼Œä¸å¯æ•°åè¯ï¼Œæ²¡æœ‰å¤æ•°å½¢å¼ï¼Œå‰é¢ä¸èƒ½ç”¨ä¸å®šå† è¯ã€æ•°è¯æˆ–manyç­‰è¯è¯­ä¿®é¥°ï¼Œä½†å¯ä»¥ç”¨someï¼Œa littleï¼Œmuchç­‰è¯è¯­æ¥ä¿®é¥°ã€‚æœ‰æ—¶å¯ä»¥ä¸ä¸€äº›é‡è¯çŸ­è¯­æ­é…ï¼Œè¿™äº›é‡è¯çŸ­è¯­ä¸­çš„åè¯ä¸€èˆ¬æ˜¯å¯æ•°çš„ï¼Œæœ‰å•æ•°å½¢å¼ï¼Œä¹Ÿå¯ä»¥æœ‰å¤æ•°å½¢å¼ï¼Œä¸€èˆ¬ä½¿ç”¨çš„é‡è¯çŸ­è¯­a(æˆ–anï¼‰ /little/bit/pieceâ€¦</p>
<p>å¦‚ï¼š<code>some waterï¼Œa little milk ï¼Œmuch foodï¼Œa piece of breadï¼Œtwo bottles of inkï¼Œsome glasses of water</code></p>
<h3 id="2-1-å¸¸è§åè¯æ„è¯æ³•">2.1 å¸¸è§åè¯æ„è¯æ³•</h3>
<ol>
<li>
<p>ç”±<code>-ment</code>æ„æˆ</p>
<p><code>-ment</code>è¡¨ç¤ºè¡Œä¸ºçš„ç»“æœæˆ–å…·ä½“å·¥å…·</p>
<p><strong>ä¾‹å¦‚</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">move(ç§»åŠ¨ï¼Œä½¿è¿åŠ¨)--movement(è¿åŠ¨ï¼Œç§»åŠ¨)</span><br><span class="line">develop(å‘å±•)--development(å‘å±•)</span><br><span class="line">measure(æµ‹é‡)--measurement(æµ‹é‡)</span><br><span class="line">equip(è£…å¤‡)--equipment(è£…å¤‡ï¼Œè®¾å¤‡)</span><br><span class="line">achieve(è¾¾åˆ°ï¼Œå®Œæˆ)--achievement(è¾¾åˆ°ï¼Œæˆå°±)</span><br><span class="line">agree(åŒæ„ï¼Œå•†å®š)--agreement(åŒæ„ï¼Œåè®®)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç”±<code>-tion, -ation, -sion</code>æ„æˆ</p>
<p><code>-tion, -ation, -sion</code>è¡¨ç¤ºè¡Œä¸ºçš„è¿‡ç¨‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">explain(è§£é‡Š)--explanation(è§£é‡Š)</span><br><span class="line">produce(ç”Ÿäº§)--production(ç”Ÿäº§)</span><br><span class="line">divide(åˆ’åˆ†)--division(åˆ’åˆ†)</span><br><span class="line">express(è¡¨ç¤ºï¼Œè¡¨è¾¾)--expression(è¡¨ç¤ºï¼Œè¡¨è¾¾)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç”±<code>-ness</code>æ„æˆ</p>
<p>å½¢å®¹è¯åé¢åŠ åç¼€<code>-ness</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cold(å¯’å†·çš„)--coldness(å¯’å†·)</span><br><span class="line">dark(é»‘æš—çš„)--darkness(é»‘æš—)</span><br><span class="line">useful(æœ‰ç”¨çš„)--usefulness(ç”¨å¤„)</span><br><span class="line">exact(ç²¾ç¡®åœ°)--exactness(ç²¾ç¡®)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç”±<code>-ence, -ance</code>æ„æˆ</p>
<p>æŸäº›åŠ¨è¯æˆ–å½¢å®¹è¯åé¢åŠ <code>-ence</code>æˆ–<code>-ance</code>å¯æ„æˆç›¸åº”çš„æŠ½è±¡åè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">enter(è¿›å…¥)--entrance(å…¥å£å¤„)</span><br><span class="line">resist(æŠµæŠ—)--resistance(æŠµæŠ—)</span><br><span class="line">depend(ä¾èµ–ï¼Œä¾é )--dependence(ä¾é ï¼Œä¾èµ–)</span><br><span class="line">different(ä¸åŒçš„)--difference(ä¸åŒï¼Œå·®åˆ«)</span><br><span class="line">absent(ç¼ºå¸­ï¼Œä¸åœ¨çš„)--absence(ç¼ºå¸­ï¼Œä¸åœ¨)</span><br><span class="line">refer(å‚è€ƒ)--reference(å‚è€ƒ)</span><br><span class="line">important(é‡è¦çš„)--importance(é‡è¦æ€§)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç”±<code>-y, -ty, -ity</code>æ„æˆ</p>
<p>æŸäº›å½¢å®¹è¯åé¢åŠ <code>-y,-ty,-ity</code>ç­‰è¡¨ç¤ºæ€§è´¨çŠ¶æ€çš„åç¼€ï¼Œæ„æˆæŠ½è±¡åè¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">difficult(å›°éš¾çš„)--difficulty(å›°éš¾)</span><br><span class="line">electric(ç”µçš„)--electricity(ç”µ)</span><br><span class="line">safe(å®‰å…¨çš„)--safety(å®‰å…¨)</span><br><span class="line">cruel(æ®‹é…·çš„)--cruelty(æ®‹é…·)</span><br><span class="line">able(æœ‰èƒ½åŠ›çš„)--ability(èƒ½åŠ›)</span><br><span class="line">active(ç§¯æåœ°ï¼Œæ´»è·ƒçš„)--activity(æ´»åŠ¨)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æœ‰äº›åŠ¨è¯å˜åè¯è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦æ³¨æ„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">succeed--success æˆåŠŸ</span><br><span class="line">pronounce--pronounciation å‘éŸ³</span><br><span class="line">explain--explanation è§£é‡Š</span><br><span class="line">decide--decision å†³å®š</span><br><span class="line">enter--entrance è¿›å…¥</span><br><span class="line">permit--permission å…è®¸</span><br><span class="line">refuse--refusal æ‹’ç»</span><br><span class="line">consider--consideration è€ƒè™‘</span><br><span class="line">discover--discovery å‘ç°</span><br><span class="line">bury--burial åŸ‹è‘¬</span><br><span class="line">conclude--conclusion ç»“è®º</span><br><span class="line">arrive æ¨æ–­ --arrival åˆ°è¾¾</span><br><span class="line">weigh é‡ --weight é‡é‡</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="2-2-æŠ½è±¡åè¯å…·ä½“åŒ–">2.2  æŠ½è±¡åè¯å…·ä½“åŒ–</h3>
<p>â€‹	æŠ½è±¡åè¯ä¸€èˆ¬ä¸ºä¸å¯æ•°åè¯ï¼Œä½†å½“æŠ½è±¡åè¯è¡¨ç¤ºä¸ºå…·ä½“çš„ä¸œè¥¿æ—¶ï¼Œå¯ç”¨ä½œå¯æ•°åè¯ä¸”<strong>è¯ä¹‰å‘ç”Ÿå˜åŒ–</strong>ã€‚è¿™ç§è¯­è¨€ç°è±¡å«åšæŠ½è±¡åè¯çš„å…·ä½“åŒ–ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç”¨ä½œæŠ½è±¡åè¯</th>
<th style="text-align:center">å…·ä½“åŒ–(å¯æ•°)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">in surprise æƒŠè®¶åœ°</td>
<td style="text-align:center">a surprise è®©äººæƒŠè®¶çš„äº‹æƒ…</td>
</tr>
<tr>
<td style="text-align:center">win success è·å¾—æˆåŠŸ</td>
<td style="text-align:center">a success ä¸€ä¸ª(ä»¶)æˆåŠŸçš„äºº(äº‹)</td>
</tr>
<tr>
<td style="text-align:center">win honor èµ¢å¾—è£èª‰</td>
<td style="text-align:center">an honor ä¸€ä»¶å¼•ä»¥ä¸ºè£çš„äº‹</td>
</tr>
<tr>
<td style="text-align:center">Failure is the mother of success å¤±è´¥æ˜¯æˆåŠŸä¹‹æ¯</td>
<td style="text-align:center">a failure ä¸€ä¸ªå¤±è´¥è€…</td>
</tr>
<tr>
<td style="text-align:center">by experience é ç»éªŒ</td>
<td style="text-align:center">an experience ä¸€æ¬¡ç»å†</td>
</tr>
<tr>
<td style="text-align:center">full of youth and vitality å……æ»¡é’æ˜¥å’Œæ´»åŠ›</td>
<td style="text-align:center">a youth ä¸€ä¸ªå¹´è½»äºº</td>
</tr>
<tr>
<td style="text-align:center">have pity on sb. æ€œæ‚¯æŸäºº</td>
<td style="text-align:center">a pity å¯æƒœçš„äº‹æƒ…</td>
</tr>
<tr>
<td style="text-align:center">with pleasure ä¹æ„</td>
<td style="text-align:center">a pleasure ä¹äº‹</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">He had had six failures and would have a seventh <span class="keyword">try</span>.</span><br><span class="line">ä»–ç»å†å…­æ¬¡å¤±è´¥ï¼Œå¹¶å°†è¿›è¡Œç¬¬ä¸ƒæ¬¡å°è¯•</span><br><span class="line">A knowledge of English is a must in international trade.</span><br><span class="line">æ‡‚è‹±è¯­å¯¹äºåšå›½é™…è´¸æ˜“æ¥è¯´æ˜¯å¿…ä¸å¯å°‘çš„</span><br><span class="line">She made an apology to her mother <span class="keyword">for</span> her wrong doings.</span><br><span class="line">å¥¹ä¸ºè‡ªå·±åšé”™äº†äº‹å‘å¦ˆå¦ˆé“æ­‰</span><br></pre></td></tr></table></figure>
<h3 id="2-3-åè¯çš„æ•°">2.3  åè¯çš„æ•°</h3>
<h4 id="1-å¯æ•°åè¯å˜å¤æ•°çš„è§„åˆ™å˜åŒ–">1.  å¯æ•°åè¯å˜å¤æ•°çš„è§„åˆ™å˜åŒ–</h4>
<ul>
<li>
<p>ä¸€èˆ¬åœ¨è¯å°¾<code>-s</code>:</p>
<ul>
<li>æ¸…è¾…éŸ³åè¯»<code>/s/</code>ï¼š<code>map-maps</code></li>
<li>æµŠè¾…éŸ³å’Œå…ƒéŸ³åè¯»<code>/z/</code>ï¼š<code>bag-bags,car-cars</code></li>
</ul>
</li>
<li>
<p>ä»¥<code>s,sh,ch,x</code>ç­‰ç»“å°¾çš„è¯åŠ <code>-es</code>ï¼Œè¯»<code>/iz/</code>ï¼š<code>bus-busesï¼›watch-watches</code></p>
<ul>
<li>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š<code>stomach-stomachs</code></li>
</ul>
</li>
<li>
<p>ä»¥<code>y</code>ç»“å°¾çš„ä¸“æœ‰åè¯æˆ–ä»¥å…ƒéŸ³å­—æ¯<code>+y</code>ç»“å°¾çš„åè¯å˜å¤æ•°æ—¶ï¼Œç›´æ¥åŠ <code>-s</code></p>
<ul>
<li><code>two Marys; the Henrys; monkey--monkeys; holiday--holidays</code></li>
</ul>
</li>
<li>
<p>ä»¥<code>o</code>ç»“å°¾çš„å‰é¢æ˜¯è¾…éŸ³å­—æ¯ï¼Œå˜ä¸ºå¤æ•°æ—¶ï¼Œæœ‰ä¸€äº›åŠ <code>-es</code></p>
<ul>
<li><code>hero-heroes; potato-potatoes; tomato-tomatoes </code></li>
<li><code>Heroes eat potatoes and tomatoes è‹±é›„åƒé©¬é“ƒè–¯å’Œè¥¿çº¢æŸ¿</code></li>
<li>ä¸€èˆ¬æ˜¯æ´»çš„åŠ <code>-es</code>ï¼Œä¸æ´»çš„åŠ <code>-s</code></li>
</ul>
</li>
<li>
<p>ä»¥<code>f</code>æˆ–<code>fe</code>ç»“å°¾çš„åè¯å˜å¤æ•°æ—¶ï¼Œæœ‰çš„åŠ <code>-s</code>ï¼Œæœ‰çš„å˜<code>f</code>æˆ–<code>fe</code>ä¸º<code>v</code>å†åŠ <code>-es</code></p>
<ul>
<li>
<p>åªåŠ <code>s</code>çš„æƒ…å†µ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chief--chiefs</span><br><span class="line">belief--beliefs</span><br><span class="line">roof--roofs</span><br><span class="line">cliff--cliffs</span><br><span class="line">safe--safes</span><br><span class="line">gulf--gulfs</span><br></pre></td></tr></table></figure>
<p>åŠ©è®°ï¼šâ€œé•¿å®˜â€ï¼Œâ€ä¿¡ä»°â€œï¼Œâ€æˆ¿é¡¶â€œå’Œâ€æ‚¬å´–â€œæ˜¯â€å®‰å…¨â€œçš„â€æ¸¯æ¹¾â€œ</p>
</li>
<li>
<p>å˜<code>f</code>æˆ–<code>fe</code>ä¸º<code>v</code>å†åŠ <code>-es</code>çš„æƒ…å†µ</p>
   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wife--wives</span><br><span class="line">half--halves</span><br><span class="line">knife--knives</span><br><span class="line">wolf--wolves</span><br><span class="line">leaf--leaves</span><br><span class="line">life--lives</span><br><span class="line">thief--thieves</span><br></pre></td></tr></table></figure>
<p>åŠ©è®°ï¼šâ€œå¦»å­â€ç”¨â€œåŠâ€æŠŠâ€œåˆ€â€é˜»æ­¢â€œç‹¼â€ç§°ä¸ºå·ç›—â€œæ ‘å¶â€œâ€ç”Ÿå‘½â€œçš„â€å°å·â€œ</p>
</li>
</ul>
</li>
</ul>
<h4 id="2-å¯æ•°åè¯è¾¹å¤æ•°ä¸è§„åˆ™å˜åŒ–">2. å¯æ•°åè¯è¾¹å¤æ•°ä¸è§„åˆ™å˜åŒ–</h4>
<ul>
<li>
<pre><code class="language-python">child--children
foot--feet
tooth--teeth
mouse--mice
man--men
woman--women

# ä¸€ä¸ªè¯åŠ manæˆ–womanæ„æˆåˆæˆè¯ï¼Œå…¶å¤æ•°ä¹Ÿæ˜¯menæˆ–women
# ä½†Germanä¸æ˜¯åˆæˆè¯
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ å•å¤æ•°åŒå½¢ï¼Œå¦‚`deer, sheep, fish, Chinese, Japanese`</span><br><span class="line"></span><br><span class="line">+ ä»¥`s`ç»“å°¾ï¼Œä»ä¸ºå•æ•°çš„</span><br><span class="line"></span><br><span class="line">  + `maths, politics, physics`ç­‰å­¦ç§‘åè¯ï¼Œä¸€èˆ¬æ˜¯ä¸å¯æ•°åè¯ï¼Œä¸ºå•æ•°</span><br><span class="line"></span><br><span class="line">  + `news`ä¸ºä¸å¯æ•°åè¯</span><br><span class="line"></span><br><span class="line">  + ä»¥å¤æ•°åè¯å‡ºç°çš„ä¹¦åã€å‰§åã€æŠ¥çº¸ã€æ‚å¿—åï¼Œä¹Ÿå¯è§†ä¸ºå•æ•°</span><br><span class="line"></span><br><span class="line">    + ```python</span><br><span class="line">      The Arabian Nights is a very interesting story-book.</span><br></pre></td></tr></table></figure>

+ è¡¨ç¤ºç”±ä¸¤éƒ¨åˆ†æ„æˆçš„ä¸œè¥¿ï¼Œå¦‚`glasses, trousers, clothes`åœ¨è¡¨è¾¾å…·ä½“æ•°ç›®æ˜¯ï¼Œéœ€è¦å€ŸåŠ©æ•°é‡åè¯`pair`å’Œ`suit`ï¼Œå¦‚`a pair of glasses, two pairs of trousers`

+ å¦å¤–éƒ¨åˆ†åè¯åœ¨è¡¨ç¤ºå¤æ•°å½¢å¼æ—¶ï¼Œå¯èƒ½æœ‰ç‰¹åˆ«çš„å«ä¹‰ï¼Œå¦‚`goods, waters, fishes`

</code></pre>
</li>
</ul>
<h4 id="3-ä¸å¯æ•°åè¯">3.ä¸å¯æ•°åè¯</h4>
<p>æ¯”è¾ƒå¸¸è§çš„ä¸å¯æ•°åè¯æœ‰ï¼š<code>advice, news, information, progress, work, fun, weather, music, health, luck</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hair æŒ‡ä¸€ä¸ªäººå…¨éƒ¨å¤´å‘æ—¶ï¼Œæ˜¯ä¸å¯æ•°åè¯ï¼Œä½†å¦‚æœæŒ‡æ¯ä¸€æ ¹å¤´å‘æ—¶ï¼Œæ˜¯å¯æ•°çš„ï¼Œå¯ä»¥è¯´one hairã€two hairs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥è¯´drink beer, drink coffee, drink gin, ä½†åœ¨è¦é…’æ°´æ—¶åº”è¯¥è¯´ï¼š a (glass of) beer, a gin, two gins</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># experienceæŒ‡â€œç»å†â€æ—¶æ˜¯å¯æ•°åè¯ï¼š</span></span><br><span class="line">He had an exciting experience/some exciting experiences last week.</span><br><span class="line"></span><br><span class="line"><span class="comment"># workæ„å‘³&quot;èŒä¸šã€å°±ä¸šã€å·¥ä½œ&quot;æ—¶äº‹ä¸å¯æ•°åè¯:</span></span><br><span class="line">He <span class="keyword">is</span> looking <span class="keyword">for</span> work/<span class="keyword">for</span> a job.</span><br><span class="line"></span><br><span class="line"><span class="comment"># works(åªæœ‰å¤æ•°å½¢å¼)å¯ä»¥è¡¨ç¤ºå·¥å•†ï¼Œæˆ–æ˜¯æ–‡å­¦å’ŒéŸ³ä¹ä½œå“ï¼š</span></span><br><span class="line">Shakespeare<span class="string">&#x27;s complete works.</span></span><br></pre></td></tr></table></figure>
<h4 id="4-åè¯çš„æ‰€æœ‰æ ¼">4.åè¯çš„æ‰€æœ‰æ ¼</h4>
<p>åè¯æ‰€æœ‰æ ¼è¡¨ç¤ºä»å±å…³ç³»ï¼Œåˆ†ä¸º**'sæ‰€æœ‰æ ¼<strong>å’Œ</strong>ofæ‰€æœ‰æ ¼**ï¼Œä¸€èˆ¬æ¥è¯´â€™sè¡¨ç¤ºæœ‰ç”Ÿå‘½çš„ä¸œè¥¿ï¼Œofå¾€å¾€ç”¨äºæ— ç”Ÿå‘½çš„ä¸œè¥¿ã€‚</p>
<h5 id="4-1-â€˜sæ‰€æœ‰æ ¼çš„æ„æˆæ–¹æ³•">4.1 -â€˜sæ‰€æœ‰æ ¼çš„æ„æˆæ–¹æ³•</h5>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç›´æ¥åŠ <code>-'s</code>å°±è¡Œäº†</p>
<ul>
<li>
<pre><code class="language-python">children's books
today's paper
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å¸¦è¯å°¾`-s`çš„å¤æ•°åè¯åªåŠ `-&#x27;`</span><br><span class="line"></span><br><span class="line">+ ```python</span><br><span class="line">  girls&#x27; school</span><br><span class="line">  the Smiths&#x27; car</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
<p>å¸¦è¯å°¾<code>-s</code>çš„å•æ•°åè¯é€šå¸¸ä»è¦åŠ <code>-'s</code></p>
<ul>
<li>
<pre><code class="language-python">the boss's plan
the hostess's worry
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å¸¦è¯å°¾`-s`çš„äººåï¼Œå¯ä»¥åªåŠ `-&#x27;s`æˆ–æ˜¯`-&#x27;`</span><br><span class="line"></span><br><span class="line">ç”¨`and`è¿æ¥çš„å¹¶åˆ—åè¯çš„æ‰€æœ‰æ ¼è¦åˆ†ä¸¤ç§æƒ…å†µï¼Œå³è¡¨ç¤ºå„è‡ªçš„æ‰€æœ‰å…³ç³»æ—¶ï¼Œè¦åˆ†åˆ«åœ¨å¹¶åˆ—åè¯ååŠ `-&#x27;s`ï¼Œè¡¨ç¤ºå…±åŒçš„å…³ç³»æ—¶ï¼Œåªéœ€è¦åœ¨æœ€åä¸€ä¸ªåè¯ååŠ `-&#x27;s`</span><br><span class="line"></span><br><span class="line">+ ```python</span><br><span class="line">  Tom&#x27;s and Jim&#x27;s rooms.</span><br><span class="line">  Tom and Jim&#x27;s room.</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
<h5 id="4-2-of-åè¯æ„æˆçš„æ‰€æœ‰å…³ç³»">4.2 <code>of</code>+åè¯æ„æˆçš„æ‰€æœ‰å…³ç³»</h5>
<p><code>of</code>æ‰€æœ‰æ ¼å¤šç”¨äºæ— ç”Ÿå‘½çš„ä¸œè¥¿ï¼Œä¾‹å¦‚<code>the cover of the book</code>ï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼š</p>
<ul>
<li>
<pre><code class="language-python">the housing problem of the poor.
the skills of the workers who have been well trained.
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å½“ç„¶ï¼Œæœ‰äº›è¡¨ç¤ºæ—¶é—´ã€è·ç¦»ç­‰æ— ç”Ÿå‘½åè¯å’Œè¡¨ç¤ºä¸–ç•Œã€å›½å®¶ã€è¯šå¾çš„åè¯ï¼Œä¹Ÿå¯ä»¥ç”¨`-&#x27;s`æˆ–`-&#x27;`</span><br><span class="line"></span><br><span class="line">+ ```python</span><br><span class="line">  five minutes&#x27; walk</span><br><span class="line">  today&#x27;s newspaper</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
<h5 id="4-3-åŒé‡æ‰€æœ‰æ ¼">4.3 åŒé‡æ‰€æœ‰æ ¼</h5>
<p>åŒé‡æ‰€æœ‰æ ¼æ˜¯æŒ‡å°†<code>-'s</code>å’Œ<code>of</code>ä¸¤ä¸ªæ‰€æœ‰æ ¼ç»“åˆèµ·æ¥ç”¨ï¼Œæ„æˆ<code>of + åè¯'s</code>çš„æ ¼å¼ï¼Œè¡¨ç¤ºæ•´ä½“ä¸­çš„ä¸€ä¸ªæˆ–éƒ¨åˆ†ï¼Œç”¨äºä¿®é¥°<code>of</code>å‰é¢çš„åè¯ï¼Œä½†æ­¤æ—¶è¯¥åè¯ä¸€å®šè¦æœ‰ä¸€ä¸ªé‡è¯ä¿®é¥°ï¼Œä¸”ä¸èƒ½æ˜¯<code>one</code>å’Œ<code>the</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Two classmates of my siste<span class="string">r&#x27;s will come to join us.</span></span><br><span class="line"><span class="string"># å…¨é›†ï¼šmy sister&#x27;</span>s (classmate)</span><br><span class="line"><span class="comment"># å­é›†: two classmate (of my sister&#x27;s classmate)</span></span><br></pre></td></tr></table></figure>
<p>åŒé‡æ‰€æœ‰æ ¼ä¹Ÿå¯ä»¥ç”±<code>of+åè¯æ€§ç‰©ä¸»ä»£è¯</code>æ„æˆï¼Œä¾‹å¦‚ï¼š<code>a friend of mine</code></p>
<hr>
<h2 id="ä¸‰ã€ä»£è¯">ä¸‰ã€ä»£è¯</h2>
<p>æ‰€è°“ä»£è¯ï¼Œæ˜¯ä»£æ›¿åè¯çš„è¯ç±»ã€‚å¤§éƒ¨åˆ†ä»£è¯å…·æœ‰åè¯å’Œå½¢å®¹è¯çš„åŠŸèƒ½ã€‚æ ¹æ®å…¶æ„ä¹‰ã€ç‰¹å¾å’Œåœ¨å¥ä¸­çš„ä½œç”¨ï¼Œä»£è¯å¯åˆ†ä¸ºï¼š</p>
<ul>
<li>äººç§°ä»£è¯</li>
<li>ç‰©ä¸»ä»£è¯</li>
<li>æŒ‡ç¤ºä»£è¯</li>
<li>åèº«ä»£è¯</li>
<li>ç›¸äº’ä»£è¯</li>
<li>ç–‘é—®ä»£è¯</li>
<li>å…³ç³»ä»£è¯</li>
<li>è¿æ¥ä»£è¯</li>
<li>ä¸å®šä»£è¯</li>
</ul>
<p>å…±ä¹ç§ã€‚</p>
<h3 id="3-1-äººç§°ä»£è¯ä¸»æ ¼ä¸å®¾æ ¼çš„ç”¨æ³•">3.1 äººç§°ä»£è¯ä¸»æ ¼ä¸å®¾æ ¼çš„ç”¨æ³•</h3>
<p>äººç§°ä»£è¯æœ‰ä¸»æ ¼å’Œå®¾æ ¼ä¹‹åˆ†ï¼Œä¸»æ ¼ä»£è¯ä¸€èˆ¬åœ¨å¥ä¸­åšä¸»è¯­ã€è¡¨è¯­ï¼Œå®¾æ ¼ä»£è¯ä¸€èˆ¬åšåŠ¨è¯çš„å®¾è¯­å’Œä»‹è¯çš„å®¾è¯­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">If you keep a pet, you need to spend some time taking care of it.</span><br><span class="line"><span class="comment"># ä¸¤ä¸ª you åˆ†åˆ«åšä¸»è¯­, it åšå®¾è¯­</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># we,you,they  æœ‰æ—¶å¯æ³›æŒ‡&quot;äººä»¬&quot;</span></span><br><span class="line">They say prices are going to rise again.</span><br><span class="line"></span><br><span class="line"><span class="comment"># she å¯ä»¥ç”¨æ¥æŒ‡ä»£å›½å®¶ã€èˆ¹åªã€å¤§åœ°ã€æœˆäº®ç­‰</span></span><br><span class="line">China will always do what she has promised to do.</span><br><span class="line"></span><br><span class="line">The Titanic was on her first voyage when she sank.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„äººç§°ä»£è¯å¹¶åˆ—æ—¶çš„é¡ºåº</span></span><br><span class="line">You <span class="keyword">and</span> I are good friends.</span><br><span class="line">You <span class="keyword">and</span> he must be there at seven o<span class="string">&#x27;clock.</span></span><br><span class="line"><span class="string">You, he and I will be put in the same class. </span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-åè¯æ€§å’Œå½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯">3.2  åè¯æ€§å’Œå½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯</h3>
<p>ç‰©ä¸»ä»£è¯æ˜¯è¡¨ç¤ºæ‰€æœ‰å…³ç³»çš„ä»£è¯ï¼Œå¯ä»¥åˆ†ä¸ºå½¢å®¹è¯æ€§ï¼Œåè¯è¯æ€§ä¸¤ç§</p>
<table>
<thead>
<tr>
<th>ç¬¬â€¦äººç§°</th>
<th>å•å¤æ•°</th>
<th>å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯</th>
<th>åè¯æ€§ç‰©ä¸»ä»£è¯</th>
<th>ä¸­æ–‡æ„æ€</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç¬¬ä¸€äººç§°</td>
<td>å•æ•°</td>
<td>my</td>
<td>mine</td>
<td>æˆ‘çš„</td>
</tr>
<tr>
<td>ç¬¬ä¸€äººç§°</td>
<td>å¤æ•°</td>
<td>ours</td>
<td>ours</td>
<td>æˆ‘ä»¬çš„</td>
</tr>
<tr>
<td>ç¬¬äºŒäººç§°</td>
<td>å•æ•°</td>
<td>your</td>
<td>yours</td>
<td>ä½ çš„</td>
</tr>
<tr>
<td>ç¬¬äºŒäººç§°</td>
<td>å¤æ•°</td>
<td>yours</td>
<td>yours</td>
<td>ä½ ä»¬çš„</td>
</tr>
<tr>
<td>ç¬¬ä¸‰äººç§°</td>
<td>å•æ•°</td>
<td>his, her, its</td>
<td>his, hers, its</td>
<td>ä»–çš„, å¥¹çš„, å®ƒçš„</td>
</tr>
<tr>
<td>ç¬¬ä¸‰äººç§°</td>
<td>å¤æ•°</td>
<td>their</td>
<td>theirs</td>
<td>ä»–ä»¬çš„, å¥¹ä»¬çš„, å®ƒä»¬çš„</td>
</tr>
</tbody>
</table>
<p>å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯ä¸å¯å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»æ”¾åœ¨åè¯å‰åšå®šè¯­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">My name <span class="keyword">is</span> John Green.</span><br><span class="line">They wash their hair every day.</span><br></pre></td></tr></table></figure>
<p>åè¯æ€§ç‰©ä¸»ä»£è¯å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œç›¸å½“äºâ€œå½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯+åè¯â€ï¼Œå¸¸åšå®¾è¯­å’Œè¡¨è¯­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">These are his books. Yours are over there.</span><br><span class="line">I forgot to bring my dictionary. Could I use yours?</span><br><span class="line">Whose book <span class="keyword">is</span> this? It<span class="string">&#x27;s hers.</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-åèº«ä»£è¯çš„ç”¨æ³•">3.3 åèº«ä»£è¯çš„ç”¨æ³•</h3>
<p>åèº«ä»£è¯æ˜¯ä¸€ç§è¡¨ç¤ºåå°„æˆ–å¼ºè°ƒçš„ä»£è¯ï¼Œè¡¨ç¤ºâ€œæˆ‘(ä»¬)è‡ªå·±&quot;ï¼Œâ€œä½ (ä»¬)è‡ªå·±â€ï¼Œâ€œä»–/å¥¹/å®ƒä»¬è‡ªå·±â€ã€‚</p>
<p>ç¬¬ä¸€ã€äºŒäººç§°çš„åèº«ä»£è¯æ˜¯ç”±å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯+<code>-self</code>æˆ–<code>-selves</code>æ„æˆï¼Œç¬¬ä¸‰äººç§°åèº«ä»£è¯ç”±äººèº«ä»£è¯çš„å®¾æ ¼åŠ <code>-self</code>æˆ–<code>-selves</code>æ„æˆï¼Œåèº«ä»£è¯å¸¸åšå®¾è¯­ã€è¡¨è¯­å’ŒåŒä½è¯­ã€‚</p>
<p><strong>åšå®¾è¯­</strong></p>
<p>æœ‰äº›åŠ¨è¯å¸¸ä¸åèº«ä»£è¯è¿ç”¨ï¼Œå¦‚<code>bathe, amuse, blame, feed, dress, cut, enjoy, hurt, introduce, behave</code>ç­‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Little Albert <span class="keyword">is</span> only four, but he can feed himself, wash himself <span class="keyword">and</span> dress himself.</span><br></pre></td></tr></table></figure>
<p>å¸¸è§çš„è¡¨è¾¾æœ‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dress oneslef è‡ªå·±ç©¿è¡£</span><br><span class="line">say to oneself å¿ƒé‡Œæƒ³</span><br><span class="line">devote oneself to è‡´åŠ›äº</span><br><span class="line">seat oneself åä¸‹</span><br><span class="line">enjoy oneself è¿‡å¾—å¿«ä¹</span><br><span class="line">talk/speak to oneself è‡ªè¨€è‡ªè¯­</span><br><span class="line"><span class="built_in">help</span> oneself to éšä¾¿åƒ</span><br><span class="line">teach oneself è‡ªå­¦</span><br><span class="line">hide oneself æŠŠè‡ªå·±è—èµ·æ¥</span><br></pre></td></tr></table></figure>
<p><strong>ä½œè¡¨è¯­</strong></p>
<p>åèº«ä»£è¯å¯ç”¨ä½œè¡¨è¯­</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The boy <span class="keyword">in</span> the picture <span class="keyword">is</span> myself, <span class="keyword">not</span> anyone <span class="keyword">else</span>.</span><br><span class="line">I am <span class="keyword">not</span> myself today. æˆ‘ä»Šå¤©ä¸èˆ’æœ</span><br></pre></td></tr></table></figure>
<p><strong>åšåŒä½è¯­</strong></p>
<p>åèº«ä»£è¯å¯ä»¥åŠ å¼ºåè¯æˆ–ä»£è¯çš„è¯­æ°”ï¼Œå¼ºè°ƒ&quot;è‡ªå·±ï¼Œäº²è‡ªï¼Œæœ¬äºº&quot;ç­‰æ„æ€ï¼Œé€šå¸¸è·Ÿåœ¨åè¯ã€ä»£è¯ä¹‹åï¼Œä¹Ÿå¯ä»¥ç”¨äºå¥å°¾ï¼Œæ­¤æ—¶åèº«ä»£è¯åº”é‡è¯»ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">I<span class="string">&#x27;m afraid I can&#x27;</span>t <span class="built_in">help</span> you. Yo<span class="string">u&#x27;ll have to do it yourself.</span></span><br><span class="line"><span class="string"># ææ€•æˆ‘å¸®ä¸äº†ä½ äº†ï¼Œä½ å¾—è‡ªå·±åš</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You should ask the students themselves.</span></span><br><span class="line"><span class="string"># ä½ åº”è¯¥é—®å­¦ç”Ÿä»¬è‡ªå·±</span></span><br></pre></td></tr></table></figure>
<p>åèº«ä»£è¯è¿˜å¸¸ä¸<code>for, of, in, by</code>ç­‰ä»‹è¯æ­é…ï¼Œæ„æˆå›ºå®šçŸ­è¯­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> oneself äº²è‡ª</span><br><span class="line">of oneself è‡ªåŠ¨åœ°</span><br><span class="line"><span class="keyword">in</span> oneself æœ¬èº«å›ºæœ‰</span><br><span class="line">by oneself ç‹¬è‡ª</span><br></pre></td></tr></table></figure>
<h3 id="3-4-ç–‘é—®ä»£è¯">3.4 ç–‘é—®ä»£è¯</h3>
<p>ç–‘é—®ä»£è¯æœ‰<code>who(ä¸»æ ¼), whom(å®¾è¯­), whose(æ‰€æœ‰æ ¼), what(ä»€ä¹ˆ), which(å“ªä¸ª)</code>ç­‰ï¼Œä¸€èˆ¬éƒ½æ”¾åœ¨å¥é¦–ï¼Œå¹¶åœ¨å¥ä¸­ä½œä¸ºæŸä¸€å¥å­æˆåˆ†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Who <span class="keyword">is</span> going to speak to us tomorrow.</span><br><span class="line">Whom are you talking about?</span><br><span class="line">Whose umbrella <span class="keyword">is</span> this?</span><br><span class="line">What did he say?</span><br><span class="line">Which <span class="keyword">is</span> yours, the blue pen <span class="keyword">or</span> the red one?</span><br></pre></td></tr></table></figure>
<p>ç–‘é—®ä»£è¯å¯ç”¨äºåè¯æ€§ä»å¥ä¸­ï¼Œç”¨åœ¨åè¯æ€§ä»å¥æ—¶ï¼Œå€’è£…å¥çš„è¯­åºéœ€è¦æ”¹ä¸ºé™ˆè¿°å¥è¯­åºã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Do you know what he has said. <span class="comment"># ä½ çŸ¥é“ä»–è¯´äº†ä»€ä¹ˆå—</span></span><br><span class="line"><span class="comment"># ç–‘é—®ä»£è¯whatå¼•å¯¼ä¸€ä¸ªå®¾è¯­ä»å¥ï¼Œè€Œä»–æœ¬èº«åˆåœ¨ä»å¥ä¸­åšå®¾è¯­</span></span><br><span class="line"></span><br><span class="line">Who will be <span class="keyword">in</span> charge of the work <span class="keyword">is</span> still <span class="keyword">not</span> decided. <span class="comment"># è°è´Ÿè´£è¿™é¡¹å·¥ä½œç°åœ¨è¿˜æ²¡æœ‰å®š</span></span><br><span class="line"><span class="comment"># ç–‘é—®ä»£è¯whoå¼•å¯¼ä¸€ä¸ªä¸»è¯­ä»å¥ï¼Œå®ƒæœ¬èº«åˆåœ¨ä»å¥ä¸­åšä¸»è¯­</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-ä¸å®šä»£è¯">3.5  ä¸å®šä»£è¯</h3>
<p><strong>both, either, neither</strong></p>
<p><code>both</code>æ„ä¸ºâ€œ(ä¸¤è€…)éƒ½â€ï¼Œ<code>either</code>æ„å‘³ç€â€œ(ä¸¤è€…ä¸­)ä»»æ„ä¸€ä¸ªâ€ï¼Œ<code>neither</code>æ„ä¸º&quot;(ä¸¤è€…)éƒ½ä¸&quot;ï¼Œè‹¥è¦æŒ‡ä¸‰è€…æˆ–ä»¥ä¸Šï¼Œ<code>all</code>è¡¨ç¤ºä¸‰è€…éƒ½ï¼Œåˆ™ç”¨<code>any</code>è¡¨ç¤ºä¸‰è€…ä¸­ä»»ä½•ä¸€ä¸ªï¼Œ<code>none</code>è¡¨ç¤ºä¸‰è€…éƒ½ä¸ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">He has two sons, both of whom are clever.</span><br><span class="line">He has two sons, either of whom <span class="keyword">is</span> clever.</span><br><span class="line">He has two sons, neither of whom <span class="keyword">is</span> clever.</span><br></pre></td></tr></table></figure>
<p><strong>eachå’Œevery</strong></p>
<p><code>each</code>å¯åšä»£è¯ã€å½¢å®¹è¯ã€å‰¯è¯ï¼Œ<code>every</code>æ˜¯å½¢å®¹è¯ï¼Œä»…å…·æœ‰å½¢å®¹è¯çš„åŠŸèƒ½ã€‚</p>
<ul>
<li>
<p><code>each</code>æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„äººæˆ–äº‹ç‰©ä¸­çš„â€œæ¯ä¸ªâ€ï¼Œå¼ºè°ƒ<code>one by one</code>çš„å«ä¹‰ï¼Œ<code>every</code>æŒ‡ä¸‰ä¸ªæˆ–ä»¥ä¸Šçš„äººæˆ–äº‹ç‰©çš„â€œå…¨ä½“â€ï¼Œä¸<code>all</code>æ„æ€ç›¸è¿‘ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">He gave a book to each of his parents.</span><br><span class="line">Every worker was there <span class="keyword">and</span> each did his own work.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>each</code>ä½œå½¢å®¹è¯æ—¶ï¼Œä¿®é¥°å•æ•°åè¯ï¼Œæ¥ç¬¬ä¸‰äººç§°å•æ•°å½¢å¼ï¼Œåšä»£è¯æ—¶ï¼Œå•ç‹¬ä½¿ç”¨ï¼Œæ¥åŠ¨è¯ä¸‰å•ï¼Œæ”¾åœ¨å¤æ•°åè¯å’Œä»£è¯ååšåŒä½è¯­æ—¶ï¼Œè°“è¯­åŠ¨è¯ç”¨å¤æ•°å½¢å¼ã€‚è‹¥<code>each of them</code>åšä¸»è¯­ï¼Œè°“è¯­åŠ¨è¯å¯åšå•æ•°å½¢å¼ä¹Ÿå¯ç”¨ä½œå¤æ•°å½¢å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Each man carries his own bag. <span class="comment"># ä¿®é¥°å•æ•°åè¯</span></span><br><span class="line">We each have our own office. <span class="comment"># åšweçš„åŒä½è¯­</span></span><br><span class="line">Each carries his own bag. <span class="comment"># ä»£è¯</span></span><br><span class="line">Each of them are/<span class="keyword">is</span> here. <span class="comment"># ä»£è¯</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>every</code>ä¸<code>not</code>è¿ç”¨ï¼Œè¡¨ç¤ºéƒ¨åˆ†å¦å®šï¼Œ<code>each</code>åšä»£è¯ä¸€èˆ¬ä¸ä¸å¦å®šå¥è¿ç”¨ï¼Œåœ¨å¦å®šå¥ä¸­å¤šç”¨<code>neither, none, no</code>ç­‰ä»£æ›¿ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Every man <span class="keyword">is</span> <span class="keyword">not</span> honest. <span class="comment"># å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½å¾ˆåŸå¸‚</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>each</code>çš„å‰é¢ä¸å¯ä½¿ç”¨<code>almost, nearly, not</code>ç­‰è¯æ±‡ï¼Œä½†<code>every</code>ä¹‹å‰å¯ä»¥é‡‡ç”¨ã€‚æ³¨æ„åœ¨å¦å®šå¥ä¸­ä¸€èˆ¬ä¸ç”¨<code>each</code>! <code>each of</code>è¿™ç§è¡¨è¾¾è¦æ¢æˆ<code>none of</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Almost every windows was broken. <span class="comment"># å‡ ä¹æ¯ä¸€æ‰‡çª—å­éƒ½æ˜¯ç ´çš„ # ä¸å¯ç”¨almost each</span></span><br><span class="line">Not every child enjoyed the party. <span class="comment"># å¹¶éæ‰€æœ‰å­©å­éƒ½å–œæ¬¢è¿™ä¸ªæ´¾å¯¹</span></span><br><span class="line"><span class="literal">None</span> of the answers were correct. <span class="comment"># æ‰€æœ‰ç­”æ¡ˆéƒ½æ˜¯ä¸æ­£ç¡®çš„(å…¨ç›˜å¦å®š)</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>every</code>æ€»æ˜¯ä¿®é¥°å•æ•°åè¯ï¼Œåé¢æ¥ä¸‰å•ã€‚ä»£è¡¨<code>each</code>å’Œ<code>every</code>çš„ç‰©ä¸»ä»£è¯å¯ç”¨<code>his</code>ï¼Œä¹Ÿå¯ç”¨<code>their</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Each carried their/his own bag.</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>someå’Œany</strong></p>
<p><code>some</code>å¤šç”¨äºè‚¯å®šå¥ï¼Œ<code>any</code>å¤šç”¨äºå¦å®šå¥ã€ç–‘é—®å¥æˆ–æ¡ä»¶å¥ã€‚åœ¨è¡¨ç¤ºè¯·æ±‚ã€å»ºè®®ã€åé—®æˆ–æ˜¯å¸Œæœ›å¾—åˆ°è‚¯å®šå›ç­”çš„ç–‘é—®å¥ä¸­ï¼Œå¸¸ç”¨<code>some</code>è€Œä¸ç”¨<code>any</code>ã€‚<code>some</code>å¯ä¸æ•°è¯è¿ç”¨ï¼Œè¡¨ç¤ºâ€œå¤§çº¦â€çš„æ„æ€ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Would you mind buying me some candies on your way home?</span><br><span class="line">Will you give me some paper?</span><br><span class="line">She gained some <span class="number">25</span> pounds <span class="keyword">in</span> weight during pregnancy. <span class="comment"># å¥¹åœ¨æ€€å­•æœŸé—´å¢é‡äº†å¤§çº¦25ç£…</span></span><br></pre></td></tr></table></figure>
<p><strong>few, a few, little, a little</strong></p>
<ul>
<li>
<p><code>few / a few</code>ç”¨æ¥ä¿®é¥°å¯æ•°åè¯ï¼Œ<code>few</code>è¡¨ç¤ºå¦å®šæ„ä¹‰ï¼Œæ„ä¸ºâ€œæ²¡æœ‰ï¼Œå‡ ä¹æ²¡æœ‰â€,<code>a few</code>è¡¨ç¤ºè‚¯å®šæ„ä¹‰ï¼Œæ„ä¸ºâ€œæœ‰å‡ ä¸ªâ€</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">He has few friends here, so he freels lonely. <span class="comment"># ä»–åœ¨è¿™æ²¡å•¥æœ‹å‹ï¼Œå› æ­¤æ„Ÿåˆ°å¯‚å¯</span></span><br><span class="line">There are a few eggs <span class="keyword">in</span> the basket. <span class="comment"># ç¯®å­é‡Œæœ‰å‡ ä¸ªé¸¡è›‹</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>little / a little</code>ç”¨æ¥ä¿®é¥°ä¸å¯æ•°åè¯ï¼Œä¸<code>few</code>ç±»ä¼¼ï¼Œ<code>little</code>è¡¨ç¤ºå¦å®šï¼Œ<code>a little</code>è¡¨ç¤ºè‚¯å®š</p>
</li>
</ul>
<p><strong>another, the other, others</strong></p>
<ul>
<li>
<p><code>another</code>æˆ–<code>another+å•æ•°å¯æ•°åè¯</code>æ³›æŒ‡â€œå¦ä¸€ä¸ªï¼Œå†ä¸€ä¸ªâ€ï¼Œå…¶å¤æ•°å½¢å¼æ—¶<code>others</code>æˆ–<code>other+å¤æ•°åè¯</code>ï¼Œæ³›æŒ‡&quot;åˆ«çš„äºº(æˆ–äº‹ç‰©)&quot;ï¼Œå¸¸è§çš„æ­é…æœ‰<code>one ... another</code>ï¼Œ<code>some ... others</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This glass <span class="keyword">is</span> broken. Give me another, please.</span><br><span class="line">There are may people <span class="keyword">in</span> the park. Some are walking, some are jogging, <span class="keyword">and</span> others are dancing.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>the other</code>ç‰¹æŒ‡ä¸¤è€…ä¸­çš„ä¸€ä¸ªï¼Œå¸¸æœ‰<code>one... the other ...</code>çš„æ­é…ï¼Œå¤æ•°å½¢å¼ä¸º<code>the others</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">He has a book <span class="keyword">in</span> one hand, <span class="keyword">and</span> a pan <span class="keyword">in</span> the other.</span><br><span class="line">Of the four boys, one <span class="keyword">is</span> <span class="keyword">in</span> Grade One, the others are <span class="keyword">in</span> Grade Two.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>another</code>è¿˜å¯ç”¨äº<code>another+åŸºæ•°è¯+å¤æ•°åè¯</code>ï¼Œå¦‚<code>another three cups</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ other å’Œ anotherç›¸å…³çš„ä¹ æƒ¯æ€§ç”¨è¯­ï¼š</span></span><br><span class="line">other than(é™¤...ä¹‹å¤–)</span><br><span class="line">each other=one another(ç›¸äº’)</span><br><span class="line">one after another(ä¸€ä¸ªæ¥ä¸€ä¸ª)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>å¤åˆä¸å®šä»£è¯</strong></p>
<p>ç”±<code>some, any, no, every</code>åŠ ä¸Š<code>body, oen, things</code>æ„æˆçš„ä¸å®šä»£è¯å«åšç¬¦åˆä¸å®šä»£è¯ã€‚å¸¸è§çš„æœ‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">somebody æŸäºº</span><br><span class="line">someone æŸè®¤</span><br><span class="line">something æŸç‰©</span><br><span class="line"></span><br><span class="line">anybody ä»»ä½•äºº</span><br><span class="line">anyone ä»»ä½•äºº</span><br><span class="line">nobody æ— ä¸€äºº</span><br><span class="line"></span><br><span class="line">everybody æ¯ä¸ªäºº</span><br><span class="line">everyone æ¯ä¸ªäºº</span><br><span class="line">everything æ¯ä»¶äº‹ï¼Œä¸€åˆ‡</span><br><span class="line"></span><br><span class="line">nothing æ— ä¸€ç‰©</span><br></pre></td></tr></table></figure>
<p>å¤åˆä¸å®šä»£è¯ç›¸å½“äºåè¯ï¼Œåœ¨å¥ä¸­å¯åšä¸»è¯­ã€å®¾è¯­å’Œè¡¨è¯­ï¼Œä¸”ä¸èƒ½ä½œå®šè¯­ã€‚</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Everything goes <span class="keyword">as</span> planned. <span class="comment"># åšä¸»è¯­</span></span><br><span class="line">I don<span class="string">&#x27;t have anything to say. # åšå®¾è¯­</span></span><br><span class="line"><span class="string">Money is not everything. # åšè¡¨è¯­</span></span><br></pre></td></tr></table></figure>
<p>å¤åˆä¸å®šä»£è¯è¢«å®šè¯­æ‰€ä¿®é¥°æ—¶ï¼Œå®šè¯­å¿…é¡»æ”¾åœ¨ä»–ä»¬åè¾¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">There <span class="keyword">is</span> nothing wrong <span class="keyword">with</span> the machine.</span><br></pre></td></tr></table></figure>
<p><strong>æ›¿ä»£è¯it, that, (the) one(s), those çš„ç”¨æ³•</strong></p>
<ul>
<li>
<p>æ›¿ä»£è¯it, one, thatè¾¨æ</p>
<p><code>it/ one/ that</code>ä¸‰è€…å‡å¯åšä»£è¯ï¼ŒæŒ‡ä»£å‰é¢æåˆ°çš„åè¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œ<code>it</code>æŒ‡ä»£çš„æ˜¯ä¸Šæ–‡æåˆ°çš„åŒä¸€ç‰©å“ï¼Œ <code>one, that</code>åˆ™æ˜¯åŒåå¼‚ç‰©ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I have lost my umbrella, I<span class="string">&#x27;m looking for it.</span></span><br><span class="line"><span class="string">I have lost my umbrella, I thing I must buy one.</span></span><br><span class="line"><span class="string">The umnbrella you bought is cheaper than that I bought.</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>one ä¸ onesçš„åŒºåˆ«</p>
<p><code>one=a/an+ä¸Šæ–‡å‡ºç°çš„åè¯</code>ï¼Œå¤æ•°ç”¨<code>ones</code>ï¼Œä¸»æ ¼ä¸å®¾æ ¼ç›¸åŒ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">There are many school bags, I want to buy one.</span><br><span class="line">The only jokes I tell are the ones that I hear <span class="keyword">from</span> my friends.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>that ä¸ the + åè¯</p>
<p><code>that=the+ä¸Šæ–‡å‡ºç°çš„åè¯</code>ï¼ŒåŒ…æ‹¬å¯æ•°åè¯å•æ•°å’Œä¸å¯æ•°åè¯ï¼ŒæŒ‡ä»£å¤æ•°åè¯æ—¶ç”¨<code>those</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The weather <span class="keyword">in</span> Nanjing <span class="keyword">is</span> hotter than that <span class="keyword">in</span> Beijing.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä»£æ›¿å•æ•°å¯æ•°åè¯æ—¶ç”¨<code>one</code>å’Œ<code>that</code>å‡å¯ï¼Œä¸€èˆ¬æ³›æŒ‡ç”¨<code>one</code>ï¼Œç‰¹æŒ‡ç”¨<code>that</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">I don<span class="string">&#x27;t have a computer, and I&#x27;</span>ve decided to buy one.</span><br><span class="line">The computer <span class="keyword">is</span> different <span class="keyword">from</span> that we are using.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åè·Ÿ<code>of</code>çŸ­è¯­æ—¶ï¼Œä¸€èˆ¬åªèƒ½ç”¨<code>that(those)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The light of the sun <span class="keyword">is</span> much brighter than that of the moon.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä»£æ›¿ç‰¹æŒ‡çš„å¯æ•°åè¯æ—¶ï¼Œè‹¥æ— å‰ç½®å®šè¯­ï¼Œ<code>that</code>æˆ–<code>the one</code>å¯ä»¥äº’ç›¸æ¢ç”¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This film <span class="keyword">is</span> more interesting than that (the one) we saw last night.</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>itéäººç§°ä»£è¯çš„ç”¨æ³•</strong></p>
<ul>
<li>
<p>itè¡¨ç¤ºæ—¶é—´ã€è·ç¦»ã€ä»·å€¼ã€å¤©æ°”ã€æ°”å€™åŠæ¸©åº¦</p>
<p><code>it</code>åœ¨ä½œéäººç§°ä»£è¯æ—¶ï¼Œä¸»è¦ç”¨äºæŒ‡æ—¶é—´ã€è·ç¦»ã€ä»·å€¼ã€å¤©æ°”ã€æ°”å€™åŠæ¸©åº¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">It<span class="string">&#x27;s too late to go there now.</span></span><br><span class="line"><span class="string">It rained all day yesterday.</span></span><br><span class="line"><span class="string">It can get very hot here.</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>itå¼•å¯¼çš„å¼ºè°ƒå¥å‹</p>
<p><code>it</code>å¼•å¯¼çš„å¼ºè°ƒå¥çš„ç»“æ„ä¸ºï¼š<code>It+be+è¢«å¼ºè°ƒéƒ¨åˆ†+that/who+å…¶ä»–</code>ï¼Œæ­¤ç±»å¼ºè°ƒå¥ç”±æ™®é€šå¥è½¬æ¢è€Œæ¥ï¼Œç”¨äºå¼ºè°ƒå¥å­çš„ä¸»è¯­ã€å®¾è¯­æˆ–çŠ¶è¯­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Karl bought Mary a bicycle on her birthday.</span><br><span class="line"></span><br><span class="line">It was Karl that/who bought Mary a bicycle on her birthday.</span><br><span class="line">It was a bicycle that Karl bought Mary on her birthday.</span><br></pre></td></tr></table></figure>
<p><code>not...until...</code>å¥å‹ä¹Ÿå¯ç”¨äºå¼ºè°ƒå¥å‹ï¼Œå…¶ç»“æ„ä¸ºï¼š<code>It is not until + è¢«å¼ºè°ƒéƒ¨åˆ† + that + å…¶ä»–</code>ï¼Œè¡¨ç¤ºâ€œç›´åˆ°â€¦æ‰&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">It was <span class="keyword">not</span> until she took off her dark glasses that I realized she was a film star.</span><br><span class="line">=</span><br><span class="line">I didn<span class="string">&#x27;t realize she was a famous film star until she took off her dark glasses.</span></span><br><span class="line"><span class="string">=</span></span><br><span class="line"><span class="string">Not until she took off her dark glasses did I realize she was a film star.</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>itåšå½¢å¼ä¸»è¯­</p>
<p>å½“ä¸å®šå¼ã€åŠ¨åè¯ã€ä»å¥ç­‰å¤æ‚æˆåˆ†ç”¨ä½œå¥å­ä¸»è¯­æ—¶ï¼Œä¸ºä¿æŒå¥å­å¹³è¡¡ï¼Œé€šå¸¸æŠŠçœŸæ­£çš„ä¸»è¯­æ”¾åœ¨å¥æœ«ï¼Œåœ¨å¥é¦–ä½¿ç”¨å½¢å¼ä¸»è¯­it`</p>
<p><code>It + be + adj. + for/of sb. to do sth. </code>æ„ä¸ºæŸäººåšæŸäº‹ï¼Œå½“å½¢å®¹è¯ä¾§é‡æè¿°æŸäººçš„å“è´¨ã€ç‰¹å¾æ—¶ï¼Œéœ€è¦ä½¿ç”¨<code>of</code>ï¼Œå½“ä¾§é‡åŠ¨ä½œæœ¬èº«åˆ™éœ€è¦ä½¿ç”¨<code>for</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">It<span class="string">&#x27;s very kind of you to help me with my English.</span></span><br><span class="line"><span class="string">It&#x27;</span>s very hard <span class="keyword">for</span> me to answer such a complicated question.</span><br></pre></td></tr></table></figure>
<p><code>It takes sb. + æ—¶é—´æ®µ + to do sth.</code>æ„ä¸ºâ€œæŸäººåšæŸäº‹èŠ±äº†â€¦æ—¶é—´</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">It took me two months to finish writing this book.</span><br></pre></td></tr></table></figure>
<p><code>It is said/reported/learned that</code>æ„ä¸ºâ€œæ®è¯´/æ®æŠ¥é“/æ®æ‚‰â€¦&quot;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">It <span class="keyword">is</span> reported that a female worker <span class="keyword">in</span> the gas station put out the fire.</span><br></pre></td></tr></table></figure>
<p><code>It is suggested/ordered that...</code>æ„ä¸ºâ€œæ®å»ºè®®/æœ‰å‘½ä»¤â€ä¸»å¥ä¸­çš„è¿‡å»åˆ†è¯æ˜¯è¡¨ç¤ºè¯·æ±‚ã€å»ºè®®ã€å‘½ä»¤ç­‰è¯è¯­æ—¶ï¼Œ<code>that</code>åé¢çš„ä»å¥è¦ç”¨è™šæ‹Ÿè¯­æ°”ï¼Œè°“è¯­éƒ¨åˆ†é‡‡ç”¨&quot;should+åŠ¨è¯åŸå½¢&quot;çš„å½¢å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">It is suggested that some measures (should) be taken to protect the special plant.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>itåšå½¢å¼å®¾è¯­</p>
<p>å½“ä¸å®šå¼ã€åŠ¨åè¯ã€ä»å¥ç­‰å¤æ‚æˆåˆ†ç”¨ä½œå®¾è¯­ä¸”åé¢è·Ÿä¸Šå®¾è¯­è¡¥è¶³è¯­æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨å½¢å¼å®¾è¯­<code>it</code>ä»£æ›¿ï¼Œè€Œå°†çœŸæ­£çš„å®¾è¯­ç§»è‡³å¥æœ«ï¼Œå…¶åŸºæœ¬ç»“æ„ä¸ºâ€œåŠ¨è¯+ it + å®¾è¯­è¡¥è¶³è¯­ + ä¸å®šå¼(åŠ¨åè¯æˆ–ä»å¥)&quot;ã€‚å¸¸ç”¨äºè¯¥ç»“æ„çš„åŠ¨è¯æœ‰ï¼š<code>think, believe, make, find, consider, feel, take</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I find it hard to translate this Chinese sentence into English.</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸäº›è¡¨ç¤ºâ€œå–œæ€’å“€ä¹â€çš„åŠ¨è¯ï¼Œå¦‚like, enjoy, love, hateç­‰ï¼Œå¾€å¾€ä¸èƒ½ç›´æ¥è·Ÿå®¾è¯­ä»å¥ï¼Œéœ€ä½¿ç”¨itä½œå½¢å¼å®¾è¯­</span></span><br><span class="line">I don<span class="string">&#x27;t like it that he&#x27;</span>s so lazy.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>itç”¨äºè¡¨ç¤ºæ—¶é—´çš„å›ºå®šå¥å¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># It&#x27;s time for sth. è¯¥åšæŸäº‹äº†</span></span><br><span class="line">It<span class="string">&#x27;s time for class.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># It&#x27;</span>s time to do sth. åˆ°äº†è¯¥åšæŸäº‹çš„æ—¶é—´äº†</span><br><span class="line">It<span class="string">&#x27;s time to have lunch.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># It&#x27;</span>s time <span class="keyword">for</span> sb. to do sth. æŸäººè¯¥åšæŸäº‹äº†</span><br><span class="line">It<span class="string">&#x27;s time for us to go home.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># It&#x27;</span>s (about/high) time + that ä»å¥. æ„ä¸º<span class="string">&quot;æŸäººè¯¥åšæŸäº‹äº†&quot;</span>,ä»å¥è°“è¯­åŠ¨è¯éœ€è¦ç”¨è¿‡å»å¼ï¼Œæœ‰æ—¶ä¹Ÿç”¨<span class="string">&quot;should+åŠ¨è¯åŸå½¢&quot;</span></span><br><span class="line">It<span class="string">&#x27;s high time you started thinking about saving for your old age.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># It&#x27;</span>s the first(second) time + that ä»å¥. æ„ä¸ºâ€œæŸäººç¬¬ä¸€/ç¬¬äºŒæ¬¡åšæŸäº‹<span class="string">&quot;</span></span><br><span class="line"><span class="string">It&#x27;s the first time that the boy has spoken to a foreigner.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># It&#x27;s + æ—¶é—´æ®µ + since ä»å¥. æ„ä¸ºâ€œè‡ªä»...æœ‰ä¸€æ®µæ—¶é—´äº†&quot;</span></span><br><span class="line">How time flies! It<span class="string">&#x27;s three months since I saw you last time.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># It&#x27;</span>s + æ—¶é—´æ®µ + before ä»å¥,æ„ä¸ºâ€œè¿‡å¤šé•¿çš„æ—¶é—´æ‰....<span class="string">&quot;&quot;</span></span><br><span class="line">It was several minutes before we realised what was happening.</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="å››ã€æ•°è¯">å››ã€æ•°è¯</h2>
<h3 id="4-1-åŸºæ•°è¯">4.1  åŸºæ•°è¯</h3>
<ul>
<li>
<p>åŸºæ•°è¯çš„åŸºæœ¬ç”¨æ³•</p>
<p>ç”¨ä½œåŸºæ•°è¯å•ä½çš„<code>hundred, thousand, million, billion</code>é€šå¸¸ä¸å¸¦å¤æ•°è¯å°¾<code>-s</code>ï¼Œä½†è‹¥ç”¨äºè¡¨ç¤ºæ•°ç™¾ã€æ•°åƒã€æ•°ç™¾ä¸‡è¿™æ ·çš„æ³›æŒ‡ï¼Œåˆ™ç”¨å¤æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">About two thousand people died <span class="keyword">in</span> the earthquake.</span><br><span class="line">Thousands of people go to the seaside every year.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¡¨ç¤ºæ•´åçš„åŸºæ•°è¯ç”¨æ³•</p>
<p>è¡¨ç¤ºæ•´åçš„åŸºæ•°è¯ç”¨å¤æ•°å½¢å¼å¯ä»¥è¡¨ç¤ºäººçš„å¤§æ¦‚å²æ•°æˆ–æŸä¸ªå¹´é¾„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">He <span class="keyword">is</span> <span class="keyword">in</span> his early twenties. <span class="comment"># ä»–çš„å¹´çºªåœ¨20å‡ºå¤´</span></span><br><span class="line">This story took place <span class="keyword">in</span> the 1930s. <span class="comment"># æ•…äº‹å‘ç”Ÿåœ¨20ä¸–çºª30å¹´ä»£</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-2-åºæ•°è¯">4.2  åºæ•°è¯</h3>
<ul>
<li>
<p>åºæ•°è¯çš„æ„æˆ</p>
<p>å¤§éƒ¨åˆ†çš„åºæ•°è¯æ˜¯ç”±åŸºæ•°è¯åŠ <code>-th</code>æ„æˆï¼Œå¦‚ï¼š<code>seven-seventh, ten-tenth</code></p>
<p>ä»¥<code>-t</code>ç»“å°¾çš„åŸºæ•°è¯åªåœ¨è¯å°¾åŠ <code>-h</code>, å¦‚<code>eight-eighth</code></p>
<p>ä»¥<code>-ve</code>ç»“å°¾çš„åŸºæ•°è¯æ”¹<code>-ve</code>ä¸º<code>-f</code>å†åŠ <code>-th</code>ï¼Œå¦‚<code>five-fifth, twelve-twelfth</code></p>
<p>ä»¥<code>-y</code>ç»“å°¾çš„åŸºæ•°è¯æ”¹<code>-y</code>ä¸º<code>-ie</code>å†åŠ <code>-th</code>ï¼Œå¦‚<code>twenty-twentieth, thirty-thirtieth</code></p>
<p>å‡ åå‡ çš„åºæ•°è¯åªåœ¨ä¸ªä½æ•°ä½“ç°ï¼Œå¦‚<code>twenty-one-twenty-first</code></p>
<p>ç‰¹æ®Šçš„åºæ•°è¯ï¼š<code>one-first, two-second, three-third, nine-ninth</code></p>
</li>
<li>
<p>ä¸å®šå† è¯aä¸åºæ•°è¯è¿ç”¨</p>
<p>åºæ•°è¯å‰åŠ <code>a</code>è¡¨ç¤ºâ€œå†ä¸€æ¬¡â€</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can I <span class="keyword">try</span> a second time?</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åºæ•°è¯ç”¨äºåˆ†æ•°ä¸­</p>
<p>æè¿°åˆ†æ•°æ—¶ï¼Œåˆ†å­ç”¨åŸºæ•°è¯ï¼Œåˆ†æ¯ç”¨åºæ•°è¯ï¼Œåˆ†å­å¤§äº1æ—¶ï¼Œåˆ†æ¯åŠ <code>s</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>/<span class="number">5</span>: one fifth</span><br><span class="line"><span class="number">2</span>/<span class="number">3</span>: two thirds</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-3-å€æ•°">4.3  å€æ•°</h3>
<p>è‹±è¯­ä¸­è¡¨è¾¾å€æ•°å¸¸ç”¨ä¸‹åˆ—å¥å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A <span class="keyword">is</span> three/four ... times the size/height/length/width ... of B.</span><br><span class="line">A <span class="keyword">is</span> three/four ... times <span class="keyword">as</span> big/higt/long/wide ... <span class="keyword">as</span> B.</span><br><span class="line">A <span class="keyword">is</span> three/four ... times bigger/higher/longer/wider ... than B.</span><br><span class="line"></span><br><span class="line"><span class="meta">... </span>times + more + åè¯ + than ...</span><br><span class="line"><span class="meta">... </span>times + <span class="keyword">as</span> many(much) + åè¯ + <span class="keyword">as</span> ...</span><br><span class="line"><span class="meta">... </span>times + what ä»å¥</span><br></pre></td></tr></table></figure>
<p>ç”¨<code>times</code>è¡¨ç¤ºå€æ•°æ—¶ï¼Œä¸€èˆ¬åªé™äºä¸‰å€æˆ–ä¸‰å€ä»¥ä¸Šçš„å€æ•°ï¼Œè¡¨ç¤ºä¸¤æ¯å¸¸ç”¨<code>twice</code>æˆ–<code>double</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The box <span class="keyword">is</span> one-third bigger than that one.</span><br><span class="line">This dictionary <span class="keyword">is</span> five times <span class="keyword">as</span> thick <span class="keyword">as</span> the one you borrowed <span class="keyword">from</span> the library.</span><br></pre></td></tr></table></figure>
<h3 id="4-4-æ•°è¯ç›¸å…³çš„ä¸»è°“ä¸€è‡´">4.4  æ•°è¯ç›¸å…³çš„ä¸»è°“ä¸€è‡´</h3>
<ul>
<li>
<p>è¡¨ç¤ºæ—¶é—´ã€è·¯ç¨‹ã€é‡‘é’±æˆ–é‡é‡ç­‰é‡å¤åè¯çš„ä¸»è°“ä¸€è‡´</p>
<p>å½“åè¯è¯ç»„ä¸­å¿ƒè¯ä¸ºè¡¨ç¤ºæ—¶é—´ã€è·¯ç¨‹ã€é‡‘é’±æˆ–é‡é‡ç­‰å¤æ•°åè¯æ—¶ï¼Œå¾€å¾€æ ¹æ®æ„ä¹‰ä¸€è‡´çš„åŸåˆ™ï¼ŒæŠŠè¿™äº›å¤æ•°åè¯çœ‹åšä¸€ä¸ªæ•´ä½“ï¼Œè°“è¯­é‡‡ç”¨å•æ•°å½¢å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Twenty dollars <span class="keyword">is</span> <span class="keyword">not</span> enough.</span><br><span class="line">Two months has passed before we realized that.</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½†æ˜¯æ•°è¯å•ç‹¬ç”¨æ¥è¡¨ç¤ºäººæˆ–ç‰©ï¼Œè°“è¯­åŠ¨è¯ä¸€èˆ¬ç”¨å¤æ•°</span></span><br><span class="line">Three were killed <span class="keyword">and</span> ten were missing <span class="keyword">in</span> that accident.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åˆ†æ•°ã€ç™¾åˆ†æ•°ä¸­çš„ä¸»è°“ä¸€è‡´</p>
<p>å¦‚æœå¥å­ä¸»è¯­æ˜¯â€åˆ†æ•°æˆ–ç™¾åˆ†æ•°+of+åè¯æˆ–ä»£è¯â€œçš„å½¢å¼ï¼Œè°“è¯­åŠ¨è¯çš„å•ã€å¤æ•°å½¢å¼å–å†³äº<code>of</code>ä»‹è¯çŸ­è¯­ä¸­çš„åè¯æˆ–ä»£è¯çš„æ•°ï¼Œå¦‚æœ<code>of</code>ä»‹è¯çŸ­è¯­ä¸­çš„åè¯æˆ–ä»£è¯ä¸ºå•æ•°å«ä¹‰æˆ–ä¸å¯æ•°åè¯ï¼Œåˆ™è°“è¯­åŠ¨è¯ç”¨å•æ•°å½¢å¼ï¼Œå¦‚æœ<code>of</code>ä»‹è¯çŸ­è¯­ä¸­åè¯æˆ–æ»´å•Šæ¬¡ä¸ºå¤æ•°å«ä¹‰ï¼Œè°“è¯­åŠ¨è¯ä¹Ÿç”¨å¤æ•°å½¢å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Two thirds of the earth <span class="keyword">is</span> convered <span class="keyword">with</span> water.</span><br><span class="line">Two thirds of the people present are against the plan.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>&quot;many a/more than one + å•æ•°åè¯&quot;ç»“æ„ä¸»è°“ä¸€è‡´</p>
<p>å¦‚æœä¸»è¯­æ˜¯è¯¥ç»“æ„ï¼Œå°½ç®¡ä»æ„ä¹‰ä¸Šæ¥çœ‹è¿˜æ˜¯å¤æ•°ï¼Œä½†è°“è¯­åŠ¨è¯ä»ç”¨å•æ•°å½¢å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Many a student <span class="keyword">in</span> this <span class="keyword">class</span> <span class="title class_">has</span> expected <span class="keyword">as</span> long <span class="keyword">break</span>. <span class="comment"># åœ¨ç­ä¸Šçš„å¾ˆå¤šå­¦ç”Ÿéƒ½æœŸå¾…èƒ½å¤šä¼‘æ¯ä¸€ä¼š</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> ä¸æƒ³å­¦è¾£ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¬¢è¿å…‰ä¸´å²æŸ“ï¼]]></title>
      <url>/2022/06/23/%E3%80%90%E6%9D%82%E8%B0%88%E3%80%91hello-world/</url>
      <content type="html"><![CDATA[<h1>å²æŸ“ğŸ‰</h1>
<p>å…³äºå²æŸ“è¿™ä¸¤ä¸ªå­—ï¼Œå…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆæ¥å¤´å•¦ï¼Œæ˜¯æˆ‘é«˜ä¸­ç©å´©åä¸‰æ—¶å–çš„åå­—Wwww</p>
<p>è‹¥æ˜¯ç¡¬è¦æŠ«ä¸Šä¸€ä»¶é£è¡£ï¼Œé‚£æˆ‘å¯èƒ½ä¼šé€‰æ‹©â€œå²æœˆé™å¥½ï¼Œè«æŸ“å°˜åŸƒğŸŒ™â€</p>
<hr>
<p>æ¬¢è¿é™Œç”Ÿäºº(å¯èƒ½ä¸€è¾ˆå­éƒ½ä¸ä¼šæœ‰çš„å§)ï¼Œæˆ–æ˜¯è€ç†Ÿäººæ¥å…‰é¡¾ï¼</p>
<p>è¿™é‡Œæœ‰é—²é€‚çš„ä¸‹åˆèŒ¶ï¼Œè¿™é‡Œæœ‰æ¸…è„†çš„é£é“ƒå£°ï¼Œè¿™é‡Œæœ‰é£åˆ’è¿‡çš„ç—•è¿¹ï¼Œè¿™é‡Œæœ‰é›¨è½ä¸‹çš„å£°éŸ³ï¼Œè¿™é‡Œï¼Œæœ‰ä¸€ä¸ªå­¤ç‹¬è€Œåˆä¸æƒ³å‘ç”Ÿæ´»ä½å¤´çš„äººã€‚</p>
<p>äººç”Ÿæœ‰å¾ˆå¤šåæ‚”çš„äº‹æƒ…ï¼Œæœ‰å¾ˆå¤šäººæ¨ä¸å¾—æ—©ç‚¹é‡è§ï¼Œæœ‰å¾ˆå¤šäº‹æ¨ä¸å¾—æ—©ç‚¹å»åšã€‚</p>
<p>å¦‚æœè¯´æœ‰ä»€ä¹ˆä¸åæ‚”çš„ï¼Œé‚£ä¾¿æ˜¯ä½ æˆ‘æ­¤åˆ»çš„ç›¸é‡ğŸ’Œ</p>
<hr>
<blockquote>
<p>å…ˆç”Ÿï¼Œæ‚¨æœ‰ä¸œè¥¿å¿˜åœ¨åº—é‡Œå•¦ï¼è¯ºï¼Œå°±æ˜¯æˆ‘çš„å¿ƒå“¦â¤ï¸~</p>
</blockquote>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
        <categories>
            
            <category> çç¢æ—¥å¸¸ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
